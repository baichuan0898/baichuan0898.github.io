<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Essential_Software_Architecture</title><style type="text/css"> * {margin:0; padding:0; text-indent:0; }
 .s1 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 14pt; }
 .s2 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 16pt; }
 .s3 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 40pt; }
 .s4 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 11pt; }
 .s5 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 36pt; }
 .s6 { color: black; font-family:"Times New Roman", serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s7 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .a, a { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s8 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 .s9 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9.5pt; }
 .s10 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; vertical-align: -2pt; }
 .p, p { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; margin:0pt; }
 .s11 { color: black; font-family:"Times New Roman", serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 10pt; }
 .s12 { color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 h3 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 .s13 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 h1 { color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 13pt; }
 h2 { color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 .s14 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 3pt; }
 .s15 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8.5pt; }
 .s16 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; vertical-align: 1pt; }
 h4 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .s17 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s18 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; vertical-align: -3pt; }
 .s19 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8.5pt; }
 .s20 { color: black; font-family:"Times New Roman", serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 8.5pt; }
 .s21 { color: black; font-family:Arial, sans-serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 10pt; }
 .s22 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 .s23 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 6pt; }
 .s24 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 6pt; vertical-align: 2pt; }
 .s25 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 6pt; vertical-align: -1pt; }
 .s26 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 6pt; vertical-align: -3pt; }
 .s27 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .s28 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s29 { color: black; font-family:"Times New Roman", serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 3pt; }
 .s30 { color: black; font-family:Arial, sans-serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 8.5pt; }
 .s31 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: underline; font-size: 8.5pt; }
 .s32 { color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8.5pt; }
 .s33 { color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 8.5pt; }
 .s34 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; }
 .s35 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 .s36 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 8.5pt; }
 .s37 { color: black; font-family:Courier, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8.5pt; }
 .s38 { color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7pt; }
 .s39 { color: black; font-family:Courier, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s40 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 .s41 { color: black; font-family:Helvetica, sans-serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s42 { color: black; font-family:Courier, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt; }
 .s43 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8.5pt; }
 .s44 { color: black; font-family:Courier, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt; }
 .s45 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8.5pt; }
 .s46 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8.5pt; }
 .s47 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8.5pt; }
 .s48 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8.5pt; }
 .s49 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8.5pt; }
 .s50 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8.5pt; }
 .s51 { color: black; font-family:"Comic Sans MS"; font-style: normal; font-weight: bold; text-decoration: none; font-size: 5.5pt; }
 .s52 { color: black; font-family:"Comic Sans MS"; font-style: normal; font-weight: bold; text-decoration: none; font-size: 5.5pt; }
 .s53 { color: black; font-family:"Comic Sans MS"; font-style: normal; font-weight: bold; text-decoration: none; font-size: 6pt; }
 .s54 { color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 7pt; }
 .s55 { color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 7pt; vertical-align: 5pt; }
 .s56 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 .s57 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8.5pt; }
 .s58 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; vertical-align: 8pt; }
 .s59 { color: black; font-family:Courier, serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 8.5pt; }
 .s60 { color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 6.5pt; }
 .s61 { color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 6.5pt; vertical-align: -5pt; }
 .s62 { color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 6.5pt; vertical-align: -4pt; }
 .s63 { color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 6.5pt; vertical-align: -7pt; }
 .s64 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 12pt; }
 .s65 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 12.5pt; }
 .s67 { color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 5.5pt; }
 .s68 { color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 5.5pt; }
 .s69 { color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; }
 .s70 { color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; }
 .s71 { color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 4pt; }
 .s72 { color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 6.5pt; }
 .s73 { color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: underline; font-size: 7pt; }
 .s74 { color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 6pt; }
 .s75 { color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 6pt; }
 .s76 { color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: underline; font-size: 6pt; }
 .s77 { color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 1pt; }
 .s78 { color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7pt; }
 .s79 { color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 7pt; }
 .s80 { color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 6pt; }
 .s81 { color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 6pt; vertical-align: -4pt; }
 .s82 { color: black; font-family:Helvetica, sans-serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 5.5pt; }
 .s83 { color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: -1pt; }
 .s84 { color: black; font-family:Verdana, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s85 { color: #4B4B4B; font-family:Courier, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7pt; }
 .s86 { color: black; font-family:Courier, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7pt; }
 .s87 { color: black; font-family:Courier, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8.5pt; }
 .s88 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 .s89 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt; }
 .s90 { color: black; font-family:Times-BoldItalic, serif; font-style: italic; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .s91 { color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4.5pt; }
 .s92 { color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 4.5pt; }
 .s93 { color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9.5pt; }
 .s94 { color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8.5pt; }
 .s95 { color: black; font-family:Courier, serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 8.5pt; }
 li {display: block; }
 #l1 {padding-left: 0pt; }
 #l1> li:before {content: "• "; color: black; font-family:Symbol; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l2 {padding-left: 0pt;counter-reset: d1 1; }
 #l2> li:before {counter-increment: d1; content: counter(d1, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l2> li:first-child:before {counter-increment: d1 0;  }
 #l3 {padding-left: 0pt;counter-reset: d2 1; }
 #l3> li:before {counter-increment: d2; content: counter(d1, decimal)"."counter(d2, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l3> li:first-child:before {counter-increment: d2 0;  }
 #l4 {padding-left: 0pt;counter-reset: d3 1; }
 #l4> li:before {counter-increment: d3; content: counter(d1, decimal)"."counter(d2, decimal)"."counter(d3, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l4> li:first-child:before {counter-increment: d3 0;  }
 #l5 {padding-left: 0pt;counter-reset: d3 1; }
 #l5> li:before {counter-increment: d3; content: counter(d1, decimal)"."counter(d2, decimal)"."counter(d3, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l5> li:first-child:before {counter-increment: d3 0;  }
 #l6 {padding-left: 0pt;counter-reset: d2 1; }
 #l6> li:before {counter-increment: d2; content: counter(d1, decimal)"."counter(d2, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l6> li:first-child:before {counter-increment: d2 0;  }
 #l7 {padding-left: 0pt;counter-reset: d2 1; }
 #l7> li:before {counter-increment: d2; content: counter(d1, decimal)"."counter(d2, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l7> li:first-child:before {counter-increment: d2 0;  }
 #l8 {padding-left: 0pt;counter-reset: d3 1; }
 #l8> li:before {counter-increment: d3; content: counter(d1, decimal)"."counter(d2, decimal)"."counter(d3, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l8> li:first-child:before {counter-increment: d3 0;  }
 #l9 {padding-left: 0pt;counter-reset: d3 1; }
 #l9> li:before {counter-increment: d3; content: counter(d1, decimal)"."counter(d2, decimal)"."counter(d3, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l9> li:first-child:before {counter-increment: d3 0;  }
 #l10 {padding-left: 0pt;counter-reset: d3 1; }
 #l10> li:before {counter-increment: d3; content: counter(d1, decimal)"."counter(d2, decimal)"."counter(d3, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l10> li:first-child:before {counter-increment: d3 0;  }
 #l11 {padding-left: 0pt;counter-reset: d3 1; }
 #l11> li:before {counter-increment: d3; content: counter(d1, decimal)"."counter(d2, decimal)"."counter(d3, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l11> li:first-child:before {counter-increment: d3 0;  }
 #l12 {padding-left: 0pt;counter-reset: d3 1; }
 #l12> li:before {counter-increment: d3; content: counter(d1, decimal)"."counter(d2, decimal)"."counter(d3, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l12> li:first-child:before {counter-increment: d3 0;  }
 #l13 {padding-left: 0pt;counter-reset: d3 1; }
 #l13> li:before {counter-increment: d3; content: counter(d1, decimal)"."counter(d2, decimal)"."counter(d3, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l13> li:first-child:before {counter-increment: d3 0;  }
 #l14 {padding-left: 0pt;counter-reset: d2 1; }
 #l14> li:before {counter-increment: d2; content: counter(d1, decimal)"."counter(d2, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l14> li:first-child:before {counter-increment: d2 0;  }
 #l15 {padding-left: 0pt;counter-reset: d3 1; }
 #l15> li:before {counter-increment: d3; content: counter(d1, decimal)"."counter(d2, decimal)"."counter(d3, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l15> li:first-child:before {counter-increment: d3 0;  }
 #l16 {padding-left: 0pt;counter-reset: d3 1; }
 #l16> li:before {counter-increment: d3; content: counter(d1, decimal)"."counter(d2, decimal)"."counter(d3, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l16> li:first-child:before {counter-increment: d3 0;  }
 #l17 {padding-left: 0pt;counter-reset: d3 1; }
 #l17> li:before {counter-increment: d3; content: counter(d1, decimal)"."counter(d2, decimal)"."counter(d3, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l17> li:first-child:before {counter-increment: d3 0;  }
 #l18 {padding-left: 0pt;counter-reset: d2 1; }
 #l18> li:before {counter-increment: d2; content: counter(d1, decimal)"."counter(d2, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l18> li:first-child:before {counter-increment: d2 0;  }
 #l19 {padding-left: 0pt;counter-reset: d3 1; }
 #l19> li:before {counter-increment: d3; content: counter(d1, decimal)"."counter(d2, decimal)"."counter(d3, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l19> li:first-child:before {counter-increment: d3 0;  }
 #l20 {padding-left: 0pt;counter-reset: d3 1; }
 #l20> li:before {counter-increment: d3; content: counter(d1, decimal)"."counter(d2, decimal)"."counter(d3, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l20> li:first-child:before {counter-increment: d3 0;  }
 #l21 {padding-left: 0pt;counter-reset: d3 1; }
 #l21> li:before {counter-increment: d3; content: counter(d1, decimal)"."counter(d2, decimal)"."counter(d3, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l21> li:first-child:before {counter-increment: d3 0;  }
 #l22 {padding-left: 0pt;counter-reset: d2 1; }
 #l22> li:before {counter-increment: d2; content: counter(d1, decimal)"."counter(d2, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l22> li:first-child:before {counter-increment: d2 0;  }
 #l23 {padding-left: 0pt;counter-reset: e1 6; }
 #l23> li:before {counter-increment: e1; content: counter(e1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l23> li:first-child:before {counter-increment: e1 0;  }
 #l24 {padding-left: 0pt;counter-reset: e2 4; }
 #l24> li:before {counter-increment: e2; content: counter(e1, decimal)"."counter(e2, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l24> li:first-child:before {counter-increment: e2 0;  }
 #l25 {padding-left: 0pt;counter-reset: f1 7; }
 #l25> li:before {counter-increment: f1; content: counter(f1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l25> li:first-child:before {counter-increment: f1 0;  }
 #l26 {padding-left: 0pt;counter-reset: f2 1; }
 #l26> li:before {counter-increment: f2; content: counter(f1, decimal)"."counter(f2, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l26> li:first-child:before {counter-increment: f2 0;  }
 #l27 {padding-left: 0pt;counter-reset: f3 1; }
 #l27> li:before {counter-increment: f3; content: counter(f1, decimal)"."counter(f2, decimal)"."counter(f3, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l27> li:first-child:before {counter-increment: f3 0;  }
 #l28 {padding-left: 0pt;counter-reset: f3 1; }
 #l28> li:before {counter-increment: f3; content: counter(f1, decimal)"."counter(f2, decimal)"."counter(f3, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l28> li:first-child:before {counter-increment: f3 0;  }
 #l29 {padding-left: 0pt;counter-reset: f3 1; }
 #l29> li:before {counter-increment: f3; content: counter(f1, decimal)"."counter(f2, decimal)"."counter(f3, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l29> li:first-child:before {counter-increment: f3 0;  }
 #l30 {padding-left: 0pt;counter-reset: f3 1; }
 #l30> li:before {counter-increment: f3; content: counter(f1, decimal)"."counter(f2, decimal)"."counter(f3, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l30> li:first-child:before {counter-increment: f3 0;  }
 #l31 {padding-left: 0pt;counter-reset: f2 1; }
 #l31> li:before {counter-increment: f2; content: counter(f1, decimal)"."counter(f2, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l31> li:first-child:before {counter-increment: f2 0;  }
 #l32 {padding-left: 0pt;counter-reset: f3 1; }
 #l32> li:before {counter-increment: f3; content: counter(f1, decimal)"."counter(f2, decimal)"."counter(f3, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l32> li:first-child:before {counter-increment: f3 0;  }
 #l33 {padding-left: 0pt;counter-reset: f2 1; }
 #l33> li:before {counter-increment: f2; content: counter(f1, decimal)"."counter(f2, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l33> li:first-child:before {counter-increment: f2 0;  }
 #l34 {padding-left: 0pt;counter-reset: f3 1; }
 #l34> li:before {counter-increment: f3; content: counter(f1, decimal)"."counter(f2, decimal)"."counter(f3, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l34> li:first-child:before {counter-increment: f3 0;  }
 #l35 {padding-left: 0pt;counter-reset: f3 1; }
 #l35> li:before {counter-increment: f3; content: counter(f1, decimal)"."counter(f2, decimal)"."counter(f3, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l35> li:first-child:before {counter-increment: f3 0;  }
 #l36 {padding-left: 0pt;counter-reset: f3 1; }
 #l36> li:before {counter-increment: f3; content: counter(f1, decimal)"."counter(f2, decimal)"."counter(f3, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l36> li:first-child:before {counter-increment: f3 0;  }
 #l37 {padding-left: 0pt;counter-reset: f3 1; }
 #l37> li:before {counter-increment: f3; content: counter(f1, decimal)"."counter(f2, decimal)"."counter(f3, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l37> li:first-child:before {counter-increment: f3 0;  }
 #l38 {padding-left: 0pt;counter-reset: f3 1; }
 #l38> li:before {counter-increment: f3; content: counter(f1, decimal)"."counter(f2, decimal)"."counter(f3, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l38> li:first-child:before {counter-increment: f3 0;  }
 #l39 {padding-left: 0pt;counter-reset: f2 1; }
 #l39> li:before {counter-increment: f2; content: counter(f1, decimal)"."counter(f2, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l39> li:first-child:before {counter-increment: f2 0;  }
 #l40 {padding-left: 0pt;counter-reset: f3 1; }
 #l40> li:before {counter-increment: f3; content: counter(f1, decimal)"."counter(f2, decimal)"."counter(f3, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l40> li:first-child:before {counter-increment: f3 0;  }
 #l41 {padding-left: 0pt;counter-reset: f3 1; }
 #l41> li:before {counter-increment: f3; content: counter(f1, decimal)"."counter(f2, decimal)"."counter(f3, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l41> li:first-child:before {counter-increment: f3 0;  }
 #l42 {padding-left: 0pt;counter-reset: f3 1; }
 #l42> li:before {counter-increment: f3; content: counter(f1, decimal)"."counter(f2, decimal)"."counter(f3, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l42> li:first-child:before {counter-increment: f3 0;  }
 #l43 {padding-left: 0pt;counter-reset: f2 1; }
 #l43> li:before {counter-increment: f2; content: counter(f1, decimal)"."counter(f2, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l43> li:first-child:before {counter-increment: f2 0;  }
 #l44 {padding-left: 0pt;counter-reset: f3 1; }
 #l44> li:before {counter-increment: f3; content: counter(f1, decimal)"."counter(f2, decimal)"."counter(f3, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l44> li:first-child:before {counter-increment: f3 0;  }
 #l45 {padding-left: 0pt;counter-reset: f3 1; }
 #l45> li:before {counter-increment: f3; content: counter(f1, decimal)"."counter(f2, decimal)"."counter(f3, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l45> li:first-child:before {counter-increment: f3 0;  }
 #l46 {padding-left: 0pt;counter-reset: f3 1; }
 #l46> li:before {counter-increment: f3; content: counter(f1, decimal)"."counter(f2, decimal)"."counter(f3, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l46> li:first-child:before {counter-increment: f3 0;  }
 #l47 {padding-left: 0pt;counter-reset: f2 1; }
 #l47> li:before {counter-increment: f2; content: counter(f1, decimal)"."counter(f2, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l47> li:first-child:before {counter-increment: f2 0;  }
 #l48 {padding-left: 0pt;counter-reset: f3 1; }
 #l48> li:before {counter-increment: f3; content: counter(f1, decimal)"."counter(f2, decimal)"."counter(f3, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l48> li:first-child:before {counter-increment: f3 0;  }
 #l49 {padding-left: 0pt;counter-reset: f2 1; }
 #l49> li:before {counter-increment: f2; content: counter(f1, decimal)"."counter(f2, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l49> li:first-child:before {counter-increment: f2 0;  }
 #l50 {padding-left: 0pt;counter-reset: f3 1; }
 #l50> li:before {counter-increment: f3; content: counter(f1, decimal)"."counter(f2, decimal)"."counter(f3, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l50> li:first-child:before {counter-increment: f3 0;  }
 #l51 {padding-left: 0pt;counter-reset: f2 1; }
 #l51> li:before {counter-increment: f2; content: counter(f1, decimal)"."counter(f2, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l51> li:first-child:before {counter-increment: f2 0;  }
 #l52 {padding-left: 0pt;counter-reset: f3 1; }
 #l52> li:before {counter-increment: f3; content: counter(f1, decimal)"."counter(f2, decimal)"."counter(f3, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l52> li:first-child:before {counter-increment: f3 0;  }
 #l53 {padding-left: 0pt;counter-reset: f2 1; }
 #l53> li:before {counter-increment: f2; content: counter(f1, decimal)"."counter(f2, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l53> li:first-child:before {counter-increment: f2 0;  }
 #l54 {padding-left: 0pt;counter-reset: f3 1; }
 #l54> li:before {counter-increment: f3; content: counter(f1, decimal)"."counter(f2, decimal)"."counter(f3, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l54> li:first-child:before {counter-increment: f3 0;  }
 #l55 {padding-left: 0pt;counter-reset: g1 1; }
 #l55> li:before {counter-increment: g1; content: counter(g1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l55> li:first-child:before {counter-increment: g1 0;  }
 #l56 {padding-left: 0pt;counter-reset: g2 2; }
 #l56> li:before {counter-increment: g2; content: counter(g1, decimal)"."counter(g2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l56> li:first-child:before {counter-increment: g2 0;  }
 #l57 {padding-left: 0pt;counter-reset: g3 1; }
 #l57> li:before {counter-increment: g3; content: counter(g1, decimal)"."counter(g2, decimal)"."counter(g3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l57> li:first-child:before {counter-increment: g3 0;  }
 #l58 {padding-left: 0pt;counter-reset: g1 1; }
 #l58> li:before {counter-increment: g1; content: counter(g1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l58> li:first-child:before {counter-increment: g1 0;  }
 #l59 {padding-left: 0pt;counter-reset: g2 2; }
 #l59> li:before {counter-increment: g2; content: counter(g1, decimal)"."counter(g2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l59> li:first-child:before {counter-increment: g2 0;  }
 #l60 {padding-left: 0pt;counter-reset: g3 4; }
 #l60> li:before {counter-increment: g3; content: counter(g1, decimal)"."counter(g2, decimal)"."counter(g3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l60> li:first-child:before {counter-increment: g3 0;  }
 #l61 {padding-left: 0pt;counter-reset: h1 1; }
 #l61> li:before {counter-increment: h1; content: counter(h1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l61> li:first-child:before {counter-increment: h1 0;  }
 #l62 {padding-left: 0pt;counter-reset: h2 3; }
 #l62> li:before {counter-increment: h2; content: counter(h1, decimal)"."counter(h2, decimal)" "; color: black; font-style: normal; font-weight: bold; text-decoration: none; }
 #l62> li:first-child:before {counter-increment: h2 0;  }
 #l63 {padding-left: 0pt;counter-reset: h1 1; }
 #l63> li:before {counter-increment: h1; content: counter(h1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l63> li:first-child:before {counter-increment: h1 0;  }
 #l64 {padding-left: 0pt;counter-reset: h2 4; }
 #l64> li:before {counter-increment: h2; content: counter(h1, decimal)"."counter(h2, decimal)" "; color: black; font-style: normal; font-weight: bold; text-decoration: none; }
 #l64> li:first-child:before {counter-increment: h2 0;  }
 #l65 {padding-left: 0pt;counter-reset: i1 1; }
 #l65> li:before {counter-increment: i1; content: counter(i1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l65> li:first-child:before {counter-increment: i1 0;  }
 #l66 {padding-left: 0pt;counter-reset: i2 4; }
 #l66> li:before {counter-increment: i2; content: counter(i1, decimal)"."counter(i2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l66> li:first-child:before {counter-increment: i2 0;  }
 #l67 {padding-left: 0pt;counter-reset: i3 1; }
 #l67> li:before {counter-increment: i3; content: counter(i1, decimal)"."counter(i2, decimal)"."counter(i3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l67> li:first-child:before {counter-increment: i3 0;  }
 #l68 {padding-left: 0pt;counter-reset: i4 1; }
 #l68> li:before {counter-increment: i4; content: counter(i4, upper-roman)". "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l68> li:first-child:before {counter-increment: i4 0;  }
 #l69 {padding-left: 0pt;counter-reset: j1 2; }
 #l69> li:before {counter-increment: j1; content: counter(j1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l69> li:first-child:before {counter-increment: j1 0;  }
 #l70 {padding-left: 0pt;counter-reset: j2 1; }
 #l70> li:before {counter-increment: j2; content: counter(j1, decimal)"."counter(j2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l70> li:first-child:before {counter-increment: j2 0;  }
 #l71 {padding-left: 0pt;counter-reset: j1 2; }
 #l71> li:before {counter-increment: j1; content: counter(j1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l71> li:first-child:before {counter-increment: j1 0;  }
 #l72 {padding-left: 0pt;counter-reset: j2 2; }
 #l72> li:before {counter-increment: j2; content: counter(j1, decimal)"."counter(j2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l72> li:first-child:before {counter-increment: j2 0;  }
 #l73 {padding-left: 0pt;counter-reset: k1 2; }
 #l73> li:before {counter-increment: k1; content: counter(k1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l73> li:first-child:before {counter-increment: k1 0;  }
 #l74 {padding-left: 0pt;counter-reset: k2 2; }
 #l74> li:before {counter-increment: k2; content: counter(k1, decimal)"."counter(k2, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l74> li:first-child:before {counter-increment: k2 0;  }
 #l75 {padding-left: 0pt;counter-reset: k1 2; }
 #l75> li:before {counter-increment: k1; content: counter(k1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l75> li:first-child:before {counter-increment: k1 0;  }
 #l76 {padding-left: 0pt;counter-reset: k2 3; }
 #l76> li:before {counter-increment: k2; content: counter(k1, decimal)"."counter(k2, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l76> li:first-child:before {counter-increment: k2 0;  }
 #l77 {padding-left: 0pt;counter-reset: k1 2; }
 #l77> li:before {counter-increment: k1; content: counter(k1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l77> li:first-child:before {counter-increment: k1 0;  }
 #l78 {padding-left: 0pt;counter-reset: k2 4; }
 #l78> li:before {counter-increment: k2; content: counter(k1, decimal)"."counter(k2, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l78> li:first-child:before {counter-increment: k2 0;  }
 #l79 {padding-left: 0pt;counter-reset: l1 3; }
 #l79> li:before {counter-increment: l1; content: counter(l1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l79> li:first-child:before {counter-increment: l1 0;  }
 #l80 {padding-left: 0pt;counter-reset: l2 1; }
 #l80> li:before {counter-increment: l2; content: counter(l1, decimal)"."counter(l2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l80> li:first-child:before {counter-increment: l2 0;  }
 #l81 {padding-left: 0pt;counter-reset: l3 1; }
 #l81> li:before {counter-increment: l3; content: counter(l1, decimal)"."counter(l2, decimal)"."counter(l3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l81> li:first-child:before {counter-increment: l3 0;  }
 #l82 {padding-left: 0pt;counter-reset: m1 3; }
 #l82> li:before {counter-increment: m1; content: counter(m1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l82> li:first-child:before {counter-increment: m1 0;  }
 #l83 {padding-left: 0pt;counter-reset: m2 3; }
 #l83> li:before {counter-increment: m2; content: counter(m1, decimal)"."counter(m2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l83> li:first-child:before {counter-increment: m2 0;  }
 #l84 {padding-left: 0pt;counter-reset: m3 1; }
 #l84> li:before {counter-increment: m3; content: counter(m1, decimal)"."counter(m2, decimal)"."counter(m3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l84> li:first-child:before {counter-increment: m3 0;  }
 #l85 {padding-left: 0pt;counter-reset: n1 3; }
 #l85> li:before {counter-increment: n1; content: counter(n1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l85> li:first-child:before {counter-increment: n1 0;  }
 #l86 {padding-left: 0pt;counter-reset: n2 4; }
 #l86> li:before {counter-increment: n2; content: counter(n1, decimal)"."counter(n2, decimal)" "; color: black; font-style: normal; font-weight: bold; text-decoration: none; }
 #l86> li:first-child:before {counter-increment: n2 0;  }
 #l87 {padding-left: 0pt;counter-reset: n1 3; }
 #l87> li:before {counter-increment: n1; content: counter(n1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l87> li:first-child:before {counter-increment: n1 0;  }
 #l88 {padding-left: 0pt;counter-reset: n2 5; }
 #l88> li:before {counter-increment: n2; content: counter(n1, decimal)"."counter(n2, decimal)" "; color: black; font-style: normal; font-weight: bold; text-decoration: none; }
 #l88> li:first-child:before {counter-increment: n2 0;  }
 #l89 {padding-left: 0pt;counter-reset: o1 3; }
 #l89> li:before {counter-increment: o1; content: counter(o1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l89> li:first-child:before {counter-increment: o1 0;  }
 #l90 {padding-left: 0pt;counter-reset: o2 6; }
 #l90> li:before {counter-increment: o2; content: counter(o1, decimal)"."counter(o2, decimal)" "; color: black; font-style: normal; font-weight: bold; text-decoration: none; }
 #l90> li:first-child:before {counter-increment: o2 0;  }
 #l91 {padding-left: 0pt;counter-reset: p1 3; }
 #l91> li:before {counter-increment: p1; content: counter(p1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l91> li:first-child:before {counter-increment: p1 0;  }
 #l92 {padding-left: 0pt;counter-reset: p2 8; }
 #l92> li:before {counter-increment: p2; content: counter(p1, decimal)"."counter(p2, decimal)" "; color: black; font-style: normal; font-weight: bold; text-decoration: none; }
 #l92> li:first-child:before {counter-increment: p2 0;  }
 #l93 {padding-left: 0pt;counter-reset: p1 3; }
 #l93> li:before {counter-increment: p1; content: counter(p1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l93> li:first-child:before {counter-increment: p1 0;  }
 #l94 {padding-left: 0pt;counter-reset: p2 9; }
 #l94> li:before {counter-increment: p2; content: counter(p1, decimal)"."counter(p2, decimal)" "; color: black; font-style: normal; font-weight: bold; text-decoration: none; }
 #l94> li:first-child:before {counter-increment: p2 0;  }
 #l95 {padding-left: 0pt;counter-reset: q1 4; }
 #l95> li:before {counter-increment: q1; content: counter(q1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l95> li:first-child:before {counter-increment: q1 0;  }
 #l96 {padding-left: 0pt;counter-reset: q2 1; }
 #l96> li:before {counter-increment: q2; content: counter(q1, decimal)"."counter(q2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l96> li:first-child:before {counter-increment: q2 0;  }
 #l97 {padding-left: 0pt;counter-reset: q1 4; }
 #l97> li:before {counter-increment: q1; content: counter(q1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l97> li:first-child:before {counter-increment: q1 0;  }
 #l98 {padding-left: 0pt;counter-reset: q2 2; }
 #l98> li:before {counter-increment: q2; content: counter(q1, decimal)"."counter(q2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l98> li:first-child:before {counter-increment: q2 0;  }
 #l99 {padding-left: 0pt;counter-reset: q1 4; }
 #l99> li:before {counter-increment: q1; content: counter(q1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l99> li:first-child:before {counter-increment: q1 0;  }
 #l100 {padding-left: 0pt;counter-reset: q2 3; }
 #l100> li:before {counter-increment: q2; content: counter(q1, decimal)"."counter(q2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l100> li:first-child:before {counter-increment: q2 0;  }
 #l101 {padding-left: 0pt;counter-reset: q1 4; }
 #l101> li:before {counter-increment: q1; content: counter(q1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l101> li:first-child:before {counter-increment: q1 0;  }
 #l102 {padding-left: 0pt;counter-reset: q2 4; }
 #l102> li:before {counter-increment: q2; content: counter(q1, decimal)"."counter(q2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l102> li:first-child:before {counter-increment: q2 0;  }
 #l103 {padding-left: 0pt;counter-reset: q3 1; }
 #l103> li:before {counter-increment: q3; content: counter(q1, decimal)"."counter(q2, decimal)"."counter(q3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l103> li:first-child:before {counter-increment: q3 0;  }
 #l104 {padding-left: 0pt;counter-reset: q1 4; }
 #l104> li:before {counter-increment: q1; content: counter(q1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l104> li:first-child:before {counter-increment: q1 0;  }
 #l105 {padding-left: 0pt;counter-reset: q2 1; }
 #l105> li:before {counter-increment: q2; content: counter(q1, decimal)"."counter(q2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l105> li:first-child:before {counter-increment: q2 0;  }
 #l106 {padding-left: 0pt;counter-reset: q3 2; }
 #l106> li:before {counter-increment: q3; content: counter(q1, decimal)"."counter(q2, decimal)"."counter(q3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l106> li:first-child:before {counter-increment: q3 0;  }
 #l107 {padding-left: 0pt;counter-reset: q4 1; }
 #l107> li:before {counter-increment: q4; content: counter(q1, decimal)"."counter(q2, decimal)"."counter(q3, decimal)"."counter(q4, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l107> li:first-child:before {counter-increment: q4 0;  }
 #l108 {padding-left: 0pt;counter-reset: q1 4; }
 #l108> li:before {counter-increment: q1; content: counter(q1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l108> li:first-child:before {counter-increment: q1 0;  }
 #l109 {padding-left: 0pt;counter-reset: q2 1; }
 #l109> li:before {counter-increment: q2; content: counter(q1, decimal)"."counter(q2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l109> li:first-child:before {counter-increment: q2 0;  }
 #l110 {padding-left: 0pt;counter-reset: q3 1; }
 #l110> li:before {counter-increment: q3; content: counter(q1, decimal)"."counter(q2, decimal)"."counter(q3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l110> li:first-child:before {counter-increment: q3 0;  }
 #l111 {padding-left: 0pt;counter-reset: q4 2; }
 #l111> li:before {counter-increment: q4; content: counter(q1, decimal)"."counter(q2, decimal)"."counter(q3, decimal)"."counter(q4, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l111> li:first-child:before {counter-increment: q4 0;  }
 #l112 {padding-left: 0pt;counter-reset: q1 4; }
 #l112> li:before {counter-increment: q1; content: counter(q1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l112> li:first-child:before {counter-increment: q1 0;  }
 #l113 {padding-left: 0pt;counter-reset: q2 1; }
 #l113> li:before {counter-increment: q2; content: counter(q1, decimal)"."counter(q2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l113> li:first-child:before {counter-increment: q2 0;  }
 #l114 {padding-left: 0pt;counter-reset: q3 3; }
 #l114> li:before {counter-increment: q3; content: counter(q1, decimal)"."counter(q2, decimal)"."counter(q3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l114> li:first-child:before {counter-increment: q3 0;  }
 #l115 {padding-left: 0pt;counter-reset: q4 1; }
 #l115> li:before {counter-increment: q4; content: counter(q1, decimal)"."counter(q2, decimal)"."counter(q3, decimal)"."counter(q4, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l115> li:first-child:before {counter-increment: q4 0;  }
 #l116 {padding-left: 0pt;counter-reset: r1 4; }
 #l116> li:before {counter-increment: r1; content: counter(r1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l116> li:first-child:before {counter-increment: r1 0;  }
 #l117 {padding-left: 0pt;counter-reset: r2 5; }
 #l117> li:before {counter-increment: r2; content: counter(r1, decimal)"."counter(r2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l117> li:first-child:before {counter-increment: r2 0;  }
 #l118 {padding-left: 0pt;counter-reset: r1 4; }
 #l118> li:before {counter-increment: r1; content: counter(r1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l118> li:first-child:before {counter-increment: r1 0;  }
 #l119 {padding-left: 0pt;counter-reset: r2 5; }
 #l119> li:before {counter-increment: r2; content: counter(r1, decimal)"."counter(r2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l119> li:first-child:before {counter-increment: r2 0;  }
 #l120 {padding-left: 0pt;counter-reset: r3 1; }
 #l120> li:before {counter-increment: r3; content: counter(r1, decimal)"."counter(r2, decimal)"."counter(r3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l120> li:first-child:before {counter-increment: r3 0;  }
 #l121 {padding-left: 0pt; }
 #l121> li:before {content: "* "; color: black; font-family:Courier, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8.5pt; }
 #l122 {padding-left: 0pt;counter-reset: r1 4; }
 #l122> li:before {counter-increment: r1; content: counter(r1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l122> li:first-child:before {counter-increment: r1 0;  }
 #l123 {padding-left: 0pt;counter-reset: r2 5; }
 #l123> li:before {counter-increment: r2; content: counter(r1, decimal)"."counter(r2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l123> li:first-child:before {counter-increment: r2 0;  }
 #l124 {padding-left: 0pt;counter-reset: r3 5; }
 #l124> li:before {counter-increment: r3; content: counter(r1, decimal)"."counter(r2, decimal)"."counter(r3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l124> li:first-child:before {counter-increment: r3 0;  }
 #l125 {padding-left: 0pt;counter-reset: r1 4; }
 #l125> li:before {counter-increment: r1; content: counter(r1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l125> li:first-child:before {counter-increment: r1 0;  }
 #l126 {padding-left: 0pt;counter-reset: r2 5; }
 #l126> li:before {counter-increment: r2; content: counter(r1, decimal)"."counter(r2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l126> li:first-child:before {counter-increment: r2 0;  }
 #l127 {padding-left: 0pt;counter-reset: r3 6; }
 #l127> li:before {counter-increment: r3; content: counter(r1, decimal)"."counter(r2, decimal)"."counter(r3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l127> li:first-child:before {counter-increment: r3 0;  }
 #l128 {padding-left: 0pt;counter-reset: t1 4; }
 #l128> li:before {counter-increment: t1; content: counter(t1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l128> li:first-child:before {counter-increment: t1 0;  }
 #l129 {padding-left: 0pt;counter-reset: t2 6; }
 #l129> li:before {counter-increment: t2; content: counter(t1, decimal)"."counter(t2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l129> li:first-child:before {counter-increment: t2 0;  }
 #l130 {padding-left: 0pt;counter-reset: t1 4; }
 #l130> li:before {counter-increment: t1; content: counter(t1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l130> li:first-child:before {counter-increment: t1 0;  }
 #l131 {padding-left: 0pt;counter-reset: t2 7; }
 #l131> li:before {counter-increment: t2; content: counter(t1, decimal)"."counter(t2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l131> li:first-child:before {counter-increment: t2 0;  }
 #l132 {padding-left: 0pt;counter-reset: t1 4; }
 #l132> li:before {counter-increment: t1; content: counter(t1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l132> li:first-child:before {counter-increment: t1 0;  }
 #l133 {padding-left: 0pt;counter-reset: t2 8; }
 #l133> li:before {counter-increment: t2; content: counter(t1, decimal)"."counter(t2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l133> li:first-child:before {counter-increment: t2 0;  }
 #l134 {padding-left: 0pt;counter-reset: u1 4; }
 #l134> li:before {counter-increment: u1; content: counter(u1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l134> li:first-child:before {counter-increment: u1 0;  }
 #l135 {padding-left: 0pt;counter-reset: u2 9; }
 #l135> li:before {counter-increment: u2; content: counter(u1, decimal)"."counter(u2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l135> li:first-child:before {counter-increment: u2 0;  }
 #l136 {padding-left: 0pt;counter-reset: v1 1; }
 #l136> li:before {counter-increment: v1; content: counter(v1, decimal)". "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l136> li:first-child:before {counter-increment: v1 0;  }
 #l137 {padding-left: 0pt;counter-reset: u3 1; }
 #l137> li:before {counter-increment: u3; content: counter(u1, decimal)"."counter(u2, decimal)"."counter(u3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l137> li:first-child:before {counter-increment: u3 0;  }
 #l138 {padding-left: 0pt;counter-reset: w1 5; }
 #l138> li:before {counter-increment: w1; content: counter(w1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l138> li:first-child:before {counter-increment: w1 0;  }
 #l139 {padding-left: 0pt;counter-reset: w2 1; }
 #l139> li:before {counter-increment: w2; content: counter(w1, decimal)"."counter(w2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l139> li:first-child:before {counter-increment: w2 0;  }
 #l140 {padding-left: 0pt;counter-reset: w1 5; }
 #l140> li:before {counter-increment: w1; content: counter(w1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l140> li:first-child:before {counter-increment: w1 0;  }
 #l141 {padding-left: 0pt;counter-reset: w2 1; }
 #l141> li:before {counter-increment: w2; content: counter(w1, decimal)"."counter(w2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l141> li:first-child:before {counter-increment: w2 0;  }
 #l142 {padding-left: 0pt;counter-reset: w3 1; }
 #l142> li:before {counter-increment: w3; content: counter(w3, decimal)". "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l142> li:first-child:before {counter-increment: w3 0;  }
 #l143 {padding-left: 0pt;counter-reset: x1 5; }
 #l143> li:before {counter-increment: x1; content: counter(x1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l143> li:first-child:before {counter-increment: x1 0;  }
 #l144 {padding-left: 0pt;counter-reset: x2 1; }
 #l144> li:before {counter-increment: x2; content: counter(x1, decimal)"."counter(x2, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l144> li:first-child:before {counter-increment: x2 0;  }
 #l145 {padding-left: 0pt;counter-reset: x3 1; }
 #l145> li:before {counter-increment: x3; content: counter(x1, decimal)"."counter(x2, decimal)"."counter(x3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l145> li:first-child:before {counter-increment: x3 0;  }
 #l146 {padding-left: 0pt;counter-reset: y1 1; }
 #l146> li:before {counter-increment: y1; content: counter(y1, decimal)". "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l146> li:first-child:before {counter-increment: y1 0;  }
 #l147 {padding-left: 0pt;counter-reset: z1 5; }
 #l147> li:before {counter-increment: z1; content: counter(z1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l147> li:first-child:before {counter-increment: z1 0;  }
 #l148 {padding-left: 0pt;counter-reset: z2 2; }
 #l148> li:before {counter-increment: z2; content: counter(z1, decimal)"."counter(z2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l148> li:first-child:before {counter-increment: z2 0;  }
 #l149 {padding-left: 0pt;counter-reset: z3 1; }
 #l149> li:before {counter-increment: z3; content: counter(z1, decimal)"."counter(z2, decimal)"."counter(z3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l149> li:first-child:before {counter-increment: z3 0;  }
 #l150 {padding-left: 0pt;counter-reset: z4 1; }
 #l150> li:before {counter-increment: z4; content: counter(z1, decimal)"."counter(z2, decimal)"."counter(z3, decimal)"."counter(z4, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l150> li:first-child:before {counter-increment: z4 0;  }
 #l151 {padding-left: 0pt;counter-reset: z1 5; }
 #l151> li:before {counter-increment: z1; content: counter(z1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l151> li:first-child:before {counter-increment: z1 0;  }
 #l152 {padding-left: 0pt;counter-reset: z2 2; }
 #l152> li:before {counter-increment: z2; content: counter(z1, decimal)"."counter(z2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l152> li:first-child:before {counter-increment: z2 0;  }
 #l153 {padding-left: 0pt;counter-reset: z3 1; }
 #l153> li:before {counter-increment: z3; content: counter(z1, decimal)"."counter(z2, decimal)"."counter(z3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l153> li:first-child:before {counter-increment: z3 0;  }
 #l154 {padding-left: 0pt;counter-reset: z4 2; }
 #l154> li:before {counter-increment: z4; content: counter(z1, decimal)"."counter(z2, decimal)"."counter(z3, decimal)"."counter(z4, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l154> li:first-child:before {counter-increment: z4 0;  }
 #l155 {padding-left: 0pt;counter-reset: z1 5; }
 #l155> li:before {counter-increment: z1; content: counter(z1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l155> li:first-child:before {counter-increment: z1 0;  }
 #l156 {padding-left: 0pt;counter-reset: z2 2; }
 #l156> li:before {counter-increment: z2; content: counter(z1, decimal)"."counter(z2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l156> li:first-child:before {counter-increment: z2 0;  }
 #l157 {padding-left: 0pt;counter-reset: z3 1; }
 #l157> li:before {counter-increment: z3; content: counter(z1, decimal)"."counter(z2, decimal)"."counter(z3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l157> li:first-child:before {counter-increment: z3 0;  }
 #l158 {padding-left: 0pt;counter-reset: z4 3; }
 #l158> li:before {counter-increment: z4; content: counter(z1, decimal)"."counter(z2, decimal)"."counter(z3, decimal)"."counter(z4, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l158> li:first-child:before {counter-increment: z4 0;  }
 #l159 {padding-left: 0pt;counter-reset: z1 5; }
 #l159> li:before {counter-increment: z1; content: counter(z1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l159> li:first-child:before {counter-increment: z1 0;  }
 #l160 {padding-left: 0pt;counter-reset: z2 2; }
 #l160> li:before {counter-increment: z2; content: counter(z1, decimal)"."counter(z2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l160> li:first-child:before {counter-increment: z2 0;  }
 #l161 {padding-left: 0pt;counter-reset: z3 1; }
 #l161> li:before {counter-increment: z3; content: counter(z1, decimal)"."counter(z2, decimal)"."counter(z3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l161> li:first-child:before {counter-increment: z3 0;  }
 #l162 {padding-left: 0pt;counter-reset: z4 4; }
 #l162> li:before {counter-increment: z4; content: counter(z1, decimal)"."counter(z2, decimal)"."counter(z3, decimal)"."counter(z4, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l162> li:first-child:before {counter-increment: z4 0;  }
 #l163 {padding-left: 0pt;counter-reset: z1 5; }
 #l163> li:before {counter-increment: z1; content: counter(z1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l163> li:first-child:before {counter-increment: z1 0;  }
 #l164 {padding-left: 0pt;counter-reset: z2 2; }
 #l164> li:before {counter-increment: z2; content: counter(z1, decimal)"."counter(z2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l164> li:first-child:before {counter-increment: z2 0;  }
 #l165 {padding-left: 0pt;counter-reset: z3 1; }
 #l165> li:before {counter-increment: z3; content: counter(z1, decimal)"."counter(z2, decimal)"."counter(z3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l165> li:first-child:before {counter-increment: z3 0;  }
 #l166 {padding-left: 0pt;counter-reset: z4 5; }
 #l166> li:before {counter-increment: z4; content: counter(z1, decimal)"."counter(z2, decimal)"."counter(z3, decimal)"."counter(z4, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l166> li:first-child:before {counter-increment: z4 0;  }
 #l167 {padding-left: 0pt;counter-reset: c1 5; }
 #l167> li:before {counter-increment: c1; content: counter(c1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l167> li:first-child:before {counter-increment: c1 0;  }
 #l168 {padding-left: 0pt;counter-reset: c2 3; }
 #l168> li:before {counter-increment: c2; content: counter(c1, decimal)"."counter(c2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l168> li:first-child:before {counter-increment: c2 0;  }
 #l169 {padding-left: 0pt;counter-reset: c3 1; }
 #l169> li:before {counter-increment: c3; content: counter(c1, decimal)"."counter(c2, decimal)"."counter(c3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l169> li:first-child:before {counter-increment: c3 0;  }
 #l170 {padding-left: 0pt;counter-reset: d1 1; }
 #l170> li:before {counter-increment: d1; content: counter(d1, decimal)". "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l170> li:first-child:before {counter-increment: d1 0;  }
 #l171 {padding-left: 0pt;counter-reset: c1 6; }
 #l171> li:before {counter-increment: c1; content: counter(c1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l171> li:first-child:before {counter-increment: c1 0;  }
 #l172 {padding-left: 0pt;counter-reset: e1 6; }
 #l172> li:before {counter-increment: e1; content: counter(e1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l172> li:first-child:before {counter-increment: e1 0;  }
 #l173 {padding-left: 0pt;counter-reset: e2 1; }
 #l173> li:before {counter-increment: e2; content: counter(e1, decimal)"."counter(e2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l173> li:first-child:before {counter-increment: e2 0;  }
 #l174 {padding-left: 0pt;counter-reset: e1 6; }
 #l174> li:before {counter-increment: e1; content: counter(e1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l174> li:first-child:before {counter-increment: e1 0;  }
 #l175 {padding-left: 0pt;counter-reset: e2 2; }
 #l175> li:before {counter-increment: e2; content: counter(e1, decimal)"."counter(e2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l175> li:first-child:before {counter-increment: e2 0;  }
 #l176 {padding-left: 0pt;counter-reset: e1 6; }
 #l176> li:before {counter-increment: e1; content: counter(e1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l176> li:first-child:before {counter-increment: e1 0;  }
 #l177 {padding-left: 0pt;counter-reset: e2 3; }
 #l177> li:before {counter-increment: e2; content: counter(e1, decimal)"."counter(e2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l177> li:first-child:before {counter-increment: e2 0;  }
 #l178 {padding-left: 0pt;counter-reset: e1 6; }
 #l178> li:before {counter-increment: e1; content: counter(e1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l178> li:first-child:before {counter-increment: e1 0;  }
 #l179 {padding-left: 0pt;counter-reset: e2 4; }
 #l179> li:before {counter-increment: e2; content: counter(e1, decimal)"."counter(e2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l179> li:first-child:before {counter-increment: e2 0;  }
 #l180 {padding-left: 0pt;counter-reset: f1 6; }
 #l180> li:before {counter-increment: f1; content: counter(f1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l180> li:first-child:before {counter-increment: f1 0;  }
 #l181 {padding-left: 0pt;counter-reset: f2 5; }
 #l181> li:before {counter-increment: f2; content: counter(f1, decimal)"."counter(f2, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l181> li:first-child:before {counter-increment: f2 0;  }
 #l182 {padding-left: 0pt;counter-reset: g1 1; }
 #l182> li:before {counter-increment: g1; content: counter(g1, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l182> li:first-child:before {counter-increment: g1 0;  }
 #l183 {padding-left: 0pt;counter-reset: g2 1; }
 #l183> li:before {counter-increment: g2; content: counter(g1, decimal)"."counter(g2, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l183> li:first-child:before {counter-increment: g2 0;  }
 #l184 {padding-left: 0pt;counter-reset: g2 1; }
 #l184> li:before {counter-increment: g2; content: counter(g1, decimal)"."counter(g2, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l184> li:first-child:before {counter-increment: g2 0;  }
 #l185 {padding-left: 0pt;counter-reset: g2 1; }
 #l185> li:before {counter-increment: g2; content: counter(g1, decimal)"."counter(g2, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l185> li:first-child:before {counter-increment: g2 0;  }
 #l186 {padding-left: 0pt;counter-reset: e2 1; }
 #l186> li:before {counter-increment: e2; content: counter(e1, decimal)"."counter(e2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l186> li:first-child:before {counter-increment: e2 0;  }
 #l187 {padding-left: 0pt;counter-reset: e3 1; }
 #l187> li:before {counter-increment: e3; content: counter(e1, decimal)"."counter(e2, decimal)"."counter(e3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l187> li:first-child:before {counter-increment: e3 0;  }
 #l188 {padding-left: 0pt;counter-reset: e1 6; }
 #l188> li:before {counter-increment: e1; content: counter(e1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l188> li:first-child:before {counter-increment: e1 0;  }
 #l189 {padding-left: 0pt;counter-reset: e2 1; }
 #l189> li:before {counter-increment: e2; content: counter(e1, decimal)"."counter(e2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l189> li:first-child:before {counter-increment: e2 0;  }
 #l190 {padding-left: 0pt;counter-reset: e3 2; }
 #l190> li:before {counter-increment: e3; content: counter(e1, decimal)"."counter(e2, decimal)"."counter(e3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l190> li:first-child:before {counter-increment: e3 0;  }
 #l191 {padding-left: 0pt;counter-reset: h1 1; }
 #l191> li:before {counter-increment: h1; content: counter(h1, decimal)". "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l191> li:first-child:before {counter-increment: h1 0;  }
 #l192 {padding-left: 0pt;counter-reset: e1 6; }
 #l192> li:before {counter-increment: e1; content: counter(e1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l192> li:first-child:before {counter-increment: e1 0;  }
 #l193 {padding-left: 0pt;counter-reset: e2 1; }
 #l193> li:before {counter-increment: e2; content: counter(e1, decimal)"."counter(e2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l193> li:first-child:before {counter-increment: e2 0;  }
 #l194 {padding-left: 0pt;counter-reset: e3 6; }
 #l194> li:before {counter-increment: e3; content: counter(e1, decimal)"."counter(e2, decimal)"."counter(e3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l194> li:first-child:before {counter-increment: e3 0;  }
 #l195 {padding-left: 0pt;counter-reset: i1 7; }
 #l195> li:before {counter-increment: i1; content: counter(i1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l195> li:first-child:before {counter-increment: i1 0;  }
 #l196 {padding-left: 0pt;counter-reset: i2 3; }
 #l196> li:before {counter-increment: i2; content: counter(i1, decimal)"."counter(i2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l196> li:first-child:before {counter-increment: i2 0;  }
 #l197 {padding-left: 0pt;counter-reset: i3 1; }
 #l197> li:before {counter-increment: i3; content: counter(i1, decimal)"."counter(i2, decimal)"."counter(i3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l197> li:first-child:before {counter-increment: i3 0;  }
 #l198 {padding-left: 0pt;counter-reset: i1 7; }
 #l198> li:before {counter-increment: i1; content: counter(i1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l198> li:first-child:before {counter-increment: i1 0;  }
 #l199 {padding-left: 0pt;counter-reset: i2 3; }
 #l199> li:before {counter-increment: i2; content: counter(i1, decimal)"."counter(i2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l199> li:first-child:before {counter-increment: i2 0;  }
 #l200 {padding-left: 0pt;counter-reset: i3 2; }
 #l200> li:before {counter-increment: i3; content: counter(i1, decimal)"."counter(i2, decimal)"."counter(i3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l200> li:first-child:before {counter-increment: i3 0;  }
 #l201 {padding-left: 0pt;counter-reset: i1 7; }
 #l201> li:before {counter-increment: i1; content: counter(i1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l201> li:first-child:before {counter-increment: i1 0;  }
 #l202 {padding-left: 0pt;counter-reset: i2 3; }
 #l202> li:before {counter-increment: i2; content: counter(i1, decimal)"."counter(i2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l202> li:first-child:before {counter-increment: i2 0;  }
 #l203 {padding-left: 0pt;counter-reset: i3 3; }
 #l203> li:before {counter-increment: i3; content: counter(i1, decimal)"."counter(i2, decimal)"."counter(i3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l203> li:first-child:before {counter-increment: i3 0;  }
 #l204 {padding-left: 0pt;counter-reset: i4 1; }
 #l204> li:before {counter-increment: i4; content: counter(i1, decimal)"."counter(i2, decimal)"."counter(i3, decimal)"."counter(i4, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l204> li:first-child:before {counter-increment: i4 0;  }
 #l205 {padding-left: 0pt;counter-reset: i1 7; }
 #l205> li:before {counter-increment: i1; content: counter(i1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l205> li:first-child:before {counter-increment: i1 0;  }
 #l206 {padding-left: 0pt;counter-reset: i2 3; }
 #l206> li:before {counter-increment: i2; content: counter(i1, decimal)"."counter(i2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l206> li:first-child:before {counter-increment: i2 0;  }
 #l207 {padding-left: 0pt;counter-reset: i3 1; }
 #l207> li:before {counter-increment: i3; content: counter(i1, decimal)"."counter(i2, decimal)"."counter(i3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l207> li:first-child:before {counter-increment: i3 0;  }
 #l208 {padding-left: 0pt;counter-reset: i4 2; }
 #l208> li:before {counter-increment: i4; content: counter(i1, decimal)"."counter(i2, decimal)"."counter(i3, decimal)"."counter(i4, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l208> li:first-child:before {counter-increment: i4 0;  }
 #l209 {padding-left: 0pt;counter-reset: j1 1; }
 #l209> li:before {counter-increment: j1; content: counter(j1, decimal)". "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l209> li:first-child:before {counter-increment: j1 0;  }
 #l210 {padding-left: 0pt;counter-reset: k1 1; }
 #l210> li:before {counter-increment: k1; content: counter(k1, decimal)". "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l210> li:first-child:before {counter-increment: k1 0;  }
 #l211 {padding-left: 0pt;counter-reset: l1 1; }
 #l211> li:before {counter-increment: l1; content: counter(l1, decimal)". "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l211> li:first-child:before {counter-increment: l1 0;  }
 #l212 {padding-left: 0pt;counter-reset: i1 7; }
 #l212> li:before {counter-increment: i1; content: counter(i1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l212> li:first-child:before {counter-increment: i1 0;  }
 #l213 {padding-left: 0pt;counter-reset: i2 3; }
 #l213> li:before {counter-increment: i2; content: counter(i1, decimal)"."counter(i2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l213> li:first-child:before {counter-increment: i2 0;  }
 #l214 {padding-left: 0pt;counter-reset: i3 6; }
 #l214> li:before {counter-increment: i3; content: counter(i1, decimal)"."counter(i2, decimal)"."counter(i3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l214> li:first-child:before {counter-increment: i3 0;  }
 #l215 {padding-left: 0pt;counter-reset: m1 7; }
 #l215> li:before {counter-increment: m1; content: counter(m1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l215> li:first-child:before {counter-increment: m1 0;  }
 #l216 {padding-left: 0pt;counter-reset: m2 4; }
 #l216> li:before {counter-increment: m2; content: counter(m1, decimal)"."counter(m2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l216> li:first-child:before {counter-increment: m2 0;  }
 #l217 {padding-left: 0pt;counter-reset: m3 1; }
 #l217> li:before {counter-increment: m3; content: counter(m1, decimal)"."counter(m2, decimal)"."counter(m3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l217> li:first-child:before {counter-increment: m3 0;  }
 #l218 {padding-left: 0pt;counter-reset: m1 7; }
 #l218> li:before {counter-increment: m1; content: counter(m1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l218> li:first-child:before {counter-increment: m1 0;  }
 #l219 {padding-left: 0pt;counter-reset: m2 4; }
 #l219> li:before {counter-increment: m2; content: counter(m1, decimal)"."counter(m2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l219> li:first-child:before {counter-increment: m2 0;  }
 #l220 {padding-left: 0pt;counter-reset: m3 2; }
 #l220> li:before {counter-increment: m3; content: counter(m1, decimal)"."counter(m2, decimal)"."counter(m3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l220> li:first-child:before {counter-increment: m3 0;  }
 #l221 {padding-left: 0pt;counter-reset: m1 7; }
 #l221> li:before {counter-increment: m1; content: counter(m1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l221> li:first-child:before {counter-increment: m1 0;  }
 #l222 {padding-left: 0pt;counter-reset: m2 4; }
 #l222> li:before {counter-increment: m2; content: counter(m1, decimal)"."counter(m2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l222> li:first-child:before {counter-increment: m2 0;  }
 #l223 {padding-left: 0pt;counter-reset: m3 3; }
 #l223> li:before {counter-increment: m3; content: counter(m1, decimal)"."counter(m2, decimal)"."counter(m3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l223> li:first-child:before {counter-increment: m3 0;  }
 #l224 {padding-left: 0pt;counter-reset: m1 7; }
 #l224> li:before {counter-increment: m1; content: counter(m1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l224> li:first-child:before {counter-increment: m1 0;  }
 #l225 {padding-left: 0pt;counter-reset: m2 4; }
 #l225> li:before {counter-increment: m2; content: counter(m1, decimal)"."counter(m2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l225> li:first-child:before {counter-increment: m2 0;  }
 #l226 {padding-left: 0pt;counter-reset: m3 4; }
 #l226> li:before {counter-increment: m3; content: counter(m1, decimal)"."counter(m2, decimal)"."counter(m3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l226> li:first-child:before {counter-increment: m3 0;  }
 #l227 {padding-left: 0pt;counter-reset: m1 7; }
 #l227> li:before {counter-increment: m1; content: counter(m1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l227> li:first-child:before {counter-increment: m1 0;  }
 #l228 {padding-left: 0pt;counter-reset: m2 4; }
 #l228> li:before {counter-increment: m2; content: counter(m1, decimal)"."counter(m2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l228> li:first-child:before {counter-increment: m2 0;  }
 #l229 {padding-left: 0pt;counter-reset: m3 5; }
 #l229> li:before {counter-increment: m3; content: counter(m1, decimal)"."counter(m2, decimal)"."counter(m3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l229> li:first-child:before {counter-increment: m3 0;  }
 #l230 {padding-left: 0pt;counter-reset: n1 7; }
 #l230> li:before {counter-increment: n1; content: counter(n1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l230> li:first-child:before {counter-increment: n1 0;  }
 #l231 {padding-left: 0pt;counter-reset: n2 5; }
 #l231> li:before {counter-increment: n2; content: counter(n1, decimal)"."counter(n2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l231> li:first-child:before {counter-increment: n2 0;  }
 #l232 {padding-left: 0pt;counter-reset: n3 1; }
 #l232> li:before {counter-increment: n3; content: counter(n1, decimal)"."counter(n2, decimal)"."counter(n3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l232> li:first-child:before {counter-increment: n3 0;  }
 #l233 {padding-left: 0pt;counter-reset: n1 7; }
 #l233> li:before {counter-increment: n1; content: counter(n1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l233> li:first-child:before {counter-increment: n1 0;  }
 #l234 {padding-left: 0pt;counter-reset: n2 5; }
 #l234> li:before {counter-increment: n2; content: counter(n1, decimal)"."counter(n2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l234> li:first-child:before {counter-increment: n2 0;  }
 #l235 {padding-left: 0pt;counter-reset: n3 2; }
 #l235> li:before {counter-increment: n3; content: counter(n1, decimal)"."counter(n2, decimal)"."counter(n3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l235> li:first-child:before {counter-increment: n3 0;  }
 #l236 {padding-left: 0pt;counter-reset: o1 8; }
 #l236> li:before {counter-increment: o1; content: counter(o1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l236> li:first-child:before {counter-increment: o1 0;  }
 #l237 {padding-left: 0pt;counter-reset: o2 1; }
 #l237> li:before {counter-increment: o2; content: counter(o1, decimal)"."counter(o2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l237> li:first-child:before {counter-increment: o2 0;  }
 #l238 {padding-left: 0pt;counter-reset: o1 8; }
 #l238> li:before {counter-increment: o1; content: counter(o1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l238> li:first-child:before {counter-increment: o1 0;  }
 #l239 {padding-left: 0pt;counter-reset: o2 1; }
 #l239> li:before {counter-increment: o2; content: counter(o1, decimal)"."counter(o2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l239> li:first-child:before {counter-increment: o2 0;  }
 #l240 {padding-left: 0pt;counter-reset: o3 1; }
 #l240> li:before {counter-increment: o3; content: counter(o1, decimal)"."counter(o2, decimal)"."counter(o3, decimal)" "; color: black; font-style: normal; font-weight: bold; text-decoration: none; }
 #l240> li:first-child:before {counter-increment: o3 0;  }
 #l241 {padding-left: 0pt;counter-reset: o1 9; }
 #l241> li:before {counter-increment: o1; content: counter(o1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l241> li:first-child:before {counter-increment: o1 0;  }
 #l242 {padding-left: 0pt;counter-reset: o2 1; }
 #l242> li:before {counter-increment: o2; content: counter(o1, decimal)"."counter(o2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l242> li:first-child:before {counter-increment: o2 0;  }
 #l243 {padding-left: 0pt;counter-reset: p1 9; }
 #l243> li:before {counter-increment: p1; content: counter(p1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l243> li:first-child:before {counter-increment: p1 0;  }
 #l244 {padding-left: 0pt;counter-reset: p2 2; }
 #l244> li:before {counter-increment: p2; content: counter(p1, decimal)"."counter(p2, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l244> li:first-child:before {counter-increment: p2 0;  }
 #l245 {padding-left: 0pt;counter-reset: q1 1; }
 #l245> li:before {counter-increment: q1; content: counter(q1, decimal)". "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l245> li:first-child:before {counter-increment: q1 0;  }
 #l246 {padding-left: 0pt;counter-reset: r1 1; }
 #l246> li:before {counter-increment: r1; content: counter(r1, decimal)". "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l246> li:first-child:before {counter-increment: r1 0;  }
 #l247 {padding-left: 0pt;counter-reset: s1 9; }
 #l247> li:before {counter-increment: s1; content: counter(s1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l247> li:first-child:before {counter-increment: s1 0;  }
 #l248 {padding-left: 0pt;counter-reset: s2 4; }
 #l248> li:before {counter-increment: s2; content: counter(s1, decimal)"."counter(s2, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l248> li:first-child:before {counter-increment: s2 0;  }
 #l249 {padding-left: 0pt;counter-reset: s3 1; }
 #l249> li:before {counter-increment: s3; content: counter(s1, decimal)"."counter(s2, decimal)"."counter(s3, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l249> li:first-child:before {counter-increment: s3 0;  }
 #l250 {padding-left: 0pt;counter-reset: s4 1; }
 #l250> li:before {counter-increment: s4; content: counter(s1, decimal)"."counter(s2, decimal)"."counter(s3, decimal)"."counter(s4, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l250> li:first-child:before {counter-increment: s4 0;  }
 #l251 {padding-left: 0pt;counter-reset: s1 9; }
 #l251> li:before {counter-increment: s1; content: counter(s1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l251> li:first-child:before {counter-increment: s1 0;  }
 #l252 {padding-left: 0pt;counter-reset: s2 4; }
 #l252> li:before {counter-increment: s2; content: counter(s1, decimal)"."counter(s2, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l252> li:first-child:before {counter-increment: s2 0;  }
 #l253 {padding-left: 0pt;counter-reset: s3 1; }
 #l253> li:before {counter-increment: s3; content: counter(s1, decimal)"."counter(s2, decimal)"."counter(s3, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l253> li:first-child:before {counter-increment: s3 0;  }
 #l254 {padding-left: 0pt;counter-reset: s4 3; }
 #l254> li:before {counter-increment: s4; content: counter(s1, decimal)"."counter(s2, decimal)"."counter(s3, decimal)"."counter(s4, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l254> li:first-child:before {counter-increment: s4 0;  }
 #l255 {padding-left: 0pt;counter-reset: t1 9; }
 #l255> li:before {counter-increment: t1; content: counter(t1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l255> li:first-child:before {counter-increment: t1 0;  }
 #l256 {padding-left: 0pt;counter-reset: t2 4; }
 #l256> li:before {counter-increment: t2; content: counter(t1, decimal)"."counter(t2, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l256> li:first-child:before {counter-increment: t2 0;  }
 #l257 {padding-left: 0pt;counter-reset: t3 2; }
 #l257> li:before {counter-increment: t3; content: counter(t1, decimal)"."counter(t2, decimal)"."counter(t3, decimal)" "; color: black; font-style: normal; font-weight: bold; text-decoration: none; }
 #l257> li:first-child:before {counter-increment: t3 0;  }
 #l258 {padding-left: 0pt;counter-reset: t4 1; }
 #l258> li:before {counter-increment: t4; content: counter(t1, decimal)"."counter(t2, decimal)"."counter(t3, decimal)"."counter(t4, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l258> li:first-child:before {counter-increment: t4 0;  }
 #l259 {padding-left: 0pt;counter-reset: u1 1; }
 #l259> li:before {counter-increment: u1; content: counter(u1, decimal)". "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l259> li:first-child:before {counter-increment: u1 0;  }
 #l260 {padding-left: 0pt;counter-reset: v1 9; }
 #l260> li:before {counter-increment: v1; content: counter(v1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l260> li:first-child:before {counter-increment: v1 0;  }
 #l261 {padding-left: 0pt;counter-reset: v2 5; }
 #l261> li:before {counter-increment: v2; content: counter(v1, decimal)"."counter(v2, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l261> li:first-child:before {counter-increment: v2 0;  }
 #l262 {padding-left: 0pt;counter-reset: v3 1; }
 #l262> li:before {counter-increment: v3; content: counter(v1, decimal)"."counter(v2, decimal)"."counter(v3, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l262> li:first-child:before {counter-increment: v3 0;  }
 #l263 {padding-left: 0pt;counter-reset: v4 1; }
 #l263> li:before {counter-increment: v4; content: counter(v1, decimal)"."counter(v2, decimal)"."counter(v3, decimal)"."counter(v4, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l263> li:first-child:before {counter-increment: v4 0;  }
 #l264 {padding-left: 0pt;counter-reset: w1 9; }
 #l264> li:before {counter-increment: w1; content: counter(w1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l264> li:first-child:before {counter-increment: w1 0;  }
 #l265 {padding-left: 0pt;counter-reset: w2 7; }
 #l265> li:before {counter-increment: w2; content: counter(w1, decimal)"."counter(w2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l265> li:first-child:before {counter-increment: w2 0;  }
 #l266 {padding-left: 0pt;counter-reset: w3 1; }
 #l266> li:before {counter-increment: w3; content: counter(w1, decimal)"."counter(w2, decimal)"."counter(w3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l266> li:first-child:before {counter-increment: w3 0;  }
 #l267 {padding-left: 0pt;counter-reset: w4 1; }
 #l267> li:before {counter-increment: w4; content: counter(w1, decimal)"."counter(w2, decimal)"."counter(w3, decimal)"."counter(w4, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l267> li:first-child:before {counter-increment: w4 0;  }
 #l268 {padding-left: 0pt;counter-reset: x1 9; }
 #l268> li:before {counter-increment: x1; content: counter(x1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l268> li:first-child:before {counter-increment: x1 0;  }
 #l269 {padding-left: 0pt;counter-reset: x2 7; }
 #l269> li:before {counter-increment: x2; content: counter(x1, decimal)"."counter(x2, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l269> li:first-child:before {counter-increment: x2 0;  }
 #l270 {padding-left: 0pt;counter-reset: x3 2; }
 #l270> li:before {counter-increment: x3; content: counter(x1, decimal)"."counter(x2, decimal)"."counter(x3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l270> li:first-child:before {counter-increment: x3 0;  }
 #l271 {padding-left: 0pt;counter-reset: x1 9; }
 #l271> li:before {counter-increment: x1; content: counter(x1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l271> li:first-child:before {counter-increment: x1 0;  }
 #l272 {padding-left: 0pt;counter-reset: x2 7; }
 #l272> li:before {counter-increment: x2; content: counter(x1, decimal)"."counter(x2, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l272> li:first-child:before {counter-increment: x2 0;  }
 #l273 {padding-left: 0pt;counter-reset: x3 3; }
 #l273> li:before {counter-increment: x3; content: counter(x1, decimal)"."counter(x2, decimal)"."counter(x3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l273> li:first-child:before {counter-increment: x3 0;  }
 #l274 {padding-left: 0pt;counter-reset: y1 9; }
 #l274> li:before {counter-increment: y1; content: counter(y1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l274> li:first-child:before {counter-increment: y1 0;  }
 #l275 {padding-left: 0pt;counter-reset: y2 8; }
 #l275> li:before {counter-increment: y2; content: counter(y1, decimal)"."counter(y2, decimal)" "; color: black; font-style: normal; font-weight: bold; text-decoration: none; }
 #l275> li:first-child:before {counter-increment: y2 0;  }
 #l276 {padding-left: 0pt;counter-reset: z1 10; }
 #l276> li:before {counter-increment: z1; content: counter(z1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l276> li:first-child:before {counter-increment: z1 0;  }
 #l277 {padding-left: 0pt;counter-reset: z2 1; }
 #l277> li:before {counter-increment: z2; content: counter(z1, decimal)"."counter(z2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l277> li:first-child:before {counter-increment: z2 0;  }
 #l278 {padding-left: 0pt;counter-reset: z3 1; }
 #l278> li:before {counter-increment: z3; content: counter(z1, decimal)"."counter(z2, decimal)"."counter(z3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l278> li:first-child:before {counter-increment: z3 0;  }
 #l279 {padding-left: 0pt;counter-reset: z4 1; }
 #l279> li:before {counter-increment: z4; content: counter(z4, decimal)". "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l279> li:first-child:before {counter-increment: z4 0;  }
 #l280 {padding-left: 0pt;counter-reset: z1 10; }
 #l280> li:before {counter-increment: z1; content: counter(z1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l280> li:first-child:before {counter-increment: z1 0;  }
 #l281 {padding-left: 0pt;counter-reset: z2 1; }
 #l281> li:before {counter-increment: z2; content: counter(z1, decimal)"."counter(z2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l281> li:first-child:before {counter-increment: z2 0;  }
 #l282 {padding-left: 0pt;counter-reset: z3 5; }
 #l282> li:before {counter-increment: z3; content: counter(z1, decimal)"."counter(z2, decimal)"."counter(z3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l282> li:first-child:before {counter-increment: z3 0;  }
 #l283 {padding-left: 0pt;counter-reset: c1 1; }
 #l283> li:before {counter-increment: c1; content: counter(c1, decimal)". "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l283> li:first-child:before {counter-increment: c1 0;  }
 #l284 {padding-left: 0pt;counter-reset: d1 10; }
 #l284> li:before {counter-increment: d1; content: counter(d1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l284> li:first-child:before {counter-increment: d1 0;  }
 #l285 {padding-left: 0pt;counter-reset: d2 3; }
 #l285> li:before {counter-increment: d2; content: counter(d1, decimal)"."counter(d2, decimal)" "; color: black; font-style: normal; font-weight: bold; text-decoration: none; }
 #l285> li:first-child:before {counter-increment: d2 0;  }
 #l286 {padding-left: 0pt;counter-reset: d3 1; }
 #l286> li:before {counter-increment: d3; content: counter(d1, decimal)"."counter(d2, decimal)"."counter(d3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l286> li:first-child:before {counter-increment: d3 0;  }
 #l287 {padding-left: 0pt;counter-reset: d1 10; }
 #l287> li:before {counter-increment: d1; content: counter(d1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l287> li:first-child:before {counter-increment: d1 0;  }
 #l288 {padding-left: 0pt;counter-reset: d2 6; }
 #l288> li:before {counter-increment: d2; content: counter(d1, decimal)"."counter(d2, decimal)" "; color: black; font-style: normal; font-weight: bold; text-decoration: none; }
 #l288> li:first-child:before {counter-increment: d2 0;  }
 #l289 {padding-left: 0pt;counter-reset: e1 18; }
 #l289> li:before {counter-increment: e1; content: counter(e1, upper-latin)". "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l289> li:first-child:before {counter-increment: e1 0;  }
 #l290 {padding-left: 0pt;counter-reset: f1 11; }
 #l290> li:before {counter-increment: f1; content: counter(f1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l290> li:first-child:before {counter-increment: f1 0;  }
 #l291 {padding-left: 0pt;counter-reset: f2 1; }
 #l291> li:before {counter-increment: f2; content: counter(f1, decimal)"."counter(f2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l291> li:first-child:before {counter-increment: f2 0;  }
 #l292 {padding-left: 0pt;counter-reset: f1 11; }
 #l292> li:before {counter-increment: f1; content: counter(f1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l292> li:first-child:before {counter-increment: f1 0;  }
 #l293 {padding-left: 0pt;counter-reset: f2 1; }
 #l293> li:before {counter-increment: f2; content: counter(f1, decimal)"."counter(f2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l293> li:first-child:before {counter-increment: f2 0;  }
 #l294 {padding-left: 0pt;counter-reset: f3 1; }
 #l294> li:before {counter-increment: f3; content: "("counter(f3, decimal)") "; color: black; font-family:Times-BoldItalic, serif; font-style: italic; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l294> li:first-child:before {counter-increment: f3 0;  }
 #l295 {padding-left: 0pt;counter-reset: g1 11; }
 #l295> li:before {counter-increment: g1; content: counter(g1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l295> li:first-child:before {counter-increment: g1 0;  }
 #l296 {padding-left: 0pt;counter-reset: g2 3; }
 #l296> li:before {counter-increment: g2; content: counter(g1, decimal)"."counter(g2, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l296> li:first-child:before {counter-increment: g2 0;  }
 #l297 {padding-left: 0pt;counter-reset: g3 1; }
 #l297> li:before {counter-increment: g3; content: counter(g1, decimal)"."counter(g2, decimal)"."counter(g3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l297> li:first-child:before {counter-increment: g3 0;  }
 #l298 {padding-left: 0pt;counter-reset: g1 11; }
 #l298> li:before {counter-increment: g1; content: counter(g1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l298> li:first-child:before {counter-increment: g1 0;  }
 #l299 {padding-left: 0pt;counter-reset: g2 3; }
 #l299> li:before {counter-increment: g2; content: counter(g1, decimal)"."counter(g2, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l299> li:first-child:before {counter-increment: g2 0;  }
 #l300 {padding-left: 0pt;counter-reset: g3 3; }
 #l300> li:before {counter-increment: g3; content: counter(g1, decimal)"."counter(g2, decimal)"."counter(g3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l300> li:first-child:before {counter-increment: g3 0;  }
 #l301 {padding-left: 0pt;counter-reset: g3 1; }
 #l301> li:before {counter-increment: g3; content: counter(g1, decimal)"."counter(g2, decimal)"."counter(g3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l301> li:first-child:before {counter-increment: g3 0;  }
 #l302 {padding-left: 0pt;counter-reset: h1 11; }
 #l302> li:before {counter-increment: h1; content: counter(h1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l302> li:first-child:before {counter-increment: h1 0;  }
 #l303 {padding-left: 0pt;counter-reset: h2 5; }
 #l303> li:before {counter-increment: h2; content: counter(h1, decimal)"."counter(h2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l303> li:first-child:before {counter-increment: h2 0;  }
 #l304 {padding-left: 0pt;counter-reset: h3 1; }
 #l304> li:before {counter-increment: h3; content: counter(h1, decimal)"."counter(h2, decimal)"."counter(h3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l304> li:first-child:before {counter-increment: h3 0;  }
 #l305 {padding-left: 0pt;counter-reset: h1 11; }
 #l305> li:before {counter-increment: h1; content: counter(h1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l305> li:first-child:before {counter-increment: h1 0;  }
 #l306 {padding-left: 0pt;counter-reset: h2 5; }
 #l306> li:before {counter-increment: h2; content: counter(h1, decimal)"."counter(h2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l306> li:first-child:before {counter-increment: h2 0;  }
 #l307 {padding-left: 0pt;counter-reset: h3 2; }
 #l307> li:before {counter-increment: h3; content: counter(h1, decimal)"."counter(h2, decimal)"."counter(h3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l307> li:first-child:before {counter-increment: h3 0;  }
 #l308 {padding-left: 0pt;counter-reset: i1 11; }
 #l308> li:before {counter-increment: i1; content: counter(i1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l308> li:first-child:before {counter-increment: i1 0;  }
 #l309 {padding-left: 0pt;counter-reset: i2 6; }
 #l309> li:before {counter-increment: i2; content: counter(i1, decimal)"."counter(i2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l309> li:first-child:before {counter-increment: i2 0;  }
 #l310 {padding-left: 0pt;counter-reset: i1 11; }
 #l310> li:before {counter-increment: i1; content: counter(i1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l310> li:first-child:before {counter-increment: i1 0;  }
 #l311 {padding-left: 0pt;counter-reset: i2 7; }
 #l311> li:before {counter-increment: i2; content: counter(i1, decimal)"."counter(i2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l311> li:first-child:before {counter-increment: i2 0;  }
 #l312 {padding-left: 0pt;counter-reset: e1 19; }
 #l312> li:before {counter-increment: e1; content: counter(e1, upper-latin)". "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l312> li:first-child:before {counter-increment: e1 0;  }
 #l313 {padding-left: 0pt;counter-reset: j1 12; }
 #l313> li:before {counter-increment: j1; content: counter(j1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l313> li:first-child:before {counter-increment: j1 0;  }
 #l314 {padding-left: 0pt;counter-reset: j2 1; }
 #l314> li:before {counter-increment: j2; content: counter(j1, decimal)"."counter(j2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l314> li:first-child:before {counter-increment: j2 0;  }
 #l315 {padding-left: 0pt;counter-reset: k1 1; }
 #l315> li:before {counter-increment: k1; content: counter(k1, decimal)". "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l315> li:first-child:before {counter-increment: k1 0;  }
 #l316 {padding-left: 0pt;counter-reset: j1 12; }
 #l316> li:before {counter-increment: j1; content: counter(j1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l316> li:first-child:before {counter-increment: j1 0;  }
 #l317 {padding-left: 0pt;counter-reset: j2 1; }
 #l317> li:before {counter-increment: j2; content: counter(j1, decimal)"."counter(j2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l317> li:first-child:before {counter-increment: j2 0;  }
 #l318 {padding-left: 0pt;counter-reset: j3 1; }
 #l318> li:before {counter-increment: j3; content: counter(j1, decimal)"."counter(j2, decimal)"."counter(j3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l318> li:first-child:before {counter-increment: j3 0;  }
 #l319 {padding-left: 0pt;counter-reset: l1 12; }
 #l319> li:before {counter-increment: l1; content: counter(l1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l319> li:first-child:before {counter-increment: l1 0;  }
 #l320 {padding-left: 0pt;counter-reset: l2 4; }
 #l320> li:before {counter-increment: l2; content: counter(l1, decimal)"."counter(l2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l320> li:first-child:before {counter-increment: l2 0;  }
 #l321 {padding-left: 0pt;counter-reset: l1 12; }
 #l321> li:before {counter-increment: l1; content: counter(l1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l321> li:first-child:before {counter-increment: l1 0;  }
 #l322 {padding-left: 0pt;counter-reset: l2 5; }
 #l322> li:before {counter-increment: l2; content: counter(l1, decimal)"."counter(l2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l322> li:first-child:before {counter-increment: l2 0;  }
 #l323 {padding-left: 0pt;counter-reset: m1 12; }
 #l323> li:before {counter-increment: m1; content: counter(m1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l323> li:first-child:before {counter-increment: m1 0;  }
 #l324 {padding-left: 0pt;counter-reset: m2 6; }
 #l324> li:before {counter-increment: m2; content: counter(m1, decimal)"."counter(m2, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l324> li:first-child:before {counter-increment: m2 0;  }
 #l325 {padding-left: 0pt;counter-reset: n1 12; }
 #l325> li:before {counter-increment: n1; content: counter(n1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l325> li:first-child:before {counter-increment: n1 0;  }
 #l326 {padding-left: 0pt;counter-reset: n2 8; }
 #l326> li:before {counter-increment: n2; content: counter(n1, decimal)"."counter(n2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l326> li:first-child:before {counter-increment: n2 0;  }
 #l327 {padding-left: 0pt;counter-reset: o1 1; }
 #l327> li:before {counter-increment: o1; content: counter(o1, decimal)". "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l327> li:first-child:before {counter-increment: o1 0;  }
 #l328 {padding-left: 0pt;counter-reset: p1 12; }
 #l328> li:before {counter-increment: p1; content: counter(p1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l328> li:first-child:before {counter-increment: p1 0;  }
 #l329 {padding-left: 0pt;counter-reset: p2 9; }
 #l329> li:before {counter-increment: p2; content: counter(p1, decimal)"."counter(p2, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l329> li:first-child:before {counter-increment: p2 0;  }
 #l330 {padding-left: 0pt;counter-reset: q1 13; }
 #l330> li:before {counter-increment: q1; content: counter(q1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l330> li:first-child:before {counter-increment: q1 0;  }
 #l331 {padding-left: 0pt;counter-reset: q2 1; }
 #l331> li:before {counter-increment: q2; content: counter(q1, decimal)"."counter(q2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l331> li:first-child:before {counter-increment: q2 0;  }
 #l332 {padding-left: 0pt;counter-reset: q1 13; }
 #l332> li:before {counter-increment: q1; content: counter(q1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l332> li:first-child:before {counter-increment: q1 0;  }
 #l333 {padding-left: 0pt;counter-reset: q2 1; }
 #l333> li:before {counter-increment: q2; content: counter(q1, decimal)"."counter(q2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l333> li:first-child:before {counter-increment: q2 0;  }
 #l334 {padding-left: 0pt;counter-reset: q3 1; }
 #l334> li:before {counter-increment: q3; content: counter(q1, decimal)"."counter(q2, decimal)"."counter(q3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l334> li:first-child:before {counter-increment: q3 0;  }
 #l335 {padding-left: 0pt;counter-reset: r1 13; }
 #l335> li:before {counter-increment: r1; content: counter(r1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l335> li:first-child:before {counter-increment: r1 0;  }
 #l336 {padding-left: 0pt;counter-reset: r2 4; }
 #l336> li:before {counter-increment: r2; content: counter(r1, decimal)"."counter(r2, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l336> li:first-child:before {counter-increment: r2 0;  }
 #l337 {padding-left: 0pt;counter-reset: s1 13; }
 #l337> li:before {counter-increment: s1; content: counter(s1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l337> li:first-child:before {counter-increment: s1 0;  }
 #l338 {padding-left: 0pt;counter-reset: s2 6; }
 #l338> li:before {counter-increment: s2; content: counter(s1, decimal)"."counter(s2, decimal)" "; color: black; font-style: normal; font-weight: bold; text-decoration: none; }
 #l338> li:first-child:before {counter-increment: s2 0;  }
 #l339 {padding-left: 0pt;counter-reset: t1 14; }
 #l339> li:before {counter-increment: t1; content: counter(t1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l339> li:first-child:before {counter-increment: t1 0;  }
 #l340 {padding-left: 0pt;counter-reset: t2 1; }
 #l340> li:before {counter-increment: t2; content: counter(t1, decimal)"."counter(t2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l340> li:first-child:before {counter-increment: t2 0;  }
 #l341 {padding-left: 0pt;counter-reset: u1 14; }
 #l341> li:before {counter-increment: u1; content: counter(u1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l341> li:first-child:before {counter-increment: u1 0;  }
 #l342 {padding-left: 0pt;counter-reset: u2 2; }
 #l342> li:before {counter-increment: u2; content: counter(u1, decimal)"."counter(u2, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l342> li:first-child:before {counter-increment: u2 0;  }
 #l343 {padding-left: 0pt;counter-reset: u1 14; }
 #l343> li:before {counter-increment: u1; content: counter(u1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l343> li:first-child:before {counter-increment: u1 0;  }
 #l344 {padding-left: 0pt;counter-reset: u2 3; }
 #l344> li:before {counter-increment: u2; content: counter(u1, decimal)"."counter(u2, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l344> li:first-child:before {counter-increment: u2 0;  }
 #l345 {padding-left: 0pt;counter-reset: v1 14; }
 #l345> li:before {counter-increment: v1; content: counter(v1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l345> li:first-child:before {counter-increment: v1 0;  }
 #l346 {padding-left: 0pt;counter-reset: v2 3; }
 #l346> li:before {counter-increment: v2; content: counter(v1, decimal)"."counter(v2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l346> li:first-child:before {counter-increment: v2 0;  }
 #l347 {padding-left: 0pt;counter-reset: v1 14; }
 #l347> li:before {counter-increment: v1; content: counter(v1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l347> li:first-child:before {counter-increment: v1 0;  }
 #l348 {padding-left: 0pt;counter-reset: v2 4; }
 #l348> li:before {counter-increment: v2; content: counter(v1, decimal)"."counter(v2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l348> li:first-child:before {counter-increment: v2 0;  }
 li {display: block; }
 #l349 {padding-left: 0pt;counter-reset: v1 14; }
 #l349> li:before {counter-increment: v1; content: counter(v1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l349> li:first-child:before {counter-increment: v1 0;  }
 #l350 {padding-left: 0pt;counter-reset: v2 5; }
 #l350> li:before {counter-increment: v2; content: counter(v1, decimal)"."counter(v2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l350> li:first-child:before {counter-increment: v2 0;  }
 #l351 {padding-left: 0pt;counter-reset: v3 1; }
 #l351> li:before {counter-increment: v3; content: counter(v1, decimal)"."counter(v2, decimal)"."counter(v3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l351> li:first-child:before {counter-increment: v3 0;  }
 li {display: block; }
 #l352 {padding-left: 0pt;counter-reset: w1 14; }
 #l352> li:before {counter-increment: w1; content: counter(w1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l352> li:first-child:before {counter-increment: w1 0;  }
 #l353 {padding-left: 0pt;counter-reset: w2 6; }
 #l353> li:before {counter-increment: w2; content: counter(w1, decimal)"."counter(w2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l353> li:first-child:before {counter-increment: w2 0;  }
 li {display: block; }
 #l354 {padding-left: 0pt;counter-reset: x1 15; }
 #l354> li:before {counter-increment: x1; content: counter(x1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l354> li:first-child:before {counter-increment: x1 0;  }
 #l355 {padding-left: 0pt;counter-reset: x2 1; }
 #l355> li:before {counter-increment: x2; content: counter(x1, decimal)"."counter(x2, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l355> li:first-child:before {counter-increment: x2 0;  }
 #l356 {padding-left: 0pt;counter-reset: x3 1; }
 #l356> li:before {counter-increment: x3; content: counter(x1, decimal)"."counter(x2, decimal)"."counter(x3, decimal)" "; color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 #l356> li:first-child:before {counter-increment: x3 0;  }
</style></head><body><p class="s1" style="padding-top: 2pt;padding-left: 158pt;text-indent: 0pt;text-align: left;">Essential Software Architecture</p><p style="text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="2" height="0" alt="image" src="Image_001.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s2" style="padding-top: 4pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">Ian Gorton</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s3" style="padding-left: 14pt;text-indent: 0pt;line-height: 88%;text-align: left;">Essential Software Architecture</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">With 93 Figures and 11 Tables</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s5" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">123</p><p class="s6" style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Author</p><p class="s7" style="padding-top: 5pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Ian Gorton</p><p class="s7" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">National ICT Australia</p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="mailto:Ian.gorton@nicta.com.au" class="a" target="_blank">Bay 15, Locomotive Workshop Australian Technology Park, Garden St Eveleigh NSW 1430, Australia </a><a href="mailto:Ian.gorton@nicta.com.au" target="_blank">Ian.gorton@nicta.com.au</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s8" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Library of Congress Control Number: 2006921741</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">ACM Computing Classiﬁcation (1998): D.2</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s9" style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">ISBN-10 3-540-28713-2 Springer Berlin Heidelberg New York</p><p class="s9" style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">ISBN-13 978-3-540-28713-1 Springer Berlin Heidelberg New York</p><p class="s8" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: justify;">This work is subject to copyright. All rights are reserved, whether the whole or part of the material is concerned, speciﬁcally the rights of translation, reprinting, reuse of illustrations, recitation, broadcasting, reproduction on microﬁlm or in any other way, and storage in data banks. Duplication of this publication or parts thereof is permitted only under the provisions of the German Copyright Law of September 9, 1965, in its current version, and permission for use must always be obtained from Springer. Violations are liable for prosecution under the German Copyright Law.</p><p class="s8" style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 151%;text-align: left;">Springer is a part of Springer Science+Business Media springer.com</p><p class="s8" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">© Springer-Verlag Berlin Heidelberg 2006 Printed in Germany</p><p class="s8" style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: justify;">The use of general descriptive names, registered names, trademarks, etc. in this publication does not imply, even in the absence of a speciﬁc statement, that such names are exempt from the relevant pro- tective laws and regulations and therefore free for general use.</p><p class="s8" style="padding-top: 5pt;padding-left: 5pt;text-indent: 0pt;line-height: 9pt;text-align: left;">Typeset by the author</p><p class="s8" style="padding-left: 5pt;text-indent: 0pt;line-height: 81%;text-align: left;">Production: LE-T<span class="s10">E</span>X Jelonek, Schmidt &amp; Vöckler GbR, Leipzig Cover design: KünkelLopka Werbeagentur, Heidelberg</p><p class="s8" style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Printed on acid-free paper 45/3100/YL - 543210 </p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">Architecture is something of a black art in the IT world. Architects learn on the job, bringing years of experience in design and technology to the business problems they tackle. It’s not an easy task to impart architecture knowledge.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">So when Ian first spoke to me about the idea of writing this book, I thought “Great! Finally there will be a book that I can recommend to the many developers and students who approach me asking what they have to do to become an IT architect”. I knew that from reading the book they would discover many of the essential ingredients of being a good practic- ing IT architect.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">In the years that I have known Ian, he has been an inspirational educa- tor, a pragmatic and decisive software architect, and an idealistic software architecture researcher. On top of all that, he is an excellent communicator, who articulates advanced computing concepts clearly and succinctly irre- spective of his audience – the novice or the experienced. Ian is also full of great life stories to tell – all told with a great sense of humor (especially af- ter a few glasses of good wine!).</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">It is not until Ian handed me drafts of the various chapters that I realized that this is a <i>must have </i>book for the experienced IT architects too. As con- sulting enterprise architects, we are usually working inside an enterprise’s boundary, trying to influence the IT directions of the various departments within the enterprise, and designing the next evolution of IT architecture that breaks down the silos within the organization. We are often lone spir- its, making important technology acquisition and design decisions without having a reference to look upon for validation of what we are doing. Now, for practicing architects, Ian’s book serves this precise purpose – it brings a sense of relief knowing that we are not alone, and that there are many others who also face similar architecture challenges. Ian’s book, although by no means a silver bullet to all of our IT architecture challenges, cer- tainly helps us head in the right direction through the various techniques and approaches presented.</p><p class="s7" style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">VI Foreword</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_002.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">So here it is, an essential guide to computer science students as well as practicing developers and IT professionals who aspire to become an IT ar- chitect. For the experienced architects, it serves as a reference, a good validation of our thinking, and provides a summary of emerging technolo- gies and practices that will be important in the not-too-distant future.</p><p style="padding-left: 25pt;text-indent: 0pt;line-height: 11pt;text-align: left;">I hope you will enjoy the read as much as I have.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 10pt;padding-left: 25pt;text-indent: 0pt;text-align: left;">Dr. Anna Liu</p><p style="padding-left: 25pt;text-indent: 0pt;text-align: left;">Architect Advisor, Microsoft Sydney, Australia</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: left;"><a name="a0">Motivation</a></p><p style="padding-top: 10pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">In the not too distant past, on a decent sized project I was working on, I convinced a senior developer, a highly skilled and experienced software engineer, to purchase a copy of “Documenting Software Architectures: Views and Beyond”. The project was a little sparse in terms of documenta- tion and process, the team was well aware of this, and I was trying to help improve the situation. Soon after the book arrived, a brief corridor conver- sation saw strong expressions of enthusiasm. So strong, an additional pro- ject team meeting was called for the next week.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">In the meeting, the senior engineer held up this “wonderful” book, and espoused many of its key messages to the team. I was, of course, pleased that the book I’d recommended had made such an impact. Then the follow line caught my attention:</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">“I read the first 30 or so pages, which were great, but only skimmed the rest.”</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">I was a little surprised at this statement. Why was the content of this very informative and incredibly useful book mostly “skimmed”? Surely anyone could learn much from investing a little time in reading the more technical chapters? I certainly did. This set me pondering the root cause of this issue, as I really wanted to instill more architectural knowledge in the development teams I was working with.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">In my career as a <i>roving </i>software architect, I’ve spent a lot of time con- sulting on projects, providing architectural design skills and knowledge. These projects have spanned many organizations and different application domains over the last decade.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">A common theme though, is that I work mostly in what would be con- sidered general information technology (IT) application domains. The sort of applications that financial institutions, utilities and Government agen- cies build to manage and deliver information to their customers and trading partners. These are, broadly, <i>business information systems </i>that leverage</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">Commercial-off-the-shelf (COTS) technologies like databases, middle- ware, packaged applications and web technologies.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">I occasionally work on projects in what are considered <i>more technical </i>domains, such as military, embedded control and telecommunications ap- plications. I can do this because many of the underlying architectural is- sues are the same across domains. However, the way these issues manifest themselves, the particular technology solutions that are commonly adopted and the technical vocabularies used are radically different. Hence I special- ize in IT systems – this is where I can hopefully add more value.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Sometimes my role involves designing new application architectures, or actually more frequently evaluating existing ones and helping evolve them. In the process, I work closely with the members of projects teams. This is enjoyable. I always learn from them, and I hope they sometimes learn from me.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">A strikingly common characteristic of most of these projects is a lack of explicit architectural design. Functional requirements are usually captured, agreed with stakeholders and managed, and designs that address the func- tional specifications are fleshed out in detail. But the architectural issues, the “how” the application achieves its purpose, the “what” happens when things change and evolve or fail, are frequently implicit (this means they are in somebody’s head) at best. At worst, they are simply not addressed in any way that can be described in terms other than accidental. Frequently, when I ask for an overview of the application architecture and the driving non-functional requirements at the first technical meeting, people start drawing on a whiteboard. Or they show me code. Either of these is rarely a good sign.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The problems and risks of poor architectural practices are well known and documented within the software engineering profession. A large body of excellent architectural knowledge is captured in broadly accessible books, journals and reports from members of the Software Engineering In- stitute (SEI), Siemens and various other renowned industrial and academic institutions.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">So, I pondered further, why is this information on best practices and tools not permeating through the IT industry? In response, I can only posit the following.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">In general, the many sources of software architecture information are extremely thorough, learned and lengthy, requiring a serious investment of time to fully digest. The SEI books, for example, are based upon many years of experience working in mostly in military applications. These typi- cally comprise large embedded, real-time software systems, with a set of architectural approaches and issues that have a particular emphasis to this application domain. For example, many of the case studies are about avi-</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">onics, flight simulation, and engine control applications, and present solu- tions, such as fixed priority scheduling and process distribution, to the problems that are encountered in such systems.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">I suspect this emphasis on military and embedded domains makes these materials a difficult read for IT software professionals who are unfamiliar with the problems and solutions described. The vocabularies used tend to- wards those that are prevalent in academic circles – I still have not heard many IT architects discuss architectural styles, connectors or the merits of formal architecture description languages. They do though discuss archi- tecture and design patterns, middleware and use UML and informal tech- niques to model aspects of their architectures.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Further, in the software architecture literature, there is little discussion of the types of off-the-shelf technologies that are commonly used to ad- dress architectural problems in business information systems. Fixed prior- ity schedulers and embedded operating systems are mostly irrelevant in in- formation systems. Application servers, component technologies and messaging infrastructures are the basic building blocks that are important to an IT architect. These are the foundations of the architectures of modern information systems. It is therefore essential that architects understand how these technologies can be leveraged to effectively provide the archi- tectural mechanisms required by a given application.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">This book, then, is an attempt to bridge the gap between the needs of IT professionals and the current body of knowledge in software architecture.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ul id="l1"><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">It attempts to provide clear and concise discussions about the issues, techniques and methods that are at the heart of sound architectural prac- tices.</p></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">It describes and analyzes the general purpose component and middle- ware technologies that support many of the fundamental architectural patterns used in applications.</p></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">It looks forward to how changes in technologies and practices may af- fect the next generation of business information systems.</p></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">It uses familiar information systems as examples, taken from the au- thor’s experiences in banking, e-commerce and government information systems.</p></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">It also provides pointers and references to existing work on software ar- chitecture.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">If you work as an architect or senior designer, or you want to one day, this book should be of value to you. And if you’re a student who is study- ing software engineering and need an overview of the field of software ar-</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">chitecture, this book should be an approachable and useful first source of information. It certainly won’t tell you everything you need to know – that will take a lot more than can be included in a book of such modest length. But it aims to convey the essence of architectural thinking, practices and supporting technologies, and to position the reader to delve more deeply into areas that are pertinent to their professional life and interests.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 14pt;text-indent: 0pt;text-align: left;"><a name="a1">Outline</a></p><p style="padding-top: 10pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">The book is structured into three basic sections. The first is introductory in nature, and approachable by a relatively non-technical reader wanting an overview of software architecture.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The second section is the most technical in nature. It describes the es- sential skills and technical knowledge that an IT architect needs.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The third is forward looking. Six chapters each introduce an emerging area of software practice or technology. These are suitable for existing ar- chitects and designers, as well as people who’ve read the first two sections, and who wish to gain insights into the future influences on their profes- sion.</p><p style="padding-left: 25pt;text-indent: 0pt;text-align: left;">More specifically:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Chapters 1–3: <span class="p">These chapters provide the introductory material for the rest of the book, and the area of software architecture itself. Chapter 1 discusses the key elements of software architecture, and describes the roles of a software architect. Chapter 2 introduces the requirements for a case study problem, a design for which is presented in Chapter 7.This demonstrates the type of problem and associated description that a soft- ware architect typically works on. Chapter 3 analyzes the elements of some key quality attributes like scalability, performance and availabil- ity. Architects spend a lot of time addressing the quality attribute re- quirements for applications. It’s therefore essential that these quality at- tributes are well understood, as they are fundamental elements of the knowledge of an architect.</span></h3></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Chapters 4–7: <span class="p">These chapters are the technical backbone of the book. Chapter 4 introduces a range of middleware technologies that architects commonly leverage in application solutions. Chapter 5 presents a three stage iterative software architecture process. It describes the essential tasks and documents that involve an architect. Chapter 6 discusses ar- chitecture documentation, and focuses on the new notations available in the UML version 2.0. Chapter 7 brings together the information in the first 6 chapters, showing how middleware technologies can be used to</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 26pt;text-indent: 0pt;text-align: justify;">address the quality attribute requirements for the case study. It also demonstrates the use of the documentation template described in Chap- ter 6 for documenting an application architecture.</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Chapters 8–14: <span class="p">These chapters each focus on an emerging technique or technology that will likely influence the futures of software architects. These include software product lines, model-driven architecture, aspect- oriented architecture, service-oriented architectures and Web services, the Semantic Web and agent technologies. Each chapter introduces the essential elements of the method or technology, describes the state-or- the-art and speculates about how increasing adoption is likely to affect the required skills and practices of a software architect.</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 15pt;text-indent: 0pt;text-align: left;"><a name="a2">Acknowledgements</a></p><p style="padding-top: 10pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">First, thanks to the chapter contributors who have helped provide the con- tent on software product lines (Mark Staples), aspect-oriented program- ming (Jenny Liu), model-driven development (Liming Zhu), Web services (Paul Greenfield) and the Semantic Web (Judi Thomson). Your efforts and patience are greatly appreciated. Contact details for the contributing au- thors are as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;"><a href="mailto:mark.staples@nicta.com.au" class="s13" target="_blank">Dr Mark Staples, Empirical Software Engineering, National ICT Australia, email: mark.staples@nicta.com.au</a></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: left;"><a href="mailto:liming.zhu@nicta.com.au" class="s13" target="_blank">Dr Liming Zhu, Empirical Software Engineering, National ICT Australia, email: liming.zhu@nicta.com.au</a></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: left;"><a href="mailto:jenny.liu@nicta.com.au" class="s13" target="_blank">Dr Yan Liu, Empirical Software Engineering, National ICT Australia, email: jenny.liu@nicta.com.au</a></p><p style="padding-top: 4pt;padding-left: 15pt;text-indent: 0pt;text-align: left;"><a href="mailto:p.greenfield@computer.org" class="s13" target="_blank">Paul Greenfield, School of IT, University of Sydney, email: p.greenfield@computer.org</a></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: left;"><a href="mailto:judi@cis.uguelph.ca" class="s13" target="_blank">Dr Judi McCuaig, University of Guelph, Canada, email: judi@cis.uguelph.ca</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;">I’d also like to thank everyone at Springer who has helped make this book a reality, especially the editor, Ralf Gerstner.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">I’d also like to acknowledge the many talented software architects, en- gineers and researchers who I’ve worked closely with recently and/or who have helped shape my thinking and experience through long and entertain- ing geeky discussions. In no particular order these are Anna Liu, Paul Greenfield, Shiping Chen, Paul Brebner, Jenny Liu, John Colton, Dave</p><p class="s7" style="padding-top: 4pt;padding-bottom: 3pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">XII Preface</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_003.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">Thurman, Jereme Haack, Sven Overhage, John Grundy, Muhammad Ali Babar, Justin Almquist, Rik Littlefield, Kevin Dorow, Steffen Becker, Ranata Johnson, Len Bass, Lei Hu, Jim Thomas, Deb Gracio, Nihar Trivedi, Paula Cowley, Jim Webber, Adrienne Andrew, Dan Adams, Dean Kuo, John Hoskins, Shuping Ran, Doug Palmer, Nick Cramer, Liming Zhu, Ralf Reussner<b>, </b>Mark Hoza, Shijian Lu, Andrew Cowell, Tariq Al Naeem, Wendy Cowley and Alan Fekete.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 10pt;padding-left: 25pt;text-indent: 0pt;text-align: left;">Ian Gorton March 2006</p><h1 style="padding-top: 3pt;padding-left: 14pt;text-indent: 0pt;text-align: left;"><a name="a3">Table of Contents</a></h1><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l2"><li style="padding-top: 14pt;padding-left: 27pt;text-indent: -13pt;text-align: left;"><h3 style="display: inline;"><a name="a4">Understanding Software Architecture 1</a></h3><ol id="l3"><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">What is Software Architecture? 1</p></li><li style="padding-left: 70pt;text-indent: -42pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Definitions of Software Architecture 2</p><ol id="l4"><li style="padding-left: 70pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Architecture Defines Structure 3</p></li><li style="padding-left: 101pt;text-indent: -31pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Architecture Specifies Component Communication 5</p></li><li style="padding-left: 70pt;text-indent: 0pt;text-align: left;"><p style="display: inline;">Architecture Addresses Non-functional Requirements ..6 1.2.4 Architecture is an Abstraction 6</p><p style="padding-left: 70pt;text-indent: 0pt;line-height: 11pt;text-align: left;">1.2.5 Architecture Views 8</p></li></ol></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">What Does a Software Architect Do? 10</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Architectures and Technologies 11</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Summary 13</p></li><li style="padding-left: 70pt;text-indent: -42pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Further Reading 13</p><ol id="l5"><li style="padding-left: 101pt;text-indent: -31pt;line-height: 11pt;text-align: left;"><p style="display: inline;">General Architecture. 13</p></li><li style="padding-left: 101pt;text-indent: -31pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Architecture Requirements 14</p></li><li style="padding-left: 101pt;text-indent: -31pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Architecture Patterns 14</p></li><li style="padding-left: 101pt;text-indent: -31pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Technology Comparisons 15</p></li></ol></li></ol></li><li style="padding-top: 11pt;padding-left: 27pt;text-indent: -13pt;text-align: left;"><h3 style="display: inline;"><a name="a5">Introducing the Case Study 17</a></h3><ol id="l6"><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Requirements Overview 17</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Project Context 18</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Business Goals 20</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Constraints 21</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Summary 21</p></li></ol></li><li style="padding-top: 12pt;padding-left: 27pt;text-indent: -13pt;text-align: left;"><h3 style="display: inline;"><a name="a6">Software Quality Attributes 23</a></h3><ol id="l7"><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Quality Attributes 23</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Performance 24</p><ol id="l8"><li style="padding-left: 101pt;text-indent: -31pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Throughput 25</p></li><li style="padding-left: 101pt;text-indent: -31pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Response Time 25</p></li><li style="padding-left: 101pt;text-indent: -31pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Deadlines 26</p></li><li style="padding-left: 101pt;text-indent: -31pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Performance for the ICDE System 27</p></li></ol></li><li style="padding-left: 70pt;text-indent: -42pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Scalability 27</p><ol id="l9"><li style="padding-left: 101pt;text-indent: -31pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Request Load 28</p></li><li style="padding-left: 101pt;text-indent: -31pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Simultaneous Connections 29</p></li><li style="padding-top: 10pt;padding-left: 101pt;text-indent: -30pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Data Size 30</p></li><li style="padding-left: 101pt;text-indent: -30pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Deployment 31</p></li><li style="padding-left: 101pt;text-indent: -30pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Some Thoughts on Scalability 31</p></li><li style="padding-left: 101pt;text-indent: -30pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Scalability for the ICDE Application 31</p></li></ol></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Modifiability 31</p><ol id="l10"><li style="padding-left: 101pt;text-indent: -30pt;text-align: left;"><p style="display: inline;">Modifiability for the ICDE Application 33</p></li></ol></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Security 33</p><ol id="l11"><li style="padding-left: 101pt;text-indent: -30pt;text-align: left;"><p style="display: inline;">Security for the ICDE Application 34</p></li></ol></li><li style="padding-left: 70pt;text-indent: -42pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Availability 34</p><ol id="l12"><li style="padding-left: 101pt;text-indent: -30pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Availability for the ICDE Application 35</p></li></ol></li><li style="padding-left: 70pt;text-indent: -42pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Integration 35</p><ol id="l13"><li style="padding-left: 101pt;text-indent: -30pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Integration for the ICDE Application 36</p></li></ol></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Other Quality Attributes 37</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Design Trade-Offs 38</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Summary 38</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Further Reading 39</p></li></ol></li><li style="padding-top: 11pt;padding-left: 28pt;text-indent: -13pt;text-align: left;"><h3 style="display: inline;"><a name="a7">A Guide to Middleware Architectures and Technologies 41</a></h3><ol id="l14"><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Introduction 41</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Technology Classification 42</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Distributed Objects 43</p></li><li style="padding-left: 70pt;text-indent: -42pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Message-Oriented Middleware 46</p><ol id="l15"><li style="padding-left: 70pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Message-Oriented Middleware Basics 46</p></li><li style="padding-left: 70pt;text-indent: 0pt;text-align: left;"><p style="display: inline;">Exploiting Message Oriented Middleware Advanced Features 49</p></li><li style="padding-left: 101pt;text-indent: -30pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Publish-Subscribe 54</p></li></ol></li><li style="padding-left: 70pt;text-indent: -42pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Application Servers 59</p><ol id="l16"><li style="padding-left: 101pt;text-indent: -30pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Enterprise JavaBeans 60</p></li><li style="padding-left: 101pt;text-indent: -30pt;line-height: 11pt;text-align: left;"><p style="display: inline;">EJB Component Model 61</p></li><li style="padding-left: 101pt;text-indent: -30pt;line-height: 11pt;text-align: left;"><p style="display: inline;">EJB Programming 63</p></li><li style="padding-left: 101pt;text-indent: -30pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Deployment Descriptors 67</p></li><li style="padding-left: 101pt;text-indent: -30pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Responsibilities of the EJB Container 69</p></li><li style="padding-left: 101pt;text-indent: -30pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Some Thoughts 70</p></li></ol></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Message Brokers 71</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Business Process Orchestration 78</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Integration Architecture Issues 82</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Summary 87</p></li><li style="padding-left: 70pt;text-indent: -42pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Further Reading 88</p><ol id="l17"><li style="padding-left: 106pt;text-indent: -35pt;line-height: 11pt;text-align: left;"><p style="display: inline;">CORBA 88</p></li><li style="padding-left: 106pt;text-indent: -35pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Message-Oriented Middleware 88</p></li><li style="padding-left: 106pt;text-indent: -35pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Application Servers 89</p></li><li style="padding-left: 106pt;text-indent: -35pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Integration Middleware 89</p></li></ol></li></ol></li><li style="padding-top: 11pt;padding-left: 28pt;text-indent: -13pt;text-align: left;"><h3 style="display: inline;"><a name="a8">A Software Architecture Process 91</a></h3><ol id="l18"><li style="padding-left: 71pt;text-indent: -42pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Process Outline 91</p><ol id="l19"><li style="padding-left: 102pt;text-indent: -31pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Determine Architectural Requirements 92</p></li><li style="padding-left: 102pt;text-indent: -31pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Identifying Architecture Requirements 93</p></li><li style="padding-left: 102pt;text-indent: -31pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Prioritizing Architecture Requirements 94</p></li></ol></li><li style="padding-left: 71pt;text-indent: -42pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Architecture Design 95</p><ol id="l20"><li style="padding-left: 102pt;text-indent: -31pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Choosing the Architecture Framework 97</p></li><li style="padding-left: 102pt;text-indent: -31pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Allocate Components 106</p></li></ol></li><li style="padding-left: 71pt;text-indent: -42pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Validation 108</p><ol id="l21"><li style="padding-left: 102pt;text-indent: -31pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Using Scenarios 109</p></li><li style="padding-left: 102pt;text-indent: -31pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Prototyping 112</p></li></ol></li><li style="padding-left: 71pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Summary and Further Reading 113</p></li></ol></li><li style="padding-top: 11pt;padding-left: 28pt;text-indent: -13pt;text-align: left;"><h3 style="display: inline;"><a name="a9">Documenting a Software Architecture 115</a></h3><ol id="l22"><li style="padding-left: 71pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Introduction 115</p></li><li style="padding-left: 71pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">What to Document 116</p></li></ol></li></ol><p style="padding-left: 28pt;text-indent: 0pt;text-align: left;">6.3 UML 2.0 117</p><ol id="l23"><ol id="l24"><li style="padding-left: 71pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Architecture Views 119</p></li><li style="padding-left: 71pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">More on Component Diagrams 122</p></li><li style="padding-left: 71pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Architecture Documentation Template 125</p></li><li style="padding-left: 71pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Summary and Further Reading 126</p></li></ol><li style="padding-top: 11pt;padding-left: 28pt;text-indent: -13pt;text-align: left;"><h3 style="display: inline;"><a name="a10">Case Study Design 129</a></h3></li></ol><ol id="l25"><ol id="l26"><li style="padding-left: 71pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Overview 129</p></li><li style="padding-left: 71pt;text-indent: -42pt;line-height: 11pt;text-align: left;"><p style="display: inline;">ICDE Technical Issues 129</p><ol id="l27"><li style="padding-left: 102pt;text-indent: -31pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Large Data 129</p></li><li style="padding-left: 102pt;text-indent: -31pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Notification 131</p></li><li style="padding-left: 102pt;text-indent: -31pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Data Abstraction 132</p></li><li style="padding-left: 102pt;text-indent: -31pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Platform and Distribution Issues 132</p></li><li style="padding-left: 102pt;text-indent: -31pt;line-height: 11pt;text-align: left;"><p style="display: inline;">API Issues 132</p></li><li style="padding-left: 102pt;text-indent: -31pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Discussion. 133</p></li></ol></li><li style="padding-left: 71pt;text-indent: -42pt;line-height: 11pt;text-align: left;"><p style="display: inline;">ICDE Architecture Requirements 134</p><ol id="l28"><li style="padding-left: 102pt;text-indent: -31pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Overview of Key Objectives 134</p></li><li style="padding-left: 102pt;text-indent: -31pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Architecture Use Cases 134</p></li><li style="padding-left: 102pt;text-indent: -31pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Stakeholder Architectural Requirements 135</p></li><li style="padding-left: 102pt;text-indent: -31pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Constraints 137</p></li><li style="padding-left: 102pt;text-indent: -31pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Non-functional Requirements 137</p></li><li style="padding-left: 102pt;text-indent: -31pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Risks 138</p></li></ol></li><li style="padding-left: 71pt;text-indent: -42pt;line-height: 11pt;text-align: left;"><p style="display: inline;">ICDE Solution 138</p><ol id="l29"><li style="padding-left: 102pt;text-indent: -31pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Relevant Architectural Patterns 138</p></li><li style="padding-left: 102pt;text-indent: -31pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Architecture Overview 138</p></li><li style="padding-left: 102pt;text-indent: -31pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Structural Views 139</p></li><li style="padding-left: 102pt;text-indent: -31pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Behavioral Views 143</p></li><li style="padding-top: 10pt;padding-left: 101pt;text-indent: -30pt;text-align: left;"><p style="display: inline;">Implementation Issues 146</p></li></ol></li><li style="padding-left: 70pt;text-indent: -42pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Architecture Analysis 147</p><ol id="l30"><li style="padding-left: 101pt;text-indent: -30pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Scenario Analysis 147</p></li><li style="padding-left: 101pt;text-indent: -30pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Risks 148</p></li></ol></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Summary 148</p></li></ol><li style="padding-top: 11pt;padding-left: 28pt;text-indent: -13pt;text-align: left;"><h3 style="display: inline;"><a name="a11">Looking Forward 149</a></h3><ol id="l31"><li style="padding-left: 70pt;text-indent: -42pt;line-height: 11pt;text-align: left;"><p style="display: inline;">The Challenges of Complexity 149</p><ol id="l32"><li style="padding-left: 101pt;text-indent: -30pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Business Process Complexity 150</p></li><li style="padding-left: 101pt;text-indent: -30pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Agility 151</p></li><li style="padding-left: 101pt;text-indent: -30pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Reduced Costs 152</p></li></ol></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">What Next?. 154</p></li></ol></li><li style="padding-top: 11pt;padding-left: 28pt;text-indent: -13pt;text-align: left;"><h3 style="display: inline;"><a name="a12">Software Product Lines 155</a></h3><ol id="l33"><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Product Lines for ICDE. 155</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Software Product Lines 156</p></li><li style="padding-left: 70pt;text-indent: -42pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Benefiting from SPL Development 158</p><ol id="l34"><li style="padding-left: 101pt;text-indent: -30pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Product Lines for ICDE 160</p></li></ol></li><li style="padding-left: 70pt;text-indent: -42pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Product Line Architecture 160</p><ol id="l35"><li style="padding-left: 101pt;text-indent: -30pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Reuse Mechanisms 161</p></li><li style="padding-left: 101pt;text-indent: -30pt;line-height: 11pt;text-align: left;"><p style="display: inline;">SCM for Reuse 163</p></li><li style="padding-left: 101pt;text-indent: -30pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Variation Mechanisms 164</p></li><li style="padding-left: 101pt;text-indent: -30pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Product Line Architecture for ICDE. 166</p></li></ol></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Adopting Software Product Line Development 166</p><ol id="l36"><li style="padding-left: 101pt;text-indent: -31pt;text-align: left;"><p style="display: inline;">Starting Points for Adopting SPL Development 167</p></li></ol></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Product Line Adoption Practice Areas 169</p><ol id="l37"><li style="padding-left: 101pt;text-indent: -30pt;text-align: left;"><p style="display: inline;">Product Line Adoption for ICDE 170</p></li></ol></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Ongoing Software Product Line Development 170</p><ol id="l38"><li style="padding-left: 101pt;text-indent: -30pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Change Control 171</p></li><li style="padding-left: 101pt;text-indent: -30pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Architectural Evolution for SPL Development 173</p></li><li style="padding-left: 101pt;text-indent: -30pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Product Line Development Practice Areas 174</p></li><li style="padding-left: 101pt;text-indent: -30pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Product Lines with ICDE 174</p></li></ol></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Conclusions 176</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Further Reading 177</p></li></ol></li><li style="padding-top: 11pt;padding-left: 28pt;text-indent: -13pt;text-align: left;"><h3 style="display: inline;"><a name="a13">Aspect Oriented Architectures 179</a></h3><ol id="l39"><li style="padding-left: 71pt;text-indent: -42pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Aspects for ICDE Development 179</p><ol id="l40"><li style="padding-left: 106pt;text-indent: -35pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Introduction to Aspect-Oriented Programming 180</p></li><li style="padding-left: 106pt;text-indent: -35pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Crosscutting Concerns 181</p></li><li style="padding-left: 106pt;text-indent: -35pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Managing Concerns with Aspects 181</p></li><li style="padding-left: 106pt;text-indent: -35pt;line-height: 11pt;text-align: left;"><p style="display: inline;">AOP Syntax and Programming Model 182</p></li><li style="padding-left: 106pt;text-indent: -35pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Weaving 184</p></li><li style="padding-left: 106pt;text-indent: -35pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Example of a Cache Aspect 185</p></li></ol></li><li style="padding-top: 10pt;padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Aspect-Oriented Architectures 186</p><ol id="l41"><li style="padding-left: 106pt;text-indent: -36pt;text-align: left;"><p style="display: inline;">Architectural Aspects and Middleware. 187</p></li></ol></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">State-of-the-Art 188</p><ol id="l42"><li style="padding-left: 106pt;text-indent: -36pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Aspect Oriented Modeling in UML 188</p></li><li style="padding-left: 106pt;text-indent: -36pt;line-height: 11pt;text-align: left;"><p style="display: inline;">AOP Tools 189</p></li><li style="padding-left: 106pt;text-indent: -36pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Annotations and AOP 189</p></li></ol></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Performance Monitoring of ICDE with AspectWerkz 190</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Conclusions 194</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Futhur Reading 195</p></li></ol></li><li style="padding-top: 11pt;padding-left: 27pt;text-indent: -13pt;text-align: left;"><h3 style="display: inline;"><a name="a14">Model-Driven Architecture 197</a></h3><ol id="l43"><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Model-Driven Development for ICDE 197</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">What is MDA 199</p></li><li style="padding-left: 70pt;text-indent: -42pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Why MDA? 202</p><ol id="l44"><li style="padding-left: 106pt;text-indent: -36pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Portability 203</p></li><li style="padding-left: 106pt;text-indent: -36pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Interoperability 203</p></li><li style="padding-left: 106pt;text-indent: -36pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Reusability 204</p></li></ol></li><li style="padding-left: 70pt;text-indent: -42pt;line-height: 11pt;text-align: left;"><p style="display: inline;">State-of-Art Practices and Tools 205</p><ol id="l45"><li style="padding-left: 106pt;text-indent: -36pt;line-height: 11pt;text-align: left;"><p style="display: inline;">AndroMDA. 205</p></li><li style="padding-left: 106pt;text-indent: -36pt;line-height: 11pt;text-align: left;"><p style="display: inline;">ArcStyler 206</p></li><li style="padding-left: 106pt;text-indent: -36pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Eclipse Modelling Framework (EMF) 206</p></li></ol></li><li style="padding-left: 70pt;text-indent: -42pt;line-height: 11pt;text-align: left;"><p style="display: inline;">MDA and Software Architecture 207</p><ol id="l46"><li style="padding-left: 70pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><p style="display: inline;">MDA and Non-Functional Requirements 208</p></li><li style="padding-left: 70pt;text-indent: 0pt;text-align: left;"><p style="display: inline;">Model Transformation and Software Architecture...208 11.5.3 SOA and MDA 209</p><p style="padding-left: 70pt;text-indent: 0pt;line-height: 11pt;text-align: left;">11.5.4 Analytical Models are Models too 210</p></li></ol></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">MDA for ICDE Capacity Planning 211</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Summary and Further Reading 214</p></li></ol></li><li style="padding-top: 11pt;padding-left: 27pt;text-indent: -13pt;text-align: left;"><h3 style="display: inline;"><a name="a15">Service-Oriented Architectures and Technologies 217</a></h3><ol id="l47"><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Service-Oriented Architecture for ICDE 217</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Background 218</p></li><li style="padding-left: 70pt;text-indent: -42pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Service-Oriented Systems 219</p><ol id="l48"><li style="padding-left: 106pt;text-indent: -36pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Boundaries are Explicit 222</p></li><li style="padding-left: 106pt;text-indent: -36pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Services are Autonomous 223</p></li><li style="padding-left: 106pt;text-indent: -36pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Share Schemas and Contracts, not Implementations 224</p></li><li style="padding-left: 106pt;text-indent: -36pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Service Compatibility is Based on Policy 224</p></li></ol></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Web Services 225</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">SOAP and Messaging 227</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">UDDI, WSDL and Metadata 230</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Security, Transactions and Reliability 232</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Web Services and the Future of Middleware 233</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">ICDE with Web Services 234</p><p style="text-indent: 0pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_004.png"/></span></p><p class="s7" style="padding-top: 4pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">XVIII Contents</p></li><li style="padding-top: 16pt;padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Conclusion and Further Reading 236</p></li></ol></li><li style="padding-top: 12pt;padding-left: 28pt;text-indent: -13pt;text-align: left;"><h3 style="display: inline;"><a name="a16">The Semantic Web 239</a></h3><ol id="l49"><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">ICDE and the Semantic Web 239</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Adaptive, Automated, and Distributed 240</p></li><li style="padding-left: 70pt;text-indent: -42pt;line-height: 11pt;text-align: left;"><p style="display: inline;">The Semantic Web 241</p><ol id="l50"><li style="padding-left: 106pt;text-indent: -35pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Metadata 241</p></li><li style="padding-left: 106pt;text-indent: -35pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Semantics 244</p></li></ol></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Ontologies in ICDE 246</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Semantic Web Services 248</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Cautious Optimism 249</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Further Reading 251</p></li></ol></li><li style="padding-top: 11pt;padding-left: 28pt;text-indent: -13pt;text-align: left;"><h3 style="display: inline;"><a name="a17">Software Agents: An Architectural Perspective 253</a></h3><ol id="l51"><li style="padding-left: 71pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Agents in the ICDE Environment 253</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">What is an Agent? 253</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Abstraction Revisited 257</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">An Example Agent Technology 258</p></li><li style="padding-left: 70pt;text-indent: -42pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Architectural Implications 264</p><ol id="l52"><li style="padding-left: 106pt;text-indent: -35pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Concurrency 264</p></li><li style="padding-left: 106pt;text-indent: -35pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Scalability 264</p></li><li style="padding-left: 106pt;text-indent: -35pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Mobility 266</p></li></ol></li><li style="padding-left: 71pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Agent Technologies 267</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Conclusions 267</p></li><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Further Reading 268</p></li></ol></li><li style="padding-top: 11pt;padding-left: 28pt;text-indent: -13pt;text-align: left;"><h3 style="display: inline;"><a name="a18">Concluding Thoughts 271</a></h3><ol id="l53"><li style="padding-left: 70pt;text-indent: -42pt;text-align: left;"><p style="display: inline;">Challenges 271</p><ol id="l54"><li style="padding-left: 106pt;text-indent: -36pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Architecture Knowledge Management 271</p></li><li style="padding-left: 106pt;text-indent: -35pt;line-height: 11pt;text-align: left;"><p style="display: inline;">Adaptive Architectures 273</p></li></ol></li></ol></li></ol><h1 style="padding-top: 4pt;padding-left: 15pt;text-indent: 0pt;text-align: left;"><a name="a19">1 Understanding Software Architecture</a></h1><p style="text-indent: 0pt;text-align: left;"><br/></p><h2 style="padding-left: 15pt;text-indent: 0pt;text-align: left;"><a name="a20">1.1 What is Software Architecture?</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">The last decade has seen a tremendous rise in the prominence of a software engineering sub-discipline known as software architecture. <i>Technical Ar- chitects </i>and <i>Chief Architects </i>are job titles that now abound in the software industry. There’s a Worldwide Institute of Software Architects<span class="s14">1</span>, and even a certain well-known wealthiest person on earth has architect in his job title. It can’t be a bad gig, then?</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">I have a sneaking suspicion that “architecture” is one of the most over- used and least understood terms in professional software development cir- cles. I hear it regularly misused in such diverse forums as project reviews and discussions, academic paper presentations at conferences and product pitches. You know a term is gradually becoming vacuous when it becomes part of the vernacular of the software industry sales force.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">This book is about software architecture. Its aim is to concisely describe the essential elements of knowledge and key skills that are required to be a software architect in the software and information technology (IT) indus- try. Conciseness is a key objective. For this reason, by no means every- thing an architect needs to know will be covered. If you want or need to know more, each chapter will point you to additional worthy and useful re- sources that can lead to far greater illumination.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">So, without further ado, let’s try and figure out what, at least I think, software architecture really is. The remainder of this chapter will address this question, as well as briefly introducing the major tasks of an architect, and the relationship between architecture and technology in IT applica- tions.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_005.png"/></span></p><p style="padding-top: 4pt;padding-left: 15pt;text-indent: 0pt;text-align: left;"><a href="http://www.wwisa.org/" style=" color: black; font-family:&quot;Times New Roman&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 3pt;" target="_blank">1 </a><a href="http://www.wwisa.org/" target="_blank">http://www.wwisa.org/</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l55"><ol id="l56"><li style="padding-top: 5pt;padding-left: 42pt;text-indent: -27pt;text-align: justify;"><h2 style="display: inline;"><a name="a21">Definitions of Software Architecture</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">Trying to define a term such as software architecture is always a poten- tially dangerous activity. There really is no widely accepted definition by the industry. To understand the diversity in views, have a browse through the list maintained by the Software Engineering Institute<span class="s14">2</span>. There’s a lot. Reading these reminds me of an anonymous quote I heard on a satirical ra- dio program recently, which went something along the lines of ‘the reason academic debate is so vigorous is that there is so little at stake’.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">I’ve no intention of adding to this debate. Instead, let’s examine three definitions. As an IEEE member, I of course naturally start with the defini- tion adopted by my professional body:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s11" style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">“Architecture is defined by the recommended practice as the fundamental organization of a system, embodied in its components, their relationships to each other and the environment, and the principles governing its design and evolution.”</p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">[ANSI/IEEE Std 1471-2000<i>, Recommended Practice for Architectural De- scription of Software-Intensive Systems]</i></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">This lays the foundations for an understanding of the discipline. Archi- tecture captures system structure in terms of components and how they in- teract. It also defines system-wide design rules and considers how a system may change.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Next, it’s always worth getting the latest perspective from some of the leading thinkers in the field.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s11" style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">“The software architecture of a program or computing system is the struc- ture or structures of the system, which comprise software elements, the ex- ternally visible properties of those elements, and the relationships among them.”</p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">[L.Bass, P.Clements, R.Kazman<i>, Software Architecture in Practice (2nd edition), </i>Addison-Wesley 2003]</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">This builds somewhat on the above ANSI/IEEE definition, especially as it makes the role of abstraction (i.e. externally visible properties) in an ar- chitecture and multiple architecture views (structures of the system) ex- plicit. Compare this with another, from Garlan and Shaw’s early influential work:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_006.png"/></span></p><p style="padding-top: 4pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;"><a href="http://www.sei.cmu.edu/architecture/definitions.html" style=" color: black; font-family:&quot;Times New Roman&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 3pt;" target="_blank">2 </a><a href="http://www.sei.cmu.edu/architecture/definitions.html" target="_blank">http://www.sei.cmu.edu/architecture/definitions.html</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s11" style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">“[Software architecture goes] beyond the algorithms and data structures of the computation; designing and specifying the overall system structure emerges as a new kind of problem. Structural issues include gross organi- zation and global control structure; protocols for communication, syn- chronization, and data access; assignment of functionality to design ele- ments; physical distribution; composition of design elements; scaling and performance; and selection among design alternatives.”</p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">[D. Garlan, M. Shaw, <i>An Introduction to Software Architecture, </i>Advances in Software Engineering and Knowledge Engineering, Volume I, World Scientific, 1993]</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">It’s interesting to look at these, as there is much commonality. I include the third mainly as it’s again explicit about certain issues, such as scalabil- ity and distribution, which are implicit in the first two. Regardless, analyz- ing these a little makes it possible to draw out some of the fundamental characteristics of software architectures. These, along with some key ap- proaches, are described below.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l57"><li style="padding-left: 49pt;text-indent: -33pt;text-align: justify;"><p class="s12" style="display: inline;"><a name="a22">Architecture Defines Structure</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">Much of an architect’s time is concerned with how to sensibly partition an application into a set of inter-related components, modules, objects or whatever unit of software partitioning works for you<span class="s14">3</span>. Different applica- tion requirements and constraints will define the precise meaning of “sen- sibly” in the previous sentence – an architecture must be designed to meet the specific requirements and constraints of the application it is intended for.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">For example, a requirement for an information management system may be that the application is distributed across multiple sites, and a constraint is that certain functionality and data must reside at each site. Or, an appli- cation’s functionality must be accessible from a web browser. Both these impose some structural constraints (site-specific, web server hosted), and simultaneously open up avenues for considerable design creativity in parti- tioning functionality across a collection of related components.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">In partitioning an application, the architect assigns responsibilities to each constituent component. These responsibilities define the tasks a com- ponent can be relied upon to perform within the application. In this man-</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_007.png"/></span></p><p class="s6" style="padding-top: 4pt;padding-left: 22pt;text-indent: -6pt;text-align: justify;"><span class="s14">3 </span>Component <span class="s7">here and in the remainder of this book is used very loosely to mean a recognizable “chunk” of software, and not in the sense of the more strict defini- tion in </span>Szyperski C. (1998) Component Software: Beyond Object-Oriented Pro- gramming, Addison-Wesley</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">ner, each component plays a specific role in the application, and the over- all component ensemble that comprises the architecture collaborates to provide the required functionality.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Responsibility-driven design (see <i>Wirfs-Brock </i>in Further Reading) is a technique from object-orientation that can be used effectively to help de- fine the key components in an architecture. It provides a method based on informal tools and techniques that emphasize behavioral modeling using objects, responsibilities and collaborations. I’ve found this extremely help- ful in past projects for structuring components at an architectural level.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="182" height="167" alt="image" src="Image_008.png"/></span></p><p style="padding-top: 5pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">C1 C2 C3 C4</p><p style="padding-top: 5pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">C1 C2</p><p style="padding-top: 5pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">C3 C4</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 89pt;text-indent: 0pt;text-align: center;">AL</p><p style="padding-top: 10pt;padding-left: 46pt;text-indent: 0pt;line-height: 106%;text-align: left;">Third Party Component</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="38" height="39" alt="image" src="Image_009.png"/></span></p><p class="s15" style="padding-left: 23pt;text-indent: 0pt;text-align: justify;">Four components are directly dependent on a third party component. If the third party component is replaced with a new component with a differ-</p><p class="s15" style="padding-left: 23pt;text-indent: 0pt;line-height: 10pt;text-align: justify;">ent interface, changes to each <span class="s16">C</span></p><p class="s15" style="padding-left: 23pt;text-indent: 0pt;text-align: justify;">component are likely. </p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="204" height="212" alt="image" src="Image_010.png"/></span></p><p class="s15" style="padding-top: 7pt;padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Diagram Key </p><p class="s15" style="padding-left: 13pt;text-indent: 10pt;text-align: left;"> Component </p><p class="s15" style="padding-left: 24pt;text-indent: 0pt;line-height: 10pt;text-align: left;"> </p><p class="s15" style="padding-left: 24pt;text-indent: 0pt;line-height: 10pt;text-align: left;"> </p><p style="text-indent: 0pt;text-align: left;"><span><img width="45" height="8" alt="image" src="Image_011.png"/></span></p><p class="s15" style="padding-left: 13pt;text-indent: 10pt;text-align: left;"> Dependency </p><p style="padding-top: 5pt;padding-left: 10pt;text-indent: 0pt;text-align: left;">Third Party Component</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s15" style="padding-left: 4pt;text-indent: 0pt;text-align: justify;">Only the AL (abstractio m- ponent is directly dependent on the third party component. If the third party component is replaced, changes are restricted to the AL component only </p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-top: 5pt;padding-left: 77pt;text-indent: 0pt;text-align: left;">Fig. 1. <span class="s7">Two examples of component dependencies</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">A key structural issue for nearly all applications is minimizing depend- encies between components, creating a loosely coupled architecture from a set of highly cohesive components. A dependency exists between compo- nents when a change in one potentially forces a change in others. By eliminating unnecessary dependencies, changes are localized and do not propagate throughout an architecture (see Fig. 1).</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Excessive dependencies are simply a bad thing. They make it difficult to make changes to systems, more expensive to test changes, they increase build times, and they make concurrent, team-based development harder.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 5pt;padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a23">Architecture Specifies Component Communication</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">When an application is divided into a set of components, it becomes neces- sary to think about how these components communicate data and control information. The components in an application may exist in the same ad- dress space, and communicate via straightforward method calls. They may execute in different threads or processes, and communicate through syn- chronization mechanisms. Or multiple components may need to be simul- taneously informed when an event occurs in the application’s environment. There are many possibilities.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">A body of work known collectively as architectural patterns or styles<span class="s14">4 </span>has catalogued a number of successfully used structures that facilitate cer- tain kinds of component communication [see <i>Patterns </i>in Further Reading]. These patterns are essentially reusable architectural blueprints that de- scribe the structure and interaction between collections of participating components.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Each pattern has well-known characteristics that make it appropriate to use to satisfy particular types of requirements. For example, the client- server pattern has several useful characteristics, such as synchronous re- quest-reply communications from client to server, and servers supporting one or more clients through a published interface. Optionally, clients may establish sessions with servers, which may maintain state about their con- nected clients. Client-server architectures must also provide a mechanism for clients to locate servers, handle errors, and optionally provide security on server access. All these issues are addressed in the client-server archi- tecture pattern.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The power of architecture patterns stems from their utility, and ability to convey design information. Patterns are proven to work. If used appropri- ately in an architecture, you leverage existing design knowledge by using patterns.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Large systems tend to use multiple patterns, combined in ways that sat- isfy the architecture requirements. When an architecture is based around patterns, it also becomes easy for team members to understand a design, as the pattern infers component structure, communications and abstract mechanisms that must be provided. When someone tells me their system is based on a three-tier client-server architecture, I know immediately a con- siderable amount about their design. This is a very powerful communica- tion mechanism indeed.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_012.png"/></span></p><p class="s14" style="padding-top: 4pt;padding-left: 22pt;text-indent: -6pt;text-align: justify;">4 <span class="s7">Patterns and styles are essentially the same thing, but as a leading software archi- tecture author told me recently, “the patterns people won”. This book will there- fore use patterns instead of styles!</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 5pt;padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a24">Architecture Addresses Non-functional Requirements</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">Non-functional requirements are the ones that don’t appear in use cases. Rather than define <i>what </i>the application does, they are concerned with <i>how </i>the application provides the required functionality.</p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;">There are three distinct areas of non-functional requirements:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></li></ol></ol></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Technical constraints: <span class="p">These will be familiar to everyone. They con- strain design options by specifying certain technologies that the applica- tion must use. “We only have Java developers, so we must develop in Java.” “The existing database runs on Windows XP only.” These are usually non-negotiable.</span></h3></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Business constraints: <span class="p">These too constraint design options, but for business, not technical reasons. For example, “In order to widen our po- tential customer base, we must interface with XYZ tools.” Another ex- ample is “The supplier of our middleware has raised prices prohibi- tively, so we’re moving to an open source version.” Most of the time, these too are non-negotiable.</span></h3></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Quality attributes <span class="p">These define an application’s requirements in terms of scalability, availability, ease of change, portability, usability, per- formance, and so on. Quality attributes address issues of concern to ap- plication users, as well as other stakeholders like the project team itself or the project sponsor. Chapter 3 discusses quality attributes in some de- tail.</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">An application architecture must therefore explicitly address these as- pects of the design. Architects need to understand the functional require- ments, and create a platform that supports these and simultaneously satis- fies the non-functional requirements.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l58"><ol id="l59"><ol id="l60"><li style="padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a25">Architecture is an Abstraction</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">One of the most useful, but often non-existent, descriptions from an archi- tectural perspective is something that is colloquially known as a <i>marketec- ture</i>. This is one page, typically informal depiction of the system’s struc- ture and interactions. It shows the major components, their relationships and has a few well chosen labels and text boxes that portray the design philosophies embodied in the architecture. A <i>marketecture </i>is an excellent vehicle for facilitating discussion by stakeholders during design, build, re- view, and of course the sales process. It’s easy to understand and explain, and serves as a starting point for deeper analysis.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 10pt;text-align: justify;">A thoughtfully crafted <i>marketecture </i>is particularly useful because it is an abstract description of the application. In reality, any architectural de- scription must employ abstraction in order to be understandable by the team members and project stakeholders. This means that unnecessary de- tails are suppressed or ignored in order to focus attention and analysis on the salient architectural issues. This is typically done by describing the components in the architecture as black boxes, specifying only their <i>exter- nally visible properties</i>. Of course, describing system structure and behav- ior as collections of communicating black box abstractions is normal for practitioners who use object-oriented design techniques.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">One of the most powerful mechanisms for describing an architecture is hierarchical decomposition. Components that appear in one level of de- scription are decomposed in more detail in accompanying design docu- mentation. As an example, Fig. 2 depicts a very simple two level hierarchy using an informal notation, with two of the components in the top-level diagram decomposed further.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Different levels of description in the hierarchy tend to be of interest to different developers in a project. In Fig. 2 it’s likely that the three compo- nents in the top level description will be designed and built by different teams working on the application. The architecture clearly partitions the responsibilities of each team, defining the dependencies between them.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">In this hypothetical example, the architect has refined the design of two of the components, presumably because some non-functional requirements dictate that further definition is necessary. Perhaps an existing security service must be used, or the <i>Broker </i>must provide a specific message rout- ing function requiring a directory service that has a known level of throughput. Regardless, this further refinement creates a structure that de- fines and constrains the detailed design of these components.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The simple architecture in Fig. 2 doesn’t decompose the <i>Client </i>compo- nent. This is, again presumably, because the internal structure and behavior of the client is not significant in achieving the application’s overall non- functional requirements. How the <i>Client </i>gets the information that is sent to the <i>Broker </i>is not an issue that concerns the architect, and consequently the detailed design is left open to the component’s development team. Of course, the <i>Client </i>component could possibly be the most complex in the application. It might have an internal architecture defined by its design team, which meets specific quality goals for the <i>Client </i>component. These are, however, localized concerns. It’s not necessary for the architect to complicate the application architecture with such issues, as they can be safely left to the <i>Client </i>design team to resolve.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="400" height="295" alt="image" src="Image_013.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="31" height="31" alt="image" src="Image_014.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="23" height="8" alt="image" src="Image_015.png"/></span></p><p class="s17" style="padding-top: 5pt;padding-left: 28pt;text-indent: 0pt;text-align: left;">Top Level Architecture Description</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 28pt;text-indent: 0pt;text-align: left;"><a name="a26">Client Broker Server</a></h3><p class="s15" style="padding-top: 4pt;padding-left: 38pt;text-indent: 0pt;text-align: left;">Diagram Key</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s18" style="padding-left: 38pt;text-indent: -10pt;line-height: 242%;text-align: left;">C <span class="s15">Component Dependency</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 33pt;text-indent: 0pt;line-height: 106%;text-align: left;">Message Handler</h4><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 20pt;text-indent: 0pt;line-height: 106%;text-align: left;">Directory Server</h4><h4 style="padding-top: 5pt;padding-left: 39pt;text-indent: 0pt;line-height: 106%;text-align: left;">Security Server</h4><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 33pt;text-indent: 0pt;line-height: 106%;text-align: left;">Request Handler</h4><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 32pt;text-indent: 0pt;line-height: 106%;text-align: left;">Data Store</h4><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-top: 5pt;padding-left: 80pt;text-indent: 0pt;text-align: left;">Fig. 2. <span class="s7">Describing an architecture hierarchically</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a27">Architecture Views</a></p></li></ol></ol></ol><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">A software architecture represents a complex design artifact. Not surpris- ingly then, like most complex artifacts, there are a number of ways of looking at and understanding an architecture. The term “architecture views” rose to prominence in Philippe Krutchen’s 1995<span class="s14">5 </span>paper on the <i>4+1 View Model</i>. This presented a way of describing and understanding an ar- chitecture based on the following four views:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Logical view: <span class="p">This describes the architecturally significant elements of the architecture and the relationships between them. The logical view essentially captures the structure of the application using class diagrams or equivalents.</span></h3></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Process view: <span class="p">This focuses on describing the concurrency and commu- nications elements of an architecture. In IT applications, the main con- cerns are describing multi-threaded or replicated components, and the synchronous or asynchronous communication mechanisms used.</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_016.png"/></span></p><p class="s19" style="padding-top: 3pt;padding-left: 21pt;text-indent: -6pt;text-align: justify;"><span class="s14">5 </span>P.Krutchen, <i>Architectural Blueprints–The &quot;4+1&quot; View Model of Software Architecture</i>, IEEE Software, 12(6) Nov. 1995.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 6pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Physical view: <span class="p">This depicts how the major processes and components are mapped on to the applications hardware. It might show, for example, how the database and web servers for an application are distributed across a number of server machines.</span></h3></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Development view: <span class="p">This captures the internal organization of the soft- ware components, typically as they are held in a development environ- ment or configuration management tool. For example, the depiction of a nested package and class hierarchy for a Java application would repre- sent the development view of an architecture.</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">These views are tied together by the architecturally significant use cases (often called scenarios). These basically capture the requirements for the architecture, and hence are related to more than one particular view. By working through the steps in a particular use case, the architecture can be “tested”, by explaining how the design elements in the architecture re- spond to the behavior required in the use case. We’ll explore how to do this ‘architecture testing’ in Chapter 5.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Since Krutchen’s paper, there’s been much thinking, experience and de- velopment in the area of architecture views. Mostly notably is the work from the SEI, colloquially known as the “Views and Beyond” approach (see Further Reading). This recommends capturing an architecture model using three different views:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Module: <span class="p">This is a structural view of the architecture, comprising the code modules such as classes, packages and subsystems in the design. It also captures module decomposition, inheritance, associations and ag- gregations.</span></h3></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Component and Connector: <span class="p">This view describes the behavioral as- pects of the architecture. Components are typically objects, threads or processes, and the connectors describe how the components interact. Common connectors are sockets, middleware like CORBA or shared memory.</span></h3></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Allocation: <span class="p">This view shows how the processes in the architecture are mapped to hardware, and how they communicate using networks and/or databases. It also captures a view of the source code in the configuration management systems, and who in the development group has responsi- bility for each modules.</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The terminology used in “Views and Beyond” is strongly influenced by the architecture description language (ADL) research community. This community has been influential in the world of software architecture, but</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">has had limited impact on mainstream information technology. So while this book will concentrate on two of these views, we’ll refer to them as the structural view and the behavioral view. Discerning readers should be able to work out the mapping between terminologies.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l61"><ol id="l62"><li style="padding-top: 10pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a28">What Does a Software Architect Do?</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">The environment that a software architect works in tends to define their exact roles and responsibilities. A good general description of the archi- tect’s role is maintained by the SEI on their web site<span class="s14">6</span>. Instead of summa- rizing this, I’ll briefly describe, in no particular order, four essential skills for a software architect, regardless of their professional environment.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Liaison: <span class="p">Architects play many liaison roles. They liaise between the customers or clients of the application and the technical team, often in conjunction with the business and requirements analysts. They liaise be- tween the various engineering teams on a project, as the architecture is central to each of these. They liaise with management, justifying de- signs, decisions and costs. They liaise with the sales force, to help pro- mote a system to potential purchasers or investors. Much of the time, this liaison takes the form of simply translating and explaining different terminology between different stakeholders.</span></h3></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Software Engineering: <span class="p">Excellent design skills are what get a software engineer to the position of architect. They are an essential pre-requisite for the role. More broadly though, architects must promote good soft- ware engineering practices. Their designs must be adequately docu- mented and communicated and their plans must be explicit and justified. They must understand the downstream impact of their decisions, work- ing appropriately with the application testing, documentation and re- lease teams.</span></h3></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Technology Knowledge: <span class="p">Architects have a deep understanding of the technology domains that are relevant to the types of applications they work on. They are influential in evaluating and choosing third party components and technologies. They track technology developments, and understand how new standards, features and products might be usefully exploited in their projects. Just as importantly, good architects know what they don’t know.</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_017.png"/></span></p><p style="padding-top: 4pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;"><a href="http://www.sei.cmu.edu/ata/arch_duties.html" style=" color: black; font-family:&quot;Times New Roman&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 3pt;" target="_blank">6 </a><a href="http://www.sei.cmu.edu/ata/arch_duties.html" target="_blank">http://www.sei.cmu.edu/ata/arch_duties.html</a></p><ol id="l63"><ol id="l64"><li style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 184pt;text-indent: -16pt;text-align: left;"><p class="s7" style="display: inline;">Architectures and Technologies 11</p></li></ol></ol><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_018.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Risk Management <span class="p">Good architects tend to be cautious. They are con- stantly enumerating and evaluating the risks associated with the design and technology choices they make. They document and manage these risks in conjunction with project sponsors and management. They de- velop and instigate risk mitigation strategies, and communicate these to the relevant engineering teams. They try to make sure no unexpected disasters occur.</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Look for these skills in the architects you work with or hire. Architects play a central role in software development, and must be multi-skilled in software engineering, technology, management and communications.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l65"><ol id="l66"><li style="padding-top: 10pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a29">Architectures and Technologies</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">Architects must make design decisions early in a project lifecycle. Many of these are difficult, if not impossible, to validate and test until parts of the system are actually built. Judicious prototyping of key architectural components can help increase confidence in a design approach, but some- times it’s still hard to be certain of the success of a particular design choice in a given application context.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Due to the difficulty of validating early design decisions, architects sen- sibly rely on tried and tested approaches for solving certain classes of problems. This is one of the great values of architectural patterns. They enable architects to reduce risk by leveraging successful designs with known engineering attributes.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Patterns are an abstract representation of an architecture, in the sense that they can be realized in multiple concrete forms. For example, the pub- lish-subscribe architecture pattern describes an abstract mechanism for loosely coupled, many-to-many communications between publishers of messages and subscribers who wish to receive messages. It doesn’t how- ever specify how publications and subscriptions are managed, what com- munication protocols are used, what types of messages can be sent, and so on. These are all considered implementation details.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Unfortunately, abstract descriptions of architectures don’t yet execute on computers, either directly or through rigorous transformation. Until they do, abstract architectures must be reified by software engineers as concrete software implementations.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Fortunately, software products vendors have come to the rescue. Widely utilized architectural patterns are supported in a variety of commercial off- the-shelf (COTS) technologies. If a design calls for publish-subscribe mes-</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">saging, or a message broker, or a three-tier architecture, then the choices of available technology are many and varied indeed. This is an example of software technologies providing reusable, application-independent soft- ware infrastructures that implement proven architectural approaches.</p><p class="s21" style="padding-top: 4pt;padding-left: 89pt;text-indent: 0pt;text-align: center;">Abstract </p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="423" height="159" alt="image" src="Image_019.png"/></span></p><h3 style="padding-top: 5pt;padding-left: 103pt;text-indent: 0pt;text-align: left;"><a name="a30">Architectural Patterns/Styles</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 5pt;padding-left: 22pt;text-indent: 0pt;line-height: 108%;text-align: left;">Application Servers</h3><h3 style="padding-top: 5pt;padding-left: 13pt;text-indent: 0pt;line-height: 108%;text-align: left;">Messag- ing</h3><h3 style="padding-top: 5pt;padding-left: 12pt;text-indent: 0pt;line-height: 108%;text-align: left;">Message Brokers</h3><h3 style="padding-top: 5pt;padding-left: 17pt;text-indent: 0pt;line-height: 108%;text-align: left;">Object Brokers</h3><h3 style="padding-top: 5pt;padding-left: 13pt;text-indent: 0pt;line-height: 108%;text-align: left;">Process Orchestration</h3><p class="s21" style="padding-top: 5pt;padding-left: 134pt;text-indent: 0pt;text-align: left;">Concrete COTS technologies </p><h4 style="padding-top: 7pt;padding-left: 18pt;text-indent: 0pt;text-align: left;">Fig. 3. <span class="s7">Mapping between logical architectural patterns and concrete technologies</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">As Fig. 3 depicts, several classes of COTS technologies are used in practice to provide packaged implementations of architectural patterns for use in IT systems. Within each class, competing commercial and open source products exist. Although these products are superficially similar, they will have differing feature sets, be implemented differently and have varying constraints on their use.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Architects are somewhat simultaneously blessed and cursed with this diversity of product choice. Competition between product vendors drives innovation, better feature sets and implementations, and lower prices, but it also places a burden on the architect to select a product that has quality at- tributes that satisfy the application requirements. All applications are dif- ferent in some ways, and there is rarely, if ever, a <i>one-size-fits-all </i>product match. Different COTS technology implementations have different sets of strengths and weaknesses and costs, and consequently will be better suited to some types of applications than others.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The difficulty for architects is in understanding these strengths and weaknesses early in the development cycle for a project, and choosing an appropriate reification of the architectural patterns they need. Unfortu- nately, this is not an easy task, and the risks and costs associated with se- lecting an inappropriate technology are high. The history of the software industry is littered with poor choices and subsequent failed projects.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Chapter 4 provides a detailed description and analysis of these infra- structural technologies.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 5pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a31">Summary</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">Software architecture is a fairly well defined and understood design disci- pline. However, just because we know what it is and more or less what needs doing, this doesn’t mean it’s mechanical or easy. Designing and validating an architecture for a complex system is a creative exercise, re- quiring considerable knowledge, experience and discipline. The difficulties are exacerbated by the early lifecycle nature of much of the work of an ar- chitect. To my mind, the following quote from Philippe Krutchen sums up an architect’s role perfectly:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">“<i>The life of a software architect is a long (and sometimes painful) succes- sion of sub-optimal decisions made partly in the dark”</i></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The remainder of this book will describe methods and techniques that can help you to shed at least some light on architectural design decisions. Much of this light comes from understanding and leveraging design prin- ciples and supporting technologies that have proven to work in the past. Armed with this knowledge, you’ll be able to tackle complex architecture problems with more confidence, and after a while, perhaps even a little pa- nache.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a32">Further Reading</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">There are lots of good books, reports and papers available in the software architecture world. Below are some I’d especially recommend. These ex- pand on the information and messages covered in this chapter.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l67"><li style="padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a33">General Architecture</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">In terms of defining the landscape of software architecture, and describing their project experiences, mostly with defense projects, it’s difficult to go past the following books from members of the Software Engineering Insti- tute.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">L. Bass, P. Clements, R Kazman. Software Architecture in Practice, Second Edition. Addison-Wesley, 2003.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">P. Clements, F. Bachmann, L. Bass, D. Garlan, J. Ivers, R. Little, R. Nord, J. Stafford. <i>Documenting Software Architectures: Views and Be- yond. </i>Addison-Wesley, 2002.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">P. Clements, R. Kazman, M. Klein. <i>Evaluating Software Architectures: Methods and Case Studies. </i>Addison-Wesley, 2002.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">For a description of the ‘Decomposition Style’, see <i>Documenting Soft- ware Architecture</i>, page 53. And for an excellent discussion of the <i>uses </i>re- lationship and its implications, see the same book, page 68.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a34">Architecture Requirements</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">The original book describing use-cases is:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l68"><li style="padding-left: 14pt;text-indent: 10pt;text-align: justify;"><p style="display: inline;">Jacobson, M. Christerson, P. Jonsson, G. Overgaard<i>. Object-Oriented Software Engineering: A Use Case Driven Approach. </i>Addison-Wesley, 1992.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Responsibility-driven design is an incredibly useful technique for allo- cating functionality to components and sub-systems in an architecture. The following should be compulsory reading for architects.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">R. Wirfs-Brock, A. McKean. Object Design: Roles, Responsibilities, and Collaborations. Addison-Wesley, 2002.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></li><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a35">Architecture Patterns</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">There’s a number of fine books on architecture patterns. Buschmann’s work is an excellent introduction.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">F. Buschmann, R. Meunier, H. Rohnert, P. Sommerlad, M. Stal,. <i>Pat- tern-Oriented Software Architecture, Volume 1: A System of Patterns. </i>John Wiley &amp; Sons, 1996.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">D. Schmidt, M. Stal, H. Rohnert, F. Buschmann. <i>Pattern-Oriented Soft- ware Architecture, Volume 2, Patterns for Concurrent and Networked Ob- jects. </i>John Wiley &amp; Sons, 2000.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Two recent books that focus more on patterns for enterprise systems, especially enterprise application integrations, are well worth a read.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">M. Fowler. Patterns of Enterprise Application Architecture. Addison- Wesley, 2002.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">G. Hohpe, B. Woolf. Enterprise Integration Patterns: Designing, Build- ing, and Deploying Messaging Solutions. Addison-Wesley, 2003</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 5pt;padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a36">Technology Comparisons</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">A number of papers that emerged from the Middleware Technology Evaluation (MTE) project give a good introduction into the issues and complexities of technology comparisons.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">P.Tran, J.Gosper, I.Gorton. <i>Evaluating the Sustained Performance of COTS-based Messaging Systems</i>. in Software Testing, Verification and Reliability, vol 13, pp 229-240, Wiley and Sons, 2003.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">I.Gorton, A Liu. <i>Performance Evaluation of Alternative Component Ar- chitectures for Enterprise JavaBean Applications, </i>in IEEE Internet Com- puting, vol.7, no. 3, pages 18-23, 2003.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">A.Liu, I. Gorton. <i>Accelerating COTS Middleware Technology Acquisi- tion: the i-MATE Process. </i>in IEEE Software, pages 72-79,volume 20, no. 2, March/April 2003.</p></li></ol></li></ol><li style="padding-top: 4pt;padding-left: 28pt;text-indent: -13pt;text-align: left;"><h1 style="display: inline;"><a name="a37">Introducing the Case Study</a></h1></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l69"><ol id="l70"><li style="padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a38">Requirements Overview</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">This chapter introduces a case study that will be used in subsequent chap- ters to illustrate some of the design principles in this book<span class="s14">7</span>. The Informa- tion Capture and Dissemination Environment (ICDE) is part of a suite of software systems for providing intelligent assistance to professionals such as financial analysts, scientific researchers and intelligence analysts. To this end, ICDE automatically captures and stores data that records a range of actions performed by a user when operating a workstation. For example, when a user performs a Google search, the ICDE system will transparently store in a database:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">the search query string</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">copies of the web pages returned by Google that the user displays in their browser</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">This data can be used subsequently retrieved from the ICDE database and used by third-party software tools that attempt to offer intelligent help to the user. These tools might interpret a sequence of user inputs, and try to find additional information to help the user with their current task. Other tools may crawl the links in the returned search results that the user does not click on, attempting to find potentially useful details that the user over- looks.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">A use case diagram for the ICDE system is shown in Fig. 4. The three major use cases incorporate the capture of user actions, the querying of</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_020.png"/></span></p><p class="s14" style="padding-top: 4pt;padding-left: 22pt;text-indent: -6pt;text-align: justify;">7 <span class="s7">The case study project is based on an actual system that is operational at the time of writing. Some creative license has been exploited to simplify the functional requirements, so that these don’t overwhelm the reader with unnecessary detail. Also, the events, technical details and context described do not always conform to reality, as reality can be far too messy for illustration purposes.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">data from the data store, and the interaction of the third party tools with the user.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="282" height="308" alt="image" src="Image_021.png"/></span></p><p class="s22" style="padding-top: 4pt;padding-left: 68pt;text-indent: 0pt;text-align: center;">ICDE</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s23" style="padding-top: 4pt;text-indent: 0pt;text-align: right;">*</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s23" style="padding-left: 14pt;text-indent: 0pt;line-height: 6pt;text-align: right;">Analyst</p><p class="s23" style="text-indent: 0pt;line-height: 6pt;text-align: right;">*</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s23" style="padding-left: 65pt;text-indent: -8pt;line-height: 7pt;text-align: left;">Capture User Actions</p><p class="s23" style="padding-left: 30pt;text-indent: 0pt;line-height: 4pt;text-align: left;">*</p><p class="s23" style="text-indent: 0pt;line-height: 6pt;text-align: center;">*</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s23" style="text-indent: 0pt;line-height: 7pt;text-align: left;">*</p><p style="text-indent: 0pt;text-align: left;"/><p class="s23" style="padding-top: 4pt;padding-left: 118pt;text-indent: 0pt;text-align: center;">*</p><p class="s23" style="padding-top: 2pt;padding-left: 153pt;text-indent: 0pt;text-align: left;">User Assistance <span class="s24">*</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s25" style="padding-top: 4pt;padding-left: 164pt;text-indent: 0pt;text-align: left;">* <span class="s23">Data Store</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s23" style="padding-top: 4pt;padding-left: 94pt;text-indent: 0pt;text-align: left;">* *</p><p class="s23" style="padding-top: 2pt;padding-left: 71pt;text-indent: 0pt;line-height: 7pt;text-align: center;">Query User Actions</p><p class="s23" style="padding-left: 100pt;text-indent: 0pt;text-align: left;">* <span class="s26">*</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s23" style="padding-top: 4pt;padding-left: 61pt;text-indent: 0pt;text-align: left;">3rd Party Tools</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-top: 5pt;padding-left: 113pt;text-indent: 0pt;text-align: left;">Fig. 4. <span class="s7">ICDE system use cases</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l71"><ol id="l72"><li style="padding-top: 8pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a39">Project Context</a></h2></li></ol></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">Few real projects are green-field efforts, allowing the design team to start with a clean and mostly unconstrained piece of paper. The ICDE system certainly isn’t one of these.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">An initial production version (v1.0) of ICDE was implemented by a small development team. Their main aim was to implement the <i>Capture User Actions </i>use case. This allowed several low-level technical issues to be solved, and forced the design and implementation of the data store to be carried out. This was important as the data store was an integral part of the rest of the system’s functionality, and its design had to be suitable to sup- port a fairly high transaction rate.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">ICDE v1.0 was only deployed in a small user trial involving a few users. This deployment successfully tested the software functionality and demon-</p><ol id="l73"><ol id="l74"><li style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 244pt;text-indent: -16pt;text-align: left;"><p class="s7" style="display: inline;">Project Context 19</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_022.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">strated the concepts of data capture and storage. The design of v1.0 was based upon a simple 2-tier architecture, with all components executing on the user’s workstation. This design is shown as a UML v1.X component diagram in Fig. 5. The collection and analysis components were written in Java and access the data store directly using the JDBC<span class="s14">8 </span>API. The complete ICDE application executed on Microsoft Windows XP.</p><p style="padding-left: 68pt;text-indent: 0pt;text-align: left;"><span><img width="291" height="260" alt="image" src="Image_023.gif"/></span></p><h4 style="padding-top: 4pt;padding-left: 78pt;text-indent: 0pt;text-align: left;">Fig. 5. <span class="s7">ICDE Version 1.0 application architecture</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;">The role of each component is as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;"><b>Data Collection: </b>The collection component comprises a number of loosely coupled processes that transparently track the user’s relevant ac- tivities and store them in the <i>Data Store</i>. The captured events relate to Internet accesses, documents that are opened and browsed, edits made to documents, and some basic windowing information about when the user opens and closes applications on the desktop.</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Data Store: <span class="p">This component comprises a commercial-off-the-shelf (COTS) relational database. The relational database stores information in various tables regarding the user activities, with timestamps added so that the order of events can be reconstructed. Large objects such as im- ages on web pages and binary documents are stored as Binary Large Object Fields (BLOBS) using the native database facilities.</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_024.png"/></span></p><p class="s14" style="padding-top: 4pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">8 <span class="s7">Java Database Connectivity</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 6pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Data Analysis<span class="p">: A graphical user interface (GUI) based tool supports a set of queries on the data store. This was useful for testing purposes, and to give the third party tool creators an initial look at the data that was being captured, and was hence available to them for analysis.</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l75"><ol id="l76"><li style="padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a40">Business Goals</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">ICDE v2.0 had much more ambitious aims. Having proven that the system worked well in trial deployments, the project sponsors had two major business objectives for the next version. These were:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></li><li style="padding-left: 31pt;text-indent: -16pt;text-align: left;"><p style="display: inline;">Encourage third party tool developers to write applications for the ICDE system.</p></li><li style="padding-top: 1pt;padding-left: 31pt;text-indent: -16pt;text-align: left;"><p style="display: inline;">Promote the ICDE concept and tools to potential customers, in order to enhance their analytical working environment.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Clearly, both these objectives are focused on fostering a growing busi- ness around the ICDE technology, by creating an attractive market for third party tools and an advanced advisory environment for users. Achiev- ing these goals requires detailed technical and business plans to be drawn up and followed through. From a purely technical perspective, leaving out such activities as sales and marketing, the following major objectives were identified – see Table 1:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 105pt;text-indent: 0pt;text-align: left;">Table 1. <span class="s7">ICDE v2.0 business goals</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:21.694pt" cellspacing="0"><tr style="height:11pt"><td style="width:113pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 28pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Business Goal</p></td><td style="width:187pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 29pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Supporting Technical Objective</p></td></tr><tr style="height:22pt"><td style="width:113pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Encourage third party tool</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">developers</p></td><td style="width:187pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Simple and reliable programmatic access to</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">data store for third party tools</p></td></tr><tr style="height:22pt"><td style="width:113pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:187pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Heterogeneous (i.e. non-Windows) platform</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">support for running third party tools</p></td></tr><tr style="height:22pt"><td style="width:113pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:187pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Allow third party tools to communicate with</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">ICDE users from a remote machine</p></td></tr><tr style="height:33pt"><td style="width:113pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Promote the ICDE concept to users</p></td><td style="width:187pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Scale the data collection and data store com- ponents to support up to 150 users at a single</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">site</p></td></tr><tr style="height:22pt"><td style="width:113pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:187pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Low-cost deployment for each ICDE user</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">workstation</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">In order to attract third party tool developers, it is essential that the envi- ronment has a powerful and easy-to-use application programming interface (API) that could be accessed from Windows as well as Linux and Unix</p><p class="s7" style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 250pt;text-indent: 0pt;text-align: left;">2.5 Summary 21</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_025.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">platforms. This would give tool developers flexibility in choosing their de- ployment platform, and make porting existing tools simpler. Surveys of existing tools also raised the issue that powerful analytical tools might re- quire high-end cluster machines to run on. Hence they’d need the capabil- ity to communicate with ICDE deployments over local (and eventually wide) area networks.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Another survey of likely ICDE clients showed that potential user or- ganizations had groups of 10 to 150 analysts. It was consequently impor- tant that the software could be easily scaled to support such numbers. There should also be no inherent design features that inhibit the technology from supporting larger deployments which may appear in the future.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Equally important, to keep the base cost of a deployment as low as pos- sible, expensive COTS technologies should be avoided wherever possible. This in turn will make the product more attractive in terms of price for cli- ents.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l77"><ol id="l78"><li style="padding-top: 9pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a41">Constraints</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">A time horizon of twelve months was set for ICDE v2.0. An interim re- lease after six months was planned to expose tool developers to the API, and allow them to develop their tools at the same time that ICDE v2.0 was being productized and enhanced.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">As well as having a fixed schedule, the development budget was also fixed. This meant the development resources available would constrain the features that could be included in the v2.0 release. These budget con- straints also influence the possible implementation choices, given that the number of developers, their skills and time available was essentially fixed.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 10pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a42">Summary</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">The ICDE application makes an interesting case study. It requires the ar- chitecture of an existing application to be extended and enhanced to create a platform for new features and capabilities. Time and budget constraints restrict the possible options. Certainly a redevelopment of the existing ICDE v1.0 is completely out of the question.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">In the next chapter, we’ll explore from a general perspective the spec- trum of architectural requirements that arise in projects like ICDE. These requirements are fundamental in driving the design of application architec-</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">tures, and a hence an understanding of their nature and complex trade-offs is a key part of an architect’s arsenal.</p></li></ol><li style="padding-top: 4pt;padding-left: 28pt;text-indent: -13pt;text-align: left;"><h1 style="display: inline;"><a name="a43">Software Quality Attributes</a></h1></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l79"><ol id="l80"><li style="padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a44">Quality Attributes</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">Much of a software architect’s life is spent designing software systems to meet a set of quality attribute requirements. General software quality at- tributes include scalability, security, performance and reliability. These are often informally called an application’s “-ilities” (though of course many, like performance, don’t quite fit this lexical specification).</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Quality attribute requirements are part of an application’s non- functional requirements, which capture the many facets of <i>how </i>the func- tional requirements of an application are achieved. All but the most trivial application will have non-functional requirements that can be expressed in terms of quality attribute requirements.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">To be meaningful, quality attribute requirements must be specific about how an application should achieve a given need. A common problem I regularly encounter in architectural documents is a general statement such as “The application must be scalable”.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">This is far too imprecise and really not much use to anyone. As is dis- cussed later in this chapter, scalability requirements are many and varied, and each relates to different application characteristics. So, must this hypo- thetical application scale to handle increased simultaneous user connec- tions? Or increased data volumes? Or deployment to a larger user base? Or all of these?</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Defining which of these scalability measures must be supported by the system is crucial from an architectural perspective, as solutions for each differ. It’s vital therefore to define concrete quality attribute requirements, such as:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s11" style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">“It must be possible to scale the deployment from an initial 100 geo- graphically dispersed user desktops to 10,000 without an increase in ef- fort/cost for installation and configuration.”</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">This is precise and meaningful. As an architect, this points me down a path to a set of solutions and concrete technologies that facilitate zero- effort installation and deployment.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Note however, that many quality attributes are actually somewhat diffi- cult to validate and test. In this example, it’d be unlikely that in testing for the initial release, a test case would install and configure the application on 10,000 desktops. I just can’t see a project manager signing off on that test somehow.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">This is where common sense and experience come in. The adopted solu- tion must obviously function for the initial 100-user deployment. Based on the exact mechanisms used in the solution (perhaps Internet download, corporate desktop management software, etc), we can then only analyze it to the best of our ability to assess whether the concrete scalability require- ment can be met. If there are no obvious flaws or issues, it’s probably safe to assume the solution will scale. But will it scale to 10,000? As always with software, there’s only one way to be absolutely, 100% sure, as “it is all talk until the code runs<i>”</i>. <span class="s29">9</span></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">There are many general quality attributes, and describing them all in de- tail could alone fill a book or two. What follows is a description of some of the most relevant quality attributes for general IT applications, and some discussion on architectural mechanisms that are widely used to provide the required quality attributes. These will give you a good place to start when thinking about the qualities an application that you’re working on must possess.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 10pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a45">Performance</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">Although for many IT applications, performance is not a really big prob- lem, it gets all the spotlight in the crowded quality attribute community. I suspect this is because it is one of the qualities of an application that can often be readily quantified and validated. Whatever the reason, when per- formance matters, it <i>really </i>does matter. Applications that perform poorly in some critical aspect of their behavior often become road kill on the software engineering highway.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">A performance quality requirement defines a metric that states the amount of work an application must perform in a given time, and/or dead- lines that must be met for correct operation. Few IT applications have <i>hard real-time </i>constraints like those found in military or robotics systems,</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_026.png"/></span></p><p class="s14" style="padding-top: 4pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">9 <span class="s7">Ward Cunningham at his finest!</span></p><p class="s7" style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 239pt;text-indent: 0pt;text-align: left;">3.2 Performance 25</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_027.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">where if some output is produced a millisecond or three too late, really nasty and undesirable things can happen (I’ll let the reader use their imagi- nation here). But applications needing to process hundreds, sometimes thousands and tens of thousands of transactions every second are found in many large organizations, especially in the worlds of finance, telecommu- nications and government.</p><p style="padding-left: 26pt;text-indent: 0pt;line-height: 11pt;text-align: left;">Performance usually manifests itself in the following measures.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l81"><li style="padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a46">Throughput</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">Throughput is a measure of the amount of work an application must per- form in unit time. Work is typically measured in transactions per second (tps), or messages processed per second (mps). For example, an on-line banking application might have to guarantee it can execute 1000 transac- tions per second from Internet banking customers. An inventory manage- ment system for a large warehouse might need to process 50 messages per second from trading partners.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">It’s important to understand precisely what is meant by a throughput re- quirement. Is it average throughput over a given time period (e.g. a busi- ness day), or peak throughput? This is a crucial distinction.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">A stark illustration of this is an application for placing bets on events such as horse racing. For most of the time, an application of this ilk does very little work, and hence has a low and easily achievable average throughput requirement. However, every time there is a racing event, per- haps every evening, the five or so minute period before each race sees hundreds of bets being placed every second. If the application is not able to process these bets as they are placed, then the business loses money, and users become very disgruntled (and denying gamblers the opportunity to lose money is not a good thing for anyone). Hence for this scenario, the application must be designed to meet anticipated <i>peak </i>throughput, not av- erage. In fact, supporting only average throughput would likely be a disas- ter.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a47">Response Time</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">This is a measure of the latency an application exhibits in processing a business transaction. Response time is most often (but not exclusively) as- sociated with the time an application takes to respond to some input. A rapid response time allows users to work more effectively, and conse- quently is good for business. An excellent example is a point-of-sale appli- cation supporting a large store. When an item is scanned at the checkout, a</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">fast, second or less response from the system with the item’s price means a customer can be served quickly. This makes the customer and the store happy, and that’s a good thing for all involved stakeholders.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Again, it’s often important to distinguish between guaranteed and aver- age response times. Some applications may need <i>all </i>requests to be ser- viced within a specified time limit. This is a guaranteed response time. Others may specify an average response time, allowing larger latencies when the application is extremely busy. It’s also widespread in the latter case for an upper bound response time requirement to be specified. For ex- ample, 95% of all requests must be processed in less than four seconds, and no requests must take more than 15 seconds.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a48">Deadlines</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">Everyone has probably heard of the weather forecasting system that took 36 hours to produce the forecast for the next day! I’m not sure if this is apocryphal, but it’s an excellent example of the requirement to meet a per- formance deadline. Deadlines in the IT world are commonly associated with batch systems. A social security payment system must complete in time to deposit claimant’s payments in their accounts on a given day. If it finishes late, claimants don’t get paid when they expect, and this can cause severe disruptions and pain, and not just for claimants. In general, any ap- plication that has a limited window of time to complete will have a per- formance deadline requirement.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">These three performance attributes can all be clearly specified and vali- dated. Still, there’s a common pitfall to avoid. It lies in the definition of a transaction, request or message, all of which are used very imprecisely in the above. Essentially this is the definition of an application’s workload. The amount of processing required for a given business transaction is an <i>application specific </i>measure. Even within an application, there will likely be many different types of requests or transactions, varying perhaps from fast database read operations, to complex updates to multiple distributed databases.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Simply, there is no generic workload measure, it depends entirely on what work the application is doing. So, when agreeing to meet a given per- formance measure, be precise about the exact workload or <i>transaction mix</i>, defined in application-specific terms, that you’re signing up for.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 5pt;padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a49">Performance for the ICDE System</a></p></li></ol></li></ol></ol><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">Performance in the ICDE system is an important quality attribute. The key performance requirement pertains to the interactive nature of ICDE. As user’s perform their work tasks, the client portion of the ICDE application traps key actions and sends these to the ICDE server for storage. It is consequently exteremely important that ICDE users don’t experience any delays in using their applications while the ICDE software traps and stores events.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Trapping user and application generated events in the GUI relies on exploiting platform-specifc system API calls. The APIs provide hooks into the underlying GUI and operating system event handling mechanisms. Implementing this functionality is an ICDE client application concern, and hence it is the responsibility of the ICDE client team to ensure this is carried out as efficiently and fast as possible.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Once an event is trapped, the ICDE client must call the server to store the event in the data store. It’s vital therefore that this operation does not contribute any delay that the user might experience. For this reason, when an event is detected, it is written to an in-memory queue in the ICDE client. Once the event is in the queue, the event detection thread returns and waits to capture the next event. Another thread pulls events from the queue and calls the ICDE server.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">This solution within the ICDE client decouples event capture and storage. A delayed write to the server cannot delay the GUI code. From the ICDE server’s perspective, this is crucial. The server must be designed to store events in the data store as quickly as possible. But the design can be guaranteed that there will only ever be one client request per user workstation outstanding at any instant.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">So for the ICDE server, its key performance requirements were easy to specify. It should provide sub-second average response times to ICDE client requests.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l82"><ol id="l83"><li style="padding-top: 10pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a50">Scalability</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;">Let’s start with a representative definition of scalability<span class="s14">10</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s11" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">“How well a solution to some problem will work when the size of the prob- lem increases.”</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_028.png"/></span></p><p class="s14" style="padding-top: 4pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">10 <a href="http://www.hyperdictionary.com/" class="a" target="_blank">From </a><a href="http://www.hyperdictionary.com/" target="_blank">www.hyperdictionary.com</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">This is useful in an architectural context. It tells us that scalability is about how a design can cope with some aspect of the application’s re- quirements increasing in size. To become a concrete quality attribute re- quirement, we need to understand exactly what is expected to get bigger. Here are some examples:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l84"><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a51">Request Load</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: right;">Based on some defined mix of requests on a given hardware platform, an architecture for a server application may be designed to support 100 tps at peak load, with an average one second response time. If this request load were to grow by ten times, can the architecture support this increased load? In the perfect world and without additional hardware capacity, as the load increases, application throughput should remain constant (i.e. 100 tps), and response time per request should increase only linearly (i.e. 10 seconds). A scalable solution will then permit additional processing capac- ity to be deployed to increase throughput and decrease response time. This additional capacity may be deployed in two different ways, one adding more CPUs<span class="s14">11 </span>(and likely memory) to the machine the applications runs on (scale up), the other from distributing the application on multiple machines</p><p style="padding-left: 14pt;text-indent: 0pt;text-align: left;">(scale out). This is illustrated in Fig. 6.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Scale up works well if an application is multi-threaded, or multiple sin- gle threaded process instances can be executed together on the same ma- chine. The latter will of course consume additional memory and associated resources, as processes are heavyweight, resource hungry vehicles for achieving concurrency.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Scale out works well if there is little or ideally no additional work re- quired managing the distribution of requests amongst the multiple ma- chines. The aim is to keep each machine equally busy, as the investment in more hardware is wasted if one machine is fully loaded and others idle away. Distributing load evenly amongst multiple machines is known as load-balancing.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Importantly, for either approach, scalability should be achieved without modifications to the underlying architecture (apart from inevitable con- figuration changes if multiple servers are used). In reality, as load in- creases, applications will exhibit a decrease in throughput and a subse- quent exponential increase in response time. This happens for two reasons. First, the increased load causes increased contention for resources such as CPU and memory by the processes and threads in the server architecture.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_029.png"/></span></p><p class="s14" style="padding-top: 4pt;padding-left: 25pt;text-indent: -10pt;text-align: left;">11 <span class="s7">Adding faster CPUs is never a bad idea either. This is especially true if an appli- cation has components or calculations that are inherently single-threaded.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">Second, each request consumes some additional resource (buffer space, locks, and so on) in the application, and eventually this resource becomes exhausted and limits scalability.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="96" height="103" alt="image" src="Image_030.png"/></span></p><p class="s30" style="padding-top: 5pt;padding-left: 82pt;text-indent: 0pt;text-align: left;">Scale-out: Application replicated on different </p><p class="s31" style="padding-left: 46pt;text-indent: 0pt;text-align: left;">             <span class="s19">     </span><span class="s30">machines </span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-left: 26pt;text-indent: 0pt;text-align: left;">Application</p><p class="s30" style="padding-top: 4pt;padding-left: 25pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Scale-up:  </p><p style="text-indent: 0pt;text-align: left;"><span><img width="187" height="293" alt="image" src="Image_031.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="92" height="67" alt="image" src="Image_032.png"/></span></p><p class="s30" style="padding-left: 25pt;text-indent: 0pt;text-align: justify;">Single application in- stance is executed on a multiprocessor machine </p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-top: 5pt;padding-left: 27pt;text-indent: 0pt;text-align: left;">Application</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s19" style="padding-left: 6pt;text-indent: 0pt;line-height: 5pt;text-align: left;">CPU</p><p style="padding-left: 284pt;text-indent: 0pt;line-height: 8pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="191" height="103" alt="image" src="Image_033.png"/></span></p><p class="s7" style="padding-top: 5pt;padding-left: 22pt;text-indent: 0pt;text-align: left;">Application</p><p class="s7" style="padding-top: 5pt;padding-left: 22pt;text-indent: 0pt;text-align: left;">Application</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-left: 22pt;text-indent: 0pt;text-align: left;">Application</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-top: 5pt;padding-left: 110pt;text-indent: 0pt;text-align: left;">Fig. 6. <span class="s7">Scale out versus scale up</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">As an illustration, Fig. 7 shows how six different versions of the same application implemented using different J2EE application servers perform as their load increases from 100 to 1000 clients.<span class="s14">12</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a52">Simultaneous Connections</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">An architecture may be designed to support 1000 concurrent users. How does the architecture respond if this number grows significantly? If a con-</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_034.png"/></span></p><p class="s7" style="padding-top: 4pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><span class="s14">12 </span>The full context for these figures is described in: I.Gorton, A Liu, <i>Performance Evaluation of Alternative Component Architectures for Enterprise JavaBean Applications, in IEEE Internet Computing, vol.7, no. 3, pages 18-23, 2003. </i>Bear in mind, these results are a snapshot in time and are meant for illustrative purposes. Absolutely no conclusions about the performance of the current ver- sions of these technologies can or should be drawn.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">nected user consumes some resources, then there will likely be a limit to the number of connections that can be effectively supported.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="405" height="219" alt="image" src="Image_035.png"/></span></p><p class="s32" style="padding-left: 42pt;text-indent: 0pt;text-align: left;">2500</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s32" style="padding-top: 1pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">WAS SB</p><p class="s32" style="padding-top: 2pt;padding-left: 24pt;text-indent: 0pt;line-height: 129%;text-align: left;">JBoss SB IAS SB SS SB WLS SB BES SB</p><p style="text-indent: 0pt;text-align: left;"/><p class="s32" style="padding-left: 42pt;text-indent: 0pt;text-align: left;">2000</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s33" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">TPS</p><p style="text-indent: 0pt;text-align: left;"/><p class="s32" style="padding-left: 42pt;text-indent: 0pt;text-align: left;">1500</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s32" style="padding-left: 42pt;text-indent: 0pt;text-align: left;">1000</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s32" style="padding-top: 4pt;padding-left: 47pt;text-indent: 0pt;text-align: left;">500</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s32" style="padding-top: 4pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">0</p><p class="s32" style="padding-top: 2pt;padding-left: 24pt;text-indent: 0pt;text-align: center;">0        200       400       600       800      1000   1200</p><p class="s33" style="padding-top: 4pt;padding-left: 16pt;text-indent: 0pt;text-align: center;">No. of Clients</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 5pt;padding-left: 44pt;text-indent: 0pt;text-align: left;">Fig. 7. <span class="s7">Effects of increasing client request load on J2EE platforms.</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">I encountered a classic example of this problem while performing an ar- chitecture review for an Internet Service Provider (ISP). Every time a user connected to the service, the ISP application spawned a new process on their server that was responsible for distributing targeted advertisements to the user. This worked beautifully, but each process consumed considerable memory and processing resources, even when the user simply connected and did nothing. Testing quickly revealed that the ISP’s server machines could only support about 2000 connections before their virtual memory was exhausted and the machines effectively ground to a halt in a disk thrashing frenzy. This made scaling the ISP’s operations to support 100,000 users a prohibitively expensive proposition, and eventually, de- spite frantic redesign efforts, this was a root cause of the ISP going out of business.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a53">Data Size</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">In a nutshell, how does an application behave as the data it processes in- creases in size? For example, a message broker application, perhaps a chat room, may be designed to process messages of an expected average size. How well will the architecture react if the size of messages grows signifi- cantly? In a slightly different vein, an information management solution may be designed to search and retrieve data from a repository of a speci-</p><p class="s7" style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 237pt;text-indent: 0pt;text-align: left;">3.4 Modifiability 31</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_036.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">fied size. How will the application behave if the size of the repository grows, in terms of raw size and/or number of items?</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 49pt;text-indent: -33pt;text-align: justify;"><p class="s12" style="display: inline;"><a name="a54">Deployment</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">How does the effort involved in deploying or modifying an application to an increasing user base grow? This would include effort for distribution, configuration and updating with new versions. An ideal solution would provide automated mechanisms that can dynamically deploy and configure an application to a new user, capturing registration information in the process. This is in fact exactly how many applications are today distributed on the Internet.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 49pt;text-indent: -33pt;text-align: justify;"><p class="s12" style="display: inline;"><a name="a55">Some Thoughts on Scalability</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">Designing scalable architectures is not easy. In many cases, the need for scalability early in the design just isn’t apparent and is not specified as part of the quality attribute requirements. It takes a savvy architect to ensure inherently non-scalable approaches are not introduced as core architectural components. Even if scalability is a required quality attribute, validating that it is satisfied by a proposed solution often just isn’t practical in terms of schedule or cost. That’s why its important for an architect to rely on tried and tested designs and technologies whenever practical.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 49pt;text-indent: -33pt;text-align: justify;"><p class="s12" style="display: inline;"><a name="a56">Scalability for the ICDE Application</a></p></li></ol></li></ol></ol><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">The major scalability requirement for the ICDE system is to support the number of users expected in the largest anticipated ICDE deployment. The requirements specify this as approximately 150 users. The ICDE server application should therefore be capable of handling a peak load of 150 concurrent requests from ICDE clients.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l85"><ol id="l86"><li style="padding-top: 10pt;padding-left: 42pt;text-indent: -27pt;text-align: justify;"><h2 style="display: inline;"><a name="a57">Modifiability</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">All capable software architects know that along with death and taxes, modifications to a software system during its lifetime are simply a fact of life. That’s why taking into account likely changes to the application is a good practice during architecture formulation. The more flexibility that</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">can be built into a design upfront, then the less painful and expensive sub- sequent changes will be. That’s the theory anyway.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The modifiability quality attribute is a measure of how easy it may be to change an application to cater for new functional and non-functional re- quirements. Note the use of “may” in the previous sentence. Predicting modifiability requires an <i>estimate </i>of effort and/or cost to make a change. You only know for sure what a change will cost after it has been made. Then you find out how good your estimate was.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Modifiability measures are only relevant in the context of a given archi- tectural solution. This solution must be expressed at least structurally as a collection of components, the component relationships and a description of how the components interact with the environment. Then, assessing modi- fiability requires the architect to assert likely change scenarios that capture how the requirements may evolve. Sometimes these will be known with a fair degree of certainty. In fact the changes may even be specified in the project plan for subsequent releases. Much of the time though, possible modifications will need to be elicited from application stakeholders, and drawn from the architect’s experience. There’s definitely an element of crystal ball gazing involved.</p><p style="padding-left: 25pt;text-indent: 0pt;text-align: left;">Illustrative change scenarios are:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></li><li style="padding-left: 31pt;text-indent: -16pt;text-align: left;"><p style="display: inline;">Provide access to the application through firewalls in addition to exist- ing “behind the firewall” access.</p></li><li style="padding-top: 1pt;padding-left: 31pt;text-indent: -16pt;text-align: left;"><p style="display: inline;">Incorporate new features for self-service check-out kiosks.</p></li><li style="padding-left: 31pt;text-indent: -16pt;text-align: left;"><p style="display: inline;">The COTS speech recognition software vendor goes out of business and we need to replace this component.</p></li><li style="padding-top: 1pt;padding-left: 31pt;text-indent: -16pt;text-align: left;"><p style="display: inline;">The application needs to be ported from Linux to the Microsoft Win- dows platform.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">For each change scenario, the impact of the anticipated change on the architecture can be assessed. This impact is rarely easy to quantify, as more often than not the solution under assessment does not exist. In many cases, the best that can be achieved is a convincing impact analysis of the components in the architecture that will need modification, or a demonstra- tion of how the solution can accommodate the modification without change.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Finally, based on cost, size or effort estimates for the affected compo- nents, some useful quantification of the cost of a change can be made. Changes isolated to single components or loosely-coupled subsystems are likely to be less expensive to make than those that cause ripple effects across the architecture. If a likely change appears difficult and complex to</p><ol id="l87"><ol id="l88"><li style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 272pt;text-indent: -16pt;text-align: left;"><p class="s7" style="display: inline;">Security 33</p></li></ol></ol><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_037.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;">make, this may highlight a weakness in the architecture that might justify further consideration and re-design.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 15pt;text-indent: 0pt;text-align: left;"><a name="a58">3.4.1 Modifiability for the ICDE Application</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">Modifiability for the ICDE application is a difficult one to specify. A likely requirement would be for the range of events trapped and stored by the ICDE client to be expanded. This would have implication on the design of both the ICDE cleint and the ICDE server and data store.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Another would be for third party tools to want to communicate new message types. This would have implications on the message exchange mechanisms that the ICDE server supported. Hence both these modifiability scenarios could be used to test the resulting design for ease of modification.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h2 style="padding-top: 10pt;padding-left: 15pt;text-indent: 0pt;text-align: left;"><a name="a59">3.5 Security</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">Security is a complex technical topic that can only be treated somewhat superficially here. At the architectural level, security boils down to under- standing the precise security requirements for an application, and devising mechanisms to support them. The most common security-related require- ments are:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: left;"><h3 style="display: inline;">Authentication: <span class="p">Applications can verify the identity of their users and other applications with which they communicate.</span></h3></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Authorization: <span class="p">Authenticated users and applications have defined ac- cess rights to the resources of the system. For example, some users may have read-only access to the application’s data, while others have read- write.</span></h3></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: left;"><h3 style="display: inline;">Encryption: <span class="p">The messages sent to/from the application are encrypted.</span></h3></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: left;"><h3 style="display: inline;">Integrity: <span class="p">This ensures the contents of a message are not altered in tran- sit.</span></h3></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Non-repudiation: <span class="p">The sender of a message has proof of delivery and the receiver is assured of the sender’s identity. This means neither can subsequently refute their participation in the message exchange.</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">There are well known and widely used technologies that support these elements of application security. The Secure Socket Layer (SSL) and Pub- lic Key Infrastructures (PKI) are commonly used in Internet applications to provide authentication, encryption and non-repudiation. Authentication</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">and authorization is supported in Java technologies using the Java Authen- tication and Authorization Service (JAAS). Operating systems and data- bases provide login-based security for authentication and authorization.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Hopefully you’re getting the picture. There are many ways, in fact sometimes too many, to support the required security attributes for an ap- plication. Databases want to impose their security model on the world.</p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">.NET designers happily leverage the Windows operating security features. Java applications can leverage JAAS without any great problems. If an ap- plication only needs to execute in one of these security domains, then solu- tions are readily available. If an application comprises several components that all wish to manage security, appropriate solutions must be designed that typically localize security management in a single component that lev- erages the most appropriate technology for satisfying the requirements.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 14pt;text-indent: 0pt;text-align: justify;"><a name="a60">3.5.1 Security for the ICDE Application</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">Authentication of ICDE users and third party ICDE tools is the main secu- rity requirements for the ICDE system. In v1.0, users supply a login name and password which is authenticated by the database. This gives them ac- cess to the data in the data store associated with their activities. ICDE v2.0 will need to support similar authentication for users, and extend this to handle third party tools. Also, as third party tools may be executing re- motely and access the ICDE data over an insecure network, the in-transit data should be encrypted.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l89"><ol id="l90"><li style="padding-left: 42pt;text-indent: -27pt;text-align: justify;"><h2 style="display: inline;"><a name="a61">Availability</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">Availability is related to an application’s reliability. If an application isn’t available for use when needed, then it’s unlikely to be fulfilling its func- tional requirements. Availability is relatively easy to specify and measure. In terms of specification, many IT applications must be available at least during normal business hours. Most Internet sites desire 100% availability, as there are no regular business hours on-line. For a live system, availabil- ity can be measured by the proportion of the required time it is useable.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Failures in applications cause them to be unavailable. Failures impact on an application’s reliability, which is usually measured by the mean time between failures. The length of time any period of unavailability lasts is determined by the amount of time it takes to detect failure and restart the system. Consequently, applications that require high availability minimize</p></li><li style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 262pt;text-indent: -16pt;text-align: left;"><p class="s7" style="display: inline;">Integration 35</p></li></ol></ol><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_038.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">or preferably eliminate single points of failure, and institute mechanisms that automatically detect failure and restart the failed components.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Replicating components is a tried and tested strategy for high availabil- ity. When a replicated component fails, the application can continue exe- cuting using replicas that are still functioning. This may lead to degraded performance while the failed component is down, but availability is not compromised.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Recoverability is closely related to availability. An application is recov- erable if it has the capability to reestablish required performance levels and recover affected data after an application or system failure. A database sys- tem is the classic example of a recoverable system. When a database server fails, it is unavailable until it has recovered. This means restarting the server application, and resolving any transactions that were in-flight when the failure occurred. Interesting issues for recoverable applications are how failures are detected and recovery commences (preferably automatically), and how long it takes to recover before full service is re-established. Dur- ing the recovery process, the application is unavailable, and hence the mean time to recover is an important metric to consider.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 15pt;text-indent: 0pt;text-align: left;"><a name="a62">3.6.1 Availability for the ICDE Application</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">While high availability for the ICDE application is desirable, it is only cru- cial that it be available during the business hours of the office environment it is deployed in. This leaves plenty of scope for downtime for such needs as system upgrade, backup and maintenance. The solution should however include mechanisms such as component replication to ensure as close to 100% availability as possible during business hours.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h2 style="padding-top: 10pt;padding-left: 15pt;text-indent: 0pt;text-align: left;"><a name="a63">3.7 Integration</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">Integration is concerned with the ease with which an application can be usefully incorporated into a broader application context. The value of an application or component can frequently be greatly increased if its func- tionality or data can be used in ways that the designer did not originally anticipate. The most widespread strategies for providing integration are through data integration or providing an application programming inter- face (API).</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Data integration involves storing the data an application manipulates in ways that other applications can access. This may be as simple as using a standard relational database for data storage, or perhaps implementing</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">mechanisms to extract the data into a known format such as XML or a comma-separated text file that other applications can ingest.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">With data integration, the ways in which the data is used (or abused) by other applications is pretty much out of control of the original data owner. This is because the data integrity and business rules imposed by the appli- cation logic are by-passed. The alternative is for interoperability to be achieved through an API (see Fig. 8). In this case, the raw data the applica- tion owns is hidden behind a set of functions that facilitate controlled ex- ternal access to the data. In this manner, business rules and security can be enforced in the API implementation. The only way to access the data and integrate with the application is by using the supplied API.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="385" height="152" alt="image" src="Image_039.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 6pt;text-indent: 0pt;text-align: left;">API</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The choice of integration strategy is not simple. Data integration is flexible and simple. Applications written in any language can process text, or access relational databases using SQL. Building an API requires more effort, but provides a much more controlled environment, in terms of cor- rectness and security, for integration. It is also much more robust from an integration perspective, as the API clients are insulated from many of the changes in the underlying data structures. They don’t break every time the format is modified, as the data formats are not directly exposed and ac- cessed. As always, the best choice of strategy depends on what you want to achieve, and what constraints exist.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 9pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">Application</p><p class="s6" style="padding-top: 5pt;padding-left: 34pt;text-indent: 0pt;line-height: 108%;text-align: left;">Interoperability through an API facade</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 8pt;padding-left: 14pt;text-indent: 0pt;text-align: right;">Data</p><p style="padding-top: 5pt;padding-left: 165pt;text-indent: 0pt;line-height: 106%;text-align: left;">Third Party Application</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s6" style="padding-left: 99pt;text-indent: 0pt;text-align: left;">Interoperability achieved by direct data access</p><h4 style="padding-top: 8pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">Fig. 8. <span class="s7">Integration options</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: left;"><a name="a64">3.7.1 Integration for the ICDE Application</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">The integration requirements for ICDE revolve around the need to support third party analysis tools. There must be a well-defined and understood mechanism for third party tools to access data in the ICDE data store. As third party tools will often execute remotely from an ICDE data store, in-</p><p class="s7" style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 195pt;text-indent: 0pt;text-align: left;">3.8 Other Quality Attributes 37</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_040.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">tegration at the data level, by allowing tools direct access to the data store, seems unlikely to be viable. Hence integration is likely to be facilitated through an API supported by the ICDE application.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l91"><ol id="l92"><li style="padding-top: 10pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a65">Other Quality Attributes</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">There are numerous other quality attributes that are important in various application contexts. Some of these are:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Portability: <span class="p">Can an application be easily executed on a different soft- ware/hardware platform to the one it has been developed for? Portability depends on the choices of software technology used to implement the application, and the characteristics of the platforms that it needs to exe- cute on. Easily portable code bases will have their platform dependen- cies isolated and encapsulated in a small set of components that can be replaced without affecting the rest of the application.</span></h3></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;"><b>Testability: </b>How easy or difficult is an application to test? Early design decisions can greatly affect the amount of test cases that are required. As a rule of thumb, the more complex a design, the more difficult it is to thoroughly test. Simplicity tends to promote ease of testing.<span class="s14">13</span><span class="s34"> </span>Likewise, writing less of your own code by incorporating pre-tested components reduces test effort.</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Supportability: <span class="p">This is a measure of how easy an application is to sup- port once it is deployed. Support typically involves diagnosing and fix- ing problems that occur during application use. Supportable systems tend to provide explicit facilities for diagnosis, such as application error logs that record the causes of failures. They are also built in a modular fashion so that code fixes can be deployed without severely inconven- iencing application use.</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_041.png"/></span></p><p class="s14" style="padding-top: 4pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;">13 <span class="s7">&quot;There are two ways of constructing a software design: One way is to make it so simple that there are obviously no deficiencies, and the other way is to make it so complicated that there are no obvious deficiencies. The first method is far more difficult.&quot;, C.A.R. Hoare</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l93"><ol id="l94"><li style="padding-top: 5pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a66">Design Trade-Offs</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">If an architect’s life were simple, design would merely involve building policies and mechanisms into an architecture to satisfy the required quality attributes for a given application. Pick a required quality attribute, and provide mechanisms to support it.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Unfortunately, this isn’t the case. Quality attributes are not orthogonal. They interact in subtle ways, meaning a design that satisfies one quality at- tribute requirement may have a detrimental effect on another. For example, a highly secure system may be difficult or impossible to integrate in an open environment. A highly available application may trade-off lower per- formance for greater availability. An application that requires high per- formance may be tied to a particular platform, and hence not be easily portable.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Understanding trade-offs between quality attribute requirements, and designing a solution that makes sensible compromises is one of the tough- est parts of the architect role. It’s simply not possible to fully satisfy all competing requirements. It’s the architect’s job to tease out these tensions, make them explicit to the system’s stakeholders, prioritize as necessary, and explicitly document the design decisions.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Does this sound easy? If only this were the case. That’s why they pay you the big bucks.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 10pt;padding-left: 41pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a67">Summary</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">Architects must expend a lot of effort precisely understanding quality at- tributes, so that a design can be conceived to address them. Part of the dif- ficultly is that quality attributes are not always explicitly stated in the re- quirements, or adequately captured by the requirements engineering team. That’s why an architect must be associated with the requirements gather- ing exercise for system, so that they can ask the right questions to expose and nail down the quality attributes that must be addressed.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Of course, understanding the quality attribute requirements is merely a necessary prerequisite to designing a solution to satisfy them. Conflicting quality attributes are a reality in every application of even mediocre com- plexity. Creating solutions that choose a point in the design space that ade- quately satisfies these requirements is remarkably difficult, both techni- cally and socially. The latter involves communications with stakeholders to discuss design tolerances, discovering scenarios when certain quality requirements can be safely relaxed, and clearly communicating design</p></li><li style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 242pt;text-indent: -21pt;text-align: left;"><p class="s7" style="display: inline;">Further Reading 39</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_042.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;">compromises so that the stakeholders understand what they are signing up for.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h2 style="padding-top: 10pt;padding-left: 15pt;text-indent: 0pt;text-align: left;"><a name="a68">3.11 Further Reading</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;">The broad topic of non-functional requirements is covered extremely thor- oughly in:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">L. Chung, B. Nixon, E. Yu, J. Mylopoulos, (Editors). Non-Functional Requirements in Software Engineering Series: The Kluwer International Series in Software Engineering. Vol. 5, Kluwer Academic Publishers. 1999.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">An excellent general reference on security and the techniques and tech- nologies an architect needs to consider is:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">J. Ramachandran. Designing Security Architecture Solutions. Wiley &amp; Sons, 2002.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">An interesting and practical approach to assessing the modifiability of an architecture using architecture reconstruction tools and impact analysis metrics is described in:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">I.Gorton, L. Zhu. <i>Tool Support for Just-in-Time Architecture Recon- struction and Evaluation: An Experience Report</i>. International Conference on Software Engineering (ICSE) 2005, St Loius, USA, ACM Press</p></li></ol><li style="padding-top: 4pt;padding-left: 35pt;text-indent: -20pt;line-height: 106%;text-align: left;"><h1 style="display: inline;"><a name="a69">A Guide to Middleware Architectures and Technologies</a></h1></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l95"><ol id="l96"><li style="padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a70">Introduction</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">I’m not really a great enthusiast for drawing strong analogies between the role of a software architect and that of a traditional building architect. There are similarities, but also lots of profound differences.<span class="s14">14 </span>But let’s ig- nore those differences for a second, in order to illustrate the role of mid- dleware in software architecture.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">When an architect designs a building, they create drawings, essentially a design that shows, from various angles, the structure and geometric prop- erties of the building. This design is based on the building’s requirements, such as the available space, function (office, church, shopping center, home), desired aesthetic and functional qualities and budget. These draw- ings are an abstract representation of the intended concrete (sic) artifact.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">There’s obviously an awful lot of design effort still required to turn the architectural drawings into something that people can actually start to build. There’s detailed design of walls, floor layouts, staircases, electrical systems, water and piping to name just a few. And as each of these ele- ments of a building is designed in detail, suitable materials and compo- nents for constructing each are selected.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">These materials and components are the basic construction blocks for buildings. They’ve been created so that they can fulfill the same essential needs in many types of buildings, whether they are office towers, railway stations or humble family homes.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Although perhaps it’s not the most glamorous analogy, I like to think of middleware as the equivalent of the plumbing or piping or wiring for soft- ware applications. The reasons are:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_043.png"/></span></p><p class="s7" style="padding-top: 4pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><span class="s14">14 </span>The following paper discusses of issues: J. Baragry and K. Reed. <i>Why We Need a Different View of Software Architecture. </i>The Working IEEE/IFIP Conference on Software Architecture (WICSA), Amsterdam, The Netherlands, 2001</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></li><li style="padding-top: 6pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Middleware provides proven ways to connect the various software com- ponents in an application so they can exchange information using rela- tively easy-to-use mechanisms. Middleware provides the pipes for ship- ping data between components, and can be used in a wide range of different application domains.</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Middleware can be used to wire together numerous components in use- ful, well-understood topologies. Connections can be one-to-one, one to many or many-to-many.</p></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">From the application user’s perspective, middleware is completely hid- den. Users interact with the application, and don’t care how information is exchanged internally. As long as it works, and works well, middle- ware is <i>invisible </i>infrastructure.</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">The only time application users are ever aware of the role middleware plays is when it fails. This is of course very like real plumbing and wir- ing systems!</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">It’s probably not wise to push the plumbing analogy any further. But hopefully it has served its purpose. Middleware provides ready-to-use in- frastructure for connecting software components. It can be used in a whole variety of different application domains, as it has been designed to be gen- eral and configurable to meet the common needs of software applications.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l97"><ol id="l98"><li style="padding-top: 10pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a71">Technology Classification</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">Middleware got its label because it was conceived as a layer of software “plumbing-like” infrastructure that sat between the application and the op- erating system, that is, the middle of application architectures. Of course in reality middleware is much more complex than plumbing or a simple layer insulating an application from the underlying operating system services.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Different application domains tend to regard different technologies as middleware. This book is about mainstream IT applications, and in that domain there’s a fairly well-understood collection that is typically known as middleware. Fig. 9 provides a classification of these technologies, and names some example products/technologies that represent each category. Brief explanations of the categories are below, and the remainder of this chapter then goes on to describe each in detail:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">The transport layer represents the basic pipes for sending requests and moving data between software components. These pipes provide simple</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 26pt;text-indent: 0pt;text-align: left;">facilities and mechanisms that make exchanging data straightforward in distributed application architectures.</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Application servers are typically built on top of the basic transport ser- vices. They provide additional capabilities such as transaction, security and directory services. They also support a programming model for building multi-threaded server-based applications that exploit these ad- ditional services.</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Message brokers exploit either a basic transport service and/or applica- tion servers and add a specialized message processing engine. This en- gine provides features for fast message transformation and high-level programming features for defining how to exchange, manipulate and route messages between the various components of an application.</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Business process orchestrators (BPOs) augment message broker features to support workflow-style applications. In such applications, business processes may take many hours or days to complete due to the need for people to perform certain tasks. BPOs provide the tools to describe such business processes, execute them and manage the intermediate states while each step in the process is executed.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse" cellspacing="0"><tr style="height:28pt"><td style="width:158pt;border-top-style:solid;border-top-width:1pt;border-top-color:#010101;border-left-style:solid;border-left-width:1pt;border-left-color:#010101;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#010101;border-right-style:solid;border-right-width:1pt;border-right-color:#010101" colspan="2"><p class="s35" style="padding-top: 3pt;padding-left: 19pt;text-indent: 0pt;text-align: left;">Business Process Orchestrators</p></td></tr><tr style="height:28pt"><td style="width:158pt;border-top-style:solid;border-top-width:1pt;border-top-color:#010101;border-left-style:solid;border-left-width:1pt;border-left-color:#010101;border-right-style:solid;border-right-width:1pt;border-right-color:#010101" colspan="2" bgcolor="#F0F0F0"><p class="s35" style="padding-top: 3pt;padding-left: 48pt;text-indent: 0pt;text-align: left;">Message Brokers</p></td></tr><tr style="height:28pt"><td style="width:135pt;border-top-style:solid;border-top-width:1pt;border-top-color:#010101;border-left-style:solid;border-left-width:1pt;border-left-color:#010101;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#010101;border-right-style:solid;border-right-width:1pt;border-right-color:#010101" bgcolor="#FFFFFF"><p class="s35" style="padding-top: 3pt;padding-left: 31pt;text-indent: 0pt;text-align: left;">Application Servers</p></td><td style="width:23pt;border-left-style:solid;border-left-width:1pt;border-left-color:#010101;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#010101;border-right-style:solid;border-right-width:1pt;border-right-color:#010101" bgcolor="#F0F0F0"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:28pt"><td style="width:158pt;border-top-style:solid;border-top-width:1pt;border-top-color:#010101;border-left-style:solid;border-left-width:1pt;border-left-color:#010101;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#010101;border-right-style:solid;border-right-width:1pt;border-right-color:#010101" colspan="2" bgcolor="#F0F0F0"><p class="s35" style="padding-top: 3pt;padding-left: 63pt;padding-right: 51pt;text-indent: 0pt;text-align: center;">Transport</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"/><p class="s20" style="padding-top: 7pt;padding-left: 247pt;text-indent: -20pt;text-align: left;">BizTalk, TIBCO StaffWare, ActiveBPEL</p><p class="s20" style="padding-top: 8pt;padding-left: 229pt;text-indent: 0pt;text-align: left;">BizTalk, WebSphere Mes- sage Broker, SonicMQ</p><p class="s20" style="padding-top: 8pt;padding-left: 242pt;text-indent: 0pt;text-align: left;">J2EE, CCM, .NET</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s20" style="padding-top: 6pt;padding-left: 216pt;text-indent: 11pt;text-align: left;">Message-Oriented Middle- ware, Distributed Objects Sys-</p><p class="s20" style="padding-left: 260pt;text-indent: 0pt;line-height: 10pt;text-align: left;">tems</p><h4 style="padding-top: 7pt;padding-left: 88pt;text-indent: 0pt;text-align: left;">Fig. 9. <span class="s7">Classifying middleware technologies</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l99"><ol id="l100"><li style="padding-top: 8pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a72">Distributed Objects</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">Distributed object technology is a venerable member of the middleware family. Best characterized by CORBA<span class="s14">15</span>, distributed object-based middle- ware has been in use since the earlier 1990’s. As many readers will be fa-</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_044.png"/></span></p><p class="s14" style="padding-top: 4pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">15 <span class="s7">Common Object Request Broker Architecture</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s36" style="padding-top: 3pt;padding-left: 17pt;text-indent: 0pt;text-align: left;">Client</p><p style="text-indent: 0pt;text-align: left;"/><p class="s20" style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Servant</p><p class="s19" style="padding-left: 6pt;text-indent: 0pt;line-height: 10pt;text-align: left;">reply</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">miliar with CORBA and the like, only the basics are briefly covered in this section for completeness.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s20" style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">Object Reference</p><p class="s19" style="padding-left: 6pt;text-indent: 0pt;text-align: left;">request</p><p class="s36" style="padding-top: 3pt;padding-left: 17pt;text-indent: 0pt;text-align: left;">Server</p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">	</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="355" height="167" alt="image" src="Image_045.png"/></span></p><h4 style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">server ORB</h4><p style="text-indent: 0pt;text-align: left;"/><h4 style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">client ORB</h4><p style="text-indent: 0pt;text-align: left;"/><h4 style="padding-top: 5pt;padding-left: 82pt;text-indent: 0pt;text-align: center;">Network</h4><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-top: 5pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">Fig. 10. <span class="s7">Distributed objects using CORBA</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 13pt;text-align: justify;">A simple scenario of a client sending a request to a server across an ob- ject request broker (ORB) is shown in Fig. 10. In CORBA, servant objects support interfaces that are specified using CORBA’s IDL (interface de- scription language). IDL interfaces define the methods that a server object supports, along with the parameter and return types. A trivial IDL example is:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-left: 35pt;text-indent: -20pt;line-height: 112%;text-align: left;">module ServerExample { interface MyObject</p><p class="s37" style="padding-left: 35pt;text-indent: 0pt;text-align: left;">{</p><p class="s37" style="padding-top: 1pt;padding-left: 55pt;text-indent: 0pt;text-align: left;">string isAlive();</p><p class="s37" style="padding-top: 1pt;padding-left: 35pt;text-indent: 0pt;text-align: left;">};</p><p class="s37" style="padding-top: 1pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">};</p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">This IDL interface defines a CORBA object that supports a single method, <span class="s37">isAlive</span>, which returns a string and takes no parameters. An IDL compiler is used to process interface definitions. The compiler generates an object skeleton in a target programming languages (typically, but not necessarily, C++ or Java). The object skeleton provides the mechanisms to call the servant implementation’s methods. The programmer must then write the code to implement each servant method in a native programming language:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-left: 25pt;text-indent: -10pt;line-height: 112%;text-align: left;">class MyServant extends _MyObjectImplBase { public String isAlive() {</p><p class="s37" style="padding-left: 35pt;text-indent: 0pt;line-height: 8pt;text-align: left;">return &quot;\nLooks like it…\n&quot;;</p><p class="s37" style="padding-top: 1pt;padding-left: 35pt;text-indent: 0pt;text-align: left;">}</p><p class="s37" style="padding-top: 1pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 10pt;text-align: justify;">The server process must create an instance of the servant and make it callable through the ORB:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-left: 15pt;text-indent: 0pt;line-height: 112%;text-align: left;">ORB orb = ORB.init(args, null); MyServant objRef = new MyServant(); orb.connect(objRef);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">A client process can now initialize a client ORB and get a reference to the servant that resides within the server process. Servants typically store a reference to themselves in a directory. Clients query the directory using a simple logical name, and it returns a reference to a servant that includes its network location and process identity.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">ORB orb = ORB.init(args, null);</p><p class="s37" style="padding-top: 1pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">// Lookup is a wrapper that actually access the CORBA Naming</p><p class="s37" style="padding-top: 1pt;padding-left: 15pt;text-indent: 0pt;line-height: 112%;text-align: left;">// Service directory – details omitted for simplicity MyServant servantRef = lookup(“Myservant”)</p><p class="s37" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">String reply = servantRef.isAlive();</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The servant call looks like a synchronous call to a local object. How- ever, the ORB mechanisms transmit, or marshal, the request and associated parameters across the network to the servant. The method code executes, and the result is marshaled back to the waiting client.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">This is a very simplistic description of distributed object technology. There’s much more detail that must be addressed to build real systems, is- sues like exceptions, locating servants and multi-threading to name just a few. From an architect’s perspective though, the following are some essen- tial design concerns that must be addressed in applications:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Requests to servants are remote calls, and hence relatively expensive (slow) as they traverse the ORB and network. This has a performance impact. It’s always wise to design interfaces so that remote calls can be minimized, and performance is enhanced.</p></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Like any distributed application, servers may intermittently or perma- nently be unavailable due to network or process or machine failure. Ap- plications need strategies to cope with failure and mechanisms to restart failed servers.</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">If a servant holds state concerning an interaction with a client (e.g. a customer object stores the name/address), and the servant fails, the state is lost. Mechanisms for state recovery must consequently be designed.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l101"><ol id="l102"><li style="padding-top: 5pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a73">Message-Oriented Middleware</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">Message-oriented middleware (MOM) is one of the key technologies for building large-scale enterprise systems. It is the glue that binds together otherwise independent and autonomous applications and turns them into a single, integrated system. These applications can be built using diverse technologies and run on different platforms. Users are not required to re- write their existing applications or make substantial (and risky) changes just to have them play a part in an enterprise-wide application. This is achieved by placing a queue between senders and receivers, providing a level of indirection during communications.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="381" height="196" alt="image" src="Image_046.png"/></span></p><p class="s38" style="padding-left: 70pt;text-indent: -3pt;text-align: left;">Legacy Apps</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s38" style="padding-top: 5pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">Mainframe</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s38" style="padding-top: 5pt;padding-left: 146pt;text-indent: 0pt;text-align: left;">3-tier Application Trading Partners</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 97pt;text-indent: 0pt;text-align: left;">Fig. 11. <span class="s7">Integration through messaging</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">How message-oriented middleware can be used within an organization is illustrated in Fig. 11. The MOM creates a <i>software bus </i>for integrating home grown applications with legacy applications, and connecting local applications with the business systems provided by business partners.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l103"><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a74">Message-Oriented Middleware Basics</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">Message-oriented middleware is an inherently loosely-coupled, asynchro- nous technology. This means the sender and receiver of a message are not tightly coupled, unlike synchronous middleware technologies such as CORBA. Synchronous middleware technologies have many strengths, but can lead to fragile designs if all of the components and network links al- ways have to be working at the same time for the whole system to success- fully operate.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 10pt;text-align: justify;">A messaging infrastructure decouples senders and receivers using an in- termediate message queue. The sender can send a message to a receiver and know that it will be eventually delivered, even if the network link is down or the receiver is not available. The sender just tells the MOM tech- nology to deliver the message and then continues on with its work. Senders are unaware of which application or process eventually processes the re- quest. Fig. 12 depicts this basic send-receive mechanism.</p><p class="s39" style="padding-top: 3pt;padding-left: 210pt;text-indent: 0pt;text-align: left;">receive (Queue, Msg)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="174" height="36" alt="image" src="Image_047.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 23pt;text-indent: 0pt;text-align: left;">Receiver</h3><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 27pt;text-indent: 0pt;text-align: left;">Sender</h3><p style="text-indent: 0pt;text-align: left;"/><h3 style="padding-top: 5pt;padding-left: 64pt;text-indent: 0pt;text-align: center;"><a name="a75">Queue</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s39" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">send (Queue, Msg)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-top: 5pt;padding-left: 130pt;text-indent: 0pt;text-align: left;">Fig. 12. <span class="s7">MOM basics</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">MOM is often implemented as a server that can handle messages from multiple concurrent clients.<span class="s14">16 </span>In order to decouple senders and receivers, the MOM provides message queues that senders place messages on and re- ceivers remove messages from. A MOM server can create and manage multiple messages queues, and can handle multiple messages being sent from queues simultaneously using threads organized in a thread pool. One or more processes can send messages to a message queue, and each queue can have one or many receivers. Each queue has a name which senders and receivers specify when they perform send and receive operations. This ar- chitecture is illustrated in Fig. 13.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">A MOM server has a number of basic responsibilities. First, it must ac- cept a message from the sending application, and send an acknowledge- ment that the message has been received. Next, it must place the message at the end of the queue that was specified by the sender. A sender may send many messages to a queue before any receivers remove them. Hence the MOM must be prepared to hold messages in a queue for an extended period of time.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Messages are delivered to receivers in a First-In-First-Out (FIFO) man- ner, namely the order they arrive at the queue. When a receiver requests a message, the message at the head of the queue is delivered to the receiver, and upon successful receipt, the message is deleted from the queue.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_048.png"/></span></p><p class="s14" style="padding-top: 4pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;">16 <span class="s7">MOM can also be simply implemented in a point-to-point fashion without a centralized message queue server. In this style of implementation, ‘send’ and ‘receive’ queues are maintained on the communicating systems themselves.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse" cellspacing="0"><tr style="height:7pt"><td style="width:8pt;border-bottom-style:solid;border-bottom-width:2pt;border-bottom-color:#010101;border-right-style:solid;border-right-width:2pt;border-right-color:#010101"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:68pt;border-top-style:solid;border-top-width:2pt;border-top-color:#010101;border-left-style:solid;border-left-width:2pt;border-left-color:#010101;border-bottom-style:solid;border-bottom-width:2pt;border-bottom-color:#010101;border-right-style:solid;border-right-width:2pt;border-right-color:#010101" colspan="2" bgcolor="#F3F3F3"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:50pt"><td style="width:8pt;border-top-style:solid;border-top-width:2pt;border-top-color:#010101;border-left-style:solid;border-left-width:2pt;border-left-color:#010101;border-right-style:solid;border-right-width:2pt;border-right-color:#010101" bgcolor="#F3F3F3"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:62pt;border-top-style:solid;border-top-width:2pt;border-top-color:#010101;border-left-style:solid;border-left-width:2pt;border-left-color:#010101;border-bottom-style:solid;border-bottom-width:2pt;border-bottom-color:#010101;border-right-style:solid;border-right-width:2pt;border-right-color:#010101" bgcolor="#F3F3F3"><p class="s40" style="padding-top: 7pt;padding-left: 21pt;text-indent: 0pt;text-align: left;">Senders</p></td><td style="width:6pt;border-left-style:solid;border-left-width:2pt;border-left-color:#010101;border-bottom-style:solid;border-bottom-width:2pt;border-bottom-color:#010101;border-right-style:solid;border-right-width:2pt;border-right-color:#010101" bgcolor="#F3F3F3"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:7pt"><td style="width:70pt;border-left-style:solid;border-left-width:2pt;border-left-color:#010101;border-bottom-style:solid;border-bottom-width:2pt;border-bottom-color:#010101;border-right-style:solid;border-right-width:2pt;border-right-color:#010101" colspan="2" bgcolor="#F3F3F3"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:6pt;border-top-style:solid;border-top-width:2pt;border-top-color:#010101;border-left-style:solid;border-left-width:2pt;border-left-color:#010101"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr></table><h3 style="padding-top: 10pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">Receivers</h3><p style="padding-left: 20pt;text-indent: 0pt;text-align: left;">	</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="text-indent: 1pt;text-align: justify;">Sending Applica- tions</h3><p style="text-indent: 0pt;text-align: left;"/><h3 style="text-indent: 1pt;text-align: justify;">Sending Applica- tions</h3><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="298" height="243" alt="image" src="Image_049.png"/></span></p><p class="s11" style="padding-top: 5pt;padding-left: 121pt;text-indent: 0pt;text-align: left;">Message Handler Thread Pool</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 5pt;padding-left: 129pt;text-indent: 0pt;text-align: left;"><a name="a76">MOM Server</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-top: 5pt;padding-left: 103pt;text-indent: 0pt;text-align: left;">Fig. 13. <span class="s7">Anatomy of a MOM server</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The asynchronous, decoupled nature of messaging technology makes it an extremely useful tool for solving many common application design problems. These include scenarios in which:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></li></ol></ol></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">The sender doesn’t need a reply to a message. It just wants to send the message to another application and continue on with its own work. This is known as <i>send-and-forget </i>messaging.</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">The sender doesn’t need an immediate reply to a request message. The receiver may take perhaps several minutes to process a request and the sender can be doing useful work in the meantime rather than just wait- ing.</p></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">The receiver, or the network connection between the sender and re- ceiver, may not operate continuously. The sender relies on the MOM to deliver the message when a connection is next established. The MOM layer must be capable of storing messages for later delivery, and possi- bly recovering unsent messages after system failures.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l104"><ol id="l105"><ol id="l106"><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a77">Exploiting Message Oriented Middleware Advanced Features</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">The basic features of MOM technology are rarely sufficient in enterprise applications. Mission critical systems need much stronger guarantees of message delivery and performance than can be provided by a basic MOM</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">server. Commercial-off-the-shelf (COTS) MOM products therefore supply additional advanced features to increase the reliability, usability and scal- ability of MOM servers. These features are explained in the following sec- tions.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l107"><li style="padding-left: 55pt;text-indent: -40pt;text-align: left;"><p class="s41" style="display: inline;">Message Delivery</p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">MOM technologies are about delivering messages between applications. In many enterprise applications, this delivery must be done reliably, giving the sender guarantees that the message will eventually be processed. For example, an application processing a credit card transaction may place the transaction details on a queue for later processing, to add the transaction total to the customer’s account. If this message is lost due the MOM server crashing – such things do happen – then the customer may be happy, but the store where the purchase was made and the credit card company will lose money. Such scenarios obviously cannot tolerate message loss, and must ensure reliable delivery of messages.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Reliable message delivery however comes at the expense of perform- ance. MOM servers normally offer a range of quality of service (QoS) op- tions that let an architect balance performance against the possibility of losing messages. Three levels of delivery guarantee (or QoS) are typically available, with higher reliability levels always coming at the cost of re- duced performance. These QoS options are:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></li></ol></ol></ol></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Best effort: <span class="p">The MOM server will do its best to deliver the message. Undelivered messages are only kept in memory on the server and can be lost if a system fails before a message is delivered. Network outages or unavailable receiving applications may also cause messages to time out and be discarded.</span></h3></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Persistent: <span class="p">The MOM layer guarantees to deliver messages despite sys- tem and network failures. Undelivered messages are logged to disk as well as being kept in memory and so can be recovered and subsequently delivered after a system failure. This is depicted in Fig. 14. Messages are kept in a disk log for the queue until they have been delivered to a receiver.</span></h3></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Transactional: <span class="p">Messages can be bunched into “all or nothing” units for delivery. Also, message delivery can be coordinated with an external re- source manager such as a database. More on transactional delivery is explained in the following sections.</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Various studies have been undertaken to explore the performance dif- ferences between these three QoS levels. All of these by their very nature are specific to a particular benchmark application, test environment and</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">MOM product. Drawing some very general conclusions, you can expect to see between 30%–80% performance reduction when moving from best- effort to persistent messaging, depending on message size and disk speed. Transactional will be slower than persistent, but often not by a great deal, as this depends mostly on how many transaction participants are involved. See the further reading section at the end of this chapter for some pointers to these studies.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 3pt;padding-left: 17pt;text-indent: 0pt;text-align: left;">MOM Server</h3><p style="padding-left: 123pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="309" height="224" alt="image" src="Image_050.png"/></span></p><p style="padding-top: 5pt;padding-left: 50pt;text-indent: 0pt;line-height: 106%;text-align: left;">From senders</p><p style="padding-top: 5pt;padding-left: 50pt;text-indent: 0pt;line-height: 106%;text-align: left;">To receivers</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 5pt;padding-left: 89pt;text-indent: 0pt;text-align: center;"><a name="a78">Disk Log</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 37pt;text-indent: 0pt;text-align: left;">Fig. 14. <span class="s7">Guaranteed message delivery in message oriented middleware</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l108"><ol id="l109"><ol id="l110"><ol id="l111"><li style="padding-top: 8pt;padding-left: 55pt;text-indent: -40pt;text-align: left;"><p class="s41" style="display: inline;">Transactions</p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">Transactional messaging typically builds upon persistent messages. It tightly integrates messaging operations with application code, not allowing transactional messages to be sent until the sending application commits their enclosing transaction. Basic MOM transactional functionality allows applications to construct batches of messages that are sent as a single atomic unit when the application commits.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Receivers must also create a transaction scope and ask to receive com- plete batches of messages. If the transaction is committed by the receivers, these transactional messages will be received together in the order they were sent, and then removed from the queue. If the receiver aborts the transaction, any messages already read will be put back on the queue, ready for the next attempt to handle the same transaction. In addition, con- secutive transactions sent from the same system to the same queue will ar- rive in the order they were committed, and each message will be delivered to the application exactly once for each committed transaction.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 10pt;text-align: justify;">Transactional messaging also allows message sends and receives to be coordinated with other transactional operations, such as database updates. For example, an application can start a transaction, send a message, update a database and then commit the transaction. The MOM layer will not make the message available on the queue until the transaction commits, ensuring either that the message is sent and the database is updated, or that both op- erations are rolled back and appear never to have happened.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s42" style="padding-top: 5pt;padding-left: 49pt;text-indent: 0pt;text-align: left;">Begin transaction</p><p class="s42" style="padding-top: 1pt;padding-left: 49pt;text-indent: 0pt;text-align: left;">...</p><table style="border-collapse:collapse;margin-left:35.854pt" cellspacing="0"><tr style="height:21pt"><td style="width:13pt;border-bottom-style:solid;border-bottom-width:6pt;border-bottom-color:#FFFFFF;border-right-style:solid;border-right-width:2pt;border-right-color:#FFFFFF" bgcolor="#F8F8F8"><p class="s43" style="padding-left: 3pt;text-indent: 0pt;text-align: left;">1 </p><p class="s43" style="padding-left: 3pt;text-indent: 0pt;line-height: 9pt;text-align: left;">2 </p></td><td style="width:109pt;border-left-style:solid;border-left-width:2pt;border-left-color:#FFFFFF;border-bottom-style:solid;border-bottom-width:6pt;border-bottom-color:#FFFFFF" colspan="2" bgcolor="#F8F8F8"><p class="s44" style="padding-top: 1pt;padding-right: 4pt;text-indent: 0pt;line-height: 118%;text-align: left;">update database record put message on queue</p><p class="s44" style="text-indent: 0pt;line-height: 0pt;text-align: left;">...</p></td></tr><tr style="height:12pt"><td style="width:13pt;border-top-style:solid;border-top-width:6pt;border-top-color:#FFFFFF;border-right-style:solid;border-right-width:2pt;border-right-color:#FFFFFF" bgcolor="#C3C3C3"><p class="s43" style="padding-left: 3pt;text-indent: 0pt;text-align: left;">3 </p></td><td style="width:98pt;border-top-style:solid;border-top-width:6pt;border-top-color:#FFFFFF;border-left-style:solid;border-left-width:2pt;border-left-color:#FFFFFF" bgcolor="#C3C3C3"><p class="s44" style="padding-top: 1pt;text-indent: 0pt;text-align: left;">commit transaction</p></td><td style="width:11pt;border-top-style:solid;border-top-width:6pt;border-top-color:#FFFFFF"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="169" height="131" alt="image" src="Image_051.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 7pt;text-indent: 0pt;text-align: center;"><span class="s45" style=" background-color: #F8F8F8;">  </span><span class="s46" style=" background-color: #F8F8F8;">2 </span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 6pt;padding-left: 2pt;text-indent: 0pt;text-align: center;"><span class="s45" style=" background-color: #F8F8F8;">  </span><span class="s46" style=" background-color: #F8F8F8;">1 </span></p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-left: 14pt;text-indent: 0pt;text-align: right;"><span class="s47" style=" background-color: #C3C3C3;">  </span><span class="s48" style=" background-color: #C3C3C3;">3 </span></p><p class="s42" style="padding-top: 5pt;padding-left: 20pt;text-indent: 0pt;text-align: left;">Begin transaction</p><p class="s15" style="padding-left: 3pt;text-indent: 0pt;text-align: left;">4 </p><p class="s15" style="padding-left: 3pt;text-indent: 0pt;text-align: left;">5 </p><p style="text-indent: 0pt;text-align: left;"/><p class="s42" style="padding-top: 1pt;padding-left: 20pt;text-indent: 0pt;text-align: left;">...</p><p class="s42" style="padding-top: 1pt;text-indent: 0pt;line-height: 118%;text-align: left;">get message from queue update database record</p><p style="padding-left: 20pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="131" height="15" alt="image" src="Image_052.png"/></span></p><p class="s15" style="padding-top: 2pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">6 </p><p style="text-indent: 0pt;text-align: left;"/><p class="s42" style="padding-left: 20pt;text-indent: 0pt;text-align: left;">...</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: center;"><span class="s49" style=" background-color: #E7E7E7;">  </span><span class="s50" style=" background-color: #E7E7E7;">4 </span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 7pt;text-indent: 0pt;text-align: center;"><span class="s49" style=" background-color: #E7E7E7;">  </span><span class="s50" style=" background-color: #E7E7E7;">5 </span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s15" style="text-indent: 0pt;line-height: 8pt;text-align: right;">6 </p><p style="text-indent: 0pt;text-align: left;"/><p class="s42" style="padding-top: 1pt;padding-left: 20pt;text-indent: 0pt;text-align: left;">commit transaction</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s15" style="padding-top: 2pt;padding-left: 1pt;text-indent: 0pt;text-align: left;">3 </p><p style="padding-left: 54pt;text-indent: 0pt;text-align: left;"><span style=" color: black; font-family:Courier, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt;">	</span><span><img width="112" height="100" alt="image" src="Image_053.png"/></span></p><h4 style="padding-top: 5pt;padding-left: 108pt;text-indent: 0pt;text-align: left;">Fig. 15. <span class="s7">Transactional messaging</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">A pseudo-code example of integrating messaging and database updates is shown in Fig. 15. The sender application code uses transaction demarca- tion statements (the exact form varies between MOM systems) to specify the scope of the transaction. All statements between the <i>begin </i>and <i>commit </i>transaction statements are considered to be part of the transaction. Note we have two, independent transactions occurring in this example. The sender and receiver transactions are separate and commit (or abort) individually.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 56pt;text-indent: -40pt;text-align: left;"><p class="s41" style="display: inline;">Clustering</p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">MOM servers are the primary message exchange mechanism in many en- terprise applications. If a MOM server becomes unavailable due to server or machine failure, then applications can’t communicate. Not surprisingly then, industrial strength MOM technologies make it possible to cluster MOM servers, running instances of the server on multiple machines (see Fig. 16).</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Exactly how clustering works is product dependent. However, the scheme in Fig. 16 is typical. Multiple instances of MOM servers are con- figured in a logical cluster. Each server supports the same set of queues,</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">and the distribution of these queues across servers is transparent to the MOM clients. MOM clients behave exactly the same as if there was one physical server and queue instance.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="248" height="114" alt="image" src="Image_054.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="45" height="29" alt="image" src="Image_055.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 9pt;text-indent: 0pt;text-align: left;">Receivers</h3><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 9pt;text-indent: 0pt;text-align: left;">Senders</h3><p style="text-indent: 0pt;text-align: left;"/><h3 style="padding-top: 5pt;padding-left: 131pt;text-indent: -7pt;line-height: 169%;text-align: left;"><a name="a79">MOM Server ApplicationQ</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="256" height="115" alt="image" src="Image_056.png"/></span></p><h3 style="padding-top: 8pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">MOM Server</h3><h3 style="padding-top: 8pt;padding-left: 128pt;text-indent: 0pt;text-align: left;">ApplicationQ <span><img width="45" height="29" alt="image" src="Image_057.png"/></span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 58pt;text-indent: 0pt;text-align: left;">Fig. 16. <span class="s7">Clustering MOM servers for reliability and scalability</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">When a client sends a message, one of the queue instances is selected and the message stored on the queue. Likewise, when a receiver requests a message, one of the queue instances is selected and a message removed. The MOM server clustering implementation is responsible for directing client requests to individual queue instances. This may be done statically, when a client opens a connection to the server, or dynamically, for every request.<span class="s14">17</span></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">A cluster has two benefits. First, if one MOM server fails, the other queue instances are still available for clients to use. Applications can con- sequently keep communicating. Second, the request load from the clients can be spread across the individual servers. Each server only sees a frac- tion (ideally 1/[number of servers] in the cluster) of the overall traffic. This helps distribute the messaging load across multiple machines, and can pro- vide much higher application performance.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_058.png"/></span></p><p class="s14" style="padding-top: 4pt;padding-left: 21pt;text-indent: -6pt;text-align: left;">17 <span class="s7">An application that needs to receive messages in the order they are sent is not suitable for operating in this a clustering mode.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 5pt;padding-left: 55pt;text-indent: -40pt;text-align: left;"><p class="s41" style="display: inline;">Two-way Messaging</p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">Although MOM technology is inherently asynchronous and decouples senders and receivers, it can also be used for synchronous communications and building more tightly coupled systems. In this case, the sender simply uses the MOM layer to send a request message to a receiver on a request queue. The message contains the name of the queue to which a reply mes- sage should be sent. The sender then waits until the receiver sends back a reply message on a reply queue, as shown in Fig. 17.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="216" height="115" alt="image" src="Image_059.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="46" height="26" alt="image" src="Image_060.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="45" height="30" alt="image" src="Image_061.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 9pt;text-indent: 0pt;text-align: left;">Receivers</h3><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 10pt;text-indent: 0pt;text-align: left;">Senders</h3><p style="text-indent: 0pt;text-align: left;"/><h3 style="padding-left: 115pt;text-indent: 1pt;line-height: 225%;text-align: left;"><a name="a80">MOM Server RequestQ</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="216" height="115" alt="image" src="Image_062.png"/></span></p><h3 style="padding-left: 110pt;text-indent: 0pt;text-align: left;">MOM Server</h3><p style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;"><span><img width="44" height="30" alt="image" src="Image_063.png"/></span>                   <b>ReplyQ </b><span><img width="45" height="29" alt="image" src="Image_064.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 106pt;text-indent: 0pt;text-align: left;">Fig. 17. <span class="s7">Request-Reply messaging</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">This synchronous style of messaging using MOM is frequently used in enterprise systems, replacing conventional synchronous technology such as CORBA. There are a number of pragmatic reasons why architects might choose to use messaging technology in this way, including:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></ol></ol></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Messaging technology can be used with existing applications at low cost and with minimal risk. <i>Adapters </i>are available, or can be easily written to interface between commonly used messaging technologies and applica- tions. Applications do not have to be rewritten or ported before they can be integrated into a larger system.</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Messaging technologies tend to be available on a very wide range of platforms, making it easier to integrate legacy applications or business systems being run by business partners.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 6pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Organizations may already have purchased, and gained experience in using, a messaging technology and they may not need the additional fea- tures of an application server technology.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l112"><ol id="l113"><ol id="l114"><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a81">Publish-Subscribe</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">Message oriented middleware is a proven and effective approach for build- ing loosely-coupled enterprise systems. But, like everything, it has its limi- tations. The major one is that MOM is inherently a one-to-one technology. One sender sends a single message to a single queue, and one receiver re- trieves that message for the queue. Not all problems are so easily solved by a 1-1 messaging style. This is where publish-subscribe architectures enter the picture.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 9pt;text-indent: 0pt;text-align: left;">Subscriber</h3><p style="padding-left: 188pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 9pt;text-indent: 0pt;text-align: left;">Publisher</h3><p style="text-indent: 0pt;text-align: left;"/><h3 style="padding-left: 105pt;text-indent: 0pt;text-align: right;"><a name="a82">Create/ Publish</a></h3><h3 style="padding-top: 1pt;padding-left: 26pt;text-indent: 0pt;text-align: left;">Register/ Subscribe</h3><p style="text-indent: 0pt;text-align: left;"><span><img width="212" height="97" alt="image" src="Image_065.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 9pt;text-indent: 0pt;text-align: left;">Subscriber</h3><p style="text-indent: 0pt;text-align: left;"/><h3 style="padding-top: 5pt;padding-left: 4pt;text-indent: 0pt;text-align: left;">Topic</h3><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 9pt;text-indent: 0pt;text-align: left;">Subscriber</h3><p style="padding-left: 188pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-top: 5pt;padding-left: 99pt;text-indent: 0pt;text-align: left;">Fig. 18. <span class="s7">Publish-Subscribe messaging</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">Publish-subscribe messaging extends the basic MOM mechanisms to support <i>1 to many</i>, <i>many to many</i>, and <i>many to 1 </i>style communications. Publishers send a single copy of a message addressed to a named <i>topic</i>, or <i>subject</i>. Topics are a logical name for the publish-subscribe equivalent of a queue in basic MOM technology. Subscribers listen for messages that are sent to topics that interest them. The publish-subscribe server then distrib- utes each message sent on a topic to every subscriber who is listening on that topic. This basic scheme is depicted in Fig. 18.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 10pt;text-align: justify;">In terms of loose coupling, publish-subscribe has some attractive prop- erties. Senders and receivers are decoupled, each respectively unaware of which applications will receive a message, and who actually sent the mes- sage. Each topic may also have more than one publisher, and the publish- ers may appear and disappear dynamically. This gives considerable flexi- bility over static configuration regimes. Likewise, subscribers can dynamically subscribe and unsubscribe to a topic. Hence the subscriber set for a topic can change at any time, and this is transparent to the application code.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="360" height="290" alt="image" src="Image_066.png"/></span></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">In publish-subscribe technologies, the messaging layer has the responsi- bility for managing topics, and knowing which subscribers are listening to which topics. It also has the responsibility for delivering every message sent to all active current subscribers. Topics can be persistent or non- persistent, with the same effects on reliable message delivery as in basic point-to-point MOM (explained in the previous section). Messages can also be published with an optional “time-to-live” setting. This tells the publish-subscribe server to attempt to deliver a message to all active sub- scribers for the time-to-live period, and after that delete the message from the queue.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s51" style="padding-top: 6pt;text-indent: 0pt;text-align: left;">Subscriber</p><table style="border-collapse:collapse" cellspacing="0"><tr style="height:16pt"><td style="width:5pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#FFFFFF"><p class="s52" style="padding-top: 5pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">S</p></td><td style="width:38pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#FFFFFF"><p class="s52" style="padding-top: 5pt;padding-left: 1pt;text-indent: 0pt;text-align: left;">ubscriber</p></td><td style="width:5pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt" bgcolor="#FFFFFF"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr></table><p style="padding-left: 120pt;text-indent: 0pt;text-align: left;">	</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s51" style="padding-top: 2pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">rvd</p><p class="s51" style="padding-top: 2pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">rvd</p><p class="s51" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">rvrd</p><p style="padding-left: 111pt;text-indent: 0pt;text-align: left;">		</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s51" style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Publisher</p><p style="padding-left: 57pt;text-indent: 0pt;text-align: left;"/><p class="s53" style="padding-top: 2pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">rvd</p><p style="text-indent: 0pt;text-align: left;"/><p class="s53" style="padding-top: 7pt;padding-left: 118pt;text-indent: 0pt;text-align: left;">rvrd</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s51" style="padding-top: 2pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">rvd</p><p class="s51" style="padding-top: 2pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">rvd</p><p class="s51" style="padding-top: 2pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">rvd</p><p style="padding-left: 54pt;text-indent: 0pt;line-height: 14pt;text-align: left;"><span style=" color: black; font-family:&quot;Comic Sans MS&quot;; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt;">		</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse" cellspacing="0"><tr style="height:16pt"><td style="width:5pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#FFFFFF"><p class="s52" style="padding-top: 5pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">S</p></td><td style="width:38pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#FFFFFF"><p class="s52" style="padding-top: 5pt;padding-left: 1pt;text-indent: 0pt;text-align: left;">ubscriber</p></td><td style="width:5pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt" bgcolor="#FFFFFF"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr></table><table style="border-collapse:collapse" cellspacing="0"><tr style="height:16pt"><td style="width:5pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#FFFFFF"><p class="s52" style="padding-top: 5pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">S</p></td><td style="width:38pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#FFFFFF"><p class="s52" style="padding-top: 5pt;padding-left: 1pt;text-indent: 0pt;text-align: left;">ubscriber</p></td><td style="width:5pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt" bgcolor="#FFFFFF"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr></table><table style="border-collapse:collapse" cellspacing="0"><tr style="height:16pt"><td style="width:5pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#FFFFFF"><p class="s52" style="padding-top: 5pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">S</p></td><td style="width:38pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#FFFFFF"><p class="s52" style="padding-top: 5pt;padding-left: 1pt;text-indent: 0pt;text-align: left;">ubscriber</p></td><td style="width:5pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt" bgcolor="#FFFFFF"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr></table><p style="padding-left: 56pt;text-indent: 0pt;text-align: left;"><span style=" color: black; font-family:&quot;Comic Sans MS&quot;; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt;">		</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-top: 5pt;padding-left: 80pt;text-indent: 0pt;text-align: left;">Fig. 19. <span class="s7">Multicast delivery for publish-subscribe</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">The underlying protocol a MOM technology uses for message delivery can profoundly affect performance. By default, most use straightforward point-to-point TCP/IP sockets. Implementations of publish-subscribe built on point-to-point messaging technology duplicate each message send op- eration from the server for every subscriber. In contrast, some MOM tech- nologies support multicast or broadcast protocols, which send each mes- sage only once on the wire, and the network layer handles delivery to multiple destinations.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">In Fig. 19, the multicast architecture used in TIBCO’s Rendezvous pub- lish-subscribe technology is illustrated. Each node in the publish-subscribe network runs a daemon process known as <i>rvd. </i>When a new topic is cre- ated, it is assigned a multicast IP address.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">When a publisher sends a message, its local <i>rvd </i>daemon intercepts the message and multicasts a single copy of the message on the network to the address associated with the topic. The listening daemons on the network receive the message, and each checks if it has any local subscribers to the message’s topic on its node. If so, it delivers the message to the sub- scriber(s), otherwise it ignores the message. If a message has subscribers on a remote network,<span class="s14">18 </span>an <i>rvrd </i>daemon intercepts the message and sends a copy to each remote network using standard IP protocols. Each receiving <i>rvrd </i>daemon then multicasts the message to all subscribers on its local network.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Not surprisingly, solutions based on multicast tend to provide much bet- ter raw performance and scalability for best effort messaging. Not too long ago, I was involved in a project to quantify the expected performance dif- ference between multicast and point-to-point solutions. We investigated this by writing and running some benchmarks to compare the relative per- formance of three publish-subscribe technologies, and Fig. 20 shows the benchmark results.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">It shows the average time for delivery from a single publisher to be- tween 10 and 50 concurrent subscribers when the publisher outputs a burst of messages as fast as possible. The results clearly show that multicast publish-subscribe is ideally suited to applications with demands for low message latencies and hence very high throughput.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l115"><li style="padding-left: 55pt;text-indent: -40pt;text-align: left;"><p class="s41" style="display: inline;">Understanding Topics</p></li></ol></li></ol></ol></ol><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">Topics are the publish-subscribe equivalent of queues. Topic names are simply strings, and are specified administratively or programmatically when the topic is created. Each topic has a logical name which is specified by all applications which wish to publish or subscribe using the topic.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_067.png"/></span></p><p class="s14" style="padding-top: 4pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">18 <span class="s7">And the wide area network doesn’t support multicast.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="208" height="102" alt="image" src="Image_068.png"/></span></p><p class="s54" style="padding-top: 5pt;padding-left: 62pt;text-indent: -5pt;line-height: 135%;text-align: left;">Milliseconds 700</p><p class="s54" style="padding-left: 6pt;text-indent: 0pt;line-height: 7pt;text-align: center;">600</p><p style="text-indent: 0pt;text-align: left;"><span><img width="25" height="7" alt="image" src="Image_069.png"/></span></p><p class="s54" style="padding-top: 2pt;padding-left: 22pt;text-indent: 0pt;line-height: 140%;text-align: left;">MC1 MC2</p><p class="s54" style="padding-left: 22pt;text-indent: 0pt;text-align: left;">QB</p><p style="text-indent: 0pt;text-align: left;"/><p class="s54" style="padding-top: 1pt;padding-left: 6pt;text-indent: 0pt;text-align: center;">500</p><p class="s54" style="padding-top: 1pt;padding-left: 6pt;text-indent: 0pt;text-align: center;">400</p><p style="padding-left: 256pt;text-indent: 0pt;line-height: 5pt;text-align: left;"><span><img width="24" height="7" alt="image" src="Image_070.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="25" height="7" alt="image" src="Image_071.png"/></span></p><p class="s54" style="padding-left: 6pt;text-indent: 0pt;text-align: center;">300</p><p class="s54" style="padding-top: 1pt;padding-left: 6pt;text-indent: 0pt;text-align: center;">200</p><p class="s54" style="padding-top: 1pt;padding-left: 6pt;text-indent: 0pt;text-align: center;">100</p><p class="s54" style="padding-top: 1pt;text-indent: 0pt;text-align: center;">0</p><p class="s55" style="padding-top: 2pt;padding-left: 88pt;text-indent: 0pt;text-align: left;">10 20 30 40 50 <span class="s54">No. Of Subscribers</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">Fig. 20. <span class="s7">Publish-subscribe best effort messaging performance: Comparing 2 mul- ticast technologies (MC1, MC2) with a queue-based (QB) publish-subscribe tech- nology</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="205" height="24" alt="image" src="Image_072.png"/></span></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Some publish-subscribe technologies support hierarchical topic naming. The details of exactly how the mechanisms explained below work are product dependent, but the concepts are generic and work similarly across implementations. Let’s use the slightly facetious example shown in Fig. 21 of a topic naming tree.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">Sydney</p><p style="padding-left: 160pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse" cellspacing="0"><tr style="height:22pt"><td style="width:68pt;border-top-style:solid;border-top-width:1pt;border-top-color:#010101;border-left-style:solid;border-left-width:1pt;border-left-color:#010101;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#010101;border-right-style:solid;border-right-width:1pt;border-right-color:#010101" colspan="2"><p class="s28" style="padding-top: 3pt;padding-left: 7pt;text-indent: 0pt;text-align: left;">DevGroup</p></td></tr><tr style="height:22pt"><td style="width:34pt;border-top-style:solid;border-top-width:1pt;border-top-color:#010101;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#010101;border-right-style:solid;border-right-width:1pt;border-right-color:#010101"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:34pt;border-top-style:solid;border-top-width:1pt;border-top-color:#010101;border-left-style:solid;border-left-width:1pt;border-left-color:#010101;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#010101"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:22pt"><td style="width:68pt;border-top-style:solid;border-top-width:1pt;border-top-color:#010101;border-left-style:solid;border-left-width:1pt;border-left-color:#010101;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#010101;border-right-style:solid;border-right-width:1pt;border-right-color:#010101" colspan="2"><p class="s28" style="padding-top: 3pt;padding-left: 7pt;text-indent: 0pt;text-align: left;">Information</p></td></tr></table><table style="border-collapse:collapse" cellspacing="0"><tr style="height:22pt"><td style="width:79pt;border-top-style:solid;border-top-width:1pt;border-top-color:#010101;border-left-style:solid;border-left-width:1pt;border-left-color:#010101;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#010101;border-right-style:solid;border-right-width:1pt;border-right-color:#010101" colspan="3"><p class="s28" style="padding-top: 3pt;padding-left: 7pt;text-indent: 0pt;text-align: left;">SupportGroup</p></td></tr><tr style="height:22pt"><td style="width:40pt;border-top-style:solid;border-top-width:1pt;border-top-color:#010101;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#010101;border-right-style:solid;border-right-width:1pt;border-right-color:#010101" colspan="2"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:39pt;border-top-style:solid;border-top-width:1pt;border-top-color:#010101;border-left-style:solid;border-left-width:1pt;border-left-color:#010101;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#010101"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:22pt"><td style="width:6pt;border-right-style:solid;border-right-width:1pt;border-right-color:#010101"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:67pt;border-top-style:solid;border-top-width:1pt;border-top-color:#010101;border-left-style:solid;border-left-width:1pt;border-left-color:#010101;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#010101;border-right-style:solid;border-right-width:1pt;border-right-color:#010101"><p class="s28" style="padding-top: 3pt;padding-left: 7pt;text-indent: 0pt;text-align: left;">Information</p></td><td style="width:6pt;border-left-style:solid;border-left-width:1pt;border-left-color:#010101"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr></table><p style="padding-left: 82pt;text-indent: 0pt;text-align: left;">	</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">work</p><p class="s7" style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">gossip</p><p class="s7" style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">work</p><p class="s7" style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">gossip</p><p style="padding-left: 48pt;text-indent: 0pt;text-align: left;">			</p><p style="text-indent: 0pt;text-align: left;"><span><img width="122" height="31" alt="image" src="Image_073.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="122" height="31" alt="image" src="Image_074.png"/></span></p><h4 style="padding-top: 8pt;padding-left: 78pt;text-indent: 0pt;text-align: left;">Fig. 21. <span class="s7">An example of hierarchical topic naming</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Each box represents a topic name that can be used to publish messages. The unique name for each topic is a fully qualified string, with a “/” used as separator between levels in the tree. For example, the following are all valid topic names:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;line-height: 133%;text-align: left;">Sydney Sydney/DevGroup</p><p class="s37" style="padding-left: 14pt;text-indent: 0pt;line-height: 133%;text-align: left;">Sydney/DevGroup/Information Sydney/DevGroup/Information/work Sydney/DevGroup/Information/gossip Sydney/SupportGroup Sydney/SupportGroup/Information Sydney/SupportGroup/Information/work Sydney/SupportGroup/Information/gossip</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Hierarchical topic names become really useful when combined with topic wildcards. In our example, an “*” is used as a wildcard that matches zero or more characters in a topic name. Subscribers can use wildcards to receive messages from more than one topic when they subscribe. For ex- ample:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">Sydney/*/Information</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">This matches both <span class="s39">Sydney/DevGroup/Information </span>and <span class="s39">Syd- ney/SupportGroup/Information</span>. Similarly, a subscriber that speci- fies the following topic:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">Sydney/DevGroup/*/*</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">This will receive messages published on all three topics within the <span class="s39">Syd- ney/DevGroup </span>tree branch. As subscribing to whole branches of a topic tree is very useful, some products support a shorthand for the above, using another wildcard character such as “**”, i.e.:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">Sydney/DevGroup/**</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The “**” wildcards also matches all topics that are in <span class="s39">Syd- ney/DevGroup </span>branch. Such a wildcard is powerful as it is naturally ex- tensible. If new topics are added within this branch of the topic hierarchy, subscribers do not have to change the topic name in their subscription re- quest in order to receive messages on the new topics.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Carefully crafted topic name hierarchies combined with wildcarding make it possible to create some very flexible messaging infrastructures. Consider how applications might want to subscribe to multiple topics, and organize your design to support these.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l116"><ol id="l117"><li style="padding-top: 5pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a83">Application Servers</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">There are many definitions for application servers, but all pretty much agree on the core elements. Namely, an application server is a component- based server technology that resides in the middle-tier of an N-tier archi- tecture, and provides distributed communications, security, transactions and persistence.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Application servers are widely used to build internet-facing applica- tions. Fig. 22 shows a block diagram of the classic N-tier architecture adopted by many web sites.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 3pt;padding-left: 85pt;text-indent: 0pt;text-align: center;">Client tier</h3><p style="text-indent: 0pt;text-align: left;"/><p style="padding-top: 5pt;padding-left: 32pt;text-indent: 0pt;text-align: left;">browsers</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 8pt;padding-left: 32pt;text-indent: 0pt;text-align: left;">Web Servers</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 32pt;text-indent: 0pt;text-align: left;">EJBs</p><p style="padding-left: 32pt;text-indent: 0pt;text-align: left;">.NET</p><p style="padding-left: 32pt;text-indent: 0pt;text-align: left;">Components</p><h3 style="padding-top: 3pt;padding-left: 31pt;text-indent: 0pt;text-align: left;">Enterprise Information System tier</h3><p style="text-indent: 0pt;text-align: left;"/><p style="padding-top: 9pt;padding-left: 32pt;text-indent: 0pt;text-align: left;">Databases ERPs</p><p style="padding-top: 5pt;padding-left: 38pt;text-indent: 0pt;text-align: left;">http</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="8" height="30" alt="image" src="Image_075.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="8" height="30" alt="image" src="Image_076.png"/></span></p><h3 style="padding-top: 3pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">Business Component tier</h3><p style="text-indent: 0pt;text-align: left;"/><h3 style="padding-top: 3pt;padding-left: 85pt;text-indent: 0pt;text-align: center;">Web tier</h3><p style="text-indent: 0pt;text-align: left;"/><p style="padding-left: 32pt;text-indent: 5pt;line-height: 242%;text-align: left;">RMI       <span><img width="8" height="30" alt="image" src="Image_077.png"/></span> .NET Remoting IIOP JDBC SQL</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-top: 5pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">Fig. 22. <span class="s7">N-Tier architecture for web applications</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;">An explanation of each tier is below:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Client Tier: <span class="p">In a web application, the client tier typically comprises an Internet browser that submits HTTP requests and downloads HTML pages from a web server. This is commodity technology, not an element of the application server.</span></h3></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Web Tier: <span class="p">The web tier runs a web server to handle client requests. When a request arrives, the web server invokes web server-hosted com- ponents such as servlets, Java Server Pages (JSPs) or Active Server Pages (ASPs) depending on the flavor of web server being used. The in- coming request identifies the exact web component to call. This compo- nent processes the request parameters, and uses these to call the business</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 25pt;text-indent: 0pt;text-align: justify;">logic tier to get the required information to satisfy the request. The web component then formats the results for return to the user as HTML via the web server.</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;"><b>Business Component Tier: </b>The business components comprise the core business logic for the application. The business components are re- alized by for example Enterprise JavaBeans (EJB) in J2EE, .NET com- ponents or CORBA objects. The business components receive requests from the web tier, and satisfy requests usually by accessing one or more databases, returning the results to the web tier. A run-time environment known as a <i>container </i>accommodates the components. The container supplies a number of services to the components it hosts. These varying depending on the container type (e.g. EJB, .NET, CORBA), but include transaction and component lifecycle management, state management; security, multithreading and resource pooling. The components specify, in files external to their code, the type of behavior they require from the container at run-time, and then rely on the container to provide the ser- vices. This frees the application programmer from cluttering the busi- ness logic with code to handle system and environmental issues.</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Enterprise Information Systems Tier: <span class="p">This typically consists of one or more databases and back-end applications like mainframes and other legacy systems. The business components must query and interact with these data stores to process requests.</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The core of an application server is the business component container and the support it provides for implementing business logic using a soft- ware component model. As the details vary between application server technologies, let’s just look at the widely used EJB model supported by J2EE. This is a representative example of application server technology.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l118"><ol id="l119"><ol id="l120"><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a84">Enterprise JavaBeans</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">The Enterprise JavaBeans (EJB) architecture defines a standard program- ming model for constructing server-side Java applications. A J2EE- compliant application server provides an EJB container to manage the exe- cution of application components. In practical terms, the container pro- vides an operating system process (in fact a Java virtual machine) that hosts EJB components. Fig. 23 shows the relationship between an applica- tion server, a container and the services provided. When an EJB client in- vokes a server component, the container allocates a thread and invokes an instance of the EJB component. The container manages all resources on</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">behalf of the component and all interactions between the component and the external systems.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a85">EJB Component Model</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">The EJB component model defines the basic architecture of an EJB com- ponent. It specifies the structure of the component interfaces and the mechanisms by which it interacts with its container and with other compo- nents.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The EJB version 1.1 specifications defines two main types of EJB com- ponents, namely <i>session beans </i>and <i>entity beans</i>.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Session beans are typically used for executing business logic and to provide services for clients to call. Session beans correspond to the con- troller in a model-view-controller architecture because they encapsulate the business logic of a three-tier architecture.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="385" height="279" alt="image" src="Image_078.png"/></span></p><p class="s56" style="padding-top: 5pt;padding-left: 213pt;text-indent: 0pt;text-align: left;"><a name="a86">Application Server</a></p><p style="padding-top: 3pt;padding-left: 32pt;text-indent: -4pt;text-align: left;">Directory Service</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-top: 3pt;padding-left: 32pt;text-indent: -9pt;text-align: left;">Transaction Service</p><p style="text-indent: 0pt;text-align: left;"/><h3 style="padding-top: 3pt;padding-bottom: 1pt;padding-left: 94pt;text-indent: 0pt;text-align: left;"><a name="a87">EJB Container</a></h3><table style="border-collapse:collapse;margin-left:71.1925pt" cellspacing="0"><tr style="height:62pt"><td style="width:96pt;border-top-style:solid;border-top-width:1pt;border-top-color:#010101;border-left-style:solid;border-left-width:1pt;border-left-color:#010101;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#010101;border-right-style:solid;border-right-width:1pt;border-right-color:#010101" bgcolor="#FFFFFF"><p class="s40" style="padding-top: 3pt;padding-left: 32pt;text-indent: 0pt;text-align: left;">EJB Pool</p></td></tr><tr style="height:22pt"><td style="width:96pt;border-top-style:solid;border-top-width:1pt;border-top-color:#010101;border-left-style:solid;border-left-width:1pt;border-left-color:#010101;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#010101;border-right-style:solid;border-right-width:1pt;border-right-color:#010101" bgcolor="#FFFFFF"><p class="s57" style="padding-top: 3pt;padding-left: 8pt;text-indent: 0pt;text-align: left;">Lifecycle Management</p></td></tr><tr style="height:22pt"><td style="width:96pt;border-top-style:solid;border-top-width:1pt;border-top-color:#010101;border-left-style:solid;border-left-width:1pt;border-left-color:#010101;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#010101;border-right-style:solid;border-right-width:1pt;border-right-color:#010101" bgcolor="#FFFFFF"><p class="s57" style="padding-top: 3pt;padding-left: 29pt;text-indent: 0pt;text-align: left;">Persistence</p></td></tr><tr style="height:22pt"><td style="width:96pt;border-top-style:solid;border-top-width:1pt;border-top-color:#010101;border-left-style:solid;border-left-width:1pt;border-left-color:#010101;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#010101;border-right-style:solid;border-right-width:1pt;border-right-color:#010101" bgcolor="#FFFFFF"><p class="s57" style="padding-top: 3pt;padding-left: 19pt;text-indent: 0pt;text-align: left;">Connection Pool</p></td></tr><tr style="height:22pt"><td style="width:96pt;border-top-style:solid;border-top-width:1pt;border-top-color:#010101;border-left-style:solid;border-left-width:1pt;border-left-color:#010101;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#010101;border-right-style:solid;border-right-width:1pt;border-right-color:#010101" bgcolor="#FFFFFF"><p class="s57" style="padding-top: 3pt;padding-left: 27pt;text-indent: 0pt;text-align: left;">Thread Pool</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 3pt;padding-left: 32pt;text-indent: -1pt;text-align: left;">Security Service</p><p style="text-indent: 0pt;text-align: left;"/><h4 style="padding-top: 5pt;padding-left: 37pt;text-indent: 0pt;text-align: left;">Fig. 23. <span class="s7">J2EE application server, EJB container and associated services</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Entity beans are typically used for representing business data objects. The data members in an entity bean map directly to some data items stored in an associated database. Entity beans are usually accessed by a session bean that provides the business level services to the client.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">Further, there are two types of session beans, known as <i>stateless </i>session beans and <i>stateful </i>session beans. The difference between these is depicted in Fig. 24.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">A stateless session bean is defined as not being <i>conversational </i>with re- spect to its calling process. This means that it does not keep any state in- formation on behalf of any client that calls it. A client will get a reference to a stateless session bean in a container, and can use this reference to make many calls on an instance of the bean. However, between each suc- cessive bean invocation, a client is not guaranteed to bind to any particular stateless session bean instance. The EJB container delegates client calls to stateless session beans on <i>an as needed </i>basis, so the client can never be certain which bean instance they will actually talk to. This makes it mean- ingless to store client related state information in a stateless session bean.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 74pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a name="a88">EJB Container</a></h3><p style="padding-left: 43pt;text-indent: 0pt;text-align: left;">Stateless bean pool</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: right;">state</p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: right;">state</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="354" height="287" alt="image" src="Image_079.png"/></span></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: right;">state</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 12pt;text-indent: 0pt;line-height: 246%;text-align: left;">state state</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 7pt;text-indent: 0pt;text-align: left;"><a name="a89">EJB</a></h3><h3 style="padding-left: 7pt;text-indent: 0pt;text-align: left;">Clients</h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 38pt;text-indent: 0pt;text-align: left;">Stateful beans <span class="s58">state</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 116pt;text-indent: 0pt;text-align: left;">state</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-top: 5pt;padding-left: 83pt;text-indent: 0pt;text-align: left;">Fig. 24. <span class="s7">Stateless versus stateful session beans</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">On the other hand, a stateful session bean is said to be conversational with respect to its calling process; therefore it can maintain state informa- tion about a conversation with a client. Once a client gets a reference to a stateful session bean, all subsequent calls to the bean using this reference are guaranteed to go to the same bean instance. The container creates a new, dedicated stateful session bean for each client that creates a bean in-</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">stance. Clients may store any state information they wish in the bean, and can be assured it will still be there next time they access the bean.</p><p style="padding-left: 15pt;text-indent: 13pt;text-align: justify;">EJB containers assume responsibility for managing the lifecycle of stateful session beans. The container will write out a bean’s state to disk if it has not been used for a while, and will automatically restore the state when the client makes a subsequent call on the bean. This is known as <i>pas- sivation </i>and <i>activation </i>of the stateful bean. Containers can also be config- ured to destroy a stateful session bean and its associated resources if a bean is not used for a specified period of time.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">There are also two types of entity beans, called <i>Container Managed Persistence </i>(CMP) entity beans and <i>Bean Managed Persistence </i>(BMP) en- tity beans. Persistence in this context refers to the way in which the data (usually a row in a relational database table) associated with the entity bean is read and written.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">In the CMP entity bean case, the data that the bean represents is mapped automatically to the associated persistent data store (e.g. database) by the container. The container is responsible for loading the data into the bean instance, and writing changes back to the persistent data store at appropri- ate times, such as the start and end of a transaction. CMP relies on con- tainer-provided services and requires no application code as the container automatically generates the data access code. CMP is hence easy to im- plement, and supported for relational databases accessed using SQL.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">In the case of a BMP entity bean, the bean code itself is responsible for accessing the persistent data it represents. This is typically done using handcrafted JDBC calls, or calls to a proprietary database or application API. Bean-managed persistence gives the bean developer the flexibility to perform persistence operations that are too complicated for the container to generate, or to use a data source that is not supported by the container, for example a custom or legacy database or an FTP site. While BMP requires more effort on the programmer&#39;s behalf to implement, it can sometimes provide opportunities to optimize data access, and in such cases may pro- vide better performance than CMP.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a90">EJB Programming</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">An EJB depends on the EJB container for everything it needs. If an EJB needs to access a JDBC connection or another bean, it uses the container services to achieve this.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">To create an EJB component, the developer must provide two interfaces that define a bean&#39;s business and lifecycle management methods, plus the</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">actual bean implementation class. The two interfaces are called the <i>remote</i></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: left;">and <i>home </i>interfaces, and have different purposes.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The <i>home </i>interface contains the lifecycle methods of the EJB. These provide clients with services to create, destroy and find bean instances. In contrast, the <i>remote </i>interface contains the business methods offered by the bean. These are of course application specific. In order to use the methods in the bean&#39;s <i>remote </i>interface, clients must use the bean&#39;s <i>home </i>interface to obtain a reference to the remote interface.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">A simple <i>home </i>interface is shown below. The <i>home </i>interface must in- herit from <i>EJBHome</i>, and in this example, the interface contains a method to create an EJB of type <i>Broker</i>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">public interface BrokerHome extends EJBHome {</p><p class="s37" style="padding-top: 1pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">/*</p><ul id="l121"><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><p class="s37" style="display: inline;">This method creates the EJB Object.</p></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: left;"><p class="s37" style="display: inline;">@return The newly created EJB Object.</p><p class="s37" style="padding-top: 1pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">*/</p><p class="s37" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">Broker create()</p><p class="s37" style="padding-top: 1pt;padding-left: 81pt;text-indent: 0pt;text-align: left;">throws RemoteException, CreateException;</p><p class="s37" style="padding-top: 1pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 25pt;text-indent: 0pt;text-align: left;">The (cut down) remote interface for this EJB looks like this:</p><p class="s37" style="padding-top: 10pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">public interface Broker extends EJBObject {</p><p class="s37" style="padding-top: 1pt;padding-left: 57pt;text-indent: -21pt;line-height: 112%;text-align: left;">public int newAccount(String name, String address, int credit)</p><p class="s37" style="padding-left: 57pt;text-indent: 0pt;text-align: left;">throws RemoteException, SQLException;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-left: 57pt;text-indent: -21pt;line-height: 112%;text-align: left;">public void buyStock(int accno, int stock_id, int amount) throws RemoteException, SQLException, TransDenyException;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-left: 57pt;text-indent: -21pt;line-height: 112%;text-align: left;">public void updateAccount(int accno, int credit) throws RemoteException, SQLException;</p><p class="s37" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;text-align: left;">An EJB client uses a bean’s public interfaces to create and call an in-</p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">stance of the EJB. One instantiated by the client, the EJB implementation class, normally known as the bean class, becomes an accessible distributed Java object. Some example, rather simplified, client code is shown below:</p><p class="s37" style="padding-top: 10pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">Broker broker = null;</p><p class="s37" style="padding-top: 1pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">// find the home interface</p><p class="s37" style="padding-top: 1pt;padding-left: 14pt;text-indent: 0pt;line-height: 112%;text-align: left;">Object _h = ctx.lookup(&quot;EntityStock.BrokerHome&quot;); BrokerHome home =</p><p class="s37" style="padding-left: 25pt;text-indent: 0pt;text-align: left;">(BrokerHome)javax.rmi.PortableRemoteObject.narrow(_h,</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-top: 5pt;padding-left: 48pt;text-indent: 0pt;text-align: left;">BrokerHome.class);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-left: 15pt;text-indent: 0pt;line-height: 112%;text-align: left;">// Use the home interface to create the Broker EJB Object broker = home.create();</p><p class="s37" style="padding-left: 15pt;text-indent: 0pt;line-height: 112%;text-align: left;">// execute requests at the broker EJB broker.updateAccount(accountNo, 200000);</p><p class="s37" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">broker.buyStock(accountNo, stockID, 5000);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-left: 15pt;text-indent: 0pt;line-height: 112%;text-align: left;">//we&#39;re finished… broker.remove();</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">EJB clients may be standalone Java applications, servlets, applets, or even other EJBs. All clients use the server bean’s <i>home </i>interface to obtain a reference to an instance of the server bean. This reference is associated with the class type of the server bean’s <i>remote </i>interface. Therefore the cli- ent interacts with the server bean entirely through the methods defined in the bean’s <i>remote </i>interface.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">In this example, the <i>Broker </i>bean is a stateless session bean that handles client requests. Internally, it actually uses the services of a number of en- tity beans to perform the data access logic. An example of one of the <i>Bro- ker </i>methods, the <i>updateAccount </i>method, is included below:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-left: 15pt;text-indent: 0pt;line-height: 112%;text-align: left;">public void updateAccount(int accno, int credit) throws RemoteException {</p><p class="s37" style="padding-left: 26pt;text-indent: 0pt;text-align: left;">try {</p><p class="s37" style="padding-top: 1pt;padding-left: 48pt;text-indent: -12pt;line-height: 112%;text-align: left;">Account account = accountHome.findByPrimaryKey (new AccountPK(accno));</p><p class="s37" style="padding-left: 36pt;text-indent: 0pt;line-height: 8pt;text-align: left;">account.update(credit);</p><p class="s37" style="padding-top: 1pt;padding-left: 26pt;text-indent: 0pt;text-align: left;">}</p><p class="s37" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">catch (Exception e) {</p><p class="s37" style="padding-top: 1pt;padding-left: 58pt;text-indent: 0pt;text-align: left;">throw new RemoteException(e.toString());</p><p class="s37" style="padding-top: 1pt;padding-left: 26pt;text-indent: 0pt;text-align: left;">}</p><p class="s37" style="padding-top: 1pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 10pt;text-align: justify;">This method uses an entity bean called <i>Account</i>. The entity bean encap- sulates all the detailed manipulation of the application’s data, in this case, exactly how an account record is updated. The code in the <i>updateAccount </i>method uses an entity bean <i>finder </i>method called <i>findByPrimaryKey</i>, which is provided by the <i>Account </i>bean in its <i>home </i>interface. The finder method takes the primary key for the account, and accesses the underlying data- base. If an account record is found in the database with this primary key, the EJB container creates an <i>Account </i>entity bean. The entity bean methods, in this example the <i>update </i>method, can then be used to access the data in the account record.</p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;">The <i>home </i>and <i>remote </i>interface for <i>Account </i>look like this:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">public interface AccountHome extends EJBHome</p><p class="s37" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">{</p><p class="s37" style="padding-top: 1pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">public Account create(String name, String address,</p><p class="s37" style="padding-top: 1pt;padding-left: 25pt;text-indent: 0pt;text-align: left;">int credit) throws CreateException, RemoteException;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">/**</p></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: left;"><p class="s37" style="display: inline;">Finds an Account by its primary Key (Account ID)</p></li></ul><p class="s37" style="padding-top: 1pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">*/</p><p class="s37" style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;line-height: 112%;text-align: left;">public Account findByPrimaryKey(AccountPK key) throws FinderException, RemoteException;</p><p class="s37" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">}</p><p class="s37" style="padding-top: 1pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">public interface Account extends EJBObject</p><p class="s37" style="padding-top: 1pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">{ // many methods missing for brevity</p><p class="s37" style="padding-top: 1pt;padding-left: 25pt;text-indent: 0pt;line-height: 112%;text-align: left;">public void deposit(int amount) throws RemoteException; public int withdraw(int amount)</p><p class="s37" style="padding-left: 48pt;text-indent: 0pt;text-align: left;">throws AccountException, RemoteException;</p><p class="s37" style="padding-top: 1pt;padding-left: 25pt;text-indent: 0pt;line-height: 112%;text-align: left;">// Getter/setter methods on Entity Bean fields public String getSubName() throws RemoteException;</p><p class="s37" style="padding-left: 25pt;text-indent: 0pt;text-align: left;">public void setSubName(String name) throws RemoteException;</p><p class="s37" style="padding-top: 1pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;text-align: left;">The bean class for the entity bean contains the implementation of the</p><p style="padding-left: 14pt;text-indent: 0pt;text-align: left;">remote methods. The code for the <i>update </i>method is included below. Note it is very simple, in fact a single line of Java.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">public class AccountBean implements EntityBean {</p><p class="s37" style="padding-top: 1pt;padding-left: 25pt;text-indent: 0pt;line-height: 112%;text-align: left;">// Container-managed state fields public int sub_accno;</p><p class="s37" style="padding-left: 25pt;text-indent: 0pt;line-height: 112%;text-align: left;">public String sub_name; public String sub_address; public int sub_credit;</p><p class="s37" style="padding-left: 25pt;text-indent: 0pt;text-align: left;">// lots missing….</p><p class="s37" style="padding-top: 1pt;padding-left: 36pt;text-indent: -10pt;line-height: 112%;text-align: left;">public void update(int amount) { sub_credit = amount;</p><p class="s37" style="padding-left: 25pt;text-indent: 0pt;text-align: left;">}</p><p class="s37" style="padding-top: 1pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;text-align: left;">This simplicity is due to the fact that the entity bean is using “container</p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">managed persistence”. The EJB container <i>knows </i>(we&#39;ll see how it knows soon) that there is a correspondence between the data members in the <i>Ac- count </i>bean and the fields in an account table in the database the application is using.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Using this information, the container tools can generate the SQL state- ments needed to implement the finder method, and the queries needed to automatically read/write the data from/to the entity bean at the begin- ning/end of a transaction.</p><p style="padding-left: 28pt;text-indent: 0pt;text-align: left;">In this example, at the end of the <i>Broker </i>session bean&#39;s <i>updateAccount</i></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">method, the data items in the <i>Account </i>entity bean will be written back to</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">the database, making the changes to the <i>sub_credit </i>persistent field. All this is done transparently, without explicit control from the programmer.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a91">Deployment Descriptors</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">One of the major attractions of the EJB component model is the way in which it achieves a <i>separation of concerns </i>between business logic and in- frastructure code. This separation of concerns refers to the fact that EJB’s are mostly concerned with executing pure business logic. The EJB con- tainer becomes responsible for handling environmental and infrastructure issues like transactions, bean lifecycle management and security. This makes the code in the bean components simpler, as they aren’t littered with code to handle all these additional complexities.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Beans inform the container of the services they require through deploy- ment descriptors. A deployment descriptor is an XML document associ- ated with an EJB. When a bean is deployed into a container, the container reads the deployment descriptor to find out how transactions, persistence (for entity beans), and access control should be handled. Hence deploy- ment descriptors provide a declarative mechanism describing how these is- sues are handled.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The beauty of this mechanism is that the same EJB component can be deployed with different deployment descriptors suited to different applica- tion environments. If security is an issue, the component can specify its access control needs. If security is not an issue, no access control is speci- fied in the deployment descriptor. In both cases the code in the EJB is identical. From a software engineering perspective, this is really nice to have.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The deployment descriptor example below is specified in an XML Document Type Definition (DTD). The deployment descriptor describes the type of bean (session or entity) and the classes used for the <i>remote</i>, <i>home</i>, and bean class. It also specifies the transactional attributes of every method in the bean, which security roles can access each method (access control), and whether persistence in the entity beans is handled automati- cally by the container or is performed explicitly by the bean code.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The deployment descriptor for the <i>Broker </i>bean used in the example above is shown below. In addition to the attributes described above, the deployment descriptor specifies that this bean is stateless session bean, and that a container managed transaction is required to execute each method in the bean (these attributes are in boldface for ease of reading). As an exam- ple, we could simply change the <i>&lt;session-type&gt; </i>field in the XML to read <i>Stateful</i>, and the container would manage the bean very differently indeed.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">&lt;ejb-jar&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 25pt;text-indent: 0pt;text-align: left;">&lt;enterprise-beans&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 35pt;text-indent: 0pt;text-align: left;">&lt;session&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 57pt;text-indent: 0pt;text-align: left;">&lt;ejb-name&gt;EntityStock.BrokerHome&lt;/ejb-name&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 57pt;text-indent: 0pt;text-align: left;">&lt;home&gt;db.entitystock.BrokerHome&lt;/home&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 57pt;text-indent: 0pt;text-align: left;">&lt;remote&gt;db.entitystock.Broker&lt;/remote&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 57pt;text-indent: 0pt;text-align: left;">&lt;ejb-class&gt;db.entitystock.BrokerBean&lt;/ejb-class&gt;</p><p class="s59" style="padding-left: 57pt;text-indent: 0pt;text-align: left;">&lt;session-type&gt;Stateless&lt;/session-type&gt;</p><p class="s59" style="padding-top: 1pt;padding-left: 57pt;text-indent: 0pt;text-align: left;">&lt;transaction-type&gt;Container&lt;/transaction-type&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">&lt;/session&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 30pt;text-indent: 0pt;text-align: left;">&lt;/enterprise-beans&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 2pt;text-indent: 0pt;text-align: center;">&lt;assembly-descriptor&gt;</p><p class="s59" style="padding-left: 40pt;text-indent: 0pt;text-align: left;">&lt;container-transaction&gt;</p><p class="s59" style="padding-top: 1pt;padding-left: 51pt;text-indent: 0pt;text-align: left;">&lt;method&gt;</p><p class="s59" style="padding-top: 1pt;padding-left: 61pt;text-indent: 0pt;text-align: left;">&lt;ejb-name&gt;EntityStock.BrokerHome&lt;/ejb-name&gt;</p><p class="s59" style="padding-top: 1pt;padding-left: 61pt;text-indent: 0pt;text-align: left;">&lt;method-intf&gt;Remote&lt;/method-intf&gt;</p><p class="s59" style="padding-top: 1pt;padding-left: 61pt;text-indent: 0pt;text-align: left;">&lt;method-name&gt;*&lt;/method-name&gt;</p><p class="s59" style="padding-top: 1pt;padding-left: 51pt;text-indent: 0pt;text-align: left;">&lt;/method&gt;</p><p class="s59" style="padding-top: 1pt;padding-left: 51pt;text-indent: 0pt;text-align: left;">&lt;trans-attribute&gt;Required&lt;/trans-attribute&gt;</p><p class="s59" style="padding-left: 40pt;text-indent: 0pt;text-align: left;">&lt;/container-transaction&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 7pt;text-indent: 0pt;text-align: center;">&lt;/assembly-descriptor&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">&lt;/ejb-jar&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: left;">As another example, let&#39;s look at the deployment descriptor for the <i>Ac- count </i>entity bean. It looks like this:</p><p class="s37" style="padding-top: 10pt;padding-left: 25pt;text-indent: 0pt;text-align: left;">&lt;ejb-jar&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 29pt;text-indent: 0pt;text-align: center;">&lt;enterprise-beans&gt;</p><p class="s59" style="padding-left: 2pt;text-indent: 0pt;text-align: center;">&lt;entity&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">&lt;ejb-name&gt;EntityStock.AccountHome&lt;/ejb-name&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">&lt;home&gt;db.entitystock.AccountHome&lt;/home&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">&lt;remote&gt;db.entitystock.Account&lt;/remote&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">&lt;ejb-class&gt;db.entitystock.AccountBean&lt;/ejb-class&gt;</p><p class="s59" style="padding-left: 56pt;text-indent: 0pt;text-align: left;">&lt;persistence-type&gt;Container&lt;/persistence-type&gt;</p><p class="s59" style="padding-top: 1pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">&lt;prim-key-class&gt;db.entitystock.AccPK&lt;/prim-key-class<span class="s37">&gt;</span></p><p class="s37" style="padding-top: 1pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">&lt;reentrant&gt;False&lt;/reentrant&gt;</p><p class="s59" style="padding-left: 56pt;text-indent: 0pt;text-align: left;">&lt;cmp-field&gt;</p><p class="s59" style="padding-top: 1pt;padding-left: 66pt;text-indent: 0pt;text-align: left;">&lt;field-name&gt;sub_accno&lt;/field-name&gt;</p><p class="s59" style="padding-top: 1pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">&lt;/cmp-field&gt;</p><p class="s59" style="padding-top: 1pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">&lt;cmp-field&gt;</p><p class="s59" style="padding-top: 1pt;padding-left: 66pt;text-indent: 0pt;text-align: left;">&lt;field-name&gt;sub_name&lt;/field-name&gt;</p><p class="s59" style="padding-top: 1pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">&lt;/cmp-field&gt;</p><p class="s59" style="padding-top: 1pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">&lt;cmp-field&gt;</p><p class="s59" style="padding-top: 1pt;padding-left: 66pt;text-indent: 0pt;text-align: left;">&lt;field-name&gt;sub_address&lt;/field-name&gt;</p><p class="s59" style="padding-top: 1pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">&lt;/cmp-field&gt;</p><p class="s59" style="padding-top: 1pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">&lt;cmp-field&gt;</p><p class="s59" style="padding-top: 1pt;padding-left: 66pt;text-indent: 0pt;text-align: left;">&lt;field-name&gt;sub_credit&lt;/field-name&gt;</p><p class="s59" style="padding-top: 1pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">&lt;/cmp-field&gt;</p><p class="s59" style="padding-top: 1pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">&lt;resource-ref&gt;</p><p class="s59" style="padding-top: 1pt;padding-left: 66pt;text-indent: 0pt;text-align: left;">&lt;res-ref-name&gt;jdbc/sqlStock_nkPool&lt;/res-ref-name&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s59" style="padding-top: 5pt;padding-left: 66pt;text-indent: 0pt;text-align: left;">&lt;res-type&gt;javax.sql.DataSource&lt;/res-type&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 66pt;text-indent: 0pt;text-align: left;">&lt;res-auth&gt;Container&lt;/res-auth&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">&lt;/resource-ref&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 46pt;text-indent: 0pt;text-align: left;">&lt;/entity&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">&lt;/enterprise-beans&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">&lt;assembly-descriptor&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 46pt;text-indent: 0pt;text-align: left;">&lt;container-transaction&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">&lt;method&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 66pt;text-indent: 0pt;text-align: left;">&lt;ejb-name&gt;EntityStock.AccountHome&lt;/ejb-name&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 66pt;text-indent: 0pt;text-align: left;">&lt;method-intf&gt;Remote&lt;/method-intf&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 66pt;text-indent: 0pt;text-align: left;">&lt;method-name&gt;*&lt;/method-name&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">&lt;/method&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">&lt;trans-attribute&gt;Required&lt;/trans-attribute&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 46pt;text-indent: 0pt;text-align: left;">&lt;/container-transaction&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">&lt;/assembly-descriptor&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 26pt;text-indent: 0pt;text-align: left;">&lt;/ejb-jar&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">As well as the deployment attributes we’ve already seen, the above tells the container the following (bolded in the XML):</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></ol></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">it must manage persistence for beans of this type</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">where to find the JDBC data source for the database</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">what the primary key and data items are that must be mapped between the database and the entity bean</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l122"><ol id="l123"><ol id="l124"><li style="padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a92">Responsibilities of the EJB Container</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">It should be pretty obvious at this stage that the EJB container is a fairly complex piece of software. It’s therefore worth covering exactly what the role of the container is in running an EJB application.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">In general, a container provides EJB components with a number of ser- vices. These are:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></ol></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">It provides bean lifecycle management and bean instance pooling, in- cluding creation, activation, passivation, and bean destruction.</p></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">It intercepts client calls on the remote interface of beans to enforce transaction and security constraints. It also provides notification call- backs at the start and end of each transaction involving a bean instance.</p></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">It manages the persistence of selected fields of CMP entity beans.</p><p style="padding-top: 11pt;padding-left: 15pt;text-indent: 10pt;text-align: justify;">In order to intercept client calls, the tools associated with a container must generate additional classes for an EJB at deployment time. These tools use Java’s introspection mechanism to dynamically generate classes to implement the <i>home </i>and <i>remote </i>interfaces of each bean. These classes</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">enable the container to intercept all client calls on a bean, and enforce the policies specified in the bean&#39;s deployment descriptor.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: left;">The container also provides a number of other key run-time features for EJBs. These typically include:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Threading: <span class="p">EJB’s should not explicitly create and manipulate Java threads. They must rely on the container to allocate threads to active beans in order to provide a concurrent, high performance execution en- vironment. This makes EJBs simpler to write, as the application pro- grammer does not have to implement a threading scheme to handle con- current client requests.</span></h3></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Caching: <span class="p">The container can maintain caches of the entity bean instances it manages. Typically the size of the caches can be specified in deploy- ment descriptors.</span></h3></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Connection Pooling: <span class="p">The container can manage a pool of database connections to enable efficient access to external resource managers by reusing connections once transactions are complete.</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l125"><ol id="l126"><ol id="l127"><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a93">Some Thoughts</a></p></li></ol></ol></ol><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">This section has given a brief overview of J2EE and EJB technology. The EJB component model is widely used and has proven a powerful way of constructing server-side applications. And although the interactions be- tween the different parts of the code are at first a little daunting, with some exposure and experience with the model, it becomes relatively straightfor- ward to construct EJB applications. Also, EJB version 3.0<span class="s14">19 </span>is attempting to simplify a lot of the housekeeping code that is required, so when this version is widely available, building EJB applications should be even eas- ier.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: left;">Still, while the code construction is not difficult, a number of complexi- ties remain. These are:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 31pt;text-indent: -16pt;text-align: justify;"><p style="display: inline;">The EJB model makes it possible to combine components in an appli- cation using many different architectural patterns. This gives the archi- tect a range of design options for an application. Which option is <i>best </i>is often open to debate, along with what does <i>best </i>mean in a given ap- plication? These are not always simple questions, and requires the consideration of complex design trade-offs.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_080.png"/></span></p><p style="padding-top: 4pt;padding-left: 14pt;text-indent: 0pt;text-align: left;"><a href="http://java.sun.com/products/ejb/docs.html" style=" color: black; font-family:&quot;Times New Roman&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 3pt;" target="_blank">19 </a><a href="http://java.sun.com/products/ejb/docs.html" target="_blank">http://java.sun.com/products/ejb/docs.html</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 6pt;padding-left: 32pt;text-indent: -16pt;text-align: justify;"><p style="display: inline;">The way beans interact with the container is complex, and can have a significant effect of the performance of an application. In the same vein, all EJB server containers are not equal. Product selection and product specific configuration is an important aspect of the application development lifecycle.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">For references discussing both these issues, see the further reading sec- tion at the end of this chapter.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l128"><ol id="l129"><li style="padding-top: 10pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a94">Message Brokers</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">Basic messaging using MOM and publish-subscribe technologies suffices for many applications. It’s a simple, effective and proven approach that can deliver high levels of performance and reliability.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">MOM deployments start to get a little more complex though when mes- sage formats are not totally agreed amongst the various applications that communicate using the MOM. This problem occurs commonly in the do- main of enterprise integration, where the basic problem is building busi- ness applications from large, complex legacy business systems that were never designed to work together and exchange information.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Enterprise integration is a whole field of study in itself (see Further Reading). From the perspective of this book however, enterprise integra- tion has spawned an interesting and widely used class of middleware tech- nologies, known as message brokers.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Let’s introduce message brokers by way of a motivating example. As- sume an organization has four different legacy business systems that each hold information about customers.<span class="s14">20 </span>Each of these four stores some com- mon data about customers, as well as some unique data fields that others do not maintain. In addition, each of the applications has a different format for a customer record, and the individual field names are different across each (e.g. one uses ADDRESS, another LOCATION, as a field name for customer address data). To update customer data, a proprietary API is available for each legacy system.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Whilst this is conceptually pretty simple, it’s a problem that many or- ganizations have. So, let‘s assume keeping the data consistent in each of these four applications is a problem for our hypothetical organization. Hence they decide to implement a web site that allows customers to update</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_081.png"/></span></p><p class="s14" style="padding-top: 4pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;">20 <span class="s7">Duplicate data holdings like this are very common in enterprises. For example, my bank still manages to send my credit card statement and credit card rewards points statement to different addresses</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">their own details online. When this occurs, the data entered into the web page is passed to a web component in the web server (e.g. a servlet or ASP.NET page). The role of this component is to pass the updated data to each of the four legacy applications, so they can update their own customer data correctly.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The organization uses MOM to communicate between applications. Consequently, the web component formats a message with the new cus- tomer data, and uses the MOM to send the message to each legacy sys- tem<span class="s14">21</span>. The message format, labeled <i>In-format </i>in Fig. 25, is an agreed for- mat that the web component and all the legacy applications understand.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">Web Component</p><p style="text-indent: 0pt;text-align: left;"/><p class="s36" style="padding-left: 39pt;text-indent: 0pt;line-height: 9pt;text-align: left;">Key:</p><p class="s19" style="padding-left: 39pt;text-indent: 0pt;line-height: 11pt;text-align: left;">Message = <span><img width="24" height="16" alt="image" src="Image_082.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="114" height="122" alt="image" src="Image_083.png"/></span></p><p class="s19" style="padding-top: 4pt;padding-left: 89pt;text-indent: 0pt;text-align: center;">In-format</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 76pt;text-indent: 0pt;text-align: left;"><span><img width="45" height="43" alt="image" src="Image_084.png"/></span>	<span><img width="43" height="41" alt="image" src="Image_085.png"/></span>	<span><img width="43" height="41" alt="image" src="Image_086.png"/></span>	<span><img width="45" height="45" alt="image" src="Image_087.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="69" height="31" alt="image" src="Image_088.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="69" height="31" alt="image" src="Image_089.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="69" height="31" alt="image" src="Image_090.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="69" height="31" alt="image" src="Image_091.png"/></span></p><p class="s19" style="padding-top: 4pt;padding-left: 51pt;text-indent: 0pt;text-align: left;">In-format In-format In-format In-format</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">Legacy System #1</p><p style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">Legacy System #2</p><p style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">Legacy System #3</p><p style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">Legacy System #4</p><p style="padding-left: 31pt;text-indent: 0pt;text-align: left;">	  </p><h4 style="padding-top: 9pt;padding-left: 16pt;text-indent: 0pt;text-align: left;">Fig. 25. <span class="s7">Using MOM to communicate a customer data update to 4 legacy systems.</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Each legacy system has a queue interface component that can read mes- sages from the queue, and using the data in the message, create a call to the customer data update API that the legacy system supports. In this example, the interface component would read the message from the queue, extract the specific data fields from the message that it needs to call its legacy sys- tem’s API, and finally issue the API call. As shown in Fig. 26, the inter-</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_092.png"/></span></p><p class="s14" style="padding-top: 4pt;padding-left: 25pt;text-indent: -10pt;text-align: left;">21 <span class="s7">The MOM may deploy a different queue for each legacy application or a single queue and include a ‘destination’ field in each message.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">face component is basically performing a transformation from the <i>In- format </i>to a format suitable for its associated legacy system.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">So, for each legacy application, there is a dedicated component that exe- cutes the logic to transform the incoming message into a correctly format- ted legacy system API call. The transformation is implemented in the pro- gram code of the component.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="106" height="31" alt="image" src="Image_093.png"/></span></p><p class="s19" style="padding-left: 40pt;text-indent: 0pt;text-align: left;">In-format</p><p style="padding-top: 5pt;text-indent: 0pt;text-align: left;">Queue Read</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;line-height: 106%;text-align: left;">Message Transform</p><p style="text-indent: 0pt;text-align: left;"/><p class="s19" style="padding-left: 40pt;text-indent: 0pt;text-align: left;">Legacy- format</p><p style="padding-top: 5pt;padding-left: 20pt;text-indent: 0pt;text-align: left;">API</p><p style="text-indent: 0pt;text-align: left;"><span><img width="190" height="70" alt="image" src="Image_094.png"/></span></p><p style="padding-left: 20pt;text-indent: 0pt;text-align: left;">call</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-top: 5pt;padding-left: 29pt;text-indent: 0pt;text-align: left;">Fig. 26. <span class="s7">Message transformation from common to a legacy-specific format.</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;">This solution has some interesting implications:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">If the common <i>In-format </i>message format changes, then the web compo- nent and every legacy system component that executes the transforma- tion must be modified and tested.</p></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">If any legacy system API changes, then only the transformation for that system must be modified and tested.</p></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Modifying any of the transformations most likely requires coordinating with the development team who are responsible for the upkeep of the legacy system(s). These development teams are the ones who know the intimate details of how to access the legacy system API.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Hence, there is a tight coupling between all the components in this ar- chitecture. This is caused by the need for them to agree on the message format that is communicated. In addition, in large organizations (or even harder, across organizational boundaries), communicating and coordinat- ing changes to the common message format can be slow and painful. It’s the sort of thing you’d like to avoid if possible.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The obvious alternative solution is to move the responsibility for the message format transformation to the web component. This would guaran- tee that messages are sent to each legacy system interface component in the format they need to simply call the legacy API. The transformation complexity is now all in one place, the web component, and the legacy system interface component becomes simple. It basically reads message from the queue and calls the associated API using the data in the message. Changes to the <i>In-format </i>message do not cause changes in legacy interface</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 3pt;padding-left: 11pt;text-indent: 14pt;text-align: left;">Web Component</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">components, as only the web component needs modifying and testing. Changes to any legacy API though require the specific legacy system de- velopment team to request a new message format from the web component development team.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s36" style="padding-left: 28pt;text-indent: 0pt;line-height: 9pt;text-align: left;">Key:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="17" height="61" alt="image" src="Image_095.png"/></span></p><p class="s19" style="padding-left: 28pt;text-indent: 0pt;line-height: 11pt;text-align: left;">Message = <span><img width="24" height="16" alt="image" src="Image_096.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="69" height="31" alt="image" src="Image_097.png"/></span></p><p class="s19" style="padding-left: 89pt;text-indent: 0pt;text-align: center;">In-format</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 3pt;padding-left: 21pt;text-indent: -3pt;text-align: left;">Message Broker</p><p style="padding-left: 133pt;text-indent: 0pt;text-align: left;"/><p style="padding-left: 65pt;text-indent: 0pt;text-align: left;"><span><img width="45" height="43" alt="image" src="Image_098.png"/></span>	<span><img width="43" height="40" alt="image" src="Image_099.png"/></span>	<span><img width="44" height="41" alt="image" src="Image_100.png"/></span>	<span><img width="45" height="45" alt="image" src="Image_101.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="69" height="31" alt="image" src="Image_102.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="69" height="31" alt="image" src="Image_103.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="69" height="31" alt="image" src="Image_104.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="69" height="31" alt="image" src="Image_105.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="17" height="17" alt="image" src="Image_106.png"/></span></p><p class="s19" style="padding-left: 39pt;text-indent: 0pt;text-align: left;">L1-format L2-format L3-format L4-format</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">Legacy System #1</p><p style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">Legacy System #2</p><p style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">Legacy System #3</p><p style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">Legacy System #4</p><p style="padding-left: 20pt;text-indent: 0pt;text-align: left;">		 </p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-top: 5pt;padding-left: 49pt;text-indent: 0pt;text-align: left;">Fig. 27. <span class="s7">Decoupling Clients and Servers with a Message Broker.</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The major downside of this solution is the complexity of the web com- ponent. The transformation for each legacy system is embedded in its pro- gram code, making it prone to modification as it is effectively coupled to the message formats of every legacy system it communicates with.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">This is where message brokers enter the fray, offering a potential third solution. Architecturally, a broker is a known architecture pattern<span class="s14">22 </span>incor- porating a component that decouples clients and servers by mediating the communications between them. Similarly, message broker middleware augments the capabilities of a MOM platform so that business logic can be executed within the broker. In our example, using a broker we could em- bed the message transformation rules for each legacy system within the broker, giving a solution as in Fig. 27.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_107.png"/></span></p><p class="s14" style="padding-top: 4pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">22 <span class="s7">See Buschmann reference in Further Reading, Chapter 1</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 10pt;text-align: justify;">A message broker solution is attractive because it completely decouples the web component and the legacy interface components. The web compo- nent simply assembles and emits a message, and the broker transforms the message into the necessary format for each legacy system. It then sends an output message to the legacy system interface components in the precise format they desire.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">A further attraction is the simplification of all the components in the system, as they now do not have to be concerned with message format transformation. The message transformation logic is localized within the message broker, and becomes the responsibility of the middleware devel- opment group to maintain. Consequently, if changes are needed in the web or legacy system message formats, the development team responsible only need liaise with the middleware development group, whose job it is to cor- rectly update the transformations.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">It’s not a massive job to implement the broker pattern in conjunction with a standard MOM platform<span class="s14">23</span>. Such a solution would still have the dis- advantage of defining the transformation logic in the program code. For simple transformations, this is no big deal, but many such applications in- volve complex transformations with fiddly string formatting and concate- nations, formulas to calculate composite values, and so on. Nothing too difficult to write, but if there were a better solution that made creating complex transformations simple, I doubt many people would complain.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Message broker technologies begin to excel at this stage, because they provide specialized tools for:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Graphically describing complex message transformations between input formats and output formats. Transformations can be simple in terms of moving an input field value to an output field, or they can be defined us- ing scripting languages (typically product specific) that can perform various formatting, data conversions and mathematical transforms.</p></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">High performance message transformation engines that can handle mul- tiple simultaneous transformation requests.</p></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Describing and executing message flows, in which an incoming mes- sage can be routed to different transformations and outputs depending on the values in the incoming message.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">An example of a message mapping tool is shown in Fig. 28<b>. </b>This is Mi- crosoft’s BizTalk Mapper, and is typical of the class of mapping technolo- gies. In BizTalk, the mapper can generate the transformations necessary to move data between two XML schemas, with the lines depicting the map- ping between source and destination schemas. Scripts (not shown in the</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_108.png"/></span></p><p class="s14" style="padding-top: 4pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">23 <span class="s7">The solution is left as an exercise to the reader!</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">figure) can be associated with any mapping to define more complex map- pings.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;"><span><img width="386" height="298" alt="image" src="Image_109.gif"/></span></p><h4 style="padding-top: 4pt;padding-left: 77pt;text-indent: 0pt;text-align: left;">Fig. 28. <span class="s7">A message broker mapping tool example</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">An example of a typical message routing definition tool is shown in Fig. <b>29</b>. This is IBM’s WebSphere MQSI technology. It shows how an in- coming message, delivered on a queue, can be processed according to some data value in the message. In the example, a <i>Filter </i>component in- spects the incoming message field values, and based on specified condi- tions, executes one of two computations, or sends the message to one of two output queues. The message flow also defines exception handling logic, which is invoked when, for example, invalidly formatted messages are received.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Hence, message brokers are essentially highly specialized message transformation and routing engines. With their associated customized de- velopment tools, they make it simpler to define message transformations that can be:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Easily understood and modified without changing the participating ap- plications.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 6pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Managed centrally, allowing a team responsible for application integra- tion to coordinate and test changes.</p></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Executed by a high performance, multi-threaded transformation engine.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 16pt;text-indent: 0pt;text-align: left;"><span><img width="411" height="330" alt="image" src="Image_110.gif"/></span></p><h4 style="padding-top: 1pt;padding-left: 94pt;text-indent: 0pt;text-align: left;">Fig. 29. <span class="s7">Message routing and processing</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Importantly, message brokers operate on a per message level. They re- ceive an input message, transform it according to the message routing rules and logic, and output the resulting message or messages to their destina- tions. Brokers work best when these transformations are short-lived and execute quickly, in for example a few milliseconds. This is because they are typically optimized for performance, and hence try to avoid overheads that would slow down transformations. Consequently, if a broker or its host machine crashes, it relies on the fact that failed transformation can simply be executed again from the beginning, meaning expensive state and transaction management is not needed.<span class="s14">24</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_111.png"/></span></p><p class="s14" style="padding-top: 4pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;">24 <span class="s7">Many message brokers do optionally support transactional messaging, and even allow the broker to modify databases during transformation execution. These transactions are coordinated by an ACID transaction manager, such as the one supplied with the underlying MOM technology.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">For a large class of application integration scenarios, high-speed trans- formation is all that’s required. However, many business integration prob- lems require the definition of a series of requests flowing between different applications. Each request may involve several message transformations, reads and updates to external database systems, and complex logic to con- trol the flow of messages between applications and potentially even hu- mans for off-line decision-making. For such problems, message brokers are insufficient and well, you guessed it, even more technology is required. This is described in the next section.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Before moving on though, it should be emphasized that message bro- kers, like everything in software architecture and technologies, do have their downsides. First, they are proprietary technologies, and this leads to vendor lock-in. It’s the price you pay for all those sophisticated develop- ment and deployment tools. Second, in high volume messaging applica- tions, the broker can become a bottleneck. Most message broker products support broker clustering to increase performance, scalability and reliabil- ity, but this comes at the costs of complexity and dollars.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l130"><ol id="l131"><li style="padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a95">Business Process Orchestration</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">Business processes in modern enterprises can be complex in terms of the number of enterprise applications that must be accessed and updated to complete the business service. As an example, Fig. 30 is a simple depiction of a sales order business process, in which the following sequence of events occurs.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">A customer places an order through a call center. Customer data is stored in a customer relationship management package (Siebel). Once the order is placed, the customer’s credit is validated using an external credit service, and the accounts payable database in updated to record the order and send an invoice to the customer.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Placing an order causes a message to be sent to Shipping, who update their inventory system and ship the order to the customer. When the cus- tomer receives the order, they pay for the goods and the payment is re- corded in the accounts received system. All financial data is periodically extracted from the accounts systems and stored in an Oracle data ware- house for management reporting and archiving.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Implementing such business processes has two major challenges. First, from the time an order is placed to when the payment is received might take several days or weeks, or even longer. Somewhere then, the current state of the business process for a given order, representing exactly what</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">stage it is up to, must be stored, potentially for a long time. Losing this state, and hence the status of the order, is not a desirable option.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 20pt;text-indent: 0pt;text-align: left;"><span><img width="35" height="35" alt="image" src="Image_112.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="355" height="197" alt="image" src="Image_113.png"/></span></p><p class="s60" style="padding-left: 18pt;text-indent: 0pt;text-align: left;">Customer Purchasing</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s60" style="padding-left: 20pt;text-indent: -1pt;text-align: left;">Accounts Payable</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s60" style="padding-left: 18pt;text-indent: 0pt;text-align: left;">Credit Validation</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s61" style="padding-top: 5pt;padding-left: 29pt;text-indent: 0pt;text-align: center;">Sales                                                                                                             <span class="s60">Shipping</span></p><p class="s60" style="padding-top: 4pt;padding-left: 67pt;text-indent: 0pt;text-align: center;">Accounts</p><p class="s60" style="padding-left: 89pt;text-indent: 0pt;text-align: center;"><span class="s62">S</span>R<span class="s62">i</span>e<span class="s62">e</span>c<span class="s62">b</span>e<span class="s62">e</span>i<span class="s62">l</span>vable             <span class="s63">O</span>racle</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s60" style="padding-top: 5pt;padding-left: 125pt;text-indent: 0pt;text-align: left;">Customer Receiving</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 105pt;text-indent: 0pt;text-align: left;">Fig. 30. <span class="s7">A typical business process</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Second, exceptions in the order process can cause the state of the order to fail and rollback. For example, an order is taken for some stock item. Let’s assume this stock is not available in the warehouse, and when it is re- ordered, the supplier tells the warehouse that the old stock is now obsolete, and that a newer, more expensive model will replace it. The customer is in- formed of this, and they decide to cancel the order. Canceling requires the order data to be removed from the warehouse, accounts payable and Siebel systems. This is potentially a complex task to reliably and correctly per- form.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">This style of rollback behavior can be defined by the process designer using a facility known as a compensating transaction. Compensating trans- actions allow the process designer to explicitly define the logic required to undo a failed transaction that partially completed.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">In long-running business processes such as sales order processing, stan- dard ACID transactions, which lock all resources until the transaction completes, are not feasible. This is because they lock data in the business systems for potentially minutes, hours or even weeks in order to achieve transaction isolation. Locked data cannot be accessed by concurrent trans- actions, and hence lock contention will cause these to wait (or more likely fail through timing out) until the locks are released. Such a situation is not likely to produce high-performance and scalable business process imple- mentations for long running business processes.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">Transactional behavior for long running processes is therefore usually handled by grouping a number of process activities into a long-running transaction scope. Long-running transactions comprise of multiple process activities that do not place locks on the data items they touch in the various business systems. Updates are made and committed locally at each busi- ness system. However, if any activity in the transaction scope fails, the de- signer must specify a compensating function. The role of the compensator is to undo the effects of the transaction that have already committed. Es- sentially this means undoing any changes the transaction had made, leav- ing the data in the same state as it was before the transaction commenced.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Long-running transactions are notoriously difficult to implement cor- rectly. And sometimes they are somewhat impossible to implement sensi- bly – how do you compensate for a business process that has sent an email confirming an order has been shipped, or has mailed an invoice? So, tech- nology solutions for compensating transactions don’t eradicate any of these fundamental problems. But they do provide the designer with a tool to make the existence of a long running transaction explicit, and an execu- tion framework that automatically calls the compensator when failures oc- cur. For many problems this is sufficient for building a workable solution.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="360" height="70" alt="image" src="Image_114.png"/></span></p><p class="s7" style="padding-top: 3pt;padding-left: 83pt;text-indent: 7pt;line-height: 107%;text-align: left;">Process Description</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-bottom: 2pt;padding-left: 61pt;text-indent: 0pt;text-align: left;">Data access Transformations</p><p style="padding-left: 49pt;text-indent: 0pt;text-align: left;"><span><img width="26" height="26" alt="image" src="Image_115.png"/></span>	<span><img width="26" height="26" alt="image" src="Image_116.png"/></span>	<span><img width="26" height="26" alt="image" src="Image_117.png"/></span>	<span><img width="26" height="26" alt="image" src="Image_118.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: left;"><span><img width="46" height="33" alt="image" src="Image_119.png"/></span></p><p class="s64" style="padding-top: 1pt;padding-left: 89pt;text-indent: 0pt;text-align: left;">Message Broker</p><p style="text-indent: 0pt;text-align: left;"/><p class="s7" style="padding-top: 7pt;padding-left: 21pt;text-indent: 0pt;line-height: 107%;text-align: left;">Process State</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-left: 1pt;text-indent: -1pt;text-align: left;">Business Systems</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="62" height="79" alt="image" src="Image_120.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="61" height="80" alt="image" src="Image_121.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="62" height="79" alt="image" src="Image_122.png"/></span></p><h4 style="padding-top: 5pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">Fig. 31. <span class="s7">Anatomy of a business process orchestration platform</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">As Fig. 31 illustrates, business process orchestration (BPO) platforms are designed to make implementing these long running, highly integrated business processes relatively straightforward.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 10pt;text-align: left;">BPO platforms are commonly built as a layer on top of a message bro- ker. They extend message brokers by adding:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">State management: <span class="p">the state of an executing business process is stored persistently in a database. This makes it resilient to BPO server failure. Also, once the process state is stored in the database, it does not con- sume any resources in the BPO engine.</span></h3></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Development tools: <span class="p">visual process definition tools are provided for de- fining business processes.</span></h3></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Deployment tools: <span class="p">these enable developers to easily link logical busi- ness process steps to the underlying business systems using various types of connectivity, including message queues, web protocols and file systems.</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 17pt;text-indent: 0pt;text-align: left;"><span><img width="410" height="372" alt="image" src="Image_123.gif"/></span></p><h4 style="padding-top: 5pt;padding-left: 88pt;text-indent: 0pt;text-align: left;">Fig. 32. <span class="s7">BizTalk business process definition</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: left;">An example from Microsoft’s BizTalk technology is shown in Fig. 32. This shows the design of a simple business process for the ordering exam-</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">ple in Fig. 30. Messages are sent and received by activities in the process using ports. Ports basically connect to the business systems using a port- defined transport mechanism, for example HTTP, a message queue or a file. All messages handled inside an orchestration must be defined by XML schemas. Activities can be carried out in sequence, or in parallel as shown in the example.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">BPO engines are the most recent addition to the IT middleware stack. The need for their functionality has been driven by the desire to automate more and more business processes that must access numerous independent business applications. There seems little doubt that this trend will continue as enterprises drive down costs by better integrating and coordinating their internal applications, and seamlessly connecting to external business part- ners.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l132"><ol id="l133"><li style="padding-top: 10pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a96">Integration Architecture Issues</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">The difficulty of integrating heterogeneous applications in large enter- prises is a serious one. While there are many issues to deal with in enter- prise integration, at the core is an architectural problem concerning modi- fiability. The story goes like this.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Assume your enterprise has five different business applications that need integrating to support some new business processes. Like any sensi- ble architect, you decide to implement these business processes one at a time (as you know a “big bang” approach is doomed to fail!).</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The first process requires one of the business systems to send messages to each of the other four, using their published messaging interfaces. To do this, the sender must create a message payload in the format required by each business application. Assuming one-way messages only, this means our first business process must be able to transform its source data into 4 different message formats. Of course, if the other business systems decide to change their formats, then these transformations must be updated. What we’ve created with this design is a tight coupling, namely the message formats, between the source and destination business systems. This sce- nario is depicted in the left-side of Fig. 33.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">With the first business process working, and with many happy business users, you go on to incrementally build the remainder. When you’ve fin- ished, you find you’ve created an architecture like that in the right-side of Fig. 33. Each application sends messages to each of the other four, creating 20 interfaces, or dependencies, that need to be maintained. When one business application is modified, it’s possible that each of the others will</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">need to update their message transformations to send messages in a newly required format.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 36pt;text-indent: 0pt;text-align: left;"><span><img width="121" height="133" alt="image" src="Image_124.png"/></span>	<span><img width="144" height="126" alt="image" src="Image_125.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s6" style="padding-top: 5pt;padding-left: 49pt;text-indent: 0pt;text-align: left;">1 business process = 4 interfaces</p></li></ol><li style="padding-top: 5pt;padding-left: 38pt;text-indent: 0pt;text-align: left;"><p class="s6" style="display: inline;">business processes = 20 interfaces</p></li></ol><h4 style="padding-top: 9pt;padding-left: 52pt;text-indent: 0pt;text-align: left;">Fig. 33. <span class="s7">Integrating applications in a point-to-point architecture</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">This is a small scale illustration of a problem that exists in thousands of organizations. I’ve seen enterprise architectures that have three hundred point-to-point interfaces between forty or so standalone business applica- tions. Changing an application’s message interface becomes a scary exer- cise in such enterprises, as so many other systems are dependent on it. Sometimes making changes is so scary, development teams just won’t do it. It’s simply too risky.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">In the general case, the number of interfaces between N applications is (N2-N). So as N grows, the number of possible interfaces grows exponen- tially, making such point-to-point architectures non-scalable in terms of modifiability.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Now it’s true that very few enterprises have a fully connected point-to- point architecture such as that on the right-side of Fig. 33. But it’s also true that many interfaces between two applications are two-way, requiring two transformations. And most applications have more than one interface, so in reality the number of interfaces between two tightly coupled applications can be considerably greater than one.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Another name for a point-to-point architecture is a “spaghetti architec- ture”, hopefully for obvious reasons. When using this term, very few peo- ple are referring to spaghetti with the positive connotations usually associ- ated with tasty Italian food. In fact, as the discipline of enterprise integration blossomed in the late 1990’s, the emerging dogma was that spaghetti architectures should be avoided at all costs. The solution pro-</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">moted, for good reasons, was to use a message broker, as explained earlier in this chapter.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Let’s analyze exactly what happens when a spaghetti architecture is transformed using a message broker, as illustrated in Fig. 34. Complexity in the end points, the business applications, is greatly reduced as they just send messages using their native formats to the broker, and these are trans- formed inside the broker to the required destination format. If you need to change an end point, then you just need to modify the message transforma- tions within the broker that are dependent on that end point. No other busi- ness applications know or care.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="280" height="171" alt="image" src="Image_126.png"/></span></p><p class="s6" style="padding-top: 5pt;padding-left: 73pt;text-indent: 0pt;text-align: center;">message broker</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-top: 5pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">Fig. 34. <span class="s7">Eliminating a point-to-point architecture with a message broker.</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: left;">Despite all these advantages to introducing a message broker, the <i>no free lunch</i><span class="s29">25 </span>principle, as always, applies. The downsides are:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">The spaghetti architecture really still exists. It’s now resident inside the message broker, where complex dependencies between message formats are captured in broker-defined message transformations.</p></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Brokers are a potentially a performance bottleneck, as all the messages between applications must pass through the broker. Good brokers sup- port replication and clustered deployments to scale their performance. But of course, this increases deployment and management complexity, and more than likely the license costs associated with a solution. Mes- sage broker vendors, perhaps not surprisingly, rarely see this last point as a disadvantage.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: left;">So message brokers are very useful, but not a panacea by any means for integration architectures. There is however a design approach that can be</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_127.png"/></span></p><p style="padding-top: 4pt;padding-left: 14pt;text-indent: 0pt;text-align: left;"><a href="http://en.wikipedia.org/wiki/Tanstaafl" style=" color: black; font-family:&quot;Times New Roman&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 3pt;" target="_blank">25 </a><a href="http://en.wikipedia.org/wiki/Tanstaafl" target="_blank">http://en.wikipedia.org/wiki/Tanstaafl</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">utilized that possesses the scalability of a point-to-point architecture with the modifiability characteristics of broker-based solution.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The solution is to define an enterprise data model (also known as a ca- nonical data model) that becomes the target format for all message trans- formations between applications. For example, a common issue is that all your business systems have different data formats to define customer in- formation. When one application integrates with another, it (or a message broker) must transform its customer message format to the target message format.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Now let’s assume we define a canonical message format for customer information. This can be used as the target format for any business applica- tion that needs to exchange customer-related data. Using this canonical message format, a message exchange is now reduced to the following steps:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Source application transforms local customer data in to canonical cus- tomer information format.</p></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Source sends message to target with canonical message format as pay- load.</p></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Target receives message and transforms the canonical format into its own local customer data representation.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;">This means that each end point (business application) must know:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">how to transform all messages it receives from the canonical format to its local format</p></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">how to transform all messages it sends from its local format to the ca- nonical format</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">As Fig. 35 illustrates, by using the enterprise data model to exchange messages, we get the best of both worlds. The number of transformations is reduced to 2*N (assuming a single interface between each end point). This gives us much better modifiability characteristics. Also, as there are now considerably fewer and less complex transformations to build, the transformations can be executed in the end points themselves. We have no need for a centralized, broker-style architecture. This scales well, as there’s inherently no bottleneck in the design. And there’s no need for additional hardware for the broker, and additional license costs for our chosen broker solution.</p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;">I suspect some of you might be thinking that this is too good to be true.</p><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;">Perhaps there is at least a low cost lunch option here?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">I’m sorry to disappoint you, but there are real reasons why this architec- ture is not ubiquitous in enterprise integration. The main one is the sheer difficulty of designing, and then getting agreement on, an enterprise data model in a large organization. In a green field site, the enterprise data model is something that can be designed upfront and all end points man- dated to adhere to. But green field sites are rare, and most organization’s enterprise systems have grown organically over many years, and rarely in a planned and coordinated manner. This is why broker-based solutions are successful. They recognize the reality of enterprise systems and the need for building many ad hoc transformations between systems in a maintain- able way.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">There are other impediments to establishing canonical data formats. If your systems integrate with a business partner’s applications over which you have no control, then it’s likely impossible to establish a single, agreed set of message formats. This problem has to be addressed on a much wider scale, where whole industry groups get together to define common mes- sage formats. A good example is RosettaNet<span class="s14">26 </span>that has defined protocols for automating supply chains in the semiconductor industry. As I’m sure you can imagine, none of this happens quickly.<span class="s14">27</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="280" height="171" alt="image" src="Image_128.png"/></span></p><p class="s11" style="padding-top: 5pt;padding-left: 149pt;text-indent: 0pt;text-align: left;">Enterprise Data Model</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-top: 5pt;padding-left: 75pt;text-indent: 0pt;text-align: left;">Fig. 35. <span class="s7">Integration using an enterprise data model</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">For many organizations, the advantages of using an enterprise data model can only be incrementally exploited. For example, a new business systems installation might present opportunities to start defining elements of an enterprise data model, and to build point-to-point architectures that exploit end point transformations to canonical formats. Or your broker</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_129.png"/></span></p><p style="padding-top: 4pt;padding-left: 14pt;text-indent: 0pt;text-align: left;"><a href="http://www.rosettanet.org/" style=" color: black; font-family:&quot;Times New Roman&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 3pt;" target="_blank">26 </a><a href="http://www.rosettanet.org/" target="_blank">www.rosettanet.org</a></p><p class="s14" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">27 <a href="http://www.ebxml.org/" class="a" target="_blank">See </a><span class="s7">http://www.ebxml.org/ for examples of initiatives in this area.</span></p><p class="s7" style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 250pt;text-indent: 0pt;text-align: left;">4.9 Summary 87</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_130.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">might be about to be deprecated and require you to upgrade your transfor- mation logic? I’d recommend taking any chance you get.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l134"><ol id="l135"><li style="padding-top: 10pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a97">Summary</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">It’s taken the best part of fifteen years to build, but now IT architects have a powerful toolkit of middleware technologies to leverage in designing and implementing their applications. These technologies have evolved for two main reasons:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l136"><li style="padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">They help make building complex, distributed, concurrent applications simpler.</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">They institutionalize proven design practices by supporting them in off- the-shelf middleware technologies.</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">With all this infrastructure technology available, the skill of the architect lies in how they select, mix and match architectures and technologies in a way that meets their application’s requirements and constraints. This re- quires not only advanced design skills, but also deep knowledge of the technologies involved, understanding what they can be reliably called on to do, and equally importantly, what they cannot sensibly do. Many appli- cations fail or are delivered late because perfectly good quality and well built middleware technology is used in a way in which it was never in- tended to be used. This is not the technology’s fault – it’s the designers’. Hence middleware knowledge, and more importantly experience with the technologies in demanding applications, is simply a pre-requisite for be- coming a skilled architect in the information technology world.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">To make life more complex, it’s rare that just a single architecture and technology solution makes sense for any given application. For example, simple messaging or a message broker might make sense for a particular problem. And these logical design alternatives typically have multiple im- plementation options in terms of candidate middleware products for build- ing the solution.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">In such situations, the architect has to analyze the various trade-offs be- tween different solutions and technologies, and choose an alternative (or perhaps nominate a set of competing alternatives) that meets the applica- tion requirements. To be honest, I’m always a little suspicious of architects who, in such circumstances, always come up with the same architectural and technology answer (unless they work for a technology vendor – in that case, it’s their job).</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">The cause of this “I have a hammer, everything is a nail” style behavior is often a fervent belief that a particular design, and more often a favored technology, can solve any problems that arise. As it’s the end of the chap- ter, I won’t get on my soap box. But I’ll simply say that open-minded, ex- perienced and technologically agnostic architects are more likely to con- sider a wider range of design alternatives. They’re also likely to propose solutions most appropriate to the quirks and constraints of the problem at hand, rather than enthusiastically promoting a particular solution that dem- onstrates the eternal “goodness” of their favorite piece of technology over its “evil” competitors.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a98">Further Reading</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">There’s an enormous volume of potential reading on the subject matter covered in this chapter. The references that follow should give you a good starting point to delve more deeply.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l137"><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a99">CORBA</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">The best place to start for all CORBA related information is the Object Management Group’s web site, namely:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;text-align: left;"><a href="http://www.omg.org/" class="s13">www.omg.org</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Navigate from here, and you’ll find information on everything to do with CORBA, including specifications, tutorials and many books. For spe- cific recommendations, in my experience, anything written by Doug Schmidt, Steve Vinosky or Michi Henning is always informative and re- vealing.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a100">Message-Oriented Middleware</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">The best place to look for MOM information is probably the product ven- dor’s documentation and white papers. Use your favorite search engine to look for information on IBM WebSphere MQ, Microsoft Message Queue (MSMQ), Sonic MQ, and many more. If you’d like to peruse the Java Messaging Service specification, it can be downloaded from:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;text-align: left;"><a href="http://java.sun.com/products/jms/docs.html" class="s13">http://java.sun.com/products/jms/docs.html</a></p><p class="s7" style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 221pt;text-indent: 0pt;text-align: left;">4.10 Further Reading 89</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_131.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">If you’re interested in a very readable and recent analysis of some pub- lish-subscribe technology performance, including a JMS, the following is well worth downloading:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Piyush Maheshwari and Michael Pang, <i>Benchmarking Message- Oriented Middleware: TIB/RV versus SonicMQ</i>, Concurrency and Compu- tation: Practice and Experience, volume 17, pages 1507-1526, 2005</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a101">Application Servers</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">Again, the Internet is probably the best source of general information on applications servers. Leading product include WebLogic (BEA), Web- Sphere (IBM), .NET application server (Microsoft), and for a high quality open source implementation, JBoss.</p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;">There’s lots of good design knowledge about EJB applications in:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">F. Marinescu. EJB Design Patterns: Advanced Patterns, Processes, and Idioms. Wiley, 2002</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">D. Alur, D. Malks, J. Crupi. Core J2EE Patterns: Best Practices and De- sign Strategies. Second Edition, Prentice Hall, 2003</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The following discusses how to compare middleware and application server features:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">I. Gorton, A. Liu, P. Brebner. <i>Rigorous Evaluation of COTS Middle- ware Technology. </i>IEEE Computer, vol. 36, no. 3, pages 50-55, March 2003</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a102">Integration Middleware</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">An excellent book by one of the leaders in enterprise integration is:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">D. S. Linthicum. Next Generation Application Integration: From Simple Information to Web Services. Addison-Wesley, 2003</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The following three books have broad and informative coverage of de- sign patterns for enterprise integration and messaging.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">M. Fowler. Patterns of Enterprise Application Architecture. Addison- Wesley, 2002.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: left;">G. Hohpe, B. Woolf. Enterprise Integration Patterns: Designing, Build- ing, and Deploying Messaging Solutions. Addison-Wesley, 2003</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: left;">C. Bussler, B2B Integration Concepts and Architecture, Springer-Verlag 2003</p></li></ol></li></ol><li style="padding-top: 4pt;padding-left: 28pt;text-indent: -13pt;text-align: left;"><h1 style="display: inline;"><a name="a103">A Software Architecture Process</a></h1></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l138"><ol id="l139"><li style="padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a104">Process Outline</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;">The role of an architect is much more than simply carrying out a software design activity. The architect must typically:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Work with the requirements team: <span class="p">The requirements team will be fo- cused on eliciting the functional requirements from the application stakeholders. The architect plays an important role in requirements gathering by understanding the overall systems needs and ensuring that the appropriate quality attributes are explicit and understood.</span></h3></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Work with various application stakeholders: <span class="p">Architects play a pivotal liaison role by making sure all the application’s stakeholder needs are understood and incorporated into the design. For example, in addition to the business user requirements for an application, system administrators will require that the application can be easily installed, monitored, man- aged and upgraded.</span></h3></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Lead the technical design team: <span class="p">Defining the application architecture is a design activity. The architect leads a design team, comprising sys- tem designers (or on large projects, other architects) and technical leads in order to produce the architecture blueprint.</span></h3></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Work with the project management: <span class="p">The architect works closely with project management, helping with project planning, estimation and task allocation and scheduling.</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">In order to guide an architect through the definition of the application architecture, it’s useful to follow a defined software engineering process. Fig. 36 shows a simple, three-step iterative architecture process that can be used to guide activities during the design. Briefly, the three steps are:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l140"><ol id="l141"><ol id="l142"><li style="padding-top: 5pt;padding-left: 48pt;text-indent: -16pt;text-align: justify;"><h3 style="display: inline;">Define architecture requirements: <span class="p">This involves creating a statement or model of the requirements that will drive the architec- ture design.</span></h3></li><li style="padding-left: 48pt;text-indent: -16pt;text-align: justify;"><h3 style="display: inline;">Architecture design: <span class="p">This involves defining the structure and re- sponsibilities of the components that will comprise the architec- ture.</span></h3></li><li style="padding-left: 48pt;text-indent: -16pt;text-align: justify;"><h3 style="display: inline;">Validation: <span class="p">This involves “testing” the architecture, typically by walking through the design, against existing requirements and any known or possible future requirements.</span></h3></li></ol></ol></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s65" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;line-height: 115%;text-align: center;">Determine Architectural Requirements</p><p class="s65" style="padding-top: 12pt;padding-left: 15pt;text-indent: -10pt;line-height: 117%;text-align: left;">Architecture Design</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s65" style="padding-left: 9pt;text-indent: 0pt;text-align: left;">Validation</p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">		</p><p style="text-indent: 0pt;text-align: left;"><span><img width="183" height="113" alt="image" src="Image_132.png"/></span></p><h4 style="padding-top: 5pt;padding-left: 80pt;text-indent: 0pt;text-align: left;">Fig. 36. <span class="s7">A three step architecture design process</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">This architecture process is inherently iterative. Once a design is pro- posed, validating it may show that the design needs modification, or that certain requirements need to be further defined and understood. Both these lead to enhancements to the design, subsequent validation, and so on, until the design team is satisfied that the requirements are met.</p><p style="padding-left: 25pt;text-indent: 0pt;text-align: left;">The rest of this chapter explains each of these steps in more detail.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l143"><ol id="l144"><ol id="l145"><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a105">Determine Architectural Requirements</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">Before an architectural solution can be designed, it’s necessary to have a pretty good idea of the requirements for the application architecture. Ar- chitecture requirements, sometimes also called architecturally significant requirements or architecture use cases, are essentially the quality and non- functional requirements for the application.</p><p class="s7" style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 228pt;text-indent: 0pt;text-align: left;">5.1 Process Outline 93</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_133.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a106">Identifying Architecture Requirements</a></p><p style="text-indent: 0pt;text-align: left;"><span><img width="136" height="98" alt="image" src="Image_134.png"/></span></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">As Fig. 37 shows, the main sources of architecture requirements are the functional requirements document, and other documents that capture vari- ous stakeholder needs. The output of this step is a document that states the architecture requirements for the application.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="114" height="98" alt="image" src="Image_135.png"/></span></p><p style="padding-top: 5pt;padding-left: 61pt;text-indent: 0pt;text-align: left;">Functional Requirements</p><p style="padding-top: 5pt;padding-left: 61pt;text-indent: 0pt;text-align: left;">Stakeholder Requirements</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">Determine Architecture Requirements</p><p style="padding-left: 121pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="122" height="91" alt="image" src="Image_136.png"/></span></p><p style="padding-top: 5pt;padding-left: 117pt;text-indent: 0pt;text-align: left;">Architecture Requirements</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-top: 5pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">Fig. 37. <span class="s7">Inputs and outputs for determining architecture requirements</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Let’s look at some examples. A typical architecture requirement con- cerning reliability of communications is:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s11" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">“Communications between components must be guaranteed to succeed with no message loss”</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;">Some architecture requirements are really constraints, for example:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;">“<i>The system must use the existing IIS-based web server and use Active Server Page to process web requests</i>”</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Constraints impose restrictions on the architecture and are (almost al- ways) non-negotiable. They limit the range of design choices an architect can make. Sometimes this makes an architect’s life easier, and sometimes it doesn’t. Table 2 lists some example architecture requirements along with the quality attribute they address.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-top: 5pt;padding-left: 76pt;text-indent: 0pt;text-align: left;">Table 2. <span class="s7">Some example architecture requirements</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:18.421pt" cellspacing="0"><tr style="height:22pt"><td style="width:65pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 13pt;text-indent: 3pt;line-height: 11pt;text-align: left;">Quality Attribute</p></td><td style="width:240pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 66pt;text-indent: 0pt;text-align: left;">Architecture Requirement</p></td></tr><tr style="height:22pt"><td style="width:65pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Performance</p></td><td style="width:240pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 6pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Application performance must provide sub-four second re-</p><p class="s28" style="padding-left: 6pt;text-indent: 0pt;line-height: 10pt;text-align: left;">sponse times for 90% of requests.</p></td></tr><tr style="height:22pt"><td style="width:65pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Security</p></td><td style="width:240pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 4pt;text-indent: 0pt;line-height: 10pt;text-align: left;">All communications must be authenticated and encrypted</p><p class="s28" style="padding-left: 4pt;text-indent: 0pt;line-height: 10pt;text-align: left;">using certificates.</p></td></tr><tr style="height:22pt"><td style="width:65pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Resource</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Management</p></td><td style="width:240pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 6pt;text-indent: 0pt;text-align: left;">The server component must run on a low end office-based</p><p class="s28" style="padding-left: 6pt;text-indent: 0pt;line-height: 10pt;text-align: left;">server with 512MB memory.</p></td></tr><tr style="height:22pt"><td style="width:65pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Usability</p></td><td style="width:240pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 4pt;text-indent: 0pt;line-height: 10pt;text-align: left;">The user interface component must run in an Internet</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">browser to support remote users.</p></td></tr><tr style="height:22pt"><td style="width:65pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Availability</p></td><td style="width:240pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 6pt;text-indent: 0pt;line-height: 10pt;text-align: left;">The system must run 24x7x365, with overall availability of</p><p class="s28" style="padding-left: 6pt;text-indent: 0pt;line-height: 10pt;text-align: left;">0.99.</p></td></tr><tr style="height:22pt"><td style="width:65pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Reliability</p></td><td style="width:240pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 6pt;text-indent: 0pt;line-height: 10pt;text-align: left;">No message loss is allowed, and all message delivery out-</p><p class="s28" style="padding-left: 6pt;text-indent: 0pt;line-height: 10pt;text-align: left;">comes must be known with 30 seconds</p></td></tr><tr style="height:22pt"><td style="width:65pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Scalability</p></td><td style="width:240pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">The application must be able to handle a peak load of 500</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">concurrent users during the enrollment period.</p></td></tr><tr style="height:33pt"><td style="width:65pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Modifiability</p></td><td style="width:240pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 6pt;text-indent: 0pt;text-align: left;">The architecture must support a phased migration from the current Forth Generation Language (4GL) version to a</p><p class="s28" style="padding-left: 6pt;text-indent: 0pt;line-height: 10pt;text-align: left;">.NET systems technology solution.</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: left;">Table 3 gives some typical examples of constraints, along with the source of each constraint.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 104pt;text-indent: 0pt;text-align: left;">Table 3. <span class="s7">Some example constraints</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:18.479pt" cellspacing="0"><tr style="height:11pt"><td style="width:66pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 11pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Constraint</p></td><td style="width:239pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 66pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Architecture Requirement</p></td></tr><tr style="height:22pt"><td style="width:66pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Business</p></td><td style="width:239pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">The technology must run as a plug-in for MS BizTalk, as we</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">want to sell this to Microsoft.</p></td></tr><tr style="height:22pt"><td style="width:66pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Development</p></td><td style="width:239pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">The system must be written in Java so that we can use exist-</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">ing development staff.</p></td></tr><tr style="height:22pt"><td style="width:66pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Schedule</p></td><td style="width:239pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">The first version of this product must be delivered within six</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">months.</p></td></tr><tr style="height:33pt"><td style="width:66pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Business</p></td><td style="width:239pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">We want to work closely with and get more development</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">funding from <i>MegaHugeTech Corp</i>, so we need to use their technology in our application.</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a107">Prioritizing Architecture Requirements</a></p></li></ol></ol></ol><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">It’s a rare thing when all architecture requirements for an application are equal. Often the list of architecture requirements contains items that are of low priority, or “this would be good to have, but not necessary” type fea- tures. It’s consequently important to explicitly identify these, and rank the</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">architecture requirements using priorities. Initially, it’s usually sufficient to allocate each requirement to one of three categories, namely:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l146"><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">High: <span class="p">the application must support this requirement. These require- ments drive the architecture design;</span></h3></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Medium: <span class="p">this requirement will need to be supported at some stage, but not necessarily in the first/next release;</span></h3></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Low: <span class="p">this is part of the requirements wish list. Solutions that can ac- commodate these requirements are desired, but they are not the drivers of the design;</span></h3></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Prioritization gets trickier in the face of conflicting requirements. Com- mon examples are:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Reusability of components in the solution versus rapid time-to-market. Making components generalized and reusable always takes more time and effort.</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Minimal expenditure on COTS products versus reduced development effort/cost. COTS products mean you have to develop less code, but they cost money.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">There’s no simple solution to these conflicts. It’s part of the architect’s job to discuss these with the relevant stakeholders, and come up with pos- sible solution scenarios to enable the issues to be thoroughly understood. Conflicting requirements may even end up as the same priority. It is then the responsibility of the solution to consider appropriate trade-offs, and to try to find that “fine line” that adequately satisfies both requirements with- out upsetting anyone or having major undesirable consequences on the ap- plication. Remember, good architects know how to say “no”.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">In a project with many stakeholders, it’s usually a good idea to get each set of stakeholders to sign off on this prioritization. This is especially true in the face of conflicting requirements. Once this is agreed, the architecture design can commence.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l147"><ol id="l148"><li style="padding-top: 10pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a108">Architecture Design</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">While all the tasks an architect performs are important, it’s the quality of the architecture design that really matters. Wonderful requirement docu- ments and attentive networking with stakeholders mean nothing if a poor design is produced.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">Not surprisingly, design is typically the most difficult task an architect undertakes. Good architects draw on several years of software engineering and design experience. There’s no substitute for this experience, so all this chapter can do is try to help readers gain some of the necessary knowledge as quickly as possible.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="113" height="83" alt="image" src="Image_137.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="8" height="31" alt="image" src="Image_138.png"/></span></p><p style="padding-top: 5pt;padding-left: 128pt;text-indent: 0pt;text-align: left;">Architecture Requirements</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">Choose Architecture Framework</p><p style="padding-left: 121pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">Allocate Components</p><p style="padding-left: 115pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="121" height="91" alt="image" src="Image_139.png"/></span></p><p style="padding-top: 5pt;padding-left: 61pt;text-indent: 0pt;text-align: left;">Architecture Views</p><p style="padding-top: 5pt;padding-left: 59pt;text-indent: 0pt;text-align: left;">Architecture Document</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="121" height="91" alt="image" src="Image_140.png"/></span></p><h4 style="padding-top: 5pt;padding-left: 78pt;text-indent: 0pt;text-align: left;">Fig. 38. <span class="s7">Inputs and outputs of architecture design</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">As Fig. 38 shows, the inputs to the design step are the architecture re- quirements. The design stage itself has two steps, which are iterative in na- ture. The first involves choosing an overall strategy for the architecture, based around proven architecture patterns. The second involves specifying the individual components that make up the application, showing how they fit into the overall framework and allocating them responsibilities. The output is a set of architecture views that capture the architecture design, and a design document that explains the design, the key reasons for some of the major design decisions, and identifies the risks involved in taking the design forward.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l149"><li style="padding-top: 5pt;padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a109">Choosing the Architecture Framework</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">Most of the IT applications I’ve worked on in the last ten years are based around a small number of well understood, proven architectures. There’s a good reason for this – they work. Leveraging known solutions minimizes the risks that an application will fail due to an inappropriate architecture.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">So the initial design step involves selecting an architecture framework that seems likely to satisfy the key requirements. For small applications, a single architecture pattern like <i>n-tier client-server </i>may suffice. For more complex applications, the design will incorporate one or more known pat- terns, with the architect specifying how these patterns integrate to form the overall architecture.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">There’s no magic formula for designing the architecture framework. A pre-requisite, however, is to understand how each of the main architecture patterns addresses certain quality attributes. The following sub-sections briefly cover some of the major patterns used, and describe how they ad- dress common quality requirements.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="24" height="31" alt="image" src="Image_141.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="24" height="31" alt="image" src="Image_142.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="24" height="31" alt="image" src="Image_143.png"/></span></p><p style="padding-top: 3pt;padding-left: 23pt;text-indent: 3pt;text-align: left;">Web Client</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-top: 3pt;padding-left: 23pt;text-indent: 3pt;text-align: left;">Web Client</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-top: 3pt;padding-left: 23pt;text-indent: 3pt;text-align: left;">Web Client</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-top: 9pt;padding-left: 27pt;text-indent: 0pt;text-align: left;">Client Tier</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="24" height="31" alt="image" src="Image_144.png"/></span></p><p style="padding-top: 3pt;padding-left: 86pt;text-indent: 0pt;text-align: center;">Web Server</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-left: 27pt;text-indent: 0pt;text-align: left;">Web Server Tier</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="24" height="31" alt="image" src="Image_145.png"/></span></p><p style="padding-top: 3pt;padding-left: 73pt;text-indent: 0pt;text-align: left;">Application Server</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-left: 27pt;text-indent: 0pt;text-align: left;">Business Logic Tier</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 3pt;padding-left: 86pt;text-indent: 0pt;text-align: center;">Databases</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-top: 7pt;padding-left: 27pt;text-indent: 0pt;text-align: left;">Data Management Tier</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-top: 5pt;padding-left: 102pt;text-indent: 0pt;text-align: left;">Fig. 39. <span class="s7">N-tier client-server example</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l150"><li style="padding-top: 8pt;padding-left: 56pt;text-indent: -40pt;text-align: left;"><p class="s41" style="display: inline;">N-Tier Client Server</p><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;">In Fig. 39 the anatomy of this pattern for a web application is illustrated. The key properties of this pattern are:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></li></ol></li></ol></ol></li><li style="padding-top: 6pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Separation of concerns: <span class="p">Presentation, business and data handling logic are clearly partitioned in different tiers.</span></h3></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Synchronous communications: <span class="p">Communications between tiers is syn- chronous request-reply. Requests emanate in a single direction from the client tier, through the web and business logic tiers to the EIS tier. Each tier waits for a response from the other tier before proceeding.</span></h3></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Flexible deployment: <span class="p">There are no restrictions on how a multi-tier ap- plication is deployed. All tiers could run on the same machine, or at the other extreme, each tier may be deployed on its own machine. In web applications, the client tier is usually a browser running on a user’s desktop, communicating remotely over the Internet with a web tier components.</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 52pt;text-indent: 0pt;text-align: left;">Table 4. <span class="s7">Quality attributes for the N-Tier Client Server pattern</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:23.706pt" cellspacing="0"><tr style="height:22pt"><td style="width:77pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 19pt;text-indent: 3pt;line-height: 11pt;text-align: left;">Quality Attribute</p></td><td style="width:218pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 95pt;padding-right: 95pt;text-indent: 0pt;text-align: center;">Issues</p></td></tr><tr style="height:44pt"><td style="width:77pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 4pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Availability</p></td><td style="width:218pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;padding-right: 4pt;text-indent: 0pt;text-align: left;">Servers in each tier can be replicated, so that if one fails, others remain available. Overall the application will provide a lower quality of service until the failed</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">server is restored.</p></td></tr><tr style="height:54pt"><td style="width:77pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 4pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Failure handling</p></td><td style="width:218pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;padding-right: 4pt;text-indent: 0pt;text-align: left;">If a client is communicating with a server that fails, most web and application servers implement transpar- ent failover. This means a client request is, without its knowledge, redirected to a live replica server that can</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">satisfy the request.</p></td></tr><tr style="height:54pt"><td style="width:77pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 4pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Modifiability</p></td><td style="width:218pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;padding-right: 4pt;text-indent: 0pt;text-align: left;">Separation of concerns enhances modifiability, as the presentation, business and data management logic are all clearly encapsulated. Each can have its internal logic modified in many cases without changes rippling</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">into other tiers.</p></td></tr><tr style="height:76pt"><td style="width:77pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 4pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Performance</p></td><td style="width:218pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;padding-right: 2pt;text-indent: 0pt;text-align: left;">This architecture has proven high performance. Key issues to consider are the amount of concurrent threads supported in each server, the speed of connections be- tween tiers and the amount of data that is transferred. As always with distributed systems, it makes sense to minimize the calls needed between tiers to fulfill each</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">request.</p></td></tr><tr style="height:54pt"><td style="width:77pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 4pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Scalability</p></td><td style="width:218pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;padding-right: 4pt;text-indent: 0pt;text-align: left;">As servers in each tier can be replicated, and multiple server instances run on the same or different servers, the architecture scales out and up well. In practice, the data management tier often becomes a bottleneck on</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">the capacity of a system.</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 10pt;text-align: justify;">Table 4 shows how common quality attributes can be addressed with this pattern. Precisely how each quality attribute is addressed depends on the actual web and application server technology used to implement the application. .NET, each implementation of J2EE, and other proprietary ap- plication servers all have different concrete features. These need to be un- derstood during architecture design so that no unpleasant surprises are en- countered much later in the project, when fixes are much more expensive to perform.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The N-Tier Client-Server pattern is commonly used and the direct sup- port from application server technologies for this pattern makes it rela- tively easy to implement applications using the pattern. It’s generally ap- propriate when an application must support a potentially large number of clients and concurrent requests, and each request takes a relatively short interval (a few milliseconds to a few seconds) to process.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l151"><ol id="l152"><ol id="l153"><ol id="l154"><li style="padding-left: 55pt;text-indent: -40pt;text-align: left;"><p class="s41" style="display: inline;">Messaging</p><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;">In Fig. 40 the basic components of the messaging pattern are shown. The key properties of this pattern are:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></ol></ol></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Asynchronous communications: <span class="p">Clients send requests to the queue, where the message is stored until an application removes it. After the client has written the message to the queue, it continues without waiting for the message to be removed.</span></h3></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Configurable QoS: <span class="p">The queue can be configured for high-speed, non- reliable or slower, reliable delivery. Queue operations can be coordi- nated with database transactions.</span></h3></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Loose coupling: <span class="p">There is no direct binding between clients and servers. The client is oblivious to which server receives the message. The server is oblivious as to which client the message came from.</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="text-indent: 0pt;text-align: left;">Server</h3><p style="text-indent: 0pt;text-align: left;"/><h3 style="text-indent: 0pt;text-align: left;">Client</h3><p style="text-indent: 0pt;text-align: left;"/><h3 style="text-indent: 0pt;text-align: left;">Client</h3><p style="text-indent: 0pt;text-align: left;"/><h3 style="text-indent: 0pt;text-align: left;">Server</h3><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="329" height="50" alt="image" src="Image_146.png"/></span></p><h3 style="padding-top: 3pt;text-indent: 0pt;line-height: 8pt;text-align: left;">Server</h3><p style="text-indent: 0pt;text-align: left;"/><h3 style="padding-top: 3pt;text-indent: 0pt;line-height: 6pt;text-align: left;">Client</h3><p style="text-indent: 0pt;text-align: left;"/><h3 style="padding-top: 5pt;padding-left: 43pt;text-indent: 0pt;text-align: center;"><a name="a110">Queue</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-top: 5pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">Fig. 40. <span class="s7">Anatomy of the messaging pattern</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Table 5 shows how common quality attributes are addressed by messag- ing. Again, bear in mind, exact support for these quality attributes is mes- saging product dependent.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">Messaging is especially appropriate when the client does not need an immediate response directly after sending a request. For example, a client may format an email, and place it on a queue in a message for processing. The server will at some stage in the future remove the message and send the email using a mail server. The client really doesn’t need to know when the server processes the message.</p><h4 style="padding-top: 10pt;padding-left: 71pt;text-indent: 0pt;text-align: left;">Table 5. <span class="s7">Quality attributes for the Messaging Pattern</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:21.786pt" cellspacing="0"><tr style="height:22pt"><td style="width:80pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 4pt;padding-right: 8pt;text-indent: 0pt;line-height: 11pt;text-align: left;">Quality Attribute</p></td><td style="width:220pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Issues</p></td></tr><tr style="height:44pt"><td style="width:80pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 4pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Availability</p></td><td style="width:220pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Physical queues with the same logical name can be rep- licated across different messaging server instances.</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">When one fails, clients can send messages to replica</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">queues.</p></td></tr><tr style="height:22pt"><td style="width:80pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 4pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Failure handling</p></td><td style="width:220pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">If a client is communicating with a queue that fails, it</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">can find a replica queue and post the message there.</p></td></tr><tr style="height:76pt"><td style="width:80pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 4pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Modifiability</p></td><td style="width:220pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;padding-right: 4pt;text-indent: 0pt;text-align: left;">Messaging is inherently loosely coupled, and this pro- motes high modifiability as clients and servers are not directly bound through an interface. Changes to the format of messages sent by clients may cause changes to the server implementations. Self-describing, discov- erable message formats can help reduce this depend-</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">ency on message formats.</p></td></tr><tr style="height:44pt"><td style="width:80pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 4pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Performance</p></td><td style="width:220pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;text-align: justify;">Message queuing technology can deliver thousands of messages per second. Non-reliable messaging is faster than reliable, with the difference dependent of the qual-</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: justify;">ity of the messaging technology used.</p></td></tr><tr style="height:44pt"><td style="width:80pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 4pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Scalability</p></td><td style="width:220pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Queues can be hosted on the communicating endpoints, or be replicated across clusters of messaging servers hosted on a single or multiple server machines. This</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">makes messaging a highly scalable solution.</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Applications that can divide processing of a request into a number of discrete steps, connected by queues, are a basic extension of the simple messaging pattern. This is identical to the “Pipe and Filter” pattern (see <i>Buschmann</i>).</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Messaging also provides a resilient solution for applications in which connectivity to a server application is transient, either due to network or server unreliability. In such cases, the messages are held in the queue until the server connects and removes messages. Finally, as Chapter 4 explains, messaging can be used to implement synchronous request-response using a request-reply queue pair.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l155"><ol id="l156"><ol id="l157"><ol id="l158"><li style="padding-top: 5pt;padding-left: 55pt;text-indent: -40pt;text-align: left;"><p class="s41" style="display: inline;">Publish-Subscribe</p><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;">The essential elements of the Publish-Subscribe pattern are depicted in Fig.</p><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;">41. The key properties of this pattern are:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></ol></ol></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Many-to-Many messaging: <span class="p">Published messages are sent to all sub- scribers who are registered with the topic. Many publishers can publish on the same topic, and many subscribers can listen to the same topic.</span></h3></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Configurable QoS: <span class="p">In addition to non-reliable and reliable messaging, the underlying communication mechanism may be point-to-point or broadcast/multicast. The former sends a distinct message for every sub- scriber on a topic, the latter sends one message which every subscriber receives.</span></h3></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Loose Coupling: <span class="p">As with messaging, there is no direct binding between publishers and subscribers. Publishers do not know who receives their message, and subscribers do not know which publisher sent the mes- sage.</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="text-indent: 0pt;text-align: left;">Subscriber</h3><p style="text-indent: 0pt;text-align: left;"/><h3 style="text-indent: 0pt;text-align: left;">Subscriber</h3><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="152" height="92" alt="image" src="Image_147.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="40" height="24" alt="image" src="Image_148.png"/></span></p><h3 style="padding-top: 3pt;padding-left: 17pt;text-indent: 0pt;text-align: left;">Topic</h3><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 9pt;text-indent: 0pt;text-align: left;">Publisher</h3><p style="text-indent: 0pt;text-align: left;"/><h3 style="padding-top: 5pt;padding-left: 255pt;text-indent: 0pt;text-align: left;"><a name="a111">Subscriber</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 98pt;text-indent: 0pt;text-align: left;">Fig. 41. <span class="s7">The Publish-Subscribe pattern</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Table 6 explains how publish-subscribe supports common quality at- tributes.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Architectures based on publish-subscribe are highly flexible and suited to applications which require asynchronous one-many, many-one or many- to-many messaging amongst components. Like messaging, two-way com- munications is possible using request-reply topic pairs.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-top: 5pt;padding-left: 61pt;text-indent: 0pt;text-align: left;">Table 6. <span class="s7">Quality attributes for the Publish-Subscribe pattern</span></h4><table style="border-collapse:collapse;margin-left:21.786pt" cellspacing="0"><tr style="height:22pt"><td style="width:80pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 21pt;padding-right: 8pt;text-indent: 3pt;line-height: 11pt;text-align: left;">Quality Attribute</p></td><td style="width:220pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 96pt;padding-right: 96pt;text-indent: 0pt;text-align: center;">Issues</p></td></tr><tr style="height:44pt"><td style="width:80pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 4pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Availability</p></td><td style="width:220pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Topics with the same logical name can be replicated across different server instances managed as a cluster. When one fails, publishers send messages to replica</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">queues.</p></td></tr><tr style="height:33pt"><td style="width:80pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 4pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Failure handling</p></td><td style="width:220pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">If a publisher is communicating with a topic hosted by</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">a server that fails, it can find a live replica server and send the message there.</p></td></tr><tr style="height:65pt"><td style="width:80pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 4pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Modifiability</p></td><td style="width:220pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;padding-right: 4pt;text-indent: 0pt;text-align: left;">Publish-subscribe is inherently loosely coupled, and this promotes high modifiability. New publishers and subscribers can be added to the system without change to the architecture or configuration. Changes to the format of messages published may cause changes to</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">the subscriber implementations.</p></td></tr><tr style="height:54pt"><td style="width:80pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 4pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Performance</p></td><td style="width:220pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;padding-right: 4pt;text-indent: 0pt;text-align: left;">Publish-subscribe can deliver thousands of messages per second, with non-reliable messaging faster than re- liable. If a publish-subscribe broker supports multi- cast/broadcast, it will deliver multiple messages in a</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">more uniform time to each subscriber.</p></td></tr><tr style="height:54pt"><td style="width:80pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 4pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Scalability</p></td><td style="width:220pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;padding-right: 2pt;text-indent: 0pt;text-align: left;">Topics can be replicated across clusters of servers hosted on a single or multiple server machines. Clus- ters of server can scale to provide very high message volume throughput. Also, multicast/broadcast solutions</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">scale better than their point-to-point counterparts.</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l159"><ol id="l160"><ol id="l161"><ol id="l162"><li style="padding-top: 9pt;padding-left: 55pt;text-indent: -40pt;text-align: left;"><p class="s41" style="display: inline;">Broker</p><p style="padding-left: 14pt;text-indent: 0pt;text-align: left;">The major elements of the Broker pattern are shown in Fig. 42. The prop- erties of a broker-based solution are:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></ol></ol></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Hub-and-spoke architecture: <span class="p">The broker acts as a messaging hub, and senders and receivers connect as spokes. Connections to the broker are via ports that are associated with a specific message format.</span></h3></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Performs message routing: <span class="p">The broker embeds processing logic to de- liver a message received on an input port to an output port. The delivery path can be hard coded or depend on values in the input message.</span></h3></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Performs message transformation: <span class="p">The broker logic transforms the source message type received on the input port to the destination mes- sage type required on the output port.</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 17pt;text-indent: 0pt;text-align: left;">Broker</h3><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 10pt;text-indent: 0pt;text-align: left;">Sender-1</h3><p style="text-indent: 0pt;text-align: left;"/><p class="s19" style="padding-top: 4pt;padding-left: 14pt;text-indent: 0pt;text-align: right;">inPort1</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 99pt;text-indent: 0pt;text-align: left;"><span><img width="38" height="23" alt="image" src="Image_149.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 99pt;text-indent: 0pt;text-align: left;"><span><img width="38" height="23" alt="image" src="Image_150.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 10pt;text-indent: 0pt;text-align: left;">Sender-2</h3><p style="text-indent: 0pt;text-align: left;"/><p class="s19" style="padding-top: 8pt;padding-left: 14pt;text-indent: 0pt;text-align: right;">inPort2</p><p class="s19" style="padding-top: 4pt;padding-left: 71pt;text-indent: 0pt;text-align: left;">OutPort1</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 75pt;text-indent: 0pt;text-align: left;"><span><img width="46" height="23" alt="image" src="Image_151.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 75pt;text-indent: 0pt;text-align: left;"><span><img width="46" height="23" alt="image" src="Image_152.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 9pt;text-indent: 0pt;text-align: left;">Receiver-2</h3><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 9pt;text-indent: 0pt;text-align: left;">Receiver-1</h3><p style="text-indent: 0pt;text-align: left;"/><p class="s19" style="padding-top: 8pt;padding-left: 71pt;text-indent: 0pt;text-align: left;">OutPort2</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-top: 5pt;padding-left: 97pt;text-indent: 0pt;text-align: left;">Fig. 42. <span class="s7">Elements of the Broker pattern</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;">Table 7 shows the pattern’s support for common quality attributes.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 79pt;text-indent: 0pt;text-align: left;">Table 7. <span class="s7">Quality attributes for the Broker pattern</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:10.38pt" cellspacing="0"><tr style="height:22pt"><td style="width:107pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 34pt;padding-right: 3pt;text-indent: 3pt;line-height: 11pt;text-align: left;">Quality Attribute</p></td><td style="width:205pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 88pt;padding-right: 88pt;text-indent: 0pt;text-align: center;">Issues</p></td></tr><tr style="height:44pt"><td style="width:107pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Availability</p></td><td style="width:205pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;padding-right: 1pt;text-indent: 0pt;text-align: left;">To build high availability architectures, brokers must be replicated. This is typically supported us- ing similar mechanisms to messaging and publish-</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">subscribe server clustering.</p></td></tr><tr style="height:54pt"><td style="width:107pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Failure handling</p></td><td style="width:205pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;text-align: left;">As brokers have typed input ports, they validate and discard any messages that are sent in the wrong format. With replicated brokers, senders can fail over to a live broker should one of the replicas</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">fail.</p></td></tr><tr style="height:54pt"><td style="width:107pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Modifiability</p></td><td style="width:205pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;padding-right: 10pt;text-indent: 0pt;text-align: justify;">Brokers separate the transformation and message routing logic from the senders and receivers. This enhances modifiability, as changes to transforma- tion and routing logic can be made without affect-</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: justify;">ing senders or receivers.</p></td></tr><tr style="height:54pt"><td style="width:107pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Performance</p></td><td style="width:205pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;padding-right: 1pt;text-indent: 0pt;text-align: left;">Brokers can potentially become a bottleneck, espe- cially if they must service high message volumes and execute complex transformation logic. Their throughput is typically lower than simple messag-</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">ing with reliable delivery.</p></td></tr><tr style="height:33pt"><td style="width:107pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Scalability</p></td><td style="width:205pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;padding-right: 1pt;text-indent: 0pt;text-align: left;">Clustering broker instances makes it possible to construct systems scale to handle high request</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">loads.</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: left;">Brokers are suited to applications in which components exchange mes- sages that require extensive transformation between source and destination</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">formats. The broker decouples the sender and receiver, allowing them to produce or consume their native message format, and centralizes the defi- nition of the transformation logic in the broker for ease of understanding and modification.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l163"><ol id="l164"><ol id="l165"><ol id="l166"><li style="padding-left: 55pt;text-indent: -40pt;text-align: left;"><p class="s41" style="display: inline;">Process Coordinator</p></li></ol></ol></ol></ol><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">The Process Coordinator pattern is illustrated in Fig. 43. The essential elements of this pattern are:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Process encapsulation: <span class="p">The process coordinator encapsulates the se- quence of steps needed to fulfill the business process. The sequence can be arbitrarily complex. The coordinator is a single point of definition for the business process, making it easier to understand and modify. It re- ceives a process initiation request, calls the servers in the order defined by the process, and emits the results.</span></h3></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Loose coupling: <span class="p">The server components are unaware of their role in the overall business process, and of the order of the steps in the process. The servers simply define a set of services which they can perform, and the coordinator calls them as necessary as part of the business process.</span></h3></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Flexible communications: <span class="p">Communications between the coordinator and servers can be synchronous or asynchronous. For synchronous communications, the coordinator waits until the server responds. For asynchronous communications, the coordinator provides a callback or reply queue/topic, and waits until the server responds using the defined mechanism.</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 17pt;text-indent: 0pt;text-align: left;">Process Coordinator</h3><p style="text-indent: 0pt;text-align: left;"/><p class="s19" style="padding-top: 8pt;padding-left: 66pt;text-indent: 0pt;text-align: left;">Start process request</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 70pt;text-indent: 0pt;line-height: 6pt;text-align: left;"><span><img width="75" height="8" alt="image" src="Image_153.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="84" height="76" alt="image" src="Image_154.png"/></span></p><p class="s19" style="padding-left: 71pt;text-indent: 0pt;text-align: left;">step1</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s19" style="padding-left: 55pt;text-indent: 0pt;text-align: center;">Process results</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 82pt;text-indent: 0pt;line-height: 6pt;text-align: left;"><span><img width="75" height="8" alt="image" src="Image_155.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="25" height="76" alt="image" src="Image_156.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="25" height="76" alt="image" src="Image_157.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="114" height="76" alt="image" src="Image_158.png"/></span></p><p class="s19" style="text-indent: 0pt;text-align: left;">step2 step3 step4</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 11pt;text-indent: 0pt;text-align: left;">Server-1</h3><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 11pt;text-indent: 0pt;text-align: left;">Server-2</h3><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 14pt;text-indent: 0pt;text-align: left;">Server-3</h3><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 14pt;text-indent: 0pt;text-align: left;">Server-4</h3><p style="padding-left: 36pt;text-indent: 0pt;text-align: left;">   </p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-top: 5pt;padding-left: 65pt;text-indent: 0pt;text-align: left;">Fig. 43. <span class="s7">Components of the Process Coordinator pattern</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 26pt;text-indent: 0pt;text-align: left;">Table 8 shows how this pattern addresses quality requirements.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 53pt;text-indent: 0pt;text-align: left;">Table 8. <span class="s7">Quality attributes for the Process Coordinator Pattern</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:23.727pt" cellspacing="0"><tr style="height:22pt"><td style="width:84pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 26pt;text-indent: 0pt;text-align: left;">Quality</p><p class="s27" style="padding-left: 23pt;text-indent: 0pt;line-height: 9pt;text-align: left;">Attribute</p></td><td style="width:211pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 92pt;padding-right: 92pt;text-indent: 0pt;text-align: center;">Issues</p></td></tr><tr style="height:33pt"><td style="width:84pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Availability</p></td><td style="width:211pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">The coordinator is a single point of failure. Hence it needs to be replicated to create a high availability so-</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">lution.</p></td></tr><tr style="height:65pt"><td style="width:84pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Failure handling</p></td><td style="width:211pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;padding-right: 3pt;text-indent: 0pt;text-align: left;">Failure handling is complex, as it can occur at any stage in the business process coordination. Failure of a later step in the process may require earlier steps to be undone using compensating transactions. Han- dling failures needs careful design to ensure the data</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">maintained by the servers remains consistent.</p></td></tr><tr style="height:65pt"><td style="width:84pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Modifiability</p></td><td style="width:211pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Process modifiability is enhanced because the proc- ess definition is encapsulated in the coordinator process. Servers can change their implementation without affecting the coordinator or other servers, as long as their external service definition doesn’t</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">change.</p></td></tr><tr style="height:65pt"><td style="width:84pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Performance</p></td><td style="width:211pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;padding-right: 4pt;text-indent: 0pt;text-align: left;">To achieve high performance, the coordinator must be able to handle multiple concurrent requests and manage the state of each as they progress through the process. Also, the performance of any process will be limited by the slowest step, namely the slowest</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">server in the process.</p></td></tr><tr style="height:22pt"><td style="width:84pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Scalability</p></td><td style="width:211pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">The coordinator can be replicated to scale the appli-</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">cation both up and out.</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The Process Coordinator pattern is commonly used to implement com- plex business processes that must issue requests to several different server components. By encapsulating the process logic in one place, it is easier to change, manage and monitor process performance. Message broker and Business Process Orchestrator technologies are designed specifically to support this pattern, the former for short lived requests, the latter for proc- esses that may take several minutes or hours or days to complete. In less complex applications, the pattern is also relatively simple to implement without sophisticated technology support, although failure handling is an issue that requires careful attention.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: left;"><a name="a112">5.2.2 Allocate Components</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">Once an overall architecture framework has been selected, based on one or more architecture patterns, the next task is to define the major components that will comprise the design. The framework defines the overall commu- nication patterns for the components. This must be augmented by the fol- lowing:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Identifying the major application components, and how they plug into the framework.</p></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Identifying the interface or services that each component supports.</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Identifying the responsibilities of the component, stating what it can be relied upon to do when it receives a request.</p></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Identifying dependencies between components.</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Identifying partitions in the architecture that are candidates for distribu- tion over servers in a network.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">The components in the architecture are the major abstractions that will ex- ist in the application. Hence, it’s probably no surprise that component de- sign has much in common with widely used object-oriented design tech- niques. In fact, class and package diagrams are often used to depict components in an architecture.</p><p style="padding-left: 25pt;text-indent: 0pt;text-align: left;">Some guidelines for component design are:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Minimize dependencies between components. Strive for a loosely cou- pled solution in which changes to one component do not ripple through the architecture, propagating across many components. Remember, every time you change something, you have to re-test it.</p></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Design components that encapsulate a highly “cohesive” set of respon- sibilities. Cohesion is a measure of how well the parts of a component fit together. Highly cohesive components tend to have a small set of well-defined responsibilities that implement a single logical function. For example, an <i>EnrollmentReports </i>component encapsulates all the functions required to produce reports on a student enrollments in courses. If changes to report format or type are needed, then it’s likely the changes will be made in this component. Hence, strong cohesion limits many types of changes to a single component, minimizing main- tenance and testing efforts.</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Isolate dependencies on middleware and any COTS infrastructure tech- nologies. The fewer components that are dependent on specific middle- ware and COTS components API calls, the easier it is to change or up-</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 26pt;text-indent: 0pt;text-align: left;">grade the middleware or other infrastructure services. Of course this takes more effort to build, and introduces a performance penalty.</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Use decomposition to structure components hierarchically. The outer- most level component defines the publicly available interface to the composite component. Internally, calls to this interface are delegated to the locally defined components, whose interfaces are not visible exter- nally.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="144" height="87" alt="image" src="Image_159.png"/></span></p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Minimize calls between components, as these can prove costly if the components are distributed. Try to aggregate sequences of calls between components into a single call that can perform the necessary processing in a single request. This creates coarser grain methods or services in in- terfaces that do more work per request.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 7pt;padding-left: 33pt;text-indent: 0pt;text-align: left;">New Orders</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;"><span><img width="61" height="24" alt="image" src="Image_160.png"/></span></p><h3 style="padding-top: 3pt;padding-left: 11pt;text-indent: 0pt;text-align: left;">Validate</h3><p style="text-indent: 0pt;text-align: left;"/><p class="s19" style="padding-top: 2pt;padding-left: 33pt;text-indent: 0pt;text-align: left;">Error Log</p><p class="s19" style="padding-top: 5pt;padding-left: 4pt;text-indent: 0pt;text-align: left;">read</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="8" height="60" alt="image" src="Image_161.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="99" height="61" alt="image" src="Image_162.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="8" height="53" alt="image" src="Image_163.png"/></span></p><h4 style="padding-top: 3pt;padding-left: 12pt;text-indent: 0pt;text-align: left;">OrderInput</h4><p style="text-indent: 0pt;text-align: left;"/><p class="s19" style="padding-top: 6pt;padding-left: 80pt;text-indent: 0pt;text-align: center;">Check Order</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="8" height="60" alt="image" src="Image_164.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="8" height="53" alt="image" src="Image_165.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="8" height="68" alt="image" src="Image_166.png"/></span></p><h3 style="padding-top: 3pt;padding-left: 18pt;text-indent: 0pt;text-align: left;">Store</h3><p style="text-indent: 0pt;text-align: left;"/><p class="s19" style="padding-left: 14pt;text-indent: 0pt;text-align: right;">Write Order</p><p class="s19" style="padding-top: 4pt;text-indent: 0pt;text-align: left;">Write Order</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 16pt;text-indent: 0pt;text-align: left;">OrderQ</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 3pt;padding-left: 11pt;text-indent: 0pt;text-align: left;">SendEmail</h3><p style="text-indent: 0pt;text-align: left;"/><p class="s19" style="padding-left: 7pt;text-indent: 0pt;text-align: left;">Get Order</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 3pt;padding-left: 14pt;text-indent: -6pt;text-align: left;">Customer System</h3><h3 style="padding-top: 3pt;padding-left: 14pt;text-indent: 2pt;text-align: left;">Order System</h3><h3 style="padding-top: 3pt;padding-left: 15pt;text-indent: 1pt;text-align: left;">Email Server</h3><p style="padding-left: 59pt;text-indent: 0pt;text-align: left;">		</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 3pt;padding-left: 55pt;text-indent: 0pt;text-align: left;"><a name="a113">Figure Key</a></h3><p style="padding-left: 55pt;text-indent: 0pt;line-height: 9pt;text-align: left;">Existing</p><p style="padding-left: 55pt;text-indent: 0pt;line-height: 16pt;text-align: left;">Component <span><img width="32" height="25" alt="image" src="Image_167.png"/></span></p><p style="padding-top: 13pt;padding-left: 55pt;text-indent: 0pt;line-height: 68%;text-align: left;">New                     <span><img width="32" height="25" alt="image" src="Image_168.png"/></span> Component</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="38" height="8" alt="image" src="Image_169.png"/></span></p><p style="padding-left: 55pt;text-indent: 0pt;text-align: left;">Dependency</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 13pt;text-indent: 0pt;text-align: left;">Database <span><img width="31" height="24" alt="image" src="Image_170.png"/></span></p><p style="padding-top: 12pt;padding-left: 13pt;text-indent: 0pt;line-height: 67%;text-align: left;">Persistent           <span><img width="39" height="24" alt="image" src="Image_171.png"/></span> Queue</p><h4 style="padding-top: 9pt;padding-left: 82pt;text-indent: 0pt;text-align: left;">Fig. 44. <span class="s7">Order processing example architecture</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">Let’s explore a simple example to illustrate some of these issues. Fig. 44 is an example of a structural view of an order processing application, de- fined using a simple informal notation. New orders are received (from where is irrelevant) and loaded into a database. Each order must be vali- dated against an existing customer details system to check the customer in- formation and that valid payment options exist. Once validated, the order data is simply stored in the order processing database, and an email is gen- erated to the customer to inform them that their order is being processed.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The general architecture framework is based on straightforward messag- ing. The customer order details are read from the database, validated, and if valid, they are stored in the order application and written to a queue. In- formation about each valid order is removed from the queue, formatted as an email and sent to the customer using the mail server. Hence, using a message queue this architecture decouples the order processing from the email formatting and delivery.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Four components are introduced to solve this problem. These are de- scribed below, along with their responsibilities:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">OrderInput: <span class="p">This is responsible for accessing the new orders database, encapsulating the order processing logic, and writing to the queue.</span></h3></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Validate: <span class="p">This encapsulates the responsibility of interacting with the customer system to carry out validation, and writing to the error logs if an order is invalid.</span></h3></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Store: <span class="p">This has the responsibility of interacting with the order system to store the order data.</span></h3></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">SendEmail: <span class="p">This removes a message from the queue, formats an email message and sends it via an email server. It encapsulates all knowledge of the email format and email server access.</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">So, each component has clear dependencies and a small set of responsi- bilities, creating a loosely coupled and cohesive architecture. We’ll return to this example and further analyze its properties in the next section, in which the validation of an architecture design is discussed.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l167"><ol id="l168"><li style="padding-top: 10pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a114">Validation</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">During the architecture process, the aim of the validation phase is to in- crease the confidence of the design team that the architecture is fit for pur- pose. The validation has to be achieved within the project constraints of</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">time and budget, as the detailed design and implementation cannot gener- ally fully commence until the architecture is agreed. The trick is to be as rigorous and efficient as possible.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: right;">Validating an architecture design poses some tough challenges. Whether it’s the architecture for a new application, or an evolution of an existing system, the proposed design is, well, just that – a design. It can’t be exe- cuted or tested to see that it fulfills its requirements. It will also likely con- sist of new components that have to be built, and black box off-the-shelf components such as middleware and specialized libraries and existing ap- plications. All these parts have to be integrated and made to work together. So, what can sensibly be done? There are two main techniques that have proved useful. The first essentially involves manual testing of the architec- ture using test scenarios. The second involves the construction of a proto- type that creates a simple archetype of the desired application, so that its ability to satisfy requirements can be assessed in more detail through pro- totype testing. The aim of both is to identify potential flaws and weak- nesses in the design so that they can be improved before implementation commences. These approaches should be used to explicitly identify poten- tial risk areas for tracking and monitoring during the subsequent build ac-</p><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;">tivities.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l169"><li style="padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a115">Using Scenarios</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">Scenarios are a technique developed at the SEI to tease out issues concern- ing an architecture through manual evaluation and testing. Scenarios are related to architectural concerns such as quality attributes, and they aim to highlight the consequences of the architectural decisions that are encapsu- lated in the design.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The SEI ATAM work describes scenarios and their generation in great detail. In essence though, scenarios are relatively simple artifacts. They in- volve defining some kind of stimulus that will have an impact on the archi- tecture. The scenario then involves working out how the architecture re- sponds to this stimulus. If the response is desirable, then a scenario is deemed to be satisfied by the architecture. If the response is undesirable, or hard to quantify, then a flaw or at least an area of risk in the architecture may have been uncovered.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Scenarios can be conceived to address any quality requirement of inter- est in a given application. Some general hypothetical examples are shown in Table 9. These scenarios highlight the implications of the architecture design decisions in the context of the stimulus and the effects it elicits. For example, the “availability” scenario shows that messages can be lost if a</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">server fails before messages have been delivered. The implication here is that messages are not being persisted to disk, most likely for performance reasons. The loss of messages in some application contexts may be accept- able. If it is not, this scenario highlights a problem, which may force the design to adopt persistent messaging to avoid message loss.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 116pt;text-indent: 0pt;text-align: left;">Table 9. <span class="s7">Scenario examples</span></h4><table style="border-collapse:collapse;margin-left:16.39pt" cellspacing="0"><tr style="height:22pt"><td style="width:60pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 11pt;text-indent: 3pt;line-height: 11pt;text-align: left;">Quality Attribute</p></td><td style="width:100pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 32pt;text-indent: 0pt;text-align: left;">Stimulus</p></td><td style="width:149pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 54pt;padding-right: 54pt;text-indent: 0pt;text-align: center;">Response</p></td></tr><tr style="height:54pt"><td style="width:60pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Availability</p></td><td style="width:100pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;padding-right: 1pt;text-indent: 0pt;text-align: left;">The network connec- tion to the message consumers fails.</p></td><td style="width:149pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Messages are stored on the MOM server until the connection is re- stored. Messages will only be lost if the server fails before the connec-</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">tion comes back up.</p></td></tr><tr style="height:65pt"><td style="width:60pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Modifiability</p></td><td style="width:100pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">A new set of data analysis components must be made available in the application.</p></td><td style="width:149pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;padding-right: 4pt;text-indent: 0pt;text-align: left;">The application needs to be rebuilt with the new libraries, and the all configuration files must be updated on every desktop to make the new components visible in the GUI tool-</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">box.</p></td></tr><tr style="height:54pt"><td style="width:60pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Security</p></td><td style="width:100pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;padding-right: 1pt;text-indent: 0pt;text-align: left;">No requests are re- ceived on a user ses- sion for ten minutes.</p></td><td style="width:149pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">The system treats this session as po- tentially insecure and invalidates the security credentials associated with the session. The user must logon</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">again to connect to the application.</p></td></tr><tr style="height:87pt"><td style="width:60pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Modifiability</p></td><td style="width:100pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">The supplier of the transformation engine goes out of business.</p></td><td style="width:149pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;padding-right: 4pt;text-indent: 0pt;text-align: left;">A new transformation engine must be purchased. The abstract service layer that wraps the transformation engine component must be re- implemented to support the new en- gine. Client components are unaf-</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">fected as they only use the abstract service layer.</p></td></tr><tr style="height:44pt"><td style="width:60pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Scalability</p></td><td style="width:100pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;padding-right: 11pt;text-indent: 0pt;text-align: justify;">The concurrent user request load doubles during the 3 week en-</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: justify;">rollment period.</p></td><td style="width:149pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;padding-right: 10pt;text-indent: 0pt;text-align: justify;">The application server is scaled out on a two machine cluster to handle the increased request load.</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Let’s look at some more specific examples for the order processing ex- ample introduced in the previous section. The design in Fig. 44 needs to be validated, and the scenarios in Table 10 probe more deeply into the archi- tecture, looking to expose flaws or areas of risk.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-top: 5pt;padding-left: 70pt;text-indent: 0pt;text-align: left;">Table 10. <span class="s7">Scenarios for the order processing example</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:15.421pt" cellspacing="0"><tr style="height:22pt"><td style="width:60pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 11pt;text-indent: 3pt;line-height: 11pt;text-align: left;">Quality Attribute</p></td><td style="width:113pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 37pt;padding-right: 37pt;text-indent: 0pt;text-align: center;">Stimulus</p></td><td style="width:133pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 46pt;padding-right: 46pt;text-indent: 0pt;text-align: center;">Response</p></td></tr><tr style="height:44pt"><td style="width:60pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Modifiability</p></td><td style="width:113pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">The <i>Customer System </i>packaged application is updated to an Oracle data-</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">base.</p></td><td style="width:133pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;padding-right: 13pt;text-indent: 0pt;text-align: justify;">The <i>Validate </i>component must be rewritten to interface to the Oracle system.</p></td></tr><tr style="height:65pt"><td style="width:60pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Availability</p></td><td style="width:113pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">The email server fails.</p></td><td style="width:133pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Messages build up in the <i>Or- derQ </i>until the email server re- starts. Messages are then sent by the <i>SendEmail </i>component to remove the backlog. Order</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">processing is not affected.</p></td></tr><tr style="height:44pt"><td style="width:60pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Reliability</p></td><td style="width:113pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">The <i>Customer </i>or <i>Order</i></p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">systems are unavailable.</p></td><td style="width:133pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;padding-right: 11pt;text-indent: 0pt;text-align: justify;">If either fails, order processing halts and alerts are sent to sys- tem administrators so that the</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: justify;">problem can be fixed.</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The first two scenarios seem to elicit positive responses from the design. The <i>Validate </i>component bounds the changes needed to accommodate a new customer database, and hence it insulates other components from change. And should the email server be unavailable, then the implication is that emails are merely delayed until the email server returns.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The failure of the <i>Customer </i>or <i>Order </i>applications is more revealing however. The communications with these two systems is synchronous, so if either is not available, order processing must halt until the applications are restored. This may be less than desirable.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Note the design does not discriminate between the interactions with the two applications. It’s pretty obvious, however, that the interaction with the <i>Customer System </i>requires a response saying whether the order data is valid. If it is not, it is written to an error log and the order processing ceases for that order. The <i>Order System </i>though simply stores the order data for subsequent processing. There’s no need for the <i>Store </i>component to require an immediate response.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">So, the reliability scenario has highlighted an area where the architec- ture could be improved. An order can’t be processed until it has been suc- cessfully validated, so a response from the <i>Customer System </i>is necessary. If it is unavailable, processing can’t continue.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">But the <i>Order System </i>is a different matter. Asynchronous communica- tions is better in this case. <i>Store </i>could just write to a persistent queue, and order processing can continue. Another component could then be intro- duced to read the order from the queue and add the details to the <i>Order</i></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s11" style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">System<span class="p">. This solution is more resilient to failure, as the </span>Order System <span class="p">can be unavailable but order processing can continue.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a116">Prototyping</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">Scenarios are a really useful technique for validating a proposed architec- ture. But some scenarios aren’t so simple to answer based only on a design description. Consider a performance scenario for the order processing sys- tem:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s11" style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">“On Friday afternoon, orders must be processed before close-of-business to ensure delivery by Monday. Five thousand orders arrive through vari- ous channels (Web/Call centre/business partners) five minutes before close-of-business.”</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The question here then is simply, can the five thousand orders be proc- essed in five minutes? This is a tough question to answer when some of the components of the solution don’t yet exist.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The only way to address such questions with some degree of confidence is to build a prototype. Prototypes are minimal, restricted or cut-down ver- sions of the desired application, created specifically to test some high risk or poorly understood aspects of the design. Prototypes are typically used for two purposes:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l170"><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Proof-of-concept: <span class="p">Can the architecture as designed be built in a way that can satisfy the requirements?</span></h3></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Proof-of-technology: <span class="p">Does the technology (middleware, integrated ap- plications, libraries, etc) selected to implement the application behave as expected?</span></h3></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">In both cases, prototypes can provide concrete evidence about concerns that are otherwise difficult, if not impossible to validate in any other way.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">To answer our performance scenario above, what kind of prototype might we build? The general answer is one that incorporates all the per- formance sensitive operations in the design, and that executes on a plat- form as similar as possible (ideally identical) to the one the application will be deployed on.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">For example, the architect might know that the queue and email systems are easily capable of supporting five thousand messages in five minutes, as these solutions are used in another similar application. There would there- fore be no need to build this as part of the prototype. However, the</p><p class="s7" style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 166pt;text-indent: 0pt;text-align: left;">5.4 Summary and Further Reading 113</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_172.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">throughput of interactions between the <i>Customer </i>and <i>Order </i>applications using their APIs are an unknown, and hence these two must be tested to see if they can process five thousand messages in five minutes. The sim- plest way to do this is:</p></li></ol></li></ol></ol></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Write a test program that calls the <i>Customer System </i>validation APIs five thousand times, and time how long this takes.</p></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Write a test program that calls the <i>Order System </i>store APIs five thou- sand times, and time how long this takes.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Once the prototypes have been created and tested, the response of the architecture to the stimulus in the scenario can be answered with a high degree of confidence.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Prototypes should be used judiciously to help reduce the risks inherent in a design. They are the only way that concerns related to performance, scalability, ease of integration and capabilities of off-the-shelf components can be addressed with any degree of certainty.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Despite their usefulness, a word of caution on prototyping is necessary. Prototyping efforts should be carefully scoped and managed. Ideally a pro- totype should be developed in a day or two, a week or two at most. Most proof-of-technology and proof-of-concept prototypes get thrown away af- ter they’ve served their purpose. They are a means to an end, so don’t let them acquire a life of their own and become an end in themselves.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h2 style="padding-left: 15pt;text-indent: 0pt;text-align: left;"><a name="a117">5.4 Summary and Further Reading</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">Designing an application architecture is an inherently creative activity. However, by following a simple process that explicitly captures architec- turally significant requirements, exploits known architecture patterns and systematically validates the design, some of the mystique of design can be exposed.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The three step process described in this chapter is inherently iterative. The initial design is validated against requirements and scenarios, and the outcome of the validation can cause the requirements or the design to be revisited. The iteration continues until all the stakeholders are happy with the architecture, which then becomes the blueprint from which detailed de- sign commences.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The process is also scalable. For small projects, the architect may be working mostly directly with the customer, or there may in fact be no tan- gible customer (often the case in new, innovative product development). The architect is also likely to be a major part of the small development</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">team that will build the project. In such projects, the process can be fol- lowed informally, producing minimal documentation. For large projects, the process can be followed more formally, involving the requirements and design teams, gathering inputs from the various stakeholders involved, and producing extensive documentation.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Of course, other architecture processes exist, and probably the most widely used is the Rational Unified Process (RUP). A good reference to RUP is:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">P. Kruchten. The Rational Unified Process: An Introduction (2nd Edi- tion). Addison-Wesley, 2000</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The most comprehensive source of information on methods and tech- niques for architecture evaluation is:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">P. Clements, R. Kazman, M. Klein. Evaluating Software Architectures: Methods and Case Studies. Addison-Wesley, 2002</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">This describes the ATAM process, and provides excellent examples il- lustrating the approach. Its focus is evaluating large, complex systems, but many of the techniques are appropriate for smaller scale applications.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">A group of luminaries in the software architecture area got together in 1999 and produced a report known as the Software Architecture Review and Assessment (SARA) Report. This is a comprehensive source of ex- perience-based guidance that can be employed to carry out architecture re- views. The best way to find this report is to google for it, as at the time of writing, its location seems to be transient!</p><ol id="l171"><li style="padding-top: 4pt;padding-left: 28pt;text-indent: -13pt;text-align: left;"><h1 style="display: inline;"><a name="a118">Documenting a Software Architecture</a></h1></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l172"><ol id="l173"><li style="padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a119">Introduction</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">Architecture documentation is often a thorny issue in IT projects. It’s common for there to be little or no documentation covering the architec- ture in many projects. Sometimes, if there is some, it’s out-of-date, inap- propriate and basically not very useful.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">At the other extreme there are projects that have masses of architecture related information captured in various documents and design tools. Some- times this is invaluable, but at times it’s out-of-date, inappropriate and not very useful!</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Clearly then, experience tells us that documenting architectures is not a simple job. But there are many good reasons why we want to document our architectures, for example:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Others can understand and evaluate the design. This includes any of the application stakeholders, but most commonly other members of the de- sign and development team.</p></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">We can understand the design when we return to it after a period of time.</p></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Others in the project team and development organization can learn from the architecture by digesting the thinking behind the design.</p></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">We can do analysis on the design, perhaps to assess its likely perform- ance, or to generate standard metrics like coupling and cohesion.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;">Documenting architectures is problematic though, because:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">There’s no universally accepted architecture documentation standard.</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">An architecture can be complex, and documenting it in a comprehensi- ble manner is time consuming and non-trivial.</p></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">An architecture has many possible views. Documenting all the poten- tially useful ones is time consuming and expensive.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 6pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">An architecture design often evolves as the system is incrementally de- veloped and more insights into the problem domain are gained. Keeping the architecture documents current is often an overlooked activity, espe- cially with time and schedule pressures in a project.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">I’m pretty certain the predominant tools used for architecture documen- tation are Microsoft Word, Visio and PowerPoint, along with their non- Microsoft equivalents. And the most widely used design notation is infor- mal “block and arrow” diagrams, just like we’ve used in this book so far, in fact. Both these facts are a bit of an indictment on the state of architec- ture documentation practices at present. We should be able to do better.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">This chapter examines some of the most useful architecture views to document, and shows how the latest incarnation of the <i>Unified Modeling Language</i>, UML v2.0, can help with generating these views. Using these techniques and supporting tools, it’s not overly difficult or expensive to generate useful and valuable documentation.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l174"><ol id="l175"><li style="padding-top: 10pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a120">What to Document</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">Probably the most crucial element of the “what to document” equation is the complexity of the architecture being designed. A two-tier client server application with complex business logic may actually be quite simple ar- chitecturally. It might require no more than an overall “marketeture” dia- gram describing the main components, and a perhaps a structural view of the major components (maybe it uses a model-view-controller architec- ture) and a description of the database schema, no doubt generated auto- matically by database tools. This level of documentation is quick to pro- duce and routine to describe.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Another factor to consider is the likely longevity of the application. Will the system serve a long-term business function, or is it being built to han- dle a one-off need for integration, or is it just a stop-gap until a full ERP package is installed? Projects with little prospect of a long life probably don’t need a lot of documentation. Still, never let this be an excuse to hack together some code and throw good design practices to the wind. Some- times these stop-gap systems have a habit of living for a lot longer than initially anticipated, and someone (maybe even you) might pay for these hacks one day.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The next factor to consider is the needs of the various project stake- holders. The architecture documentation serves an important communica- tions role between the various members of the project team, including ar-</p><p class="s7" style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 247pt;text-indent: 0pt;text-align: left;">6.3 UML 2.0 117</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_173.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">chitects, designers, developers, testers, project management, customers, partner organizations, and so on. In a small team, interpersonal communi- cation is often good, so that the documentation can be minimal, and maybe even maintained on a whiteboard or two. In larger teams, and especially when groups are not co-located in the same offices or building, the archi- tecture documentation becomes of vital importance for describing design elements such as:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Component interfaces;</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Subsystems constraints;</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Test scenarios;</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">third party component purchasing decisions;</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Team structure and schedule dependencies;</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">External services to be offered by the application.</p><p style="padding-top: 11pt;padding-left: 15pt;text-indent: 10pt;text-align: justify;">So, there’s no simple answer here. Documentation takes time to de- velop, and costs money. It’s therefore important to think carefully about what documentation is going to be most useful within the project context, and produce and maintain this as key reference documents for the project.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l176"><ol id="l177"><li style="padding-top: 10pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a121">UML 2.0</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">There’s also the issue of how to document an architecture. So far in this book we’ve used simple box-and-arrow diagrams, with an appropriate dia- gram key to give a clear meaning to the notation used. This has been done deliberately, as in my experience, informal diagrammatical notations are the most common vehicle used to document IT application architectures.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">There are of course many ways to describe the various architecture views that might be useful in a project. Fortunately for all of us, there’s an excellent book that describes many of these from Paul Clements et al. (see Further Reading), so no attempt here will be made to replicate that. But there’s been one significant development since that book was published, and that’s the emergence of UML 2.0.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">For all its greatly debated strengths and weaknesses, the UML has be- come the predominant software description language used across the whole range of software development domains. It has wide and now qual- ity and low-cost tool support, and hence is easily accessible and useable for software architects, designers, developers, students – everyone in fact.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">UML 2.0 is a major upgrade of the modeling language. It adds several new features and, significantly, it formalizes many aspects of the language.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">This formalization helps in two ways. For designers, it eliminates ambigu- ity from the models, helping to increase comprehensibility. Second, it sup- ports the goal of model-driven development, in which UML models are used for code generation. There’s also a lot of debate about the usefulness of model-driven development, and this topic is specifically covered in a later chapter, so we won’t delve into it now.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The UML 2.0 modeling notations cover both structural and behavioral aspects of software systems. The structure diagrams define the static archi- tecture of a model, and specifically are:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><h3 style="display: inline;">Class diagrams: <span class="p">Show the classes in the system and their relationships.</span></h3></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Component diagrams: <span class="p">Describe the relationship between components with well-defined interfaces. Components typically comprise multiple classes.</span></h3></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Package diagrams: <span class="p">Divide the model into groups of elements and de- scribe the dependencies between them at a high level.</span></h3></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Deployment diagrams: <span class="p">Show how components and other software arti- facts like processes are distributed to physical hardware.</span></h3></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Object diagrams: <span class="p">Depict how objects are related and used at run-time. These are often called instance diagrams.</span></h3></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Composite Structure diagrams: <span class="p">Show the internal structure of classes or components in terms of their composed objects and their relation- ships.</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Behavior diagrams show the interactions and state changes that occur as elements in the model execute:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Activity diagrams: <span class="p">Similar to flow charts, and used for defining pro- gram logic and business processes.</span></h3></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Communication diagrams: <span class="p">Called collaboration diagrams in UML 1.x, they depict the sequence of calls between objects at run-time.</span></h3></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Sequence diagrams: <span class="p">Often called swim-lane diagrams after their verti- cal timelines, they show the sequence of messages exchanged between objects.</span></h3></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">State Machine diagrams: <span class="p">Describe the internals of an object, showing its states and events, and conditions that cause state transitions.</span></h3></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Interaction Overview diagrams: <span class="p">These are similar to activity dia- grams, but can include other UML interaction diagrams as well as ac- tivities. They are intended to show control flow across a number of sim- pler scenarios.</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 6pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Timing diagrams: <span class="p">These essentially combine sequence and state dia- grams to describe an object&#39;s various states over time and the messages that alter the object’s state.</span></h3></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Use Case diagrams: <span class="p">These capture interactions between the system and its environment, including users and other systems.</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">Clearly then, UML 2.0 is a large technical area in itself, and some pointers to good sources of information are provided at the end of this chapter. In the following sections though, we’ll describe some of the most useful UML 2.0 models for representing software architectures.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l178"><ol id="l179"><li style="padding-top: 10pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a122">Architecture Views</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">Let’s return to the order processing example introduced in the previous chapter. Fig. 44 shows an informal description of the architecture using a box and arrow notation. In Fig. 45, a UML component diagram is used to represent an equivalent structural view of the order processing system ar- chitecture. Note though, based on the evaluation in the previous chapter, a queue has been added to communicate between the <i>OrderProcessing </i>and <i>OrderSystem </i>components.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="395" height="260" alt="image" src="Image_174.png"/></span></p><p class="s67" style="padding-top: 5pt;padding-left: 25pt;text-indent: 0pt;text-align: left;">id Component View</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s67" style="padding-left: 10pt;text-indent: 0pt;text-align: left;">MailQueue</p><p style="text-indent: 0pt;text-align: left;"/><table style="border-collapse:collapse" cellspacing="0"><tr style="height:13pt"><td style="width:79pt;border-right-style:solid;border-right-width:2pt" colspan="2"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:103pt;border-top-style:solid;border-top-width:2pt;border-left-style:solid;border-left-width:2pt;border-bottom-style:solid;border-bottom-width:2pt;border-right-style:solid;border-right-width:2pt" rowspan="4" bgcolor="#F2F2F2"><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s68" style="padding-left: 30pt;text-indent: 0pt;text-align: left;">OrderProcessing</p></td></tr><tr style="height:13pt"><td style="width:47pt;border-top-style:solid;border-top-width:2pt;border-left-style:solid;border-left-width:2pt;border-bottom-style:solid;border-bottom-width:2pt;border-right-style:solid;border-right-width:2pt" rowspan="2" bgcolor="#F2F2F2"><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s69" style="padding-left: 7pt;padding-right: 6pt;text-indent: 0pt;text-align: center;">«table»</p><p class="s68" style="padding-top: 2pt;padding-left: 7pt;padding-right: 6pt;text-indent: 0pt;text-align: center;">NewOrders</p></td><td style="width:32pt;border-left-style:solid;border-left-width:2pt;border-bottom-style:solid;border-bottom-width:2pt;border-right-style:solid;border-right-width:2pt"><p class="s69" style="padding-top: 6pt;padding-left: 10pt;text-indent: 0pt;line-height: 6pt;text-align: left;">read</p></td></tr><tr style="height:13pt"><td style="width:32pt;border-top-style:solid;border-top-width:2pt;border-left-style:solid;border-left-width:2pt;border-right-style:solid;border-right-width:2pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:14pt"><td style="width:79pt;border-right-style:solid;border-right-width:2pt" colspan="2"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr></table><p style="text-indent: 0pt;text-align: left;"/><p class="s70" style="padding-top: 5pt;padding-left: 89pt;text-indent: 0pt;text-align: center;">writeQ</p><p class="s70" style="text-indent: 0pt;text-align: left;">1</p><p style="text-indent: 0pt;text-align: left;"/><p class="s70" style="padding-top: 3pt;padding-left: 89pt;text-indent: 0pt;text-align: center;">1                           1</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s70" style="padding-left: 14pt;text-indent: 0pt;text-align: right;">validate <span class="s71">1</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s67" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">CustomerSystem</p><p style="text-indent: 0pt;text-align: left;"/><p class="s70" style="padding-top: 6pt;text-indent: 0pt;text-align: right;">1</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s70" style="padding-left: 29pt;text-indent: 0pt;line-height: 6pt;text-align: left;">1</p><p class="s70" style="padding-left: 26pt;text-indent: 0pt;line-height: 6pt;text-align: left;">writeQ</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s70" style="text-indent: 0pt;text-align: right;">1</p><p class="s70" style="padding-top: 5pt;padding-left: 91pt;text-indent: -10pt;line-height: 166%;text-align: left;">readQ 1</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s70" style="padding-left: 14pt;text-indent: 0pt;text-align: right;">readQ</p><p class="s70" style="padding-top: 5pt;padding-left: 83pt;text-indent: 0pt;line-height: 6pt;text-align: left;">1</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s67" style="padding-left: 10pt;text-indent: 0pt;text-align: left;">SendEmail</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s67" style="padding-left: 9pt;text-indent: 0pt;text-align: left;">MailServer</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s67" style="padding-left: 7pt;text-indent: 0pt;text-align: left;">OrderQueue</p><p style="text-indent: 0pt;text-align: left;"/><p class="s70" style="padding-left: 82pt;text-indent: -9pt;line-height: 212%;text-align: left;">send 1</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s67" style="padding-left: 6pt;text-indent: 0pt;text-align: left;">OrderSystem</p><p style="padding-left: 173pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-top: 5pt;padding-left: 38pt;text-indent: 0pt;text-align: left;">Fig. 45. <span class="s7">A UML component diagram for the order processing example</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="267" height="248" alt="image" src="Image_175.png"/></span></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">Only two of the components in the architecture require substantial new code to be created. The internal structure of the most complex of these, <i>OrderProcessing</i>, is shown in the class diagram in Fig. 46. It includes a class essentially to encapsulate each interaction with an existing system. No doubt other classes will be introduced into the design as it is imple- mented, for example one to represent a new order, but these are not shown in the class diagram so that they do not clutter it with unnecessary detail. These are design details not necessary in an architecture description.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s72" style="text-indent: 0pt;text-align: center;">cd OrderProcessing</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s72" style="padding-left: 9pt;text-indent: 0pt;text-align: center;">OrderReader</p><p class="s72" style="text-indent: 0pt;text-align: left;">QueueWriter</p><p style="padding-left: 73pt;text-indent: 0pt;text-align: left;">	</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s60" style="text-indent: 0pt;text-align: left;">1</p><p class="s60" style="text-indent: 0pt;text-align: left;">1</p><p class="s8" style="padding-left: 143pt;text-indent: 0pt;line-height: 9pt;text-align: left;">	</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s60" style="text-indent: 0pt;text-align: left;">1</p><p class="s60" style="text-indent: 0pt;text-align: left;">1</p><p class="s8" style="padding-left: 115pt;text-indent: 0pt;line-height: 8pt;text-align: left;">	</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s60" style="text-indent: 0pt;text-align: left;">1</p><p class="s60" style="text-indent: 0pt;text-align: left;">1</p><p class="s8" style="padding-left: 116pt;text-indent: 0pt;line-height: 11pt;text-align: left;">	</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s72" style="text-indent: 0pt;text-align: left;">Validate</p><p class="s72" style="text-indent: 0pt;text-align: left;">Store</p><p class="s8" style="padding-left: 99pt;text-indent: 0pt;line-height: 11pt;text-align: left;">	</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 73pt;text-indent: 0pt;text-align: left;">Fig. 46. <span class="s7">Classes for the order processing component</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">With this level of description, we can now create a sequence diagram showing the main interactions between the architectural elements. This is shown in Fig. 47, which uses the standard UML stereotypes for represent- ing <i>Boundary </i>(<i>CustomerSystem, OrderQueue, MailQueue</i>) and <i>Entity </i>(<i>NewOrder</i>) components. This sequence diagram omits the behavior when a new order is invalid, and what happens once the messages have been placed on the <i>OrderQueue </i>and <i>MailQueue</i>. Again, this keeps the model uncluttered. Descriptions of this additional functionality could either be described in subsequent (very simple) sequence diagrams, or just in text accompanying the sequence diagram.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Sequence diagrams are probably the most useful technique in the UML for modeling the behavior of the components in an architecture. One of their strengths actually lies in their inherent weakness in describing com- plex processing and logic. Although it is possible to represent loops and</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="403" height="285" alt="image" src="Image_176.png"/></span></p><p class="s38" style="text-indent: 0pt;line-height: 8pt;text-align: left;">OrderQueue</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">selection in sequence diagrams, they quickly become hard to understand and unwieldy to create. This encourages designers to keep them relatively simple, and focus on describing the major interactions between architec- turally significant elements in the design.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s54" style="text-indent: 0pt;line-height: 8pt;text-align: left;">sd Interactions</p><p style="padding-left: 22pt;text-indent: 0pt;line-height: 9pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s38" style="text-indent: 0pt;line-height: 8pt;text-align: left;">NewOrders</p><p class="s73" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">OrderReade<span class="s54">r</span></p><p class="s73" style="padding-left: 6pt;text-indent: 0pt;text-align: left;">Validate</p><p class="s38" style="text-indent: 0pt;line-height: 8pt;text-align: left;">CustomerSystem</p><p class="s73" style="padding-left: 9pt;text-indent: 0pt;text-align: left;">Store</p><p class="s73" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">QueueWrite<span class="s54">r</span></p><p class="s38" style="text-indent: 0pt;line-height: 8pt;text-align: left;">MailQueue</p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;"> 		 		</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s38" style="text-indent: 0pt;line-height: 8pt;text-align: left;">readOrderData</p><p style="padding-left: 38pt;text-indent: 0pt;line-height: 9pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s38" style="text-indent: 0pt;line-height: 106%;text-align: left;">success:= validateOrder</p><p style="padding-left: 67pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s38" style="padding-left: 3pt;text-indent: 0pt;line-height: 107%;text-align: left;">success:= newOrder</p><p class="s38" style="padding-top: 4pt;text-indent: 0pt;text-align: left;">success:= storeOrder</p><p style="padding-left: 109pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s38" style="text-indent: 0pt;line-height: 113%;text-align: left;">success:= <span class="s60">writeQueue</span></p><p style="padding-left: 192pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s60" style="text-indent: 0pt;line-height: 112%;text-align: left;">success:= acknowledgeOrderSuccess</p><p style="padding-left: 129pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s38" style="text-indent: 0pt;text-align: left;">success:= writeQueue</p><p style="padding-left: 263pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 60pt;text-indent: 0pt;text-align: left;">Fig. 47. <span class="s7">Sequence diagram for the order processing system</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Quite often in this style of business integration project, it’s possible to create a UML deployment diagram showing where the various components will execute. This is because many of the components in the design already exist, and the architect must show how the new components interact with these in the deployment environment. An example of a UML deployment diagram for this example is given in Fig. 48. It allocates components to servers and shows the dependencies between the components. It’s often useful to label the dependencies with a name that indicates the protocol that is used to communicate between the components. For example, the <i>OrderProcessing </i>executable component requires JDBC<span class="s29">28 </span>to access the <i>Ne- wOrders </i>table in the <i>OrdersDB </i>database.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_177.png"/></span></p><p class="s14" style="padding-top: 4pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">28 <span class="s7">Java Database Connectivity</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s74" style="text-indent: 0pt;line-height: 7pt;text-align: left;">dd Deployment View</p><p style="padding-left: 18pt;text-indent: 0pt;line-height: 8pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s74" style="text-indent: 0pt;line-height: 7pt;text-align: left;">OrderServer</p><p style="padding-left: 164pt;text-indent: 0pt;line-height: 8pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s74" style="text-indent: 0pt;line-height: 7pt;text-align: left;">:MailQueue</p><p style="padding-left: 197pt;text-indent: 0pt;line-height: 8pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s74" style="text-indent: 0pt;line-height: 7pt;text-align: left;">OrderSystem</p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 8pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s74" style="padding-left: 9pt;text-indent: 0pt;text-align: center;">ERP</p><p class="s75" style="text-indent: 0pt;text-align: center;">«executable»</p><p class="s74" style="padding-top: 1pt;text-indent: 0pt;text-align: center;">:</p><p class="s76" style="text-indent: 0pt;text-align: center;">OrderSystem</p><p class="s74" style="text-indent: 0pt;line-height: 7pt;text-align: left;">:OrderQueue</p><p style="padding-left: 30pt;text-indent: 0pt;text-align: left;">		</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="413" height="340" alt="image" src="Image_178.png"/></span></p><p class="s74" style="text-indent: 0pt;line-height: 7pt;text-align: left;">MOMServer</p><p style="text-indent: 0pt;text-align: left;"/><p class="s74" style="text-indent: 0pt;line-height: 7pt;text-align: left;">CustomerSystem</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s75" style="padding-left: 25pt;text-indent: 0pt;text-align: center;">«executable»</p><p class="s74" style="padding-top: 2pt;text-indent: 0pt;text-align: right;">:</p><p class="s74" style="padding-left: 26pt;text-indent: 0pt;text-align: center;">CustomerSystem</p><p style="text-indent: 0pt;text-align: left;"/><p class="s75" style="text-indent: 0pt;text-align: left;">SOAP</p><p style="text-indent: 0pt;text-align: left;"/><p class="s75" style="text-indent: 0pt;text-align: center;">«executable»</p><p class="s74" style="padding-top: 2pt;text-indent: 0pt;text-align: center;">:</p><p class="s74" style="text-indent: 0pt;text-align: center;">OrderProcessing</p><p style="text-indent: 0pt;text-align: left;"/><p class="s75" style="text-indent: 0pt;text-align: left;">JDBC</p><p style="text-indent: 0pt;text-align: left;"/><p class="s74" style="text-indent: 0pt;line-height: 7pt;text-align: left;">OrdersDB</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s74" style="padding-left: 8pt;text-indent: 0pt;text-align: left;">CRM</p><p style="text-indent: 0pt;text-align: left;"/><p class="s74" style="padding-top: 4pt;padding-left: 13pt;text-indent: 0pt;text-align: left;">MailServer</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s74" style="padding-left: 6pt;text-indent: 0pt;text-align: left;">:SendEmail</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s74" style="padding-left: 3pt;text-indent: 0pt;text-align: left;">:MailServer</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s75" style="padding-left: 2pt;text-indent: 0pt;text-align: center;">«table»</p><p class="s76" style="padding-top: 2pt;padding-left: 2pt;text-indent: 0pt;text-align: center;">:NewOrders</p><p style="text-indent: 0pt;text-align: left;"/><h4 style="padding-top: 5pt;padding-left: 44pt;text-indent: 0pt;text-align: left;">Fig. 48. <span class="s7">UML Deployment diagram for the order processing system</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 8pt;padding-left: 43pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a123">More on Component Diagrams</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 16pt;text-indent: 0pt;text-align: justify;">Component diagrams are very useful for sketching out the structure of an application architecture. They clearly depict the major parts of the system, and can show which off-the-shelf technologies will be used as well as the new components that need to be built. UML 2.0 has also introduced im- proved notations for representing component interfaces. An interface is a collection of methods that a component supports. In addition to the UML</p><p style="padding-left: 16pt;text-indent: 0pt;text-align: justify;">1.x “lollipop” notation for representing an interface supported by a com- ponent (a “provided” interface), the ‘socket’ notation can be used to spec- ify that a component needs a particular interface to be supported by its en- vironment (a “required” interface). These are illustrated in Fig. 49. Interface definition is particularly important in an architecture, as it allows independent teams of developers to design and build their components in</p><ol id="l180"><ol id="l181"><li style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 181pt;text-indent: -16pt;text-align: left;"><p class="s7" style="display: inline;">More on Component Diagrams 123</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_179.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;">isolation, ensuring that they support the contracts defined by their inter- faces.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="412" height="293" alt="image" src="Image_180.png"/></span></p><p class="s60" style="text-indent: 0pt;text-align: left;">QueueWrite</p><p style="text-indent: 0pt;text-align: left;"/><p class="s60" style="text-indent: 0pt;text-align: left;">QueueWrite</p><p style="text-indent: 0pt;text-align: left;"/><p class="s60" style="text-indent: 0pt;text-align: left;">JDBC</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s72" style="padding-left: 10pt;text-indent: 0pt;text-align: left;">SendEmail</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">By connecting provided and required interfaces, components can be “plugged” or “wired” together, as shown in Fig. 49. The provided inter- faces are named, and capture the dependencies between components. Inter- face names should correspond to those used by off-the-shelf applications in use, or existing home-grown component interfaces.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s72" style="text-indent: 0pt;text-align: left;">id Component View</p><p style="padding-left: 19pt;text-indent: 0pt;line-height: 8pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s72" style="text-indent: 0pt;text-align: left;">OrderProcessing</p><p style="padding-left: 128pt;text-indent: 0pt;line-height: 8pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s60" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">«table» <b>MailQueue</b></p><p class="s72" style="padding-top: 1pt;text-indent: 0pt;text-align: left;">NewOrders</p><p style="padding-left: 34pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s60" style="text-indent: 0pt;text-align: left;">QueueRead</p><p style="padding-left: 282pt;text-indent: 0pt;line-height: 8pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s60" style="text-indent: 0pt;text-align: left;">SMTP</p><p style="text-indent: 0pt;text-align: left;"/><p class="s60" style="text-indent: 0pt;text-align: left;">QueueRead</p><p style="text-indent: 0pt;text-align: left;"/><p class="s60" style="text-indent: 0pt;text-align: left;">CustomerServices</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s72" style="padding-left: 7pt;text-indent: 0pt;text-align: left;">OrderSystem</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s72" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">CustomerSystem</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s72" style="padding-left: 10pt;text-indent: 0pt;text-align: left;">MailServer</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s72" style="padding-left: 8pt;text-indent: 0pt;text-align: left;">OrderQueue</p><p style="text-indent: 0pt;text-align: left;"/><h4 style="padding-left: 50pt;text-indent: 0pt;text-align: left;">Fig. 49. <span class="s7">Representing interfaces in the order processing example</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">UML 2.0 makes it possible to refine interface definitions even further, and depict how they are supported within the context of a component. This is done by associating interfaces with ‘ports’. Ports define a unique, op- tionally named interaction point between a component and its external en- vironment. They are represented by small squares on the edge of the com- ponent, and have one or more provides or requires interfaces associated with them.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The order processing system architecture using ports for the <i>OrderProc- essing </i>and <i>CustomerSystem </i>components is depicted in Fig. 50. All the ports in this design are unidirectional, but there is nothing stopping them from being bidirectional in terms of supporting one or more provides or requires interfaces. UML 2.0 composite diagrams enable us to show the in- ternal structure of a design element such as a component. As shown in Fig.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="399" height="291" alt="image" src="Image_181.png"/></span></p><p class="s70" style="text-indent: 0pt;text-align: left;">writeConfirmation</p><p style="text-indent: 0pt;text-align: left;"/><p class="s70" style="text-indent: 0pt;text-align: left;">getOrders</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">51, we can explicitly depict which objects comprise the component im- plementation, and how they are related to each other and to the ports the component supports. The internal objects are represented by UML 2.0 “parts”. Parts are defined in UML 2.0 as run-time instances of classes that are owned by the containing class or component. Parts are linked by con- nectors and describe configurations of instances that are created within an instance of the containing component/class.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s67" style="text-indent: 0pt;text-align: left;">id Component View</p><p style="padding-left: 23pt;text-indent: 0pt;line-height: 7pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s70" style="text-indent: 0pt;text-align: left;">JDBC</p><p class="s67" style="text-indent: 0pt;text-align: left;">OrderProcessing</p><p class="s70" style="text-indent: 0pt;text-align: left;">QueueWrite</p><p style="padding-left: 79pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><span style=" color: black; font-family:&quot;Times New Roman&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7pt;">		</span></p><p class="s77" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">«table» <b>MailQueue</b></p><p class="s67" style="text-indent: 0pt;text-align: left;">NewOrders</p><p style="padding-left: 38pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s70" style="text-indent: 0pt;text-align: left;">validateOrder writeOrder</p><p style="padding-left: 135pt;text-indent: 0pt;line-height: 7pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s70" style="text-indent: 0pt;text-align: left;">QueueRead</p><p style="padding-left: 277pt;text-indent: 0pt;line-height: 7pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s70" style="padding-left: 3pt;text-indent: 0pt;text-align: left;">QueueWrite</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s67" style="text-indent: 0pt;text-align: left;">OrderQueue</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s67" style="padding-left: 10pt;text-indent: 0pt;text-align: left;">SendEmail</p><p style="padding-left: 186pt;text-indent: 0pt;text-align: left;">	</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s70" style="text-indent: 0pt;text-align: left;">CustomerServices</p><p class="s70" style="padding-left: 25pt;text-indent: 0pt;text-align: left;">QueueRead</p><p class="s70" style="text-indent: 0pt;text-align: left;">SMTP</p><p style="padding-left: 94pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><span style=" color: black; font-family:&quot;Times New Roman&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7pt;">	</span><span style=" color: black; font-family:&quot;Times New Roman&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7pt;">	</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s70" style="text-indent: 0pt;text-align: left;">ProvidedInterface1</p><p style="padding-left: 73pt;text-indent: 0pt;line-height: 7pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s70" style="padding-left: 5pt;text-indent: 0pt;line-height: 6pt;text-align: left;">validate</p><p class="s67" style="text-indent: 0pt;line-height: 7pt;text-align: left;">CustomerSystem</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s67" style="padding-left: 6pt;text-indent: 0pt;text-align: left;">OrderSystem</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s67" style="padding-left: 9pt;text-indent: 0pt;text-align: left;">MailServer</p><p style="text-indent: 0pt;text-align: left;"/><h4 style="padding-left: 71pt;text-indent: 0pt;text-align: left;">Fig. 50. <span class="s7">Using ports in the order processing example</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Composite diagrams are useful for describing the design of complex or important components in a design. For example, a layered architecture might describe each layer as a component that supports various ports/interfaces. Internally, a layer description can contain other compo- nents and parts that show how each port is supported. Components can also contain other components, so hierarchical architectures can be easily described. We’ll see some of these design techniques in the case study in the next section.</p></li><li style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 153pt;text-indent: -16pt;text-align: left;"><p class="s7" style="display: inline;">Architecture Documentation Template 125</p></li></ol></ol><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_182.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="391" height="248" alt="image" src="Image_183.png"/></span></p><p class="s54" style="padding-left: 27pt;text-indent: 0pt;text-align: left;">cd Component View</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s54" style="padding-top: 5pt;padding-left: 119pt;text-indent: 0pt;text-align: left;">OrderProcessing</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s78" style="padding-top: 5pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">«delegate»</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s38" style="padding-left: 37pt;text-indent: 0pt;text-align: left;">getOrders</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s38" style="padding-left: 37pt;text-indent: 0pt;text-align: left;">«delegate»</p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse" cellspacing="0"><tr style="height:11pt"><td style="width:61pt;border-top-style:solid;border-top-width:2pt;border-left-style:solid;border-left-width:2pt;border-bottom-style:solid;border-bottom-width:2pt;border-right-style:solid;border-right-width:2pt" rowspan="2" bgcolor="#F2F2F2"><p class="s79" style="padding-top: 5pt;padding-left: 4pt;text-indent: 0pt;text-align: left;">or: OrderReader</p></td><td style="width:24pt;border-left-style:solid;border-left-width:2pt;border-bottom-style:solid;border-bottom-width:2pt;border-right-style:solid;border-right-width:2pt" bgcolor="#F2F2F2"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:46pt;border-top-style:solid;border-top-width:2pt;border-left-style:solid;border-left-width:2pt;border-bottom-style:solid;border-bottom-width:2pt;border-right-style:solid;border-right-width:2pt" rowspan="2" bgcolor="#F2F2F2"><p class="s79" style="padding-top: 4pt;padding-left: 2pt;text-indent: 13pt;line-height: 109%;text-align: left;">qw: QueueWriter</p></td></tr><tr style="height:13pt"><td style="width:24pt;border-top-style:solid;border-top-width:2pt;border-left-style:solid;border-left-width:2pt;border-right-style:solid;border-right-width:2pt" bgcolor="#F2F2F2"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr></table><p style="text-indent: 0pt;text-align: left;"/><p class="s38" style="padding-left: 70pt;text-indent: 0pt;text-align: left;">writeConfirmation</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s54" style="padding-top: 5pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">val: Validate</p><p class="s54" style="padding-top: 5pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">st: Store</p><p style="padding-left: 78pt;text-indent: 0pt;text-align: left;"><span style=" color: black; font-family:Helvetica, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt;">	</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s78" style="padding-top: 5pt;padding-left: 72pt;text-indent: 0pt;text-align: left;">«delegate»</p><p class="s38" style="padding-top: 3pt;padding-left: 14pt;text-indent: 0pt;text-align: right;">validateOrder</p><p class="s78" style="padding-top: 7pt;padding-left: 30pt;text-indent: 0pt;text-align: left;">«delegate»</p><p class="s38" style="padding-left: 54pt;text-indent: 0pt;text-align: left;">writeOrder</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-top: 5pt;padding-left: 60pt;text-indent: 0pt;text-align: left;"><b>Fig. 51. </b>Internal design of the <i>OrderProcessing </i>component</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 8pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a124">Architecture Documentation Template</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">It’s always useful for an organization to have a document template avail- able for capturing project specific documentation. Templates reduce the start-up time for projects by providing ready-made document structures for project members to use.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Once the use of the templates becomes institutionalized, the familiarity gained with the document structure aids in the efficient capture of project design details. Templates also help with the training of new staff as they tell developers what issues the organization requires them to consider and think about in the production of their system.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Fig. 52 shows the headings structure for a documentation template that can be used for capturing an architecture design. To deploy this template in an organization, it should be accompanied by explanatory text and illustra- tions of what information is expected in each section. However, instead of doing that here, this template structure will be used to show the solution to the ICDE case study problem in the next chapter.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">Architecture Documentation Template Project Name: XXX</p><ol id="l182"><li style="padding-left: 22pt;text-indent: -21pt;text-align: left;"><p class="s7" style="display: inline;">Project Context</p></li><li style="padding-left: 22pt;text-indent: -21pt;text-align: left;"><p class="s7" style="display: inline;">Architecture Requirements</p><ol id="l183"><li style="padding-left: 43pt;text-indent: -21pt;text-align: left;"><p class="s7" style="display: inline;">Overview of Key Objectives</p></li><li style="padding-left: 44pt;text-indent: -21pt;text-align: left;"><p class="s7" style="display: inline;">Architecture Use Cases</p></li><li style="padding-left: 44pt;text-indent: -21pt;text-align: left;"><p class="s7" style="display: inline;">Stakeholder Architectural Requirements</p></li><li style="padding-left: 44pt;text-indent: -21pt;text-align: left;"><p class="s7" style="display: inline;">Constraints</p></li><li style="padding-left: 44pt;text-indent: -21pt;text-align: left;"><p class="s7" style="display: inline;">Non-functional Requirements</p></li><li style="padding-left: 44pt;text-indent: -21pt;text-align: left;"><p class="s7" style="display: inline;">Risks</p></li></ol></li><li style="padding-left: 22pt;text-indent: -21pt;text-align: left;"><p class="s7" style="display: inline;">Solution</p><ol id="l184"><li style="padding-left: 44pt;text-indent: -21pt;text-align: left;"><p class="s7" style="display: inline;">Relevant Architectural Patterns</p></li><li style="padding-left: 44pt;text-indent: -21pt;text-align: left;"><p class="s7" style="display: inline;">Architecture Overview</p></li><li style="padding-left: 44pt;text-indent: -21pt;text-align: left;"><p class="s7" style="display: inline;">Structural Views</p></li><li style="padding-left: 44pt;text-indent: -21pt;text-align: left;"><p class="s7" style="display: inline;">Behavioral Views</p></li><li style="padding-left: 44pt;text-indent: -21pt;text-align: left;"><p class="s7" style="display: inline;">Implementation Issues</p></li></ol></li><li style="padding-left: 22pt;text-indent: -21pt;text-align: left;"><p class="s7" style="display: inline;">Architecture Analysis</p><ol id="l185"><li style="padding-left: 44pt;text-indent: -21pt;text-align: left;"><p class="s7" style="display: inline;">Scenario analysis</p></li><li style="padding-left: 44pt;text-indent: -21pt;text-align: left;"><p class="s7" style="display: inline;">Risks</p></li></ol></li></ol><p style="padding-left: 13pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="421" height="278" alt="image" src="Image_184.png"/></span></p><h4 style="padding-top: 5pt;padding-left: 88pt;text-indent: 0pt;text-align: left;">Fig. 52. <span class="s7">Architecture documentation outline</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 8pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a125">Summary and Further Reading</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">Generating architecture documentation is nearly always a good idea. The trick is to spend just enough effort to produce only documentation that will be useful for the project’s various stakeholders. This takes some upfront planning and thinking. Once a documentation plan is established, team members should commit to keeping the documentation reasonably current, accurate and accessible.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">I’m a bit of a supporter of using UML-based notations and tools for producing architecture documentation. The UML, especially with version 2.0, makes it pretty straightforward to document various structural and be- havioral views of a design. Tools make creating the design quick and easy, and also make it possible to capture much of the design rationale, the de- sign constraints, and other text based documentation within the tool reposi- tory. Once it’s in the repository, generating design documentation becomes a simple task of selecting the correct menu item and opening up a browser or walking to the printer. Such automatic documentation production is a trick that is guaranteed to impress non-technical stakeholders, and even sometimes the odd technical one!</p><p class="s7" style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 166pt;text-indent: 0pt;text-align: left;">6.7 Summary and Further Reading 127</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_185.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">In addition, it’s possible to utilize UML 2.0 flexibly in a project. It can be used to sketch out an abstract architecture representation, purely for communication and documentation purposes. It can also be used to closely model the components and objects that will be realized in the actual im- plementation. This “closeness” can be reduced further in the extreme case to “exactness”, in which elements in the model are used to generate execu- table code. If you’re doing this, then you’re doing so-called model-driven development (MDD).</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">There’s all manner of debates raging about the worth and value of using the UML informally versus the precise usage required by MDD. Back in Chapter 1, the role of a software architecture as an abstract representation of the system was discussed. Abstraction is a powerful aid to understand- ing, and if our architecture representation is abstract, then it argues for a more informal usage of the UML in our design. On the other hand, if our UML models are a precise representation of our implementation, then they are hardly much of an abstraction. But such detailed models make code generation possible, and bridge the semantic gap between models and im- plementation. I personally think there’s a place for both, it just depends what you’re building and why. Like many architecture decisions, there’s no right or wrong answer, as solutions need to be evaluated in the context of their problem definition. Now there’s a classic consultant’s answer.</p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;">For in-depth discussions on architecture documentation approaches, the</p><p class="s11" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">Views &amp; Beyond <span class="p">book from the SEI is the current font of knowledge:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">P. Clements, F. Bachmann, L. Bass, D. Garlan, J. Ivers, R. Little, R. Nord, J. Stafford. <i>Documenting Software Architectures: Views and Be- yond. </i>Addison-Wesley, 2002</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;">Good UML 2.0 books are starting to emerge. The one I find useful is:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">S. W. Ambler. <i>The Object Primer 3rd Edition: Agile Model Driven De- velopment with UML 2</i>. Cambridge University Press, 2004</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: right;">This book also gives an excellent introduction into agile development methods, and how the UML can be used in lightweight and effective ways. There’s an IEEE standard, IEEE 1471-2000, for architecture documen- tation, which is well worth a read if you’re looking at defining architecture</p><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;">documentation standards for your organization. This can be found at:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: left;">http://standards.ieee.org/reading/ieee/std_public/description/se/1471- 2000_desc.html</p></li></ol><li style="padding-top: 4pt;padding-left: 28pt;text-indent: -13pt;text-align: left;"><h1 style="display: inline;"><a name="a126">Case Study Design</a></h1><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l186"><li style="padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a127">Overview</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">In this chapter, a design for the ICDE case study described in Chap. 2 is given. First, a little more technical background to the project is given, so that the design details are more easily digested. Then the design descrip- tion is presented, and is structured using the architecture documentation template introduced in the previous chapter. The only section that won’t be included in the document is the first, the “Project Context”, as this is basi- cally described in Chap. 2. So, without further ado, let’s dive into the de- sign documentation.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a128">ICDE Technical Issues</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">Chapter 2 gave a broad, requirements level description of the ICDE v1.0 application and the goals for building the next version. Of course, this de- scription is necessary in order to understand architectural requirements, but in reality, it’s only the starting point for the technical discussions that re- sult in an actual design. The following sections describe some of the tech- nical issues, whose solutions are reflected in the resulting design descrip- tion in section 7.3.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l187"><li style="padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a129">Large Data</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">The ICDE database stores information about the actions of each user when using their workstation and applications. This means events such as open- ing and closing applications, typing in data, moving the mouse, accessing the Internet, and so on all cause data to be written to the database. Al- though the database is periodically purged (e.g. every day/week) to archive old data and control size, some database tables can quickly grow to a size of several million rows.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">This is not a problem for the database to handle, but it does create an in- teresting design issue for the ICDE API. With the two-tier ICDE v1.0 ap- plication, the data analysis tool can issue naïve database queries (the clas- sic <i>SELECT * from VERYBIGTABLE </i>case) that can return very large data sets. These are inevitably slow to execute and can bring down the analysis tool if the data set returned is very large.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">While inconvenient, according to the “you asked for it, you got it!” principle, this isn’t a serious issue for users in a single user system as in ICDE v1.0. They only do harm to themselves, and presumably after bring- ing down the application a few times, will learn better.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">However, in order to lower deployment costs and management com- plexity, moving to a ICDE system shared amongst multiple users is a po- tentially attractive option because:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></li></ol></li></ol></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">It reduces database license costs, as only one is needed per deployment, not per user.</p></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">It reduces the specification of the PC that users need to run the ICDE application, as it doesn’t need to run the database, just the ICDE client software. Simply, this saves money for a deployment.</p></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">It reduces support costs, as there’s only one shared ICDE server applica- tion to manage and monitor.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">If the database is to be shared by multiple users, it would still be possi- ble to use a two-tier or three-tier application architecture. The two-tier op- tion would likely provide better performance for small deployments, and be easier to build as less components would be needed (basically, no mid- dle tier). The three-tier option would likely scale better as deployments ap- proach a 100-150 users, as the database connections can be pooled and ad- ditional processing resources deployed in the middle tier.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Regardless, when a shared infrastructure is used, the behavior of each client impacts others. In this case, issues to consider are:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Database performance</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">For the three-tier option, resource usage in the middle tier</p><p style="padding-top: 11pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">Memory usage in the middle tier is an important issue to consider, espe- cially as clients (users and third party tools) might request result sets with many thousands of rows. While the middle tier server could be configured with a large memory heap, if several clients request sizeable result sets si- multaneously, this could easily consume all the servers memory resources, causing thrashing and poor performance. In some cases this will cause re-</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">quests to fail due to lack of memory and timeouts, and will likely bring down the server in extreme cases.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">For third party tools written to the ICDE API, this is not at all desirable. If potentially huge result sets can be returned from an API request, it means it is possible to create applications using the API that can fail un- predictably. The failure circumstances would depend on the size of the re- sult set and the concurrent load on the server exerted by other clients. One API call might bring down the server, and cause all applications connected to the server to fail too. This is not likely to make the development or sup- port teams happy as the architecture would not be providing a reliable ap- plication platform.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l188"><ol id="l189"><ol id="l190"><li style="padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a130">Notification</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">There are two scenarios when event notification is needed.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l191"><li style="padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">A third party tool may want to be informed when the user carries out a specific action, for example, accesses a new site on the Internet.</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">The third party tools can share useful data that they store in the ICDE database with other tools. Therefore they need a mechanism to notify any interested parties about the data they have just written into the ICDE system.</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Both of these cases, but especially the first, require the notification of the event to be dispatched rapidly, basically as the event occurs. With a two-tier architecture, instant notification is not so natural and easy to achieve. Database mechanisms exist that can be exploited such as triggers, but these have disadvantages potentially in terms of scalability, and also flexibility. A database trigger is a block of statements that are executed when there is an alteration (INSERT, UPDATE, DELETE) to a table in the database. Trigger mechanisms tend to exploit database vendor specific fea- tures, which would inhibit portability.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Flexibility is the key issue here. The ICDE development team cannot know what events or data the third party tools wish to share a priori (sim- ply, the tools don’t exist yet). Consequently, some mechanism that allows the developers themselves to create and advertise events types “on de- mand” is needed. Ideally, this should be supported by the ICDE platform without requiring intervention from an ICDE programmer or administrator.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 5pt;padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a131">Data Abstraction</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">The ICDE database structure evolved considerably from v1.0 to v2.0. The reasons were to incorporate new data items, and to optimize the internal organization for performance reasons. Hence it is important that the inter- nal database organization is not exposed to API developers. If it were, every time the schema changed, their code would break. This would be a happy situation for precisely no one.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a132">Platform and Distribution Issues</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">Third party tool suppliers want to be able to write applications on non- Windows platforms such as Linux. Some tools will want to run some proc- esses on the same workstation as the user (on Windows), others will want to run their tools remotely and communicate with the user through ubiqui- tous mechanisms like email and instant messaging. Again, the key here is that the ICDE solution should make both options as painless as possible.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a133">API Issues</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">The ICDE API allows programmatic access to the ICDE data store. The data store captures detailed, time-stamped information about classes of events of user actions, including:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></ol></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Keyboard events</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Internet browser access events</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Application (e.g. word processor, email, browser) open and close events</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Cut and paste events</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">File open and close events</p><p style="padding-top: 11pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">Hence the API must provide a set of interfaces for querying the event data stored in the database. For example, if a third party tool wants to know the applications a user has opened since they last logged on (their latest ICDE “session”), in pseudo code the API call sequence might look something like:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-left: 25pt;text-indent: 0pt;line-height: 112%;text-align: left;">Session sID = getSessionID(userID, CURRENT_SESSION); ApplicationData[] apps = getApplicationEvent(sID,</p><p class="s37" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">APP_OPEN_EVENT, NULL); //NULL = all applications</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 10pt;text-align: justify;">The <span class="s39">apps </span>array can now be walked through and, for example, the web pages opened by the user in their browser during the session can be ac- cessed<span class="s14">29 </span>and analyzed using more API calls.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The ICDE API should also allow applications to store data in the data store for sharing with other tools or perhaps the user. An API for this pur- pose, in pseudo-code, looks like:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-left: 26pt;text-indent: 0pt;text-align: left;">ok = write( myData, myClassifier, PUBLISH, myTopic);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;line-height: 106%;text-align: justify;">This stores the data in a pre-designated database table, along with a classifier that can be used to search for and retrieve the data. The API also causes information about this event to be published on topic <span class="s39">myTopic</span>.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">In general, to encourage third party developers, the ICDE API has to be useful in terms of providing the developers with the facilities they need to write tools. It should therefore:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Be easy to learn and flexibly compose sequences of API queries to re- trieve useful data.</p></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Be easy to debug.</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Support location transparency. Third party tools should not have to be written to a particular distributed configuration that relies on certain components being at known, fixed locations.</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Be resilient as possible to ICDE platform changes. This means that ap- plications do not break when changes to the ICDE API or data store oc- cur.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l192"><ol id="l193"><ol id="l194"><li style="padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a134">Discussion</a></p></li></ol></ol></ol><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">Taken together, the above issues weave a reasonably complex web of re- quirements and issues. The event notification requirements point strongly to a flexible publish-subscribe architecture to tie together collaborating tools. The need to support multiple platforms and transparent distributed configurations points to a Java solution with the various components communicating over protocols like RMI and JMS. The large data and data store abstraction requirements suggest some layer is needed to translate API calls into the necessary SQL requests, and then manage the safe and reliable return of the (potentially large) result set to the client.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_186.png"/></span></p><p class="s14" style="padding-top: 4pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;">29 <span class="s7">The ICDE data store keeps copies of all accessed web pages so that even dy- namically changing web pages (e.g. www.bbc.co.uk) can be viewed as they ap- peared at the time of access.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">The chosen solution selected a three-tier architecture along with a pub- lish-subscribe infrastructure for event notification. The details of this solu- tion, along with detailed justifications follow in the next section, which documents the architecture using the template from Chap. 6.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l195"><ol id="l196"><li style="padding-top: 10pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a135">ICDE Architecture Requirements</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: left;">This section describes the set of requirements driving the design of the ICDE application architecture.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l197"><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a136">Overview of Key Objectives</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">The first objective of the ICDE v2.0 architecture is to provide an infra- structure to support a programming interface for third party client tools to access the ICDE data store. This must offer:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></li></ol></ol></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Flexibility in terms of platform and application deploy- ment/configuration needs for third party tools.</p></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">A framework to allow the tools to “plug” into the ICDE environment and obtain immediate feedback on ICDE user activities, and provide in- formation to analysts and potentially other tools in the environment.</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Provide convenient and simple read/write access to the ICDE data store.</p><p style="padding-top: 11pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">The second objective is to evolve the ICDE architecture so that it can scale to support deployments of 100-150 users. This should be achieved in a way that offers a low cost per workstation deployment.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The approach taken must be consistent with the stakeholder’s needs, and the constraints and non-functional requirements detailed in the following sections.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l198"><ol id="l199"><ol id="l200"><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a137">Architecture Use Cases</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">Two basic use cases regarding the API usage have been identified from discussions with a small number of potential third party tool vendors. These are briefly outlined below:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></ol></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">ICDE data access: <span class="p">Queries from the third party tools focus on the ac- tivities of a single ICDE user. A query sequence starts by getting infor- mation about the user’s current work assignment, which is basically the project (i.e. analyze Pfizer Inc financials) they are working on. Query</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 26pt;text-indent: 0pt;text-align: justify;">navigation then drills down to retrieve detailed data about the user’s ac- tivity. The events retrieved are searched in the time sequence they oc- cur, and the application logic looks for specific data items (e.g. window titles, keyboard values, document names, URLs) in the retrieved re- cords. These values are used to either initialize activity in the third party analysis tool, or create an informational output that appears on the user’s screen.</p></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Data Storage: <span class="p">Third party tools need to be able to store information in the ICDE data store, so that they can share data about their activities. A notification mechanism is needed for tools to communicate about the availability of new data. The data from each tool is diverse in structure and content. It must therefore contain associated discoverable meta-data if it is to be useful to other tools in the environment.</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l201"><ol id="l202"><ol id="l203"><li style="padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a138">Stakeholder Architectural Requirements</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">The requirements from the perspectives of the three major project stake- holders are covered in the following sections.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l204"><li style="padding-left: 55pt;text-indent: -40pt;text-align: left;"><p class="s41" style="display: inline;">Third Party Tool Producers</p></li></ol></li></ol></ol></ol></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Ease of data access: <span class="p">The ICDE data store comprises a moderately complex software component. The relational database has approxi- mately fifty tables, with some complex interrelationships. In the ICDE v1.0 environment, this makes the SQL queries to retrieve data non- trivial to write and test. Also, as the functional requirements evolve with each release, changes to the database schema are inevitable, and these might break existing queries. For these reasons, a mechanism to make it easy for third party tools to retrieve useful data is needed, as well as an approach to insulate the tools from database changes. Third party tools should not have to understand the database schema and write complex queries.</span></h3></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Heterogeneous platform support: <span class="p">Several of the third party tools are developing technologies on platforms other than Windows. The ICDE v1.0 software is tightly coupled to Windows. Also, the relational data- base used is available only on the Windows platform. Hence, the ICDE v2.0 must adopt strategies to make it possible for software not executing on Windows to access ICDE data and plug into the ICDE environment.</span></h3></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Instantaneous event notification: <span class="p">The third party tools being devel- oped aim to provide timely feedback to the analysts (ICDE users) on their activities. A direct implication of this is that these tools need ac- cess to the events recorded by the ICDE system as they occur. Hence,</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 25pt;text-indent: 0pt;text-align: justify;">some mechanism is needed to distribute ICDE user-generated events as they are captured in the <i>Data Store</i>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l205"><ol id="l206"><ol id="l207"><ol id="l208"><li style="padding-left: 55pt;text-indent: -40pt;text-align: left;"><p class="s41" style="display: inline;">ICDE API Programmers</p><p style="padding-left: 14pt;text-indent: 0pt;text-align: left;">From the perspective of the ICDE API programmer, the API should:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l209"><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Be easy and intuitive to learn.</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Be easy to comprehend and modify code that uses the API.</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Provide a convenient, concise programming model for implementing common use cases that traverse and access the ICDE data.</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Provide an API for writing tool specific data and metadata to the ICDE data store. This will enable multiple tools to exchange information through the ICDE platform.</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Provide the capability to traverse ICDE data in unusual or unanticipated navigation paths. The design team cannot predict exactly how the data in the data store will be used, so the API must be flexible and not inhibit “creative” uses by tool developers.</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Provide “good” performance, ideally returning result sets in a small (1-</p><p style="padding-left: 25pt;text-indent: 0pt;text-align: justify;">5) number of seconds on a typical hardware deployment. This will en- able tool developers to create products with predictable, fast response times.</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Be flexible in terms of deployment options and component distribution. This will make it cost-effective to establish ICDE installations for small workgroups, or large departments.</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Be accessible through a Java API.</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 55pt;text-indent: -40pt;text-align: left;"><p class="s41" style="display: inline;">ICDE Development Team</p><p style="padding-left: 14pt;text-indent: 0pt;text-align: left;">From the ICDE development team’s perspective, the architecture must:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l210"><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Completely abstract the database structure and server implementation mechanism, insulating third party tools from the details of, and changes to, the ICDE data store structure.</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Support ease of server modification with minimal impact on the existing ICDE client code that uses the API.</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Support concurrent access from multiple threads or ICDE applications running in different processes and/or on different machines.</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Be easy to document and clearly convey usage to API programmers.</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Provide scalable performance. As the concurrent request load increases on an ICDE deployment, it should be possible to scale the system with no changes to the API implementation. Scalability would be achieved by adding new hardware resources to either scale up or scale out the de- ployment.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 5pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Significantly reduce or ideally remove the capability for third party tools to cause server failures, consequently reducing support effort. This means the API should ensure that bad parameter values in API calls are trapped, and that no API call can acquire all the resources (memory, CPU) of the ICDE server, thus locking out other tools.</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Not be unduly expensive to test. The test team should be able to create a comprehensive test suite that can automate the testing of the ICDE API.</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol><li style="padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a139">Constraints</a></p><ol id="l211"><li style="padding-top: 9pt;padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">The ICDE v2.0 database schema must be used.</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">The ICDE v2.0 environment must run on Windows platforms.</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a140">Non-functional Requirements</a></p></li></ol></ol></ol></li><li style="padding-top: 9pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Performance: <span class="p">The ICDE v2.0 environment should provide sub five second response times to API queries that retrieve up to 1000 rows of data, as measured on a “typical” hardware deployment platform.</span></h3></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Reliability: <span class="p">The ICDE v2.0 architecture should be resilient to failures induced by third party tools. This means that client calls to the API can- not cause the ICDE server to fail due to passing bad input values or re- source locking or exhaustion. This will result in less fault reports and easier and cheaper application support. Where architectural trade-offs must be made, mechanisms that provide reliability are favored over those that provide better performance.</span></h3></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Simplicity: <span class="p">As concrete API requirements are vague (because few third party tools exist), simplicity in design, based on a flexible30 foundation architecture, is favored over complexity. This is because simple designs are cheaper to build, more reliable, and easier to evolve to meet concrete requirements as they emerge. It also ensures that, as the ICDE develop- ment team is unlikely to possess perfect foresight, highly flexible31 and complex, but perhaps unnecessary functionality is not built until con- crete use cases justify the efforts. A large range of features supported comes at the cost of complexity, and complexity inhibits design agility and evolvability.</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_187.png"/></span></p><p class="s14" style="padding-top: 4pt;padding-left: 26pt;text-indent: -10pt;line-height: 106%;text-align: left;">30 <span class="s7">Flexible in terms of easy to evolve, extend and enhance, and not including mechanisms that preclude easily adopting a different architectural strategy.</span></p><p class="s14" style="padding-left: 26pt;text-indent: -10pt;text-align: left;">31 <span class="s7">Flexible in terms of the range of sophisticated features offered in the API for re- trieving GB data.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l212"><ol id="l213"><ol id="l214"><li style="padding-top: 5pt;padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a141">Risks</a></p></li></ol></ol></ol><p style="padding-top: 9pt;padding-left: 25pt;text-indent: 0pt;text-align: left;">The major risk associated with the the design is as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:21.668pt" cellspacing="0"><tr style="height:11pt"><td style="width:150pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 6pt;text-indent: 0pt;line-height: 9pt;text-align: left;">Risk</p></td><td style="width:143pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 6pt;text-indent: 0pt;line-height: 9pt;text-align: left;">Mitigation Strategy</p></td></tr><tr style="height:65pt"><td style="width:150pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;padding-right: 4pt;text-indent: 1pt;text-align: left;">Concrete requirements are not read- ily available, as only a few third party tool vendors are sufficiently knowledgeable about ICDE to pro- vide useful inputs.</p></td><td style="width:143pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;padding-right: 5pt;text-indent: 1pt;text-align: left;">Keep initial API design simple and easily extensible. When fur- ther concrete use cases are identi- fied, extend the API where needed with features to accommodate new</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">requirements.</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l215"><ol id="l216"><li style="padding-top: 10pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a142">ICDE Solution</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;text-align: left;">The following sections outline the design of the ICDE architecture.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l217"><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a143">Relevant Architectural Patterns</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">The following architecture patterns are used in the design:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></li></ol></ol></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Three-tier: <span class="p">Third party tools are clients, communicating with the API implementation in the middle tier, which queries the ICDE v2.0 data store.</span></h3></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: left;"><h3 style="display: inline;">Publish-subscribe: <span class="p">The middle tier contains a publish-subscribe capa- bility.</span></h3></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: left;"><h3 style="display: inline;">Layered: <span class="p">Both the client and middle tier employ layers internally to structure the design.</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l218"><ol id="l219"><ol id="l220"><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a144">Architecture Overview</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">The ICDE v2.0 architecture overview is depicted in Fig. 53. ICDE clients use the <i>ICDE API Client </i>component to make calls to the <i>ICDE API Ser- vices </i>component. This is hosted by a J2EE application server, and trans- lates API calls into JDBC calls on the data store.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The existing <i>Data Collection </i>client in ICDE v1.0 is refactored to re- move all functionality with data store dependencies. All data store access operations are relocated into a set of J2EE hosted components which offer data collection services to clients.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s74" style="text-indent: 0pt;text-align: left;">id Marketecture</p><p style="padding-left: 63pt;text-indent: 0pt;line-height: 8pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s74" style="text-indent: 0pt;text-align: left;">3rd Party ICDE Tool</p><p class="s74" style="text-indent: 0pt;text-align: left;">ICDE User</p><p style="padding-left: 70pt;text-indent: 0pt;line-height: 9pt;text-align: left;"><span style=" color: black; font-family:&quot;Times New Roman&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">	</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s74" style="padding-left: 6pt;text-indent: 0pt;text-align: left;">ICDE API Client</p><p class="s75" style="text-indent: 0pt;text-align: left;">event notification</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s74" style="padding-left: 12pt;text-indent: 0pt;line-height: 109%;text-align: center;">ICDE Data Collection Client</p><p style="padding-left: 71pt;text-indent: 0pt;text-align: left;"><span style=" color: black; font-family:&quot;Times New Roman&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;"> </span>	</p><p class="s75" style="text-indent: 0pt;text-align: left;">API call</p><p class="s75" style="text-indent: 0pt;line-height: 111%;text-align: left;">Write user event</p><p style="padding-left: 99pt;text-indent: 0pt;text-align: left;">	</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s74" style="padding-left: 74pt;text-indent: 0pt;text-align: center;">J2EE App Server</p><p style="padding-left: 69pt;text-indent: 0pt;text-align: left;"/><p class="s75" style="text-indent: 0pt;text-align: left;">JDBC</p><p style="padding-left: 163pt;text-indent: 0pt;line-height: 8pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s74" style="padding-left: 19pt;text-indent: -6pt;line-height: 109%;text-align: left;">ICDE Data Store</p><p style="padding-left: 142pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="294" height="379" alt="image" src="Image_188.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s74" style="padding-left: 14pt;text-indent: -10pt;line-height: 109%;text-align: left;">Data Collection Services</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s74" style="padding-left: 8pt;text-indent: 0pt;text-align: left;">JMS</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s74" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">ICDE API</p><p class="s74" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">Services</p><p style="text-indent: 0pt;text-align: left;"/><p class="s7" style="padding-top: 5pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">Fig. 53. ICDE API architecture</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: left;">Event notification is achieved using a publish-subscribe infrastructure based on the Java Messaging Service (JMS).</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: left;">Using J2EE as an application infrastructure, ICDE can be deployed so that one data store can support:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></ol></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Multiple users interacting with the data collection components.</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Multiple third party tools interacting with the API components.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l221"><ol id="l222"><ol id="l223"><li style="padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a145">Structural Views</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">A component diagram for the API design is shown in Fig. 54.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s74" style="text-indent: 0pt;line-height: 7pt;text-align: left;">id API View</p><p style="padding-left: 19pt;text-indent: 0pt;line-height: 7pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s74" style="padding-left: 14pt;text-indent: -14pt;text-align: left;">ICDE 3rd Party Tool</p><p style="padding-left: 146pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s75" style="text-indent: 0pt;line-height: 7pt;text-align: left;">Java</p><p class="s75" style="text-indent: 0pt;line-height: 7pt;text-align: left;">NotificationCallback</p><p style="padding-left: 164pt;text-indent: 0pt;text-align: left;">	</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s75" style="text-indent: 0pt;line-height: 6pt;text-align: right;">Notify</p><p class="s74" style="text-indent: 0pt;line-height: 6pt;text-align: left;">ICDE API Client</p><p style="padding-left: 153pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s75" style="text-indent: 0pt;line-height: 7pt;text-align: left;">Subscribe</p><p style="padding-left: 227pt;text-indent: 0pt;line-height: 7pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s75" style="text-indent: 0pt;text-align: left;">CallAPI NotificationCallback</p><p style="padding-left: 130pt;text-indent: 0pt;line-height: 8pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s74" style="padding-left: 18pt;text-indent: 0pt;text-align: left;">Query</p><p class="s75" style="text-indent: 0pt;line-height: 7pt;text-align: left;">WriteAPI</p><p class="s80" style="padding-top: 3pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">«delegate»</p><p style="padding-left: 31pt;text-indent: 0pt;text-align: left;">	</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s80" style="text-indent: 0pt;line-height: 7pt;text-align: left;">«delegate»</p><p class="s80" style="text-indent: 0pt;line-height: 7pt;text-align: left;">«delegate»</p><p style="padding-left: 52pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><span style=" color: black; font-family:&quot;Times New Roman&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7pt;">	</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s75" style="text-indent: 0pt;line-height: 7pt;text-align: left;">JDBC</p><p style="padding-left: 76pt;text-indent: 0pt;line-height: 7pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s74" style="padding-left: 18pt;text-indent: -6pt;text-align: left;">ICDE Data Store</p><p style="padding-left: 154pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="412" height="408" alt="image" src="Image_189.png"/></span></p><p class="s75" style="text-indent: 0pt;line-height: 7pt;text-align: left;">Publish</p><p style="text-indent: 0pt;text-align: left;"/><p class="s75" style="text-indent: 0pt;line-height: 7pt;text-align: center;">Subscribe</p><p class="s74" style="padding-top: 1pt;text-indent: 0pt;text-align: center;">JMS</p><p style="text-indent: 0pt;text-align: left;"/><p class="s74" style="text-indent: 0pt;line-height: 7pt;text-align: left;">ICDE API Services</p><p style="text-indent: 0pt;text-align: left;"/><p class="s75" style="padding-left: 4pt;text-indent: 0pt;line-height: 7pt;text-align: left;">QueryAPI</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s80" style="text-indent: 0pt;text-align: left;">«delegate»</p><p style="text-indent: 0pt;text-align: left;"/><p class="s75" style="text-indent: 0pt;line-height: 7pt;text-align: left;">ClientAPI</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s74" style="padding-left: 18pt;text-indent: 0pt;text-align: center;">Write</p><p style="text-indent: 0pt;text-align: left;"/><h4 style="padding-top: 5pt;padding-left: 65pt;text-indent: 0pt;text-align: left;">Fig. 54. <span class="s7">Component diagram for ICDE API architecture</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;">This shows the interfaces and dependencies of each component, namely:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></ol></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;"><b>ICDE Third Party Tool</b>: This uses the <i>ICDE API Client </i>component in- terface. The API interface supports the services needed for the third party tool to query the data store, write new data to the data store, and to subscribe to events that are published by the JMS. It must provide a callback interface that the <i>ICDE API Client </i>uses to deliver published events.</p></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">ICDE API Client: <span class="p">This implements the client portion of the API. It takes requests from third party tools, and translates these to EJB calls to the API server components that either read or write data from/to the data store. It also packages the results from the EJB and returns these to the third party tool. This component encapsulates all knowledge of the use</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 26pt;text-indent: 0pt;text-align: justify;">of J2EE, insulating the third party tools from the additional complexity (locating, exceptions, large data sets) of interacting with an application server. Also, when a third party tool requests an event subscription, the <i>ICDE API Client </i>issues the subscription request to the JMS. It therefore becomes the JMS client that receives published events, and it passes these on using a callback supported by the third party tools.</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;"><b>ICDE API Services: </b>The API services component comprises stateless session EJBs for accessing the <i>ICDE Data Store </i>using JDBC. The <i>Write </i>component also takes a topic parameter value from the client request and publishes data about the event on the named topic using the JMS.</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: left;"><h3 style="display: inline;">ICDE Data Store: <span class="p">This is the ICDE v2.0 database.</span></h3><p style="text-indent: 0pt;text-align: left;"><span><img width="412" height="321" alt="image" src="Image_190.png"/></span></p><p class="s80" style="text-indent: 0pt;line-height: 7pt;text-align: left;">publish</p><p style="text-indent: 0pt;text-align: left;"/><p class="s80" style="text-indent: 0pt;line-height: 7pt;text-align: left;">«delegate»</p><p style="text-indent: 0pt;text-align: left;"/><p class="s75" style="text-indent: 0pt;line-height: 7pt;text-align: left;">Subscribe</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s74" style="padding-left: 11pt;text-indent: 0pt;text-align: left;">WriteEvent</p><p style="text-indent: 0pt;text-align: left;"/></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">JMS: <span class="p">This is a standard J2EE Java Messaging Service, and supports a range of topics used for event notification using the JMS publish- subscribe interfaces.</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s74" style="text-indent: 0pt;line-height: 7pt;text-align: left;">cd Data Collection View</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s74" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">ICDE API Client</p><p class="s75" style="padding-top: 4pt;padding-left: 35pt;text-indent: 0pt;text-align: left;">Subscribe</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s75" style="padding-left: 77pt;text-indent: 0pt;text-align: left;">NotificationCallback</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s74" style="padding-left: 8pt;text-indent: 8pt;text-align: left;">ICDE Data Collection Client</p><p style="padding-left: 19pt;text-indent: 0pt;text-align: left;">	</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s75" style="text-indent: 0pt;line-height: 7pt;text-align: left;">CollectionAPI</p><p style="padding-left: 263pt;text-indent: 0pt;line-height: 7pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s75" style="text-indent: 0pt;line-height: 7pt;text-align: left;">PublishEvent</p><p class="s74" style="text-indent: 0pt;text-align: left;">Data Collection Services <span class="s81">«delegate»</span></p><p style="padding-left: 119pt;text-indent: 0pt;text-align: left;">	</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s74" style="padding-left: 18pt;text-indent: -6pt;text-align: left;">ICDE Data Store</p><p style="padding-left: 250pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s80" style="text-indent: 0pt;line-height: 7pt;text-align: left;">«delegate»</p><p style="text-indent: 0pt;text-align: left;"/><p class="s75" style="text-indent: 0pt;line-height: 7pt;text-align: left;">JDBC</p><p style="text-indent: 0pt;text-align: left;"/><p class="s75" style="text-indent: 0pt;line-height: 7pt;text-align: center;">Publish</p><p class="s74" style="padding-left: 6pt;text-indent: 0pt;line-height: 7pt;text-align: center;">JMS</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s74" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">EventPublisher</p><p style="text-indent: 0pt;text-align: left;"/><h4 style="padding-left: 103pt;text-indent: 0pt;text-align: left;">Fig. 55. <span class="s7">Data collection components</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: left;">A component diagram for the data collection functionality is depicted in Fig. 55. The responsibilities of the components are:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 6pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;"><b>ICDE Data Collection Client</b>: This is part of the ICDE client applica- tion environment. It receives event data from the client application, and calls the necessary method in the <i>CollectionAPI </i>to store that event. It encapsulates all knowledge of interacting with the J2EE application server in the ICDE client application.</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;"><b>Data Collection Services: </b>This comprises stateless session EJBs that write the event data passed to them as parameters to the <i>ICDE Data Store</i>. Some event types also cause an event notification to be passed to the <i>EventPublisher</i>.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="412" height="411" alt="image" src="Image_191.png"/></span></p><p class="s67" style="text-indent: 0pt;text-align: center;">ICDE User</p><p class="s82" style="padding-top: 3pt;text-indent: 0pt;text-align: center;">(from Component Model)</p><p style="text-indent: 0pt;text-align: left;"/><p class="s67" style="padding-left: 30pt;text-indent: 0pt;text-align: left;">ICDE User PC</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s67" style="padding-top: 4pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Component Model:</p><p class="s67" style="padding-left: 27pt;text-indent: 7pt;line-height: 110%;text-align: left;">:ICDE Data Collection Client</p><p style="text-indent: 0pt;text-align: left;"/><p class="s67" style="padding-left: 60pt;text-indent: 0pt;text-align: center;">ICDE Tool</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s70" style="padding-left: 60pt;text-indent: 0pt;text-align: center;">Java</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s67" style="padding-left: 7pt;text-indent: -1pt;line-height: 110%;text-align: center;">Component Model::ICDE 3rd Party Tool</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s67" style="padding-left: 2pt;text-indent: 0pt;line-height: 110%;text-align: center;">Component Model:: ICDE API</p><p class="s67" style="padding-left: 10pt;text-indent: 0pt;text-align: center;">Client</p><p style="text-indent: 0pt;text-align: left;"/></li><li style="padding-top: 1pt;padding-bottom: 2pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;"><b>EventPublisher: </b>This publishes event data on the JMS using a set of pre-configured topics for events that should be published (not all user generated events are published, e.g. moving the mouse). These events are delivered to any <i>ICDE API Client </i>components that have subscribed to the event type.</p><p class="s67" style="text-indent: 0pt;text-align: left;">dd Deployment View</p><p style="padding-left: 19pt;text-indent: 0pt;line-height: 7pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s70" style="text-indent: 0pt;text-align: left;">RMI</p><p class="s70" style="text-indent: 0pt;text-align: left;">JMS</p><p class="s70" style="text-indent: 0pt;text-align: left;">RMI</p><p style="padding-left: 113pt;text-indent: 0pt;text-align: left;">		</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s67" style="padding-left: 96pt;text-indent: 0pt;text-align: center;">J2EE Server</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s67" style="padding-left: 15pt;text-indent: 1pt;line-height: 110%;text-align: justify;">Component Model::ICDE API Services</p><p style="padding-left: 68pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s70" style="text-indent: 0pt;text-align: left;">JDBC</p><p class="s70" style="text-indent: 0pt;text-align: left;">JDBC</p><p style="padding-left: 132pt;text-indent: 0pt;text-align: left;">	</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s67" style="padding-top: 4pt;padding-left: 8pt;text-indent: 0pt;text-align: left;">SQL Server</p><p style="padding-left: 159pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s67" style="padding-left: 11pt;text-indent: 0pt;line-height: 111%;text-align: center;">Component Model::Data Collection Services</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s67" style="padding-left: 10pt;text-indent: 0pt;line-height: 110%;text-align: left;">Component Model::JMS</p><p style="text-indent: 0pt;text-align: left;"/><h4 style="padding-left: 103pt;text-indent: 0pt;text-align: left;">Fig. 56. <span class="s7">ICDE deployment diagram</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 10pt;text-align: justify;">A deployment diagram for the ICDE architecture is shown in Fig. 56. It shows how the various components are allocated to nodes. Only a single ICDE user and a single third party tool are shown, but the J2EE server can support multiple clients of either type. Issues to note are:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Although the third party tools are shown executing on a different node to the ICDE user workstation, this is not necessarily the case. Tools, or specific components of tools, may be deployed on the user workstation. This is a tool-dependent configuration decision.</p></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">There is one <i>ICDE API Client </i>component for every third party tool in- stance. This component is built as a JAR file that is included in the tool build.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l224"><ol id="l225"><ol id="l226"><li style="padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a146">Behavioral Views</a></p><p style="text-indent: 0pt;text-align: left;"><span><img width="413" height="289" alt="image" src="Image_192.png"/></span></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">A sequence diagram for a query event API call is shown in Fig. 57. The API provides an explicit “Initialize” call which tools must invoke. This causes the <i>ICDE API Client </i>to establish references to the EJB stateless session beans using the J2EE directory service (JNDI).</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s67" style="text-indent: 0pt;text-align: left;">sd API Call Sequence Diagram</p><p style="padding-left: 18pt;text-indent: 0pt;line-height: 7pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s67" style="padding-left: 4pt;text-indent: 0pt;line-height: 107%;text-align: center;">Component Model::ICDE 3rd Party Tool</p><p class="s67" style="text-indent: 4pt;line-height: 108%;text-align: left;">Component Model::ICDE API</p><p class="s67" style="padding-left: 12pt;text-indent: 0pt;text-align: left;">Client <span class="s83">JNDI</span></p><p class="s67" style="text-indent: 4pt;line-height: 108%;text-align: left;">Component Model::ICDE API</p><p class="s67" style="padding-left: 8pt;text-indent: 0pt;line-height: 6pt;text-align: left;">Services</p><p class="s67" style="padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: center;">Component Model::ICDE Data Store</p><p style="padding-left: 25pt;text-indent: 0pt;text-align: left;">			</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s70" style="text-indent: 0pt;text-align: left;">Initialize</p><p style="padding-left: 78pt;text-indent: 0pt;line-height: 7pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s70" style="text-indent: 0pt;text-align: left;">Lookup</p><p style="padding-left: 138pt;text-indent: 0pt;line-height: 7pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s70" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Query API call</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s67" style="text-indent: 0pt;text-align: left;">loop More data</p><p class="s70" style="text-indent: 0pt;line-height: 9pt;text-align: left;">[while moreData] [More data to retrieve]</p><p class="s70" style="text-indent: 0pt;text-align: left;">resultSet:= EJB API call</p><p style="padding-left: 66pt;text-indent: 0pt;text-align: left;">	</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s70" style="text-indent: 0pt;text-align: left;">JDBC Query</p><p style="padding-left: 244pt;text-indent: 0pt;line-height: 7pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 91pt;text-indent: 0pt;text-align: left;">Fig. 57. <span class="s7">Query API call sequence diagram</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">Once the API layer is initialized, the third party tool calls one of the available query APIs to retrieve event data (perhaps a list of keys pressed while using the word processor application on a particular file). This re- quest is passed on to an EJB instance that implements the query, and it is- sues the JDBC call to get the events that satisfy the query.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">All the ICDE APIs that return collections of events may potentially re- trieve large result sets from the database. This creates the potential for re- source exhaustion in the J2EE server, especially if multiple queries return large event collections simultaneously.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">To alleviate this potential performance and reliability problem, the de- sign employs:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></ol></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Stateless session beans that release the resources used by a query at the end of every call</p></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">A variation of the page-by-page iterator pattern<span class="s14">32 </span>to limit the amount of data each call to the session bean retrieves</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The <i>ICDE API Client </i>passes the parameter values necessary for con- structing the JDBC query, along with a <i>start index </i>and <i>page size </i>value. The page size value tells the session bean the maximum number of ob- jects<span class="s14">33 </span>to return from a single query invocation, and for the initial query call, the start index is set to NULL.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The JDBC call issued by the session bean exploits SQL features to re- turn only the first <i>page size </i>rows that satisfy the query criteria. For exam- ple in SQL Server, the TOP operator can be used as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-left: 25pt;text-indent: 0pt;text-align: left;">SELECT TOP (PAGESIZE) * FROM KEYBOARDEVENTS WHERE (EVENTID</p><p class="s37" style="padding-top: 1pt;padding-left: 25pt;text-indent: 0pt;text-align: left;">&gt; 0 AND USER = “IAN” AND APP_ID = “FIREFOX”)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The result set retrieved by the query is returned from the session bean to the client. If the result set has <i>page size </i>elements, the <i>ICDE API Client </i>calls the EJB query method again, using the key of the last element of the returned result set as the <i>start index </i>parameter. This causes the session bean to re-issue the same JDBC call, except with the modified <i>start index </i>value used. This retrieves the next <i>page size </i>rows (maximum) that satisfy the query.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The <i>ICDE API Client </i>continues to loop until all the rows that satisfy the request are retrieved. It then returns the aggregated event collection to its</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_193.png"/></span></p><p style="padding-top: 4pt;padding-left: 14pt;text-indent: 0pt;text-align: left;"><a href="http://java.sun.com/developer/technicalArticles/J2EE/J2EEpatterns/" style=" color: black; font-family:&quot;Times New Roman&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 3pt;" target="_blank">32 </a><a href="http://java.sun.com/developer/technicalArticles/J2EE/J2EEpatterns/" target="_blank">http://java.sun.com/developer/technicalArticles/J2EE/J2EEpatterns/</a></p><p class="s14" style="padding-left: 25pt;text-indent: -10pt;text-align: left;">33 <span class="s7">The ‘page size’ value can be tuned for each type of event to attempt to maxi- mize server and network performance. A typical value is 1000.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="413" height="207" alt="image" src="Image_194.png"/></span></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">caller (the third party tool). Hence this scheme hides the complexity of re- trieving potentially large result sets from the ICDE application program- mer.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s67" style="text-indent: 0pt;text-align: left;">sd Write API Call</p><p class="s67" style="padding-top: 6pt;padding-left: 10pt;text-indent: 0pt;line-height: 109%;text-align: center;">Component Model::ICDE 3rd Party Tool</p><p class="s67" style="text-indent: 0pt;line-height: 110%;text-align: center;">Component Model::ICDE API</p><p class="s67" style="text-indent: 0pt;line-height: 6pt;text-align: center;">Client</p><p class="s67" style="padding-left: 7pt;text-indent: 1pt;line-height: 110%;text-align: left;">Component Model::Write</p><p class="s67" style="padding-left: 2pt;text-indent: 0pt;line-height: 109%;text-align: center;">Component Model::ICDE Data Store</p><p class="s67" style="padding-left: 8pt;text-indent: 0pt;line-height: 110%;text-align: left;">Component Model::JMS</p><p style="padding-left: 18pt;text-indent: 0pt;text-align: left;">				</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s70" style="text-indent: 0pt;text-align: left;">writeData</p><p style="padding-left: 66pt;text-indent: 0pt;line-height: 7pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s70" style="text-indent: 0pt;text-align: left;">writeData</p><p style="padding-left: 129pt;text-indent: 0pt;line-height: 7pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s70" style="text-indent: 0pt;text-align: left;">JDBC</p><p class="s70" style="text-indent: 0pt;text-align: left;">insert</p><p style="padding-left: 188pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s70" style="text-indent: 0pt;text-align: left;">publishEvent</p><p style="padding-left: 219pt;text-indent: 0pt;line-height: 7pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 87pt;text-indent: 0pt;text-align: left;">Fig. 58. <span class="s7">Sequence diagram for the write API</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">A sequence diagram depicting the behavior of a <i>write </i>API call is shown in Fig. 58. The write API call contains parameter values that allow the <i>ICDE API Client </i>to specify whether an event should be published after a successful write, and if so, on which topic the event should be published.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">A sequence diagram for storing an ICDE user-generated event is shown in Fig. 59. An event type may require multiple JDBC INSERT statements to be executed to store the event data; hence the container transaction ser- vices should be used. After the event data is successfully stored in the da- tabase, if it is a publishable event type, the event data is published using the JMS. The JMS publish operation is outside the transaction boundary to avoid the overheads of a two-phase commit.<span class="s14">34</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_195.png"/></span></p><p class="s14" style="padding-top: 4pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;">34 <span class="s7">There’s a performance trade-off here. As the JMS publish operation is outside the transaction boundary, there can be failures that result in data being inserted into the data store, but with no associated JMS message being sent. In the ICDE context, this is undesirable, but will not cause serious problems for client appli- cations. Given the likely frequency of such failures happening (i.e. not very of- ten), this is a trade-off that is sensible for this application.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s67" style="text-indent: 0pt;text-align: left;">sd Collection API call</p><p style="padding-left: 18pt;text-indent: 0pt;line-height: 7pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s67" style="text-indent: 0pt;text-align: left;">alt PublishEvent</p><p class="s70" style="padding-top: 2pt;text-indent: 0pt;text-align: left;">[if event is configured to be published]</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s70" style="padding-left: 61pt;text-indent: 0pt;text-align: left;">publish(eventTopic)</p><p style="padding-left: 114pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="412" height="254" alt="image" src="Image_196.png"/></span></p><p class="s70" style="padding-left: 37pt;text-indent: 8pt;line-height: 110%;text-align: left;">Java Transaction</p><p class="s70" style="padding-left: 43pt;text-indent: 0pt;line-height: 6pt;text-align: left;">Service</p><p class="s70" style="padding-top: 2pt;padding-left: 2pt;text-indent: 61pt;line-height: 110%;text-align: left;">There may be beginTransaction multiple JDBC calls</p><p class="s70" style="padding-left: 63pt;text-indent: 0pt;text-align: left;">for 1 event.</p><p class="s70" style="padding-top: 5pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">JDBC</p><p class="s70" style="text-indent: 41pt;text-align: left;">Insert commitTransaction</p><p style="text-indent: 0pt;text-align: left;"/><p class="s70" style="text-indent: 0pt;text-align: left;">storeEvent</p><p style="text-indent: 0pt;text-align: left;"/><p class="s67" style="text-indent: 0pt;line-height: 109%;text-align: center;">Component Model::Data Collection Services</p><p style="text-indent: 0pt;text-align: left;"/><p class="s67" style="padding-left: 9pt;text-indent: 0pt;line-height: 110%;text-align: left;">Component Model::JMS</p><p style="text-indent: 0pt;text-align: left;"/><p class="s67" style="padding-left: 1pt;text-indent: 0pt;line-height: 109%;text-align: center;">Component Model::ICDE Data Store</p><p style="text-indent: 0pt;text-align: left;"/><p class="s67" style="padding-left: 2pt;text-indent: 6pt;line-height: 109%;text-align: left;">Component Model::ICDE Data Collection Client</p><p style="text-indent: 0pt;text-align: left;"/><h4 style="padding-top: 5pt;padding-left: 57pt;text-indent: 0pt;text-align: left;">Fig. 59. <span class="s7">Sequence diagram for storing user generated events</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l227"><ol id="l228"><ol id="l229"><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a147">Implementation Issues</a></p></li></ol></ol></ol><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">The Java 2 Enterprise Edition platform has been selected to implement the ICDE v2.0 system. Java is platform neutral, satisfying the requirement for platform heterogeneity. There are also quality open source versions avail- able for low-cost deployment, as well as high performance commercial versions for larger mission-critical sites. In addition, J2EE has inherent support for distributed component-based systems, publish-subscribe event notification and database access.</p><p style="padding-left: 25pt;text-indent: 0pt;text-align: left;">Additional implementation issues to consider are:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;"><b>Threading: </b>The <i>ICDE API Client </i>component should be thread-safe. This will enable tool developers to safely spawn multiple application threads and issue concurrent API calls.</p></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;"><b>Security: </b>ICDE tools authenticate with a user name and password. The API supports a <i>login </i>function, which validates the user/password com- bination against the credentials in the ICDE data store, and allows ac- cess to a specified set of ICDE user data. This is the same mechanism used in v1.0.</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;"><b>EJBs: </b>The <i>Data Collection Services </i>session beans issue direct JDBC calls to access the database. This is because the JDBC calls already exist</p><p class="s7" style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 200pt;text-indent: 0pt;text-align: left;">7.5 Architecture Analysis 147</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_197.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;">in the two-tier ICDE v1.0, and hence using these directly in the EJBs makes the refactoring exercise less costly.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l230"><ol id="l231"><li style="padding-top: 10pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a148">Architecture Analysis</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: left;">The following sections provide an analysis of the ICDE architecture in terms of scenarios and risks.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l232"><li style="padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a149">Scenario Analysis</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">The following scenarios are considered:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></li></ol></ol></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Modify ICDE Data Store organization: <span class="p">Changes to the database or- ganization will necessitate code changes in the EJB server-side compo- nents. Structural changes that do not add new data attributes are con- tained totally within these components and do not propagate to the ICDE API. Modifications that add new data items will require interface changes in server-side components, and this will be reflected in the API. Interface versioning and method deprecation can be used to control how these interface changes affect client components.</span></h3></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Move the ICDE architecture to another J2EE supplier: <span class="p">As long as the ICDE application is coded to the J2EE standards, and doesn&#39;t use any vendors extension classes, industry experience shows that J2EE ap- plications are portable from one application server to another with small amounts of effort (e.g. less than a week). Difficulties are usually en- countered in the areas of product configuration and application-server specific deployment descriptor options.</span></h3></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;"><b>Scale a deployment to 150 users: </b>This will require careful capacity planning<span class="s14">35</span><span class="s34"> </span>based on the specification of the available hardware and net- works. The J2EE server tier can be replicated and clustered easily due to the use of stateless session beans. It is likely that a powerful database server will be needed for 150 users. It should also be feasible to partition the ICDE data store across two physical databases.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_198.png"/></span></p><p class="s14" style="padding-top: 4pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;">35 <span class="s7">Capacity planning involves figuring out how much hardware and software is needed to support a specific ICDE installation, based on the number of concur- rent users, network speeds and available hardware.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l233"><ol id="l234"><ol id="l235"><li style="padding-top: 5pt;padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a150">Risks</a></p><p style="padding-top: 9pt;padding-left: 25pt;text-indent: 0pt;text-align: left;">The following risks should be addressed as the ICDE project progresses.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:21.674pt" cellspacing="0"><tr style="height:11pt"><td style="width:133pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 56pt;padding-right: 55pt;text-indent: 0pt;line-height: 9pt;text-align: center;">Risk</p></td><td style="width:167pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 44pt;text-indent: 0pt;line-height: 9pt;text-align: left;">Mitigation Strategy</p></td></tr><tr style="height:65pt"><td style="width:133pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;text-align: left;">Capacity planning for a large site will be complex and costly.</p></td><td style="width:167pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;padding-right: 3pt;text-indent: 0pt;text-align: left;">We will carry out performance and load testing once the basic application server environment is in place. This will pro- vide concrete performance figures that can guide capacity planning for ICDE</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">sites.</p></td></tr><tr style="height:54pt"><td style="width:133pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 106%;text-align: left;">The API will not meet emerging third party tool supplier needs.</p></td><td style="width:167pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;padding-right: 14pt;text-indent: 0pt;text-align: justify;">The API will be released as soon as an initial version is complete for tool ven- dors to gain experience with. This will allow us to obtain early feedback and</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: justify;">adapt/extend the design if/when needed.</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><h2 style="padding-top: 10pt;padding-left: 14pt;text-indent: 0pt;text-align: left;"><a name="a151">7.6 Summary</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">This chapter has described and documented some of the design decisions taken in the ICDE application. The aim has been to convey the thinking and analysis that is necessary to design such an architecture, and demon- strate the level of design documentation that should suffice in many pro- jects.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Note that some of the finer details of the design are necessarily glossed over due to the space constraints of this forum. But the ICDE example is representative of a medium complexity application, and hence provides an excellent exemplar of the work of a software architect.</p></li></ol></ol><li style="padding-top: 4pt;padding-left: 28pt;text-indent: -13pt;text-align: left;"><h1 style="display: inline;"><a name="a152">Looking Forward</a></h1></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">The world of software technology is a fast moving and ever changing place. As our software engineering knowledge, methods and tools im- prove, so does our ability to tackle and solve more and more complex problems. This means we create “bigger and better” applications, while still stressing the limits of our ever-improving software engineering skills. Not surprisingly, many in the industry feel like they are standing still. They don’t seem to be benefiting from the promised quality and productiv- ity gains of improved development approaches. I suspect that’s destined to be life for all of us in the software industry for at least the foreseeable fu- ture.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l236"><ol id="l237"><li style="padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a153">The Challenges of Complexity</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">It’s worth dwelling for a moment to consider what might be some of the major challenges for IT system builders in the next few years. It’s probably pretty uncontroversial to state the inevitability that business applications will continue to become more and more complex. Complexity is a multi- dimensional attribute though. Which aspects of complexity exactly are most likely to influence the way we design and build the next generation of IT applications?</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: left;">From a business perspective, it seems highly likely that the following will be drivers for much of what the IT profession does in the next decade:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Enterprises will insist their IT infrastructure supports increasingly com- plex business processes that increase their organizational efficiency and reduce their cost of business.</p></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">For many enterprises, the rate of change in their business environment will require their IT systems to be easily and quickly adaptable. Agility in the way an enterprise responds to their business needs will impact on their bottom line.</p></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Enterprises always want increased benefit from IT and to simultane- ously reduce their IT costs. Too many enterprises have seen massive</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 25pt;text-indent: 0pt;text-align: justify;">waste on unsuccessful IT systems. As a consequence, they now need se- riously convincing of the necessity to heavily invest in IT, and will in- sist that their IT department continually “do more with less”.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Let’s discuss each of these and see what implications they may have, especially from an IT architect’s perspective.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l238"><ol id="l239"><ol id="l240"><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a154">Business Process Complexity</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">In large enterprises, high value business processes inevitably span multi- ple, independent business applications, all operating in a highly heteroge- neous IT infrastructure. In such environments, the tools and technologies for business process definition and enactment become of critical impor- tance. In practical terms, this means business process orchestration tech- nologies are likely to become commodity, mission critical components in many enterprises.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Today’s business process orchestration tools are proven and effective, and the mature ones are increasingly able to support high requests loads and to scale. But there are some fundamental problems that currently lie outside their capabilities. Probably the key need is moving from “static” to “dynamic” processes. What does this mean exactly?</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">A highly attractive aim for business processes is dynamic composition. For example, an organization may have a stock purchasing business proc- ess defined for purchasing from suppliers. Unexpectedly, one supplier goes out of business, or another raises prices above the threshold the organiza- tion wants to pay. With current technologies, it’s likely that the business process will have to be manually modified to communicate with a new supplier. This is costly and slow.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Ideally, a business process would be able to “automagically” reconfig- ure itself, following a set of business rules to connect to a new supplier and reestablish a purchasing relationship. This would all happen in a few sec- onds, alleviating the need for programmer involvement.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">This kind of dynamic business process evolution isn’t too hard as long as the environment is highly constrained. If there is a fixed, known set of potential partners, each with known (ideally the same) interfaces, then business processes can be constructed to modify their behavior when cer- tain conditions occur (like a partner interface disappears). However, once these constraints are removed, the whole problem becomes exponentially more difficult.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">To start with, if potential business partners are not known in advance, the business process has to find a suitable new partner. This requires some</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">form of directory or registry, which can flexibly searched based on a num- ber of properties. That’s not too hard, and a search might yield one or more possibilities for the business process to connect to. Assuming more than one, how does the process decide which? How does it know which poten- tial partner will provide the process with the levels of service needed in terms of reliability and security? There has to be some mechanism for de- scribing provided service levels and establishing trust dynamically for all this to work.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Once a trusted partner has been selected based on the service levels they advertise, it’s next necessary to figure out exactly how to communicate with the partner. There’s no guarantee that every possible partner has the same interface and accepts and understands the same set of messages. It’s therefore necessary for the requesting business process to ensure that it sends requests in the correct format.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The killer problem here though is that an interface will typically only describe the format of the requests it receives and sends, and not the se- mantics of the data in the request. This means a message that tells you the price of an item may or may not be in US dollars. If it’s in Euros, and you’re expecting US dollars, then depending on exchange rates, you might be in for a shock or a pleasant surprise.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">In their general forms, these problems of discovery, trust and data se- mantics are pretty much unsolved. Efforts are underway to tackle the dis- covery and trust problems with Web services technologies, and the seman- tic problems with a collection of technologies known as the Semantic Web. These are described in chapters 12 and 13 respectively.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a155">Agility</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">Agility is a measure of how quickly an enterprise can adapt its existing ap- plications to support new business needs. If a business can get a new busi- ness service on-line before its competitors, it can start making money while the competition struggles to catch up.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">From a technical perspective, agility is very closely related to modifi- ability. If an enterprise’s architecture is loosely-coupled and application and technology dependencies are abstracted behind sensible interfaces, implementing new business processes might not be too onerous.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">One genuine barrier to agility is heterogeneity. An architecture might be beautifully designed, but if for example it suddenly becomes necessary to get a new .NET application talking to existing J2EE application using a JMS, then life can get painfully messy. In reality, the sheer number of in-</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">compatible technology combinations in an enterprise is usually not some- thing that is pleasurable to think about.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Finally however, a solution is on the horizon. Of course, heterogeneity is never going to go away. But it doesn’t have to if we can hide this diver- sity behind a standards-based integration architecture. XML Web services have emerged in the last five years as a set of technologies which are sup- ported by every major vendor. They define a standard protocol and mechanisms for plugging applications together, both within and across en- terprises. Chapter 12 describes the features of the Web services technology stack. While some of the elements of the standards are still evolving at the time of writing this, it’s a better than even bet that Web services are going to be in the IT world for the long haul.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Web services bring increased agility through standards-based integra- tion. But integration is not the only impediment to increasing an enter- prise’s ability to modify and deliver new applications. Improved develop- ment technologies that make change less difficult and costly can also greatly increase an enterprise’s agility. Two emerging approaches in this vein are aspect technologies and Model-Driven Architectures (MDA).</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Aspect technologies structure an application as a collection of inde- pendent but related “aspects” of a solution, and provide tools to merge these aspects at build or run-time. As aspects can be created, understood and modified independently, they enhance development agility.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">MDA, or model-driven development as it’s increasing known, promotes application development using abstract UML-based models of a solution. Executable code is generated from these models using MDA tools. MDA raises the abstraction level of the development process, in theory making changes easier to effect in the models rather than in detailed code. MDA code generation tools also hide detailed platform-specific knowledge from the application. If the underlying platform (e.g. MOM technology) changes, a code generator for the new platform is simply acquired. The application can then be automatically regenerated from the model to use the new platform. Now there’s agility for you! That’s the theory, anyway.</p><p style="padding-left: 25pt;text-indent: 0pt;text-align: left;">Aspects and MDA are described in Chap. 10 and Chap. 11 respectively.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a156">Reduced Costs</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">The heady days of the late 1990s “dot.com” boom and massive IT spends have gone, likely for a very long time. Now businesses rightly demand to know what business benefit their IT investments will bring, and what re- turn-on-investment they can expect. As an architect, writing business cases</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">for investments and acquisitions is a skill you’ll need to acquire, if you ha- ven’t already of course.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">In terms of reducing what we spend, while still achieving our business goals, the place to start is to begin by working smarter. As a whole, the IT industry has struggled to deliver on the promises of increased efficiency and lower costs from new development technology adoption. Object and component technologies were meant to make it easy for us to design and deliver reusable components that could be used in many applications. Build something once, and use it for essentially no cost, many times over. That’s a deal no one can possibly refuse, and one which is simple for man- agement to understand.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The truth is that the IT industry has pretty much failed to deliver on the reuse promise. Successful reuse tends to take place with large scale, infra- structural components like middleware and databases. Similarly, Enter- prise Resource Planning (ERP) systems like SAP and their like have man- aged to deliver generalized, customizable business processes to a wide spectrum of organizations. None of these have been without their difficul- ties of course. But think of how much of somebody else’s code (i.e. in- vestment) you’re using when you deploy an Oracle database or a J2EE ap- plication server. It’s significant indeed.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">But on a smaller scale, reusable components have pretty much failed to materialize. The reason for this is simple and well explained by much re- search in the software engineering community. The argument goes like this.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Essentially, it costs money to build software components so they can be used in a context which they were not originally designed for. You have to add more features to cater for more general use. You need to test all these features extensively. You need to document the features and create exam- ples of how to use the component. Studies indicate that it costs between three and ten times as much to produce quality reusable components.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Of course, all this investment may be worthwhile if the components are used over and over again. But what if they’re not? Well, basically you’ve just invested a lot of time and effort in generalizing a component for no purpose. That’s not smart.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Fortunately, some very smart architects thought about this problem a few years back. They realized that successful reuse didn’t just happen “by magic”, but it could be achieved if a product strategy was understood and planned out. Hence the term “product line architecture” was coined. These are explained in Chap 9. They represent a set of proven practices that can be adopted and tailored within an enterprise to leverage investments in software architectures and components. They represent the state-of-the art in working smart right now.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h2 style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: left;"><a name="a157">8.2 What Next?</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">The remaining chapters in this book each cover an emerging area of prac- tice or technology that is likely to have a profound effect on the future life of a software architect. These are:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></ol></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Software Product Lines</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Aspect-Oriented Programming</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Model-Driven Architectures (MDA)</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Service-Oriented Architectures and Web Services</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">The Semantic Web</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Agent technologies</p><p style="padding-top: 11pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">Some of these, like software product lines, have proven their utility in certain application domains like telecommunications and defense, while others are still in their relative infancy. All are likely to contribute in some manner to the way we design and build IT systems in ten years from now.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Each of the chapters that follow describes the fundamentals of each ap- proach, addresses the state-of-the-art, and speculates about future potential and adoption. They also describe how the techniques or technologies can be applied to the ICDE case study to provide enhanced features and func- tionality.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Hopefully these chapters will arm you with sufficient knowledge to at least seem intelligent and informed when a client or someone in your pro- ject catches you by surprise and suggests adopting one of these ap- proaches. In such circumstances, a little knowledge can go a long way.</p><ol id="l241"><li style="padding-top: 4pt;padding-left: 28pt;text-indent: -13pt;text-align: left;"><h1 style="display: inline;"><a name="a158">Software Product Lines</a></h1><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;">Mark Staples</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l242"><li style="padding-top: 7pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a159">Product Lines for ICDE</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">The ICDE system is a platform for capturing and disseminating informa- tion that can be used in different application domains. However, like any generically applicable horizontal technology, its broad appeal is both a strength and weakness. The weakness stems from the fact that a user or- ganization will need to tailor the technology to suit its application domain (e.g. finance), and make it easy for their users to learn and exploit. This takes time and money, and is hence a disincentive to adoption.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Recognizing this, the product development team decided to produce a tailored version of the ICDE platform for their three major application do- mains, namely financial analysis, intelligence analysis and government policy research. Each of the three would be marketed as different products, and contain specific components that make the base ICDE platform more user-friendly in the targeted application domain.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">To achieve this, the team brainstormed several strategies that they could employ to minimize the design and development effort of the three differ- ent products. The basic idea they settled on was to use the base ICDE plat- form unchanged in each of the three products. They would then create ad- ditional domain-specific components on top of the base platform, and build the resulting products by compiling the base platform with the domain- specific components. This basic architecture is depicted in Fig. 60.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">What the team had done was to take the first steps to creating a product line architecture for their ICDE technology. Product lines are a way of structuring and managing the on-going development of a collection of re- lated products in a highly efficient and cost-effective manner. Product lines achieve significant cost and effort reductions through large scale reuse of software product assets such as architectures, components, test cases and documentation.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">The ICDE product development team already benefits from software re- use in a few different ways. They reuse some generic libraries (like JDBC drivers to handle database access), and sometimes even reuse entire off the shelf applications (like the relational database in the ICDE data store). Market forces are driving the introduction of the three tailored versions of the ICDE product. But if the team developed each of these separately, it could triple their development or maintenance workload. Hence their plan is to reuse core components for the fundamental ICDE functionality and to create custom components for the functionality specific to each of the three product’s markets. This is a kind of software product line development, and it should significantly reduce their development and maintenance costs.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The remainder of this chapter overviews product line development and architectures, and describes a range of reuse and variation mechanisms that can be adopted for product line development.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">Gov - ICDE</p><p style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">Fin- ICDE</p><p style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">Intel - ICDE</p><p style="padding-left: 30pt;text-indent: 0pt;text-align: left;">		</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="316" height="144" alt="image" src="Image_199.png"/></span></p><p style="padding-top: 3pt;padding-left: 17pt;text-indent: 0pt;text-align: left;">ICDE</p><p style="padding-left: 17pt;text-indent: 0pt;text-align: left;">Platform</p><p style="text-indent: 0pt;text-align: left;"/><h4 style="padding-top: 5pt;padding-left: 235pt;text-indent: 0pt;text-align: left;">Key:</h4><p class="s6" style="padding-bottom: 2pt;padding-left: 235pt;text-indent: 0pt;line-height: 108%;text-align: left;">Domain-specific components</p><p style="padding-left: 239pt;text-indent: 0pt;text-align: left;"><span><img width="31" height="24" alt="image" src="Image_200.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 41pt;text-indent: 0pt;text-align: left;">Fig. 60. <span class="s7">Developing domain-specific products for the ICDE platform</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 8pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a160">Software Product Lines</a></h2></li></ol></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">Widespread software reuse is a “holy grail” for software engineering. It promises a harmonious world where developers can quickly assemble high-quality solutions from a suite of pre-existing software components. The quest for effective software reuse has in the past stereotypically fo- cused on “reuse in the small”, exploiting techniques to reuse individual functions, or libraries of functions for data-types and domain-independent</p><ol id="l243"><ol id="l244"><li style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 210pt;text-indent: -16pt;text-align: left;"><p class="s7" style="display: inline;">Software Product Lines 157</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_201.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">technologies. Collection class and mathematical function libraries are good examples. Such approaches are proven to be beneficial, but they have not realized the full promise of software reuse.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Reusing software is easy if you know it already does exactly what you want. But software that does ‘almost’ what you want is usually completely useless. To realize the full benefits of software reuse, we need to practice effective “software variation” as well. Modern approaches to software re- use, such as Software Product Line (SPL) development, support software variation “in the large”, with an architectural basis and a domain-specific focus. Software Product Line development has proved to be an effective way to benefit from software reuse and variation. It has allowed many or- ganizations to reduce development costs, reduce development duration, and increase product quality.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">In SPL development, a collection of related products is developed by combining reused core assets with product-specific custom assets that vary the functionality provided by the core assets. A simple conceptual example of a product line is shown in Fig. 61. In the picture, two different calcula- tor products are developed, with both using the same core asset internal boards. The different functionalities of the two calculator products are made available by each of their custom assets, including the two different kinds of buttons that provide the individualized interface to the generic, reused functionality.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="393" height="133" alt="image" src="Image_202.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="94" height="9" alt="image" src="Image_203.gif"/></span></p><h4 style="padding-top: 5pt;padding-left: 75pt;text-indent: 0pt;text-align: left;">Fig. 61<span class="s7">. A schematic view of a simple product line</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">From this simple perspective, SPL development is just like more tradi- tional hardware-based product line development, except that in SPL devel- opment, the products are of course software!<span class="s14">36</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_204.png"/></span></p><p class="s14" style="padding-top: 4pt;padding-left: 26pt;text-indent: -10pt;text-align: left;">36 <span class="s7">Product lines are also widely used in the embedded systems domain, where products are a software/hardware combination.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">For any product in a SPL, almost everything is implemented by reused core assets. These core assets implement base functionality which is uni- form across products in the SPL, as well as providing support for variable features which can be selected by individual products. Core asset variation points provide an interface to select from among this variable functional- ity. Product-specific custom assets instantiate the core assets’ variation points, and may also implement entire product-specific features.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Software variation has a number of roles in SPL development. The most obvious role is to support functional differences in the features of the SPL. Software variation can also be used to support non-functional differences (such as performance, scalability, or security) in features of the SPL. An- other less recognized role for software variation is to help resolve change control conflicts on core assets.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">SPL development is not simply a matter of architecture, design, and programming. SPL development impacts existing processes across the software development lifecycle, and requires new dimensions of process capability for the management of reused assets, products, and the over- arching SPL itself. The Software Engineering Institute has published Product Line Practice guidelines (see Further Reading at the end of the chapter) for these processes and activities that support SPL development. We will refer to these practice areas later within this chapter.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a161">Benefiting from SPL Development</a></h2></li></ol></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">When an organization develops a set of products that share many com- monalities, a SPL becomes a good approach. Typically an organization’s SPL addresses a broad market area, and each product in the SPL targets a specific market segment. Some organizations also use an SPL to develop and maintain variants of a standard product for each of their individual customers.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The scope of a product line is the range of possible variation supported by the core assets in a SPL. The actual products in a SPL will normally be within the SPL scope, but custom assets provide the possibility for devel- oping functionality beyond the normal scope of the SPL. To maximize the benefit from SPL development, the SPL scope should closely match both the markets of interest to the company (to allow new products within those markets to be developed quickly and efficiently), and also the full range of functionality required by the actual products developed by the company. These three different categories of product (the company’s markets of in-</p><p class="s7" style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 150pt;text-indent: 0pt;text-align: left;">9.3 Benefiting from SPL Development 159</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_205.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;">terest, the SPL scope, and the actual products developed by the company) are depicted in a Venn diagram in <span class="s7">Fig. 62</span>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: left;"><span><img width="393" height="181" alt="image" src="Image_206.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 121pt;text-indent: 0pt;text-align: left;">Fig. 62. <span class="s7">The scope of an SPL</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The most obvious benefit from SPL development is increased produc- tivity. The costs of developing and maintaining core assets are not borne by each product separately, but are instead spread across all products in the SPL. Organizations can capture these economies of scale to benefit from the development of large numbers of products. The SPL approach scales well with growth, as the marginal cost of adding a new product should be small.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">However, SPL development also has other significant benefits. When the core assets in an SPL are well established, the time required to create a new product in the SPL is much smaller than with traditional development. Instead of having to wait for the redevelopment of functionality in the core assets, customers need only wait for the development of functionality that is unique to their needs.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Organizations can also experience product quality benefits from SPL development. In traditional product development, a defect might be re- peated across many products, but in SPL development, a defect in a core asset only needs to be fixed once. Moreover, although the defect might be initially found in the use of only one product, every product in the SPL will benefit from the defect fix. These factors allow more rapid improve- ments to product quality in SPL development.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">There are additional second-order benefits to SPL development. For ex- ample, SPL development provides organizations with a clear path enabling them to turn customized project work for specific customers into product line features reused throughout the SPL. When organizations have proc-</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">esses in place to managed reused assets, the development of customer- specific project work can initially be managed in a custom asset. If the fea- tures prove to have wider significance, the custom asset can be moved into the reused core asset base.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Another related benefit is that the management of core and custom as- sets provides a clear and simple view of the range of products maintained by the organization. This view enables organizations to more easily:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">upgrade products to use a new core version;</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">see what assets are core for the business;</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">see how products differ from each other;</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">consider options for future functionality for the SPL.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 14pt;text-indent: 0pt;text-align: justify;"><a name="a162">9.3.1 Product Lines for ICDE</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">The three planned ICDE products all operate in a similar way and the dif- ferences for each of the products are fairly well understood. The Govern- ment product will have a user interface that supports policy and govern- ance checklists, the Financial product will support continually-updated displays of live market information, and the Intelligence product will inte- grate views of data from various sources of classified data.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The variation required in the product line can be defined largely in terms of the data collection components. The GUI options and the access to do- main specific data sources will have to be supported by variation points in the collection components. This means the <i>Data Collection </i>client compo- nent will need variation points in order to support access to application domain-specific data sources. This will require custom components to handle the specific details of each of the new govern- ment/financial/intelligence data sources. The <i>Data Store </i>component should not need to support any variation for the three different products. It should be able to be reused as a simple core asset.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h2 style="padding-left: 14pt;text-indent: 0pt;text-align: justify;"><a name="a163">9.4 Product Line Architecture</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">SPL development is usually described as making use of a Product Line Architecture (PLA). A PLA is a reuse-oriented architecture for the core as- sets in the SPL. The reuse and variation goals of a PLA are to:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">systematically support a pre-planned scope of variant functionality</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 6pt;padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">allow products within the SPL to easily choose options from among that variant functionality.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">A PLA achieves these goals using a variety of technical mechanisms for reuse and variation that are described in the following sections.</p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;">Jan Bosch<span class="s14">37 </span>has identified three levels of PLA maturity:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l245"><li style="padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Under-specified architecture (ad-hoc variation)</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Specified architecture</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Enforced architecture (all required variation supported by planned archi- tectural variation points)</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Increasing levels of architectural maturity provide more benefits from systematic variation by making product development faster and cheaper. However, increasingly mature PLAs provide fewer opportunities for ad- hoc variation, which can reduce opportunities for reuse. Nonetheless, in- creasing levels of reuse can be achieved if there is better systematic varia- tion, that is, better adaptation of the PLA to the scope and application do- main of the SPL.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">A PLA is not always necessary for successful SPL development. The least mature of Bosch’s maturity levels is “under-specified architecture”, and experiences have been reported of the adoption of SPL development with an extremely under-specified PLA. Although products in an SPL will always have some sort of architecture, it does not necessarily have to be a PLA, namely one designed to support goals of reuse and variation. Some non-architectural mechanisms to achieve reuse and variation are discussed in the following sections.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 15pt;text-indent: 0pt;text-align: left;"><a name="a164">9.4.1 Reuse Mechanisms</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">To reuse software, developers must:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l246"><li style="padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">find and understand the software,</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">make the software available for use by incorporating it into their devel- opment context, and</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">use the software by invoking it.</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_207.png"/></span></p><p class="s7" style="padding-top: 4pt;padding-left: 22pt;text-indent: -6pt;text-align: justify;"><span class="s14">37 </span>J. Bosch, <i>Maturity and Evolution in Software Product Lines</i>. In Proceedings of the Second International Software Product Line Conference (San Diego, CA, U.S.A., August 19-22 2002). Springer LNCS Vol. 2379, 2002, pp. 257-271.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">Let’s look at each of these steps in turn.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l247"><ol id="l248"><ol id="l249"><ol id="l250"><li style="padding-left: 55pt;text-indent: -40pt;text-align: left;"><p class="s41" style="display: inline;">Find and Understand Software</p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">Software engineers use API documentation and reference manuals to sup- port the simple reuse of software libraries. For SPL development, the Product Line Practice guidelines from the SEI (see Further Reading) de- scribe the <i>Product Parts Pattern </i>which addresses the discovery and under- standing of core asset software for SPL development. This pattern relies on the documentation of procedures to use and instantiate core assets in the construction of products.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 55pt;text-indent: -40pt;text-align: left;"><p class="s41" style="display: inline;">Bring Software into the Development Context</p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">After finding the software, a developer has to make it available to be used. There are many ways to bring software into a development context, which can be categorized according to their “binding time”. This is the time at which the names of reused software assets are bound to a specific imple- mentation. The main binding times and some example mechanisms are:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></ol></ol></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Programming time – by version control of source code</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Build time – by version control of static libraries</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Link time – by operating system or virtual machine support for dynamic libraries</p></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Run time – by middleware or application-specific mechanisms for con- figuration or dynamic plug-ins, and by programming language mecha- nisms for reflection</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">Earlier binding times (such as programming or build time) make it easier to use ad-hoc variation. Later binding times (such as link or run time) de- lay commitment to specific variants, and so make it easier to benefit from the options provided by systematic variation. Increasingly mature PLAs for SPL development tend to use later binding time mechanisms. This en- ables them to maximize the benefits from an SPL scope that is well under- stood and has a good fit with the company’s markets of interest.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l251"><ol id="l252"><ol id="l253"><ol id="l254"><li style="padding-left: 55pt;text-indent: -40pt;text-align: left;"><p class="s41" style="display: inline;">Invoke Software</p></li></ol></ol></ol></ol><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">To invoke software, programming languages provide proce- dure/function/method call mechanisms. For distributed systems, interop- eration standards such as CORBA and SOAP provide remote invocation mechanisms that are tied into programming language mechanisms, to al- low developers to invoke software systems running on other machines. These invocation mechanisms are the same for SPL development as for traditional software development.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l255"><ol id="l256"><ol id="l257"><li style="padding-top: 5pt;padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a165">SCM for Reuse</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">For organizations that are adopting SPL development, the most common binding times for reuse are programming time and build time. This makes software configuration management (SCM) a critical supporting process area for SPL development. SCM includes version control and change con- trol for software assets.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">SCM for SPL development is more complicated than in normal product development partly because configuration identification (CI) is more com- plicated. CI is the SCM activity of specifying the names, attributes, and re- lationships between configurations (a versioned collection of versioned ob- jects). In normal product development, a product’s configuration usually has a simple structure (e.g. a single versioned binary or versioned file sys- tem directory hierarchy). However in SPL development, each core asset, custom asset, and product is a configuration that must be identified and the relationships between these configurations must be specified and managed. Basically, SCM gets much more architectural for SPL development.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">One approach to SCM for SPL development is depicted in Fig. 63. In this approach, core assets and products each have their own line of devel- opment (LOD). Each product version includes its own custom assets, as well as versions of core assets. The version control system ensures that re- used core assets are read-only for a product, and that they not modified solely within the context of a specific product’s LOD. However, a prod- uct’s LOD can take a later version of a core asset which has been produced on its own LOD.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 64pt;text-indent: 0pt;text-align: left;"><span><img width="297" height="142" alt="image" src="Image_208.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 82pt;text-indent: 0pt;line-height: 7pt;text-align: left;"><span><img width="224" height="10" alt="image" src="Image_209.gif"/></span></p><h4 style="padding-top: 7pt;padding-left: 65pt;text-indent: 0pt;text-align: left;">Fig. 63. <span class="s7">A SCM branching pattern for SPL development</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">This view of SPL development provides a quantitative basis for seeing why SPL development can prove so effective. The LOD for each product contains source code for customer-specific assets and also (read-only)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">source code for core assets. So each LOD contains essentially the same source code as it would were PLD not being used. However the total vol- ume of branched code has been reduced, because the size of core assets is not multiplied across every product. Core assets are not branched for each product, and so low level design, coding and unit test costs within core as- sets can be shared across many products.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">In the ICDE example there are three products, and let’s assume that the core components have 140,000 LOC (Lines of Code) and each product’s custom part have 10,000 LOC. In normal product development, each prod- uct would be maintained on a separate LOD, giving a total of:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s11" style="padding-left: 25pt;text-indent: 0pt;text-align: left;">(140,000 + 10,000) * 3 = 450,000 branched LOC.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">In SPL development, the core is on its own LOD, and each product has a LOD only for changing their custom assets, giving a total of:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s11" style="padding-left: 25pt;text-indent: 0pt;text-align: left;">140,000 + (10,000 * 3) = 170,000 branched LOC.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">That’s only 38% of the original total. The improvement gets better when developing more products, or when the size of the custom assets compared to core assets is proportionately smaller.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a166">Variation Mechanisms</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">In an SPL, core assets support variable functionality by providing variation points. A SPL typically has a PLA that gives an architectural basis for variation. A PLA uses specific architectural variation mechanisms to im- plement variable functionality. However an SPL can also use non- architectural variation mechanisms to vary software functionality.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">In addition to architectural-level variation mechanisms, there are design- level and source-level variation mechanisms. These different types of variation are not incompatible. For example, it is possible to use file-level variation at the same time as architectural variation. This section describes some of the variation mechanisms at these different levels of abstraction. This classification is similar to the taxonomy of variability realization techniques in terms of software entities that has been proposed by Svahn- berg et al.<span class="s14">38</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_210.png"/></span></p><p class="s7" style="padding-top: 4pt;padding-left: 25pt;text-indent: -10pt;text-align: left;"><span class="s14">38 </span>M. Svahnberg, J. van Gurp, J. Bosch, <i>A Taxonomy of Variability Realization Techniques</i>, Technical paper, Blekinge Institute of Technology, Sweden, 2002.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l258"><li style="padding-top: 5pt;padding-left: 55pt;text-indent: -40pt;text-align: justify;"><p class="s41" style="display: inline;">Architecture-Level Variation Points</p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">Architectural variation mechanisms are high-level design strategies in- tended to let systems support a range of functionality. These strategies are only very loosely related to the facilities of any specific programming lan- guage. Examples of these include frameworks, and plug-in architectures. Even the formal recognition of a space of configuration options or parame- ters for selecting between variant functionality can be considered to be an architectural variation mechanism.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 55pt;text-indent: -40pt;text-align: justify;"><p class="s41" style="display: inline;">Design-Level Variation</p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">The boundary between architecture and design is not always a clear one. Here we will say that design-level mechanisms are those supported di- rectly by programming language facilities, and that architecture-level mechanisms must be created by programming. Programming language mechanisms can be used to represent variation. These mechanisms include component interfaces that can allow various functionally different imple- mentations, and inheritance and overriding that similarly allow objects to have variant functionality that satisfies base classes.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 55pt;text-indent: -40pt;text-align: justify;"><p class="s41" style="display: inline;">File-Level Variation</p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">Development environments and programming languages provide ways to implement variation at the level of source code files. Some programming languages provide conditional compilation or macro mechanisms that can implement functional variation. In any event, build scripts can perform logical or physical file variation that can be used to represent functional variation.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 55pt;text-indent: -40pt;text-align: justify;"><p class="s41" style="display: inline;">Variation by Software Configuration Management</p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">The main role of SCM for SPL development is to support asset reuse, by identifying and managing the versions of (and changes to) products and their constituent component assets. New product versions do not have to use the most recent version of a core asset. SCM systems can allow a product to use whatever core asset version meets the needs of the product’s stakeholders. The version history and version branching space within an SCM tool can be used to represent variation.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">In a version control tool, a branched LOD of a core asset can be created to contain variant functionality. Branching reused core assets in order to introduce ongoing variation is a sort of technical decay that reduces the benefits of SPL development. In the extreme case where every product has its own branch of core assets, an organization will have voided SPL devel- opment completely and will be back doing ordinary product development. Nonetheless, in some circumstances a temporary branch is the most prag-</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">matic way to introduce variation into a component in the face of a looming delivery deadline.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></li><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a167">Product Line Architecture for ICDE</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">Early on the in the development of the ICDE product the development team had put considerable effort into the product architecture. This means that they’re in the fortunate position of already having many architectural variation mechanisms in place, making the adoption of SPL development easier. For example, the <i>Data Source </i>adapter mechanism provides all the required variability for the three new products. These existing variation mechanisms form the heart of the product line architecture for the ICDE product line.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The team need to define some new variation mechanisms too. To sup- port the real-time display of market information for the Financial product, the existing GUI components need new functionality. The GUI is currently too rigid, so the team plans to extend the GUI framework to let them add new types of “plug-in” panels connected to data sources. When this framework is extended, it’ll be much easier to implement the real-time display panel, connect it to the market data source, and include it in the GUI for the Financial product build.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">However, although the ICDE team thought the <i>Data Store </i>would be the same for all three products, it turns out that separating the classified data for the Security product is a non-trivial problem, with requirements quite different to the other two products. The team has to come up with some special-purpose <i>Data Store </i>code just for that product. The easiest way to make these special changes is in a separate copy of the code, so in their version control tool they create a branch of the <i>Data Store </i>component just for the Security product. Having to maintain two different implementations of the <i>Data Store </i>might hurt a little, but it’s the best the team can do under a tight deadline. Once the product ships they’ll have time to design a better architectural variation mechanism for the next release, and move all the products onto that new <i>Data Store </i>component.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol><li style="padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a168">Adopting Software Product Line Development</a></h2></li></ol></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: left;">Like many radical business changes, the adoption of SPL development in an organization is often driven in response to a crisis (what Schmid and</p><p class="s7" style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 106pt;text-indent: 0pt;text-align: left;">9.5 Adopting Software Product Line Development 167</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_211.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">Verlage<span class="s14">39 </span>diplomatically called a “reengineering-driven” situation). This may be an urgent demand to quickly develop many new products, or to re- duce development costs, or to scale new feature development in the face of a growing maintenance burden. This section points out some paths and processes relevant to the adoption of SPL development.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 15pt;text-indent: 0pt;text-align: left;"><a name="a169">9.5.1 Starting Points for Adopting SPL Development</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">There are two different starting points in the adoption of SPL develop- ment:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l259"><li style="padding-left: 26pt;text-indent: -10pt;text-align: left;"><h3 style="display: inline;">Green Fields: <span class="p">where no products initially exist;</span></h3></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: left;"><h3 style="display: inline;">Ploughed Fields:<span class="p">, where a collection of related legacy products have al- ready been developed without reuse in mind.</span></h3></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;">Each situation has special considerations, as described below.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l260"><ol id="l261"><ol id="l262"><ol id="l263"><li style="padding-left: 55pt;text-indent: -40pt;text-align: left;"><p class="s41" style="display: inline;">Green Fields Adoption of SPL Development</p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">For Green Fields adoption of SPL development, the SEI’s <i>What to Build </i>pattern is particularly relevant. This pattern describes how a number of in- teracting practice areas can result in the generation of an SPL Scope (to know what SPL will be built) and a business case (to know why building the SPL is a good investment for the organization). The SEI’s <i>Scoping </i>and <i>Building a Business Case </i>practice areas that are directly responsible for these outputs are supported by the <i>Understanding Relevant Domains</i>, <i>Market Analysis</i>, and <i>Technology Forecasting </i>practice areas.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">An organization has to decide on their markets of interest, their me- dium-to-long term SPL scope, and their short-to-medium term product production plans. In terms of the Venn diagram depicted in</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Fig. <b>62</b>, the organization must plan and evaluate the various investment options of having the PLA of the core asset base support a large-enough SPL scope. This makes it possible to trade off the potential for return from the products that can be generated within that scope for the markets of in- terest to the organization.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Investing in a PLA at the beginning of an SPL will provide a better long-term return assuming that the products in the SPL are successful in the market. However, the cost and technical difficulty of creating such a PLA <i>ex nihlio </i>can pose a barrier to the adoption of SPL development, es-</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_212.png"/></span></p><p class="s7" style="padding-top: 4pt;padding-left: 26pt;text-indent: -10pt;text-align: left;"><span class="s14">39 </span>K. Schmid, M. Verlage, <i>The Economic Impact of Product Line Adoption and Evolution</i>. In IEEE Software, July/August 2002, pp. 50-57.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">pecially if the organization is not already expert within the application do- main being targeted by the SPL.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 55pt;text-indent: -40pt;text-align: left;"><p class="s41" style="display: inline;">Ploughed Fields Adoption of SPL Development</p></li></ol></ol></ol></ol><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">When a set of products exists and is being transitioned to an SPL, an or- ganization will, as for Green Fields adoption, need to decide on the SPL scope and markets of interest for the SPL. However, organizations in this position will generally already have a good understanding about these. The scope of the SPL will largely be driven by the functionality of existing products and future product plans. The other significant considerations for Ploughed Fields adoption are potential barriers related to change control, and defining the core assets and PLA.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="98" height="139" alt="image" src="Image_213.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="67" height="54" alt="image" src="Image_214.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="67" height="33" alt="image" src="Image_215.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="67" height="33" alt="image" src="Image_216.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="67" height="32" alt="image" src="Image_217.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="129" height="189" alt="image" src="Image_218.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="27" height="38" alt="image" src="Image_219.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="32" height="21" alt="image" src="Image_220.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="27" height="38" alt="image" src="Image_221.png"/></span></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Change control issues can pose a barrier to the adoption of SPL devel- opment for an organization’s legacy products. The stakeholders of existing products will already have established expectations about how their prod- uct releases change. As discussed in the SCM section, every product in the SPL has stakeholders that influence changes made to core assets, and these core asset changes in the SPL will ultimately affect every product in the SPL, including other stakeholders. This change in the nature of product re- leases must be understood and accepted by the products’ stakeholders.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="67" height="54" alt="image" src="Image_222.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="35" height="21" alt="image" src="Image_223.png"/></span></p><h3 style="padding-top: 10pt;padding-left: 25pt;text-indent: 15pt;line-height: 24pt;text-align: left;">Fig. 64. <span class="p">Mining core assets from a collection of existing products When initially defining an SPL for an existing set of independent prod-</span></h3><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">ucts, the organization must decide what is core for every product, and what is custom or specific to any individual product. Instead of throwing away the existing assets for the organization’s products and starting from a blank slate, it is possible to use an extractive approach to mine core assets from existing products. The SEI describes a product line practice area <i>Mining Existing Assets </i>addressing this activity. In many ways, the extraction of core assets is like a giant refactoring exercise, as depicted in Fig. 64. Start-</p><p class="s7" style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 138pt;text-indent: 0pt;text-align: left;">9.6 Product Line Adoption Practice Areas 169</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_224.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">ing from an initial collection of products, the goal of the exercise is to fin- ish with identical products, except now all built using a common core as- set.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">When defining the core assets, the organization can also define a PLA to cater for variation that is identified among the products. Svahnberg et al. have presented a set of minimally necessary steps to introduce variability into a SPL. These are:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">identification of variability</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">constraining variability</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">implementing variability</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">managing the variability</p><p style="padding-top: 11pt;padding-left: 15pt;text-indent: 10pt;text-align: justify;">In order to reduce change control conflicts, it may be easier to introduce SPL development early in the cycle leading to the release of a major new version of a product. Product stakeholders are prepared for major changes when receiving a major new version. Although moving to SPL develop- ment need not in principle result in any functional difference to a product, there will at least be change control policy modifications, which customers may find easier to accept in the context of a major new product version.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">An organization adopting SPL development can also reduce business and technical risks by incrementally rolling out the SPL within the organi- zation. Adoption can be incremental either by progressively increasing the size of the core assets, by progressively adding more products to use the core assets, or a combination of both.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h2 style="padding-top: 10pt;padding-left: 15pt;text-indent: 0pt;text-align: left;"><a name="a170">9.6 Product Line Adoption Practice Areas</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The adoption of SPL development has impact outside the technical de- velopment context. Regardless of the starting point for SPL adoption (Green or Ploughed Fields) and regardless of the specific product and technical process changes that are to be made, many organizational man- agement issues must be dealt with to successfully transition to SPL devel- opment. The SEI product line practice guidelines describe the <i>Cold Start Pattern </i>that groups together practice areas that can help an organization ef- fectively prepare for the launch of its first SPL. The structure of the pattern is shown in Fig. 65.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Although the details of these practice areas are beyond the scope of this chapter, the pattern as a whole highlights the fact that SPL development</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-bottom: 3pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">must have broad business support from within the adopting organization and from its customers.</p><p style="padding-left: 122pt;text-indent: 0pt;text-align: left;"><span><img width="150" height="36" alt="image" src="Image_225.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 45pt;text-indent: 0pt;text-align: left;"><span><img width="336" height="107" alt="image" src="Image_226.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 60pt;text-indent: 0pt;text-align: left;"><span><img width="136" height="64" alt="image" src="Image_227.png"/></span>	<span><img width="78" height="51" alt="image" src="Image_228.png"/></span></p><p class="s7" style="padding-top: 7pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;"><b>Fig. 65</b>. The structure of product line practice areas in SEI&#39;s <i>Cold Start </i>pattern (af- ter Clements and Northrup 2002, p383)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 14pt;text-indent: 0pt;text-align: left;"><a name="a171">9.6.1 Product Line Adoption for ICDE</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">The ICDE team was driven to SPL development by the daunting prospect of developing three new products at once. They are creating three new products for three specific markets, but are using their existing product as a starting point. Their adoption of SPL development is thus a Ploughed Field scenario. They have to mine reusable components from their existing code base.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Luckily their existing customers aren’t going to be too concerned ini- tially about the move to a PLA, because the move is part of the develop- ment of a major new version of the product. The customers will be happy to upgrade because of the new features they’ll also be getting.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l264"><ol id="l265"><li style="padding-top: 10pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a172">Ongoing Software Product Line Development</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">SPL development must be effective not just for the initial development of new products, but also for their ongoing maintenance and enhancement. Although SPL development can have many benefits, it is more compli- cated than normal product development. Enhanced processes are necessary</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">to make ongoing SPL development effective. This section gives an over- view of a few of these SPL development processes. We pay particular at- tention to “change control” and “architectural evolution” for SPL devel- opment, but also summarize other SEI Product Line Practice areas for ongoing SPL development.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l266"><li style="padding-left: 49pt;text-indent: -33pt;text-align: justify;"><p class="s12" style="display: inline;"><a name="a173">Change Control</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">Software change control is related to software configuration management, and is concerned with planning, coordinating, tracking, and managing the impact of change to software artifacts (e.g. source code). Change control is harder when you do software reuse, and this affects SPL development.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">In any kind of product development, every product has a collection of stakeholders that is concerned with how their product changes to accom- modate their needs for new functionality. In addition, stakeholders are concerned about non-functional characteristics (such as release schedule, product reliability) related to the release of their products. Risk-averse stakeholders (such as those using safety-critical software or those in the banking industry) are often motivated to ensure that their products do not change at all! Such stakeholders sometimes prefer to be confident in their understanding of the product (bugs and all) rather than use new, perhaps better versions.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l267"><li style="padding-left: 55pt;text-indent: -40pt;text-align: justify;"><p class="s41" style="display: inline;">Change Control is Harder for SPL Development</p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">Change control is harder when you do software reuse, including software reuse for SPL development. For ordinary product development, each prod- uct is developed separately, and so each product’s stakeholders are kept separate too. However, in SPL development each product depends on re- used core assets, and so these products’ stakeholders also vicariously de- pend on these reused core assets. If one product’s customer has a change request that involves a change to a core asset, then implementing that will force that change on every other customer who uses the new version of that core asset. The many, often conflicting, needs of the products’ stake- holders will need to be simultaneously satisfied by the reused core assets.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 55pt;text-indent: -40pt;text-align: justify;"><p class="s41" style="display: inline;">Long, Medium, and Short Term Change Control</p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">There are a range of strategies to help address the problems of change con- trol for SPL development, but there is no silver bullet to solve them. Good discipline and a combination of long, medium, and short term change management are required.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">An important long term way to reduce change control conflicts is to de- velop higher quality core assets. Change control is easier if changes are not</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">required, and higher quality core assets can reduce the need for change. Serendipitously, one benefit of SPL development is that the quality of core assets will tend to increase over time, because many different products will exercise the core assets in slightly different patterns of use, which will tend to expose more defects for correction.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">An SPL Road Map is a medium-to-long term approach to manage change. A SPL Road Map is a formal plan for changes to core assets, which can be useful in managing the expectations and plans of the prod- ucts’ stakeholders. This can help to avoid differing expectations among stakeholders about product release schedules and functionality. An SPL Road Map is the place where proactive architectural changes are sched- uled, to add variation points to core assets. This helps to minimize the problems associated with changing PLA core asset variation points.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Many organizations use CCBs (Change Control Boards) to make deci- sions about the implementation of change requests in individual products. A product’s CCB contains representatives from the development team and the product’s stakeholders. In SPL development, products can still have CCBs, but the SPL as a whole requires a Core CCB. A Core CCB makes decisions about the implementation of change requests affecting core as- sets. The Core CCB is the forum for short-to-medium term negotiation be- tween the product stakeholders to decide on the disposition of change re- quests that have not been previously agreed to within the SPL Road Map.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">If a short term or emergency core asset change is required and is not ap- proved by the Core CCB, it may be possible to “fake” a core change by in- stead changing a product’s custom assets. File-level variation mechanisms are particularly well suited to this. Fake core changes are work-arounds that can add to the longer-term maintenance cost and decrease the econo- mies of reuse. To avoid an accumulation of these inefficiencies, when a fake core change is implemented, it is best to also have the Core CCB agree to schedule a “real” medium-term core asset change in the SPL Road Map, and when this is implemented, undo the fake change in the custom assets.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 55pt;text-indent: -40pt;text-align: left;"><p class="s41" style="display: inline;">Change Tracking</p></li></ol></li></ol></li></ol></ol><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">The increased complexity of SCM configuration identification for SPL de- velopment noted earlier also has an impact on the complexity of change tracking. In SPL development, core assets, custom assets, and products are all separately managed as CIs. Changes can be made to any of these CIs. Some changes observable at the product level are seen by product stake- holders conceptually as single changes (e.g. fixing a product defect), but within the SPL they are implemented as changes to both core and custom assets. Change tracking only at the asset level may create seemingly spuri-</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">ous changes at the product level, while change tracking only at the product level will cause confusion about the nature and scope of the changes with an individual asset.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">To address these change tracking problems a change tracking system for SPL development needs to be able to track changes at both the asset level, and also in an aggregated way at the product level. One way to do this is to separately track change requests (at the product level) and their related changes (at the asset level).</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l268"><ol id="l269"><ol id="l270"><li style="padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a174">Architectural Evolution for SPL Development</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">In SPL development there is constant evolution of both individual product custom assets and the reused core assets. The PLA is the architectural basis for the variation supported by core assets. A change to a core assets’ inter- face is a change to the PLA, and can force changes in all products that use the new version of these core assets. How then should the new or enhanced core features be added to a SPL? That is, how should changes be made to the PLA?</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">There are three ways to time the introduction of variation points into core assets:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></ol></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Proactive: <span class="p">Plan ahead for future features, and implement them in core assets before any product needs them.</span></h3></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Reactive: <span class="p">Wait until a new feature is actually required by a product, and then implement it in core assets at that time.</span></h3></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Retroactive: <span class="p">Wait until a new feature is actually required by a product, and then implement it in a custom asset at that time. When enough products implement the feature in their custom assets, add it to the core assets. New products can use the new core assets’ feature, and the older products can drop their custom asset implementation in favor of the core assets’ implementation.</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">It is possible to use a mix of these approaches, for different enhance- ments. For example, enhancements on a long-term SPL Road Map could be added in a proactive way, by planning architectural changes to support the future increased scope of the SPL. Limited but generally useful en- hancements to core assets could be added in a reactive way, by modifying the PLA as required by those enhancements. Enhancements needed by one product that are more speculative or are less well defined could be added retroactively.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">Each of these strategies has different costs, benefits, and risks. The choice of strategy for a particular feature will be driven by consideration of these tradeoffs in the organization’s business context. Table 11 summa- rizes some of the differences between the three approaches:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 62pt;text-indent: 0pt;text-align: left;">Table 11. <span class="s7">Comparing strategies for architecture evolution</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:21.801pt" cellspacing="0"><tr style="height:11pt"><td style="width:127pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:58pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 6pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Proactive</p></td><td style="width:53pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 6pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Reactive</p></td><td style="width:60pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 6pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Retroactive</p></td></tr><tr style="height:11pt"><td style="width:127pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">No long-term investment</p></td><td style="width:58pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">No</p></td><td style="width:53pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Yes</p></td><td style="width:60pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Yes</p></td></tr><tr style="height:22pt"><td style="width:127pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Reduces risk of core asset</p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;line-height: 9pt;text-align: left;">change conflict</p></td><td style="width:58pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Yes</p></td><td style="width:53pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">No</p></td><td style="width:60pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Yes</p></td></tr><tr style="height:22pt"><td style="width:127pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">Reduces lead time to add feature to first product</p></td><td style="width:58pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Yes</p></td><td style="width:53pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">No</p></td><td style="width:60pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">No</p></td></tr><tr style="height:33pt"><td style="width:127pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Reduces risk of core feature not required in a number of</p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">products</p></td><td style="width:58pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">No</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">(0 products)</p></td><td style="width:53pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">No</p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">(1 product)</p></td><td style="width:60pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Yes</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l271"><ol id="l272"><ol id="l273"><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a175">Product Line Development Practice Areas</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">The SEI product line practice guidelines provide the <i>Factory </i>pattern that links together other patterns and their constituent practice areas relevant to the ongoing development and maintenance of a SPL. The <i>In Motion </i>pat- tern groups together organizational management practice areas. Other rele- vant SEI patterns are the <i>Monitor</i>, <i>Process</i>, and <i>Curriculum </i>patterns that- describe ongoing aspects of SPL development.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">For technical practice areas, the SEI’s <i>Each Asset </i>pattern describes practice areas that are relevant to the development of core assets. The <i>Product Parts </i>pattern ties together the core assets with the product devel- opment. The <i>Product Builder </i>pattern describes practice areas relevant to the development of any specific product. The <i>Assembly Line </i>pattern de- scribes how products are output from the SPL.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a176">Product Lines with ICDE</a></p></li></ol></ol></ol><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">Doing SPL development wasn’t just an architectural issue for the ICDE team. Each of the products had a customer steering group that was in- volved in defining requirements for the new products, and defined en- hancement requests that they wanted to track through to the delivery of the products. But the ICDE team didn’t want the Financial product customer steering group to see all the details of the Security product steering group, and vice-versa. The problem was that some enhancement requests were the</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">same (or similar), and the team didn’t want to get confused about duplicate requests when they started coding.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">So, the ICDE team set up different customer-facing request systems for each of the products. These linked to an internal change request system which could track changes to each of the main reused sub-systems and also the product-specific custom components.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Eventually the first product was released. Instead of releasing all three products at once, the team shipped the simplest product first, namely the Government product. The Government customers quickly raised a few post-release defect reports, but the ICDE development team was able to re- spond quickly too. The good news was that one of the defects that was fixed was in the core <i>Data Collection </i>component, so when the other two products were released later, their customers wouldn’t see that problem. The ICDE team was beginning to see some quality benefits from SPL de- velopment.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The bad news came after the other products were released. The Security and Financial customers were happy to have the new version, though the Financial customers did raise a defect report on the <i>Data Analysis </i>compo- nent. It would have been easy to fix in the core component, but by that time the Government customers had gone into production. They hadn’t seen that problem in the <i>Data Analysis </i>area, and in fact the bug was related to the framework extensions required to support the Financial product real- time display panel.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">However, if the <i>Data Analysis </i>component changed in any way at all, the Government customers would have to follow their policy and re-run all of the related acceptance tests, which would cost them time and money. So they really didn’t want to see any changes, and put pressure on the ICDE sales team to try to stop the change.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The ICDE development team really wanted to change the core version, but how could they satisfy everyone? They thought about faking the core changes in custom assets just for the Financial product, but in the end they decided to keep the Government product on the old version of the <i>Data Analysis </i>component, and implemented the fix in the core. The ICDE de- velopment team also created a Core CCB involving representative mem- bers from each of the three customer steering groups. This meant that in future the negotiations could be managed inside the Core CCB, instead of via the ICDE sales team.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">A bright spot on the horizon was that the Security customers were start- ing to talk about their need to see real-time visualization of news reports. The ICDE development team could implement that just by reusing the real-time display panel developed for the Financial product. The company had already accounted for the costs of developing that feature, so being</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">able to sell it again to other customers would mean all the new revenue would go straight to the bottom line.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l274"><ol id="l275"><li style="padding-top: 10pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a177">Conclusions</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">SPL development has already given many organizations orders of magni- tude improvements to productivity and time to market, and significant im- provements in product quality. If we think about SPL development simply from a SCM perspective, we can see that (proportionately large) core as- sets are not branched for each product, and so the total number of branched lines of code is vastly reduced for the whole SPL.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">What does the future hold for SPL development? Because of its massive potential, SPL development is likely to become even more widely known, better understood, and increasingly used. However, SPL development will also have impacts on software architecture practices, as architectural mechanisms for reuse in the large become better and more widely under- stood.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Improved architectural practices combined with a deeper understanding of specific application domains can also support increasingly declarative variation mechanisms. This could transform software reuse to be more like the mythical vision of software construction using software building blocks. Simple reuse relies heavily on procedural variation, writing ad-hoc code to achieve the particular functionality that is required. Increasing ar- chitectural sophistication and domain knowledge can support configurable variation, realized by systematic variation supported by core assets inter- faces.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Choosing a variant for such a system requires choosing values from a list of configuration options. When an application domain is very well un- derstood, then a domain-specific language becomes a viable way of de- claratively specifying product variation. Sentences in this language can specify system variants, and can be dynamically interpreted by the core as- sets.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Other architectural and design approaches such as aspect-oriented pro- gramming and model-driven development also have promise as variation or mass-customization mechanisms that may be able to support SPL de- velopment. These two topics are described in the next two chapters.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">SPL development is just one approach to benefit from software reuse. In SPL development, variation of reused assets is usually performed with the use of custom assets that are created at development time. Other ap- proaches for benefiting from software reuse are based on variation incor-</p></li><li style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 237pt;text-indent: -16pt;text-align: left;"><p class="s7" style="display: inline;">Further Reading 177</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_229.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">porating assets at later binding times. For example, configurable product bases have no (or almost no) custom assets and all variation occurs at build time or load time. Continuing to the extreme, dynamically configurable product bases have no custom assets and all variation occurs dynamically at run time.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">As the time of system variation extends out of the development context, so does the need to extend the control and management of variation. For systems that can vary at installation time, load time, or run time, the need to control and manage system variation does not end when the system is released from development. Software configuration management supports control and management of variation during development. However, for installation, load or run time, existing package management and applica- tion management frameworks have very weak facilities for version and variation control. In future, the boundaries between configuration man- agement, package management, and application management will become blurred. A unified framework is therefore required to control and manage variation across the entire product lifecycle.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h2 style="padding-top: 10pt;padding-left: 15pt;text-indent: 0pt;text-align: left;"><a name="a178">9.9 Further Reading</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">The Software Engineering Institute has been a leader in defining and re- porting the use of software product lines. An excellent source of informa- tion is the following book by two of the pioneers of the field:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">P. Clements, L. Northrop. <i>Software Product Lines: Practices and Pat- terns. </i>Addison Wesley, 2001.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The SEI’s web site also contains much valuable information and links to other product line related sources:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;line-height: 206%;text-align: left;">http://www.sei.cmu.edu/productlines/index.html Another excellent reference is:</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">K. Pohl, G. Böckle, F. J. van der Linden<b>. </b>Software Product Line Engi- neering: Foundations, Principles and Techniques. Springer-Verlag 2005</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Software configuration management is a key part of software product lines. A good book on this topic is:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">S.P. Berczuk, B. Appleton. Software Configuration Management Pat- terns: Effective Teamwork, Practical Integration. Addison-Wesley, 2002.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">A case study describing how to exploit file-based variation to create a software product line is:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">M. Staples, D. Hill. <i>Experiences Adopting Software Product Line De- velopment without a Product Line Architecture</i>. Proceedings of the 11th Asia-Pacific Software Engineering Conference (APSEC 2004), Busan, S. Korea, 30 Nov-3 Dec 2004, IEEE, pp. 176-183.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">A slightly different perspective on product lines is the Software Facto- ries work by Jack Greenfield et al. This book is definitely worth a read.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">J. Greenfield, K. Short, S. Cook, S. Kent, J. Crupi, Software Factories: Assembling Applications with Patterns, Models, Frameworks, and Tools, Wiley 2004</p></li></ol><li style="padding-top: 4pt;padding-left: 35pt;text-indent: -20pt;text-align: left;"><h1 style="display: inline;"><a name="a179">Aspect Oriented Architectures</a></h1></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;">Yan Liu</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l276"><ol id="l277"><li style="padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a180">Aspects for ICDE Development</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">The ICDE 2.0 environment needs to meet certain performance require- ments for API data retrievals. To try and guarantee this performance level, the actual behavior of an ICDE implementation needs to be monitored. Performance monitoring allows remedial actions to be taken by the devel- opment team if the required performance level is not met.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">However, ICDE v2.0 is a large, multithreaded and distributed system, comprising both off-the-shelf and custom written components. Such sys- tems are notoriously difficult to monitor and isolate the root cause of per- formance problems, especially when running in production.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The time-honored strategy for monitoring application performance and pinpointing components causing performance bottlenecks is to instrument the application code with calls to log timing and resource usage. However this approach leads to duplicate code being inserted in various places in the source. As always, duplicate code is error prone and makes it more diffi- cult to maintain the application as the ICDE application evolves.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The ICDE team was aware of the engineering problems of inserting per- formance monitoring code throughout the ICDE code base. Therefore they sought a solution that could separate the performance monitoring code from the application implementation in a modular, more maintainable way. Even better would be if it were possible to inject the performance monitor- ing code into the application without the need to recompile the source code.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">So, the ICDE team started to look in to aspect-based approaches and technologies to address their performance monitoring problem. Aspect- oriented programming (AOP) structures code in modules known as as- pects. Aspects are then merged at either compile time or run time to form a complete application.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">The remainder of this chapter provides an overview of AOP, its essen- tial elements and tool support. It also discusses the influence of aspect- based approaches on architecture and design. Finally, the chapter describes how the ICDE system could leverage aspect-based techniques to monitor application performance in a highly flexible, modular and maintainable way.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l278"><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a181">Introduction to Aspect-Oriented Programming</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">Aspect-oriented programming (AOP) is an approach to software design in- vented at Xerox PARC in the 1990s<span class="s14">40</span>. The goal of AOP is to let designers and developers better separate the “crosscutting concerns” that a software system must address. Crosscutting concerns are elements of a system’s be- havior that cannot be easily localized to specific components in an applica- tion’s architecture. Common crosscutting concerns are error handling, se- curity checks, event logging and transaction handling. Each component in the application must typically include specific code for each crosscutting concern, making the component code more complex and harder to change.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">To address crosscutting concerns, AOP provides mechanisms for sys- tematic identification, separation, representation and composition. Cross- cutting concerns are encapsulated in separate modules, called “aspects”, so that localization can be achieved.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">AOP has a number of potential benefits. First, being able to identify and explicitly represent crosscutting concerns helps architects consider cross- cutting behavior in terms of aspects at an early stage of the project lifecy- cle. Second it allows developers to easily reuse the code for an aspect in many components, and thus reduces the effort of utilizing (often this means copying) the code. Third, AOP promotes better modularity and en- capsulation as component code is succinct and uncluttered.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Structuring applications with aspects and directly implementing the de- sign using aspect-oriented programming languages has the potential for improving the quality of software systems. Aspects may make it possible for large and complex software systems to be factored and recomposed into simpler and higher quality offerings. To see how this works, let’s look at this approach in more details.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_230.png"/></span></p><p class="s7" style="padding-top: 4pt;padding-left: 21pt;text-indent: -6pt;text-align: justify;"><span class="s14">40 </span>Kiczales, G., Lamping, J., Mendhekar, A., Maeda, C., Videira Lopes, C., Loing tier, J.-M., and Irwin, J, <i>Aspect-Oriented Programming</i>, Proceedings European Conference on Object-Oriented Programming, Vol. 1241. Springer-Verlag, (1997) 220-242.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 5pt;padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a182">Crosscutting Concerns</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">Separation of concerns is a fundamental principle of software engineering. This principle helps manage the complexity of software development by identifying, encapsulating and manipulating those parts of the software relevant to a particular concern. A “concern” is a specific requirement or consideration that must be addressed in order to satisfy the overall system goal.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Any application is composed of multiple functional and non-functional concerns. Functional concerns are relevant to the actual use of the applica- tion, whereas non-functional concerns pertain to the overall quality attrib- utes of the system, such as the performance, transactions and security. Even applications that are designed in a highly modular fashion suffer from tangling of functional and non-functional aspects. For example, cach- ing logic to improve database performance might be embedded in the business logic of many different components, thus mixing or tangling functional and performance concerns. Other examples of crosscutting con- cerns include performance monitoring, transaction control, service authori- zation, error handling, logging and debugging. The handling of these con- cerns spans across multiple application modules, replicating code and making the application more complex.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a183">Managing Concerns with Aspects</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">Using conventional design techniques, a crosscutting concern can be modularized using an interface to encapsulate the implementation of the concern from its invoking client components. Although the interface re- duces the coupling between the clients and the implementation of the con- cern, the clients still need to embed code to call the interface methods from within its business logic.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">With aspect-oriented design and programming, each crosscutting con- cern is implemented separately in a component known as an aspect. In Fig. 66, the difference between implementing a logging concern using conven- tional programming and AOP is demonstrated. The aspect defines execu- tion points in client components that require the implementation of the crosscutting concern. For each execution point, the aspect then defines the behavior necessary to implement the aspect behavior, such as calling a logging API.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Importantly, the client modules no longer contain any code to invoke the aspect implementation. This leads to client components that are unpolluted by calls to implement one or more concerns.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">Once defined, the use of an aspect is specified in composition rules. These composition rules are input to a programming utility known as a “weaver”. A weaver transforms the application code, composing the aspect with its invoking clients. Aspect-oriented programming languages such as AspectJ provide weaving tools, and hence AOP languages and tools are necessary to effectively implement aspect-oriented designs.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="137" height="114" alt="image" src="Image_231.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="46" height="12" alt="image" src="Image_232.png"/></span></p><p class="s84" style="padding-left: 100pt;text-indent: 0pt;text-align: left;">API Invocation</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="161" height="66" alt="image" src="Image_233.png"/></span></p><p class="s84" style="padding-left: 66pt;text-indent: 0pt;text-align: left;">Aspect weaved in</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s84" style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: justify;">Access Control Model</p><p style="text-indent: 0pt;text-align: left;"/><p class="s84" style="padding-top: 6pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">Manager model</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s84" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">Visitor model</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;"><span><img width="134" height="45" alt="image" src="Image_234.png"/></span></p><p class="s84" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">Employee model</p><p class="s84" style="padding-top: 5pt;padding-left: 21pt;text-indent: 0pt;text-align: left;">Manager model</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="187" height="125" alt="image" src="Image_235.png"/></span></p><p class="s84" style="padding-left: 6pt;text-indent: 0pt;text-align: justify;">Access Control Model</p><p style="text-indent: 0pt;text-align: left;"/><p class="s84" style="padding-left: 6pt;text-indent: 0pt;text-align: justify;">Access Control Aspect</p><p style="text-indent: 0pt;text-align: left;"/><p class="s84" style="padding-left: 21pt;text-indent: 0pt;text-align: left;">Visitor model</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s84" style="padding-top: 8pt;padding-left: 21pt;text-indent: 0pt;line-height: 9pt;text-align: left;">Employee model</p><p style="padding-left: 15pt;text-indent: 0pt;line-height: 10pt;text-align: left;">.</p><ol id="l279"><li style="padding-top: 4pt;padding-left: 43pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">(a) Conventional Model 2. (b) AOP Model</p><h4 style="padding-top: 6pt;padding-left: 85pt;text-indent: 0pt;text-align: left;">Fig. 66. <span class="s7">Implementation of a logging concern</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></li><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a184">AOP Syntax and Programming Model</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">“Crosscutting” is an AOP technique to enable identification of concerns and structuring them into modules in a way that they can be invoked at dif- ferent points throughout an application. There are two varieties of cross- cutting, static and dynamic. Dynamic crosscutting modifies the execution behavior of an object by weaving in new behavior at specific points of in- terest. Static crosscutting alters the static structure of a component by in- jecting additional methods and/or attributes at compile time.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: left;">The basic language constructs and syntax used to define crosscutting in AOP are as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></li></ol></ol></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">A “join point” is an identifiable point of execution in an application, such as a call to a method or an assignment to a variable. Join points are</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 26pt;text-indent: 0pt;text-align: left;">important, as they are where aspect behaviours are woven in to the application.</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">A “pointcut” identifies a join point in the program at which a crosscut- ting concern needs to be applied. For example, the following defines a pointcut when the <i>setValue </i>method of the <i>Stock </i>class is called:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s39" style="padding-left: 26pt;text-indent: 0pt;line-height: 117%;text-align: left;">pointcut log(String msg):args(msg) execution(void Stock.setValue(float))</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">An “advice” is a piece of code implementing the logic of a crosscutting concern. It is executed when a specified pointcut is reached.</p></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">An “introduction” is a crosscutting instruction that can make static changes to the application components. An introduction may, for exam- ple, add a method to a class in the application.</p></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">An aspect in AOP is equivalent to a class in object-oriented programming. It encapsulates pointcuts and associated advice and introductions.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;">In Fig. 67 the relationship between these AOP terms is illustrated.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="261" height="229" alt="image" src="Image_236.png"/></span></p><p class="s15" style="padding-top: 4pt;padding-left: 39pt;text-indent: 0pt;text-align: left;">Caller</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s15" style="padding-top: 6pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">Callee.myMethod()</p><p style="padding-left: 49pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s15" style="padding-top: 1pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Callee</p><p style="padding-left: 35pt;text-indent: 0pt;text-align: left;"/><p class="s15" style="padding-top: 6pt;padding-left: 38pt;text-indent: 0pt;text-align: center;">Join Point</p><p class="s15" style="padding-top: 6pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">Advice</p><p style="padding-left: 49pt;text-indent: 0pt;text-align: left;"><span style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt;">	</span></p><p class="s15" style="padding-left: 89pt;text-indent: 0pt;line-height: 8pt;text-align: center;">bind to</p><p class="s15" style="padding-top: 2pt;padding-left: 4pt;text-indent: 0pt;text-align: left;">public void myMethod() {</p><p class="s15" style="padding-top: 1pt;padding-left: 11pt;text-indent: 0pt;text-align: left;">...</p><p class="s15" style="padding-top: 1pt;padding-left: 4pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"/><p class="s15" style="padding-top: 1pt;padding-left: 188pt;text-indent: 0pt;text-align: left;">(expressed in pointcut)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 121pt;text-indent: 0pt;text-align: left;">Fig. 67 <span class="s7">The anatomy of AOP</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l280"><ol id="l281"><ol id="l282"><li style="padding-top: 5pt;padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a185">Weaving</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">Realizing an aspect-oriented design requires programming language support to implement individual aspects. The language also defines the rules for weaving an aspect’s implementation with the rest of the application code. Weaving can follow a number of strategies, namely:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l283"><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">a special source code pre-processor executed during compilation;</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">a post-processor that patches binary files;</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">an AOP-aware compiler that generates woven binary files;</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">load-time weaving (LTW); for example, in the case of Java, weaving the relevant advice by loading each advice class into the JVM.</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">run-time weaving (RTW); intercepting each join point at runtime and executing all relevant advices. This is also refered to as “hotswapping” after the class is loaded.</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Most AOP languages support compile-time weaving (CTW) using one of the first three options. In the case of Java, the way it typically works is that the compiler generates standard Java binary class files, which any standard JVM can execute. Then the <i>.class </i>files are modified based on the aspects that have been defined. CTW isn&#39;t always the best choice though, and sometimes it’s simply not feasible (e.g. with Java Server Pages).</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">LTW offers a better solution with greater flexibility. In the case of Java, LTW requires the JVM classloader to be able to transform or instrument classes at runtime. The JDK<span class="s14">41 </span>v5.0 now supports this feature through a simple standard mechanism. LTW must process Java bytecode at runtime and create data structures (this can be slow) that represent the bytecode of a particular class. Once all the classes are loaded, LTW has no effect on the speed of the application execution. AspectJ<span class="s14">42</span>, JBoss AOP<span class="s14">43 </span>and As- pectWerkz<span class="s14">44 </span>now support LWT.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">RTW is a good choice if aspects must be enabled at runtime. However, like LTW, RTW can have drawbacks in terms of performance at runtime while the aspects are being weaved in.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_237.png"/></span></p><p class="s14" style="padding-top: 4pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">41 <span class="s7">Java Development Kit</span></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: left;"><a href="http://eclipse.org/aspectj/" style=" color: black; font-family:&quot;Times New Roman&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 3pt;" target="_blank">42 </a><a href="http://eclipse.org/aspectj/" target="_blank">http://eclipse.org/aspectj/</a></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: left;"><a href="http://www.jboss.org/products/aop" style=" color: black; font-family:&quot;Times New Roman&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 3pt;" target="_blank">43 </a><a href="http://www.jboss.org/products/aop" target="_blank">http://www.jboss.org/products/aop</a></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: left;"><a href="http://aspectwerkz.codehaus.org/" style=" color: black; font-family:&quot;Times New Roman&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 3pt;" target="_blank">44 </a><a href="http://aspectwerkz.codehaus.org/" target="_blank">http://aspectwerkz.codehaus.org/</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 5pt;padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a186">Example of a Cache Aspect</a></p></li></ol></ol></ol><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">In this section we’ll use a simple example to illustrate the AOP program- ming model<span class="s14">45</span>. This simple application calculates the square of a given in- teger. In order to improve performance, if a particular input value has been encountered before, its square value is retrieved from a cache. The cache is a crosscutting concern, not an essential part of computing the square of an integer.</p><p class="s85" style="padding-top: 6pt;padding-left: 36pt;text-indent: 0pt;line-height: 112%;text-align: left;">//Source code of Application.java <span style=" color: #000;">package Caching;</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s86" style="padding-left: 36pt;text-indent: 0pt;text-align: left;">public class Application {</p><p class="s86" style="padding-left: 44pt;text-indent: 0pt;text-align: left;">public static void main(String[] args) {</p><p class="s86" style="padding-left: 53pt;text-indent: 0pt;line-height: 113%;text-align: justify;">System.out.println(&quot;The square of 45 is &quot; + calculateSquare(45)); System.out.println(&quot;The square of 64 is &quot; + calculateSquare(64)); System.out.println(&quot;The square of 45 is &quot; + calculateSquare(45)); System.out.println(&quot;The square of 64 is &quot; + calculateSquare(64));</p><p class="s86" style="padding-left: 44pt;text-indent: 0pt;line-height: 7pt;text-align: left;">}</p><p class="s86" style="padding-left: 53pt;text-indent: -8pt;line-height: 112%;text-align: left;">private static int calculateSquare(int number) { try {</p><p class="s86" style="padding-left: 61pt;text-indent: 0pt;text-align: left;">Thread.sleep(6000);</p><p class="s86" style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">}</p><p class="s86" style="padding-left: 53pt;text-indent: 0pt;line-height: 114%;text-align: left;">catch (InterruptedException ie) {} return number * number;</p><p class="s86" style="padding-left: 44pt;text-indent: 0pt;line-height: 7pt;text-align: left;">}</p><p class="s86" style="padding-left: 36pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s85" style="padding-top: 5pt;padding-left: 20pt;text-indent: 0pt;line-height: 118%;text-align: left;">//Source code of Cache.aj <span style=" color: #000;">package Caching;</span></p><p class="s86" style="padding-left: 20pt;text-indent: 0pt;text-align: left;">import java.util.Hashtable;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s86" style="padding-left: 20pt;text-indent: 0pt;text-align: left;">public aspect Cache {</p><p class="s86" style="padding-top: 1pt;padding-left: 33pt;text-indent: 0pt;line-height: 118%;text-align: left;">private Hashtable valueCache; pointcut calculate(int i) : args(i)</p><p class="s86" style="padding-left: 33pt;text-indent: 21pt;line-height: 118%;text-align: left;">&amp;&amp; (execution(int Application.calculateSquare(int))); int around(int i) : calculate(i) {</p><p class="s86" style="padding-left: 46pt;text-indent: 0pt;line-height: 120%;text-align: left;">System.out.println(&quot;Cache aspect is invoked for parameter &quot;+i); if (valueCache.containsKey(new Integer(i))) {</p><p class="s86" style="padding-left: 55pt;text-indent: 0pt;line-height: 7pt;text-align: left;">return ((Integer) valueCache.get(new Integer(i))).intValue();</p><p class="s86" style="padding-top: 1pt;padding-left: 46pt;text-indent: 0pt;text-align: left;">}</p><p class="s86" style="padding-top: 1pt;padding-left: 46pt;text-indent: 0pt;text-align: left;">int square = proceed(i);</p><p class="s86" style="padding-top: 1pt;padding-left: 46pt;text-indent: 0pt;line-height: 118%;text-align: left;">valueCache.put(new Integer(i), new Integer(square)); return square;</p><p class="s86" style="padding-left: 33pt;text-indent: 0pt;text-align: left;">}</p><p class="s86" style="padding-top: 1pt;padding-left: 33pt;text-indent: 0pt;text-align: left;">public Cache() {</p><p class="s86" style="padding-top: 1pt;padding-left: 46pt;text-indent: 0pt;text-align: left;">valueCache = new Hashtable();</p><p class="s86" style="padding-top: 1pt;padding-left: 33pt;text-indent: 0pt;text-align: left;">}</p><p class="s86" style="padding-top: 1pt;padding-left: 20pt;text-indent: 0pt;text-align: left;">}</p><h4 style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">Fig. 68. <span class="s7">A cache aspect implemented using AspectJ</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_238.png"/></span></p><p class="s7" style="padding-top: 4pt;padding-left: 26pt;text-indent: -10pt;text-align: left;"><span class="s14">45 </span>Chapman, M., Hawkins, H. <i>Aspect-oriented Java applications with Eclipse and AJDT</i>, IBM developerWorks,</p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;"><a href="http://www-128.ibm.com/developerworks/library/j-ajdt/">http://www-128.ibm.com/developerworks/library/j-ajdt/</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">The example is implemented using AspectJ and shown in Fig. 68. The cache is implemented as an aspect in <i>Cache.aj </i>and separated from the core application implementation, <i>Application.java</i>. The method <i>calculateS- quare </i>is a join point and it is identified by the pointcut <i>calculate </i>in the <i>Cache </i>aspect, as in the following:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s39" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">pointcut calculate(int i):args(i)</p><p class="s39" style="padding-top: 1pt;padding-left: 25pt;text-indent: 0pt;text-align: left;">&amp;&amp;(execution(int Application.calculateSqure(int)));</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The implementation of the cache function, retrieving a value from a <i>java.util.Hashtable</i>, is provided inside the <i>around </i>advice. Note that this advice is only applied to the class <i>Application</i>. The cache aspect is weaved into the application code at compile time using an AspectJ compiler.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The following output from executing the program demonstrates the advice is invoked at the join point.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-top: 4pt;padding-left: 6pt;text-indent: 0pt;line-height: 112%;text-align: left;">Cache aspect is invoked for parameter 45 The square of 45 is 2025</p><p class="s37" style="padding-left: 6pt;text-indent: 0pt;line-height: 112%;text-align: left;">Cache aspect is invoked for parameter 64 The square of 64 is 4096</p><p class="s37" style="padding-left: 6pt;text-indent: 0pt;line-height: 112%;text-align: left;">Cache aspect is invoked for parameter 45 The square of 45 is 2025</p><p class="s37" style="padding-left: 6pt;text-indent: 0pt;line-height: 107%;text-align: left;">Cache aspect is invoked for parameter 64 The square of 64 is 4096</p><p style="padding-left: 54pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><h2 style="padding-left: 14pt;text-indent: 0pt;text-align: left;"><a name="a187">10.2 Aspect-Oriented Architectures</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">An aspect relating to a system’s quality attributes heavily influences the application architecture, and many such aspects are basically impossible to localize. For example, to guarantee the performance of a loosely coupled application, consideration must be paid to the behavior of individual com- ponents and their interactions with one another. Therefore, concerns such as performance tend to crosscut the system’s architecture at the design level, and they can not be simply captured in a single module.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">AOP provides a solution for developing systems by separating crosscut- ting concerns into modules and loosely coupling these concerns to func- tional requirements. In addition, design disciplines like aspect-oriented de- sign (AOD) and aspect-oriented software development (AOSD) have been proposed to extend the concepts of AOP to earlier stages in the software lifecycle. With AOD and AOSD, the separation of concerns is addressed at two different levels.</p><p class="s7" style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 162pt;text-indent: 0pt;text-align: left;">10.2 Aspect-Oriented Architectures 187</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_239.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">First at the design level, there must be a clear identification and defini- tion of the structure of components, aspects, joint points and their relation- ship. Aspect design and modeling are the primary design activities at this level. Individual concerns tend to be related to multiple architectural arti- facts.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">For example, a concern for performance may be associated with a set of use cases in the architecture requirements, a number of components in the design and some algorithms for efficiently implementing specific logical components. The requirements for each aspect need to be extracted from the original problem statement, and the architecture needs to incorporate those aspects and identify their relationship with other components. It is also important to identify potential conflicts that arise when aspects and components are combined at this level. To be effective, this approach re- quires both design methodologies and tool support for modeling aspects.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Second, at the implementation level, these architectural aspects need to be mapped to an aspect implementation and weaved into the implementa- tion of other components. This requires not only the expressiveness of an AOP language that can provide semantics to implement join points, but also a weaving tool that can interpret the weaving rules and combine the implementations of aspects.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 15pt;text-indent: 0pt;text-align: left;"><a name="a188">10.2.1 Architectural Aspects and Middleware</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">As explained in Chap. 4, component-based middleware technologies such as J2EE and .NET provide services that support, for example, distributed transaction processing, security, directory services, integration services, database connection pooling, and so on. The various issues handled by these services are also the primary non-functional concerns targeted by AOSD. In this case, both component technology and AOP address the same issue of separation of concerns.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Not surprisingly then, middleware is one of the most important domains for applying AOP. Research on aspect mining<span class="s14">46 </span>shows that 50% of the classes in three CORBA ORB implementations are responsible for coordi- nation with a particular aspect. AOP has been used in such cases to effec- tively refactor a CORBA ORB and modularize its functionality.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Following on from such endeavors, attempts have been made to intro- duce AOP to encapsulate middleware services in order to build highly con- figurable middleware architectures. Distribution, persistence and transac-</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_240.png"/></span></p><p class="s7" style="padding-top: 4pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><span class="s14">46 </span>Zhang, C., Jacobsen, H. <i>Refactoring middleware with aspects</i>. In IEEE Transac- tions on Parallel and Distributed Systems, IEEE Computer Society, (2003), 14(11):1058 – 1073</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">tion aspects for software components using AspectJ have been successfully implemented, and AspectJ2EE extends AspectJ to implement the EJB model and several J2EE services. In the open source product world, JBoss AOP provides a comprehensive aspect library for developing Java-based application using AOP techniques.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The major problem in applying AOP to build middleware frameworks is that middleware services are not generally orthogonal. Attaching a service (aspect) to a component without understanding its interaction with other services is not sensible, as the effects of the services can interact with each other.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">For example, aspects are commonly used for weaving transactional be- havior with application code. Database transactions can be committed us- ing either one phase or two phase (for distributed transactions) commit protocols. For any individual transaction, only one protocol is executed, and hence only one aspect, and definitely not both, should be weaved for any join point. In general, handling interacting aspects is a difficult prob- lem. Either a compile-time error or a run-time exception should be raised if the two interacting aspects share a join point.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l284"><ol id="l285"><li style="padding-top: 10pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a189">State-of-the-Art</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">Recent research and development efforts have been dedicated to various aspect-oriented technologies and practices. These include AOP language specification, tool support for aspect modeling and code generation, and integration with emerging technologies such as metadata based program- ming. Let’s discuss each of these.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l286"><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a190">Aspect Oriented Modeling in UML</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">Several approaches exist to support aspect modeling for AOD and AOSD. Most of these approaches extend UML by defining a new UML profile for AOSD. This enables UML extensions with aspect concepts to be inte- grated into existing CASE tools that support standard UML.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">An advantage of aspect oriented modeling is the potential to generate code for aspects from design models. In aspect oriented modeling and code generation, aspect code and non-aspect code is generated separately. Using Model Driven Architecture (MDA) approaches, tools use a transformation definition to transform a platform independent model (PIM) into one or more platform specific models (PSMs), from which the automated genera-</p><p class="s7" style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 217pt;text-indent: 0pt;text-align: left;">10.3 State-of-the-Art 189</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_241.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">tion of aspect code and weaving can take place. MDA technologies are ex- plained in detail in the next chapter.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a191">AOP Tools</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">The fundamental model of AOP is the join point model. All AOP tools employ this model to provide a means of identifying where crosscutting concerns are applied. However, different tools implement the specifics of the aspect model in their own way, and introduce new semantics and mechanisms for weaving aspects.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">For example, in JBoss AOP, advices are implemented through “inter- ceptors” using Java reflection, and pointcuts are defined in an XML file that describes the place to weave in an advice dynamically at run time. In AspectJ, both advices and pointcuts are defined in an aspect class and weaved statically.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">This diversity in AOP tools is problematic for software development us- ing aspects, because of the semantic differences of different AOP models and the different ways an aspect is weaved with other classes. It is not pos- sible to simply redevelop an existing aspect in order for it to be weaved with other aspects developed with another AOP model.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">In order to address this problem, AspectWerkz has proposed an open ar- chitecture model for an “aspect container” for Java-based AOP tools. The basic idea is to provide a weaver and a container that can weave, deploy and run any aspect no matter how it is implemented and defined. It is the aspect container’s responsibility to resolve the semantic differences be- tween the different aspect models. Such a container can allow aspects de- veloped by different AOP models and tools to coexist in one single run- time environment. Currently, AspectWerkz has implemented an extension model for aspects that implements the AOP Alliance interfaces, Spring AOP and AspectJ.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a192">Annotations and AOP</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">The join point model can utilize the properties of program elements such as method signatures to capture join points. However it cannot capture join points needed to implement certain crosscutting concerns, such as transac- tion and role-based security, as there is no information in an element’s name or signature to suggest the need for transactional or authorization re- lated behaviors. Adding metadata to AOP systems is therefore necessary to provide a solution for such cases.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">In the programming language context, metadata known as “annota- tions”<i>, </i>capture additional information attached to program elements such as methods, fields, classes, and packages. The J2SE v5.0 and the C#/VB</p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">.NET languages provide language standards to attach annotations to pro- gram elements. A good example of applying annotations is declaring transactions in the J2EE and .NET frameworks. For example, the follow- ing annotation declares the transaction attribute of the method <i>update() </i>in EJB 3.0:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-left: 25pt;text-indent: 0pt;text-align: left;">@TransactionAttribute</p><p class="s37" style="padding-top: 1pt;padding-left: 35pt;text-indent: 22pt;line-height: 112%;text-align: left;">(TransactionAttributeType.REQUIRED) public void update (double newvalue)</p><p class="s37" style="padding-left: 58pt;text-indent: 0pt;text-align: left;">throws Exception</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Annotations are widely supported by AOP tools, such as JBoss AOP and AspectWerkz. Using AspectWerkz, aspects can be utilized to imple- ment EJB 3.0 annotations. For example, a pointcut must be defined to match any method in a class that is annotated with the <span class="s39">javax.transaction.TransactionAttribute </span>annotation. Such a pointcut can be expressed as</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-left: 38pt;text-indent: 0pt;text-align: left;">execution(@javax.ejb.TransactionAttribute * *.*(..))</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">An advice that encapsulates the transaction management according to the annotated transaction attribute can be implemented as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="281" height="30" alt="image" src="Image_242.png"/></span></p><p class="s37" style="padding-top: 5pt;padding-left: 140pt;text-indent: 0pt;text-align: left;">The aspect instance is per JVM</p><p class="s37" style="padding-top: 2pt;padding-left: 27pt;text-indent: 0pt;line-height: 112%;text-align: left;">@Aspect(&quot;perJVM&quot;) public abstract</p><p class="s37" style="padding-left: 70pt;text-indent: 0pt;text-align: left;">class TransactionAttributeAspect {</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-left: 27pt;text-indent: 0pt;text-align: left;"><a href="mailto:execution(@javax.ejb.TransactionAttribute" class="s87" target="_blank">@Expression(&quot;</a>execution(@javax.ejb.TransactionAttribute *</p><p class="s37" style="padding-top: 1pt;padding-left: 27pt;text-indent: 0pt;text-align: left;">*.*(..))&quot;)</p><p class="s37" style="padding-top: 1pt;padding-left: 47pt;text-indent: 0pt;text-align: left;">Pointcut transactedMethods;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="308" height="38" alt="image" src="Image_243.png"/></span></p><p class="s37" style="padding-left: 146pt;text-indent: 0pt;line-height: 107%;text-align: left;">The pointcut that picks out all transacted methods</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></li><li style="padding-top: 5pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a193">Performance Monitoring of ICDE with AspectWerkz</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">When running in production, it is desirable to be able to inject performance monitoring code into ICDE components without recompiling the complete application. Using aspects, this can be achieved using LTW. Hence the</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">ICDE team starts to design an aspect-based architecture using Aspect- Werkz as shown in Fig. 69.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s88" style="padding-top: 7pt;padding-left: 10pt;text-indent: 0pt;text-align: center;">ICDE API</p><p class="s88" style="padding-top: 1pt;padding-left: 10pt;text-indent: 0pt;text-align: center;">Client</p><p style="text-indent: 0pt;text-align: left;"/><p class="s88" style="padding-top: 7pt;padding-left: 86pt;text-indent: 36pt;line-height: 257%;text-align: left;">API call Event notification</p><p class="s88" style="padding-left: 81pt;text-indent: 0pt;line-height: 7pt;text-align: center;">StartAPICall</p><p class="s88" style="padding-top: 1pt;padding-left: 81pt;text-indent: 0pt;text-align: center;">Aspect</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s88" style="padding-left: 21pt;text-indent: 0pt;line-height: 117%;text-align: center;">ICDE Data Collection Client</p><p style="text-indent: 0pt;text-align: left;"><span><img width="374" height="422" alt="image" src="Image_244.png"/></span></p><p class="s88" style="padding-top: 3pt;padding-left: 48pt;text-indent: -3pt;line-height: 27pt;text-align: left;">Write user event Get perfStats</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s88" style="padding-left: 61pt;text-indent: 0pt;text-align: left;">ICDE API</p><p class="s88" style="padding-top: 1pt;padding-left: 63pt;text-indent: 0pt;text-align: left;">Services</p><p class="s88" style="padding-top: 6pt;padding-left: 39pt;text-indent: 0pt;text-align: left;">J2EE Server</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s88" style="padding-left: 21pt;text-indent: 0pt;text-align: center;">JMS</p><p style="text-indent: 0pt;text-align: left;"/><p class="s88" style="padding-left: 37pt;text-indent: 0pt;line-height: 117%;text-align: center;">Data Collection Services</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s88" style="padding-left: 55pt;text-indent: 5pt;line-height: 117%;text-align: left;">Instrument ServiceAspect</p><p class="s88" style="padding-top: 5pt;padding-left: 45pt;text-indent: 0pt;text-align: left;">Data query</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s88" style="padding-left: 18pt;text-indent: 0pt;text-align: left;">P6Spy</p><p style="text-indent: 0pt;text-align: left;"/><p class="s88" style="padding-left: 19pt;text-indent: 8pt;line-height: 117%;text-align: left;">Instrument Message <span class="s89">Aspect</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s88" style="padding-left: 74pt;text-indent: 0pt;line-height: 117%;text-align: left;">Instrument SQL Aspect</p><p class="s88" style="padding-top: 5pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">Set perfStats</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s88" style="padding-left: 9pt;text-indent: 0pt;text-align: left;">JDBC Driver</p><p style="text-indent: 0pt;text-align: left;"/><p class="s88" style="padding-top: 2pt;padding-left: 6pt;text-indent: 0pt;line-height: 117%;text-align: center;">PerfStats Management Services</p><p style="text-indent: 0pt;text-align: left;"/><p class="s88" style="padding-top: 5pt;padding-left: 21pt;text-indent: 0pt;text-align: center;">Set perfStats</p><p class="s88" style="padding-left: 80pt;text-indent: 0pt;text-align: left;">Set perfStats</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s88" style="padding-top: 5pt;padding-bottom: 4pt;padding-left: 89pt;text-indent: 0pt;text-align: center;">JDBC call</p><p class="s88" style="padding-top: 7pt;padding-left: 18pt;text-indent: -10pt;line-height: 117%;text-align: left;">ICDE Data Store</p><p style="padding-left: 138pt;text-indent: 0pt;text-align: left;"/><h4 style="padding-top: 7pt;padding-left: 29pt;text-indent: 0pt;text-align: left;">Fig. 69 <span class="s7">ICDE 2.0 aspect-based architecture for ICDE performance monitoring</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">In this architecture, the performance instrumentation for different ICDE components is encapsulated in a dedicated aspect that can be injected into the ICDE application. This is necessary because the metrics that must be recorded are different in nature. For example, the performance monitoring of a JMS server measures both the message processing rate and the mes-</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">sage size, while the instrumentation of SQL statements measures response time.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">In order to instrument the database query response time, an open source component, P6Spy<span class="s14">47</span>, is used. This acts as a layer between the J2EE con- nection pool and the JDBC drivers, capturing the SQL statements issued by J2EE application. An aspect must also be applied to this component to retrieve the SQL statement information.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s86" style="padding-left: 20pt;text-indent: 0pt;text-align: left;">public class InstrumentSQLAspect</p><p class="s86" style="padding-top: 1pt;padding-left: 20pt;text-indent: 0pt;text-align: left;">{</p><p class="s86" style="padding-top: 1pt;padding-left: 73pt;text-indent: -39pt;line-height: 118%;text-align: left;">public Object logJdbcQueries(final JoinPoint joinPoint) throws Throwable</p><p class="s86" style="padding-left: 33pt;text-indent: 0pt;text-align: left;">{</p><p class="s85" style="padding-top: 1pt;padding-left: 46pt;text-indent: 0pt;text-align: left;">//access Runtime Type Information</p><p class="s86" style="padding-top: 1pt;padding-left: 46pt;text-indent: 0pt;line-height: 118%;text-align: left;">MethodRtti rtti = (MethodRtti)joinPoint.getRtti(); String query = (String) rtti.getParameterValues()[0]; Long startTime = System.currentTimeMillis();</p><p class="s85" style="padding-left: 46pt;text-indent: 0pt;text-align: left;">//execute the method</p><p class="s86" style="padding-top: 1pt;padding-left: 46pt;text-indent: 0pt;line-height: 117%;text-align: left;">final Object result = joinPoint.proceed(); Long endTime = System.currentTimeMillis();</p><p class="s85" style="padding-left: 46pt;text-indent: 0pt;line-height: 118%;text-align: left;">// log the timing information for this SQL statement execution <span style=" color: #000;">perfStatsManager.log(query,&quot;Statement&quot;,endTime-startTime); return result;</span></p><p class="s86" style="padding-left: 33pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s86" style="padding-left: 33pt;text-indent: 0pt;line-height: 118%;text-align: left;">public Object logValuesInPreparedStatement(final JoinPoint joinPoint) throws Throwable</p><p class="s86" style="padding-left: 33pt;text-indent: 0pt;text-align: left;">{</p><p class="s86" style="padding-top: 1pt;padding-left: 46pt;text-indent: 0pt;line-height: 117%;text-align: left;">MethodRtti rtti = (MethodRtti)joinPoint.getRtti(); Integer index = (Integer)rtti.getParameterValues()[0]; Object value = rtti.getParamterValues()[1];</p><p class="s86" style="padding-left: 46pt;text-indent: 0pt;text-align: left;">String query = “index=”+ index.intValue()+ “ value=”</p><p class="s86" style="padding-top: 1pt;padding-left: 44pt;text-indent: 0pt;text-align: center;">+ value.toString();</p><p class="s86" style="padding-top: 1pt;padding-left: 46pt;text-indent: 0pt;text-align: left;">Long startTime = System.currentTimeMillis();</p><p class="s85" style="padding-top: 1pt;padding-left: 46pt;text-indent: 0pt;text-align: left;">//execute the method</p><p class="s86" style="padding-top: 1pt;padding-left: 46pt;text-indent: 0pt;line-height: 117%;text-align: left;">Final Object result = joinPoint.proceed(); Long endTime = System.currentTimeMillis();</p><p class="s85" style="padding-left: 46pt;text-indent: 0pt;text-align: left;">//log the timing information for this PreparedStatement</p><p class="s85" style="padding-top: 1pt;padding-left: 46pt;text-indent: 0pt;line-height: 118%;text-align: left;">//execution <span style=" color: #000;">perfStatsManager.log(query,”PreparedStatement”,endTime- startTime);</span></p><p class="s86" style="padding-left: 46pt;text-indent: 0pt;line-height: 7pt;text-align: left;">return result;</p><p class="s86" style="padding-top: 1pt;padding-left: 33pt;text-indent: 0pt;text-align: left;">}</p><p class="s86" style="padding-top: 1pt;padding-left: 20pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 29pt;text-indent: 0pt;text-align: center;">Fig. 70 <span class="s7">SQL statement instrumentation aspect implementation</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">Once all the performance data is captured, there are a variety of options to make it available for subsequent processing. It can be simply written to log file periodically or loaded into a database. A more flexible and effi-</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_245.png"/></span></p><p style="padding-top: 4pt;padding-left: 14pt;text-indent: 0pt;text-align: left;"><a href="http://www.p6spy.com/" style=" color: black; font-family:&quot;Times New Roman&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 3pt;" target="_blank">47 </a><a href="http://www.p6spy.com/" target="_blank">http://www.p6spy.com/</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">cient solution to provide direct access to live system performance data is to use a standard protocol such as Java Management eXtension (JMX)<span class="s14">48 </span>that existing J2EE management tools can display and track.</p><p style="padding-left: 15pt;text-indent: 10pt;line-height: 106%;text-align: justify;">To illustrate the design, implementation and deployment of Aspect- Werkz aspects, we’ll describe in detail the <span class="s39">InstrumentSQLAspect</span>. To measure SQL statement response times, we need to locate all method calls where a <span class="s39">java.sql.Statement </span>is created and inject timing code imme- diately before and after the SQL query is executed. We also have to trace all method calls where a value is set in a <span class="s39">java.sql.PreparedStatement </span>instance. The resulting code snippet for the <span class="s39">InstrumentSQLAspect </span>is illustrated in Fig. 70.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The next step is to compile the aspects as a normal Java class with the AspectWerkz libraries. The weaving rules for binding the advice to the pointcut is specified in the <i>aop.xml </i>file as shown in Fig. 71.<span class="s14">49</span></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">LTW for AspectWerkz is achieved by loading the AspectWerkz library for the JDK v5. The ICDE application can then be booted normally and the aspect code will be weaved in at load-time</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">In summary, using AOP techniques, instrumentation code can be sepa- rated and isolated into aspects. The execution of the aspects can be weaved into the system at runtime without the need to recompile the whole system.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s86" style="padding-left: 20pt;text-indent: 0pt;text-align: left;">&lt;aspectwerkz&gt;</p><p class="s86" style="padding-left: 33pt;text-indent: 0pt;text-align: left;">&lt;system id=&quot;ICDE&quot;&gt;</p><p class="s86" style="padding-top: 1pt;padding-left: 39pt;text-indent: 0pt;text-align: left;">&lt;package name=&quot;com.icde.perf.aop&quot;&gt;</p><p class="s86" style="padding-left: 71pt;text-indent: -25pt;line-height: 112%;text-align: left;">&lt;aspect class=&quot;InstrumentSQLAspect&quot; deployment-model=&quot;perThread&quot;&gt;</p><p class="s86" style="padding-left: 58pt;text-indent: 0pt;text-align: left;">&lt;pointcut name=&quot;Statement&quot; expression=</p><p class="s86" style="padding-left: 71pt;text-indent: 0pt;text-align: left;">&quot;execution(* java.sql.Connection+.prepare*(..))&quot; /&gt;</p><p class="s86" style="padding-top: 1pt;padding-left: 71pt;text-indent: -12pt;line-height: 112%;text-align: left;">&lt;pointcut name=&quot;PreparedStatement&quot; expression= &quot;execution(void java.sql.PreparedStatement+.set*(..))&quot; /&gt;</p><p class="s86" style="padding-left: 71pt;text-indent: -12pt;line-height: 112%;text-align: left;">&lt;advice name=&quot;logJdbcQueries(final JoinPoint joinPoint)&quot; type=&quot;around&quot; bind-to=&quot;Statement&quot; /&gt;</p><p class="s86" style="padding-left: 71pt;text-indent: -12pt;line-height: 112%;text-align: left;">&lt;advice name=&quot;logValuesInPreparedStatement(final JoinPoint joinPoint)&quot; type=&quot;around&quot; bind-to=&quot;PreparedStatement&quot; /&gt;</p><p class="s86" style="padding-left: 46pt;text-indent: 0pt;text-align: left;">&lt;/aspect&gt;</p><p class="s86" style="padding-top: 1pt;padding-left: 39pt;text-indent: 0pt;text-align: left;">&lt;/package&gt;</p><p class="s86" style="padding-left: 33pt;text-indent: 0pt;text-align: left;">&lt;/system&gt;</p><p class="s86" style="padding-left: 20pt;text-indent: 0pt;text-align: left;">&lt;/aspectwerkz&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 63pt;text-indent: 0pt;text-align: left;">Fig. 71. <span class="s39">InstrumentSQLAspect </span><span class="s7">XML definition file</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_246.png"/></span></p><p style="padding-top: 4pt;padding-left: 15pt;text-indent: 0pt;text-align: left;"><a href="http://java.sun.com/products/JavaManagement/" style=" color: black; font-family:&quot;Times New Roman&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 3pt;" target="_blank">48 </a><a href="http://java.sun.com/products/JavaManagement/" target="_blank">http://java.sun.com/products/JavaManagement/</a></p><p class="s7" style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><span class="s14">49 </span>Note that as J2EE containers are multi-threaded, and individual requests are handled by threads held in a thread pool, the aspect is deployed in <i>perThread </i>mode.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 5pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a194">Conclusions</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">AOP was originally introduced as a programming mechanism to encapsu- late crosscutting concerns. Its success has seen aspect-oriented techniques become used in various application domains, such as middleware frame- works. It has also spawned modeling and design techniques which influ- ence the architecture of a software system built using aspect-oriented tech- niques.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">AOP brings both opportunities and challenges for the software architect. In limited domains, AOP has demonstrated a great deal of promise in re- ducing software complexity through providing a clear separation and modularization of concerns. Potentially fruitful areas for the future include further integrating AOP and middleware to increase the flexibility of con- figuring middleware platforms. Even in this example though, challenging problems remain, namely coordinating multiple aspects to deal with con- flicts, as crosscutting concerns are not completely orthogonal.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Aspect oriented design and implementation requires the support of effi- cient AOP tools. With such tools, on-going research and development is still attempting to provide better solutions in several areas, namely:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Maintenance<span class="p">: Designing quality aspect-oriented systems means paying attention to defining robust pointcuts and sensibly using aspect inheri- tance. Pointcuts that capture more join points than expected or miss some desired join points can lead to brittle implementations as the sys- tem evolves. Consequently an efficient debugging tool is needed to de- tect the faulty join point and the pointcut implementation.</span></h3></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Performance: <span class="p">Using AOP introduces extra performance overheads in applications, both during the weaving process and potentially at run- time. The overhead of AOP needs to be minimized to provide good build and runtime performance.</span></h3></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Integration: <span class="p">The reusability of aspects hasn’t been explored suffi- ciently, so that designers could utilize libraries of aspects instead of de- veloping each aspect from scratch. As each AOP tool only provides as- pect implementations specific to its own AOP model, an aspect implemented by one AOP model can not be easily weaved into a system with aspects using a different AOP model. This is potentially a serious hurdle to the adoption of aspect-orientation in a wide range of software applications.</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">In summary, aspect-oriented techniques are still developing and matur- ing. Only limited use-cases exists in which AOP-based mechanisms have</p><ol id="l287"><ol id="l288"><li style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 240pt;text-indent: -21pt;text-align: left;"><p class="s7" style="display: inline;">Futhur Reading 195</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_247.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">proven useful. These include security, logging, monitoring, transactions and caching. Whether aspect-orientation will become a major design and development paradigm is very much open to debate. However it seems in- evitable based on current adoption that aspect-oriented techniques will gradually be infused into the software engineering mainstream.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h2 style="padding-top: 10pt;padding-left: 15pt;text-indent: 0pt;text-align: left;"><a name="a195">10.6 Futhur Reading</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">A good comparison of four leading Java AOP tools, namely AspectJ<i>, </i>As- pectWerkz<i>, </i>JBoss AOP and Spring AOP, in terms of their language mechanisms and development environments is:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;">M. Kersten, <i>AOP Tools Comparison</i><a href="http://www-128.ibm.com/developerworks/library/j-aopwork1/" class="s13" target="_blank">. IBM developerWorks, http://www-128.ibm.com/developerworks/library/j-aopwork1/</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: left;"><a href="http://aosd.net/wiki/index.php?title=Main_Page" class="s13" target="_blank">A source of wide-ranging information on aspects is maintained at the AOSD wiki at http://aosd.net/wiki/index.php?title=Main_Page</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;line-height: 206%;text-align: left;">The home page for <i>Aspectwerkz </i><a href="http://aspectwerkz.codehaus.org/" class="s13" target="_blank">is </a>http://aspectwerkz.codehaus.org/ A good practical guide to AspectJ is:</p><ol id="l289"><li style="padding-left: 15pt;text-indent: 10pt;text-align: left;"><p style="display: inline;">Laddad, AspectJ in Action: Practical Aspect-Oriented Programming. Manning 2003</p></li></ol></li></ol><li style="padding-top: 4pt;padding-left: 35pt;text-indent: -20pt;text-align: left;"><h1 style="display: inline;"><a name="a196">Model-Driven Architecture</a></h1></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;">Liming Zhu</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l290"><ol id="l291"><li style="padding-top: 7pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a197">Model-Driven Development for ICDE</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">One problem lurking at the back of the ICDE development team’s mind is related to capacity planning for new ICDE installations. When an ICDE installation supports multiple users, the request load will become high, and the hardware that the platform runs on needs to be powerful enough to support this request load. If the hardware becomes saturated, it will not be able to process all user generated events, and important data may be lost. The situation is exacerbated by the following issues:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Different application domains and different individual installations within each domain will use ICDE in different ways, and hence generate different request loads per user.</p></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Different installations will deploy ICDE on different hardware plat- forms, each capable of supporting a different number of users.</p></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">The ICDE platform will be ported to different J2EE application servers, and each of these has different performance characteristics.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">All of these issues relate to the software engineering activity of capacity planning. Capacity planning is concerned with how large, in terms of hardware and software resources, an installation must be to support its ex- pected request load. Mathematical modeling techniques can sometimes be used to predict a platform’s capacity for standardized components and networks<span class="s14">50</span>. But more typically, benchmark tests are executed on a proto- type or complete application to test and measure how the combined hard- ware/software deployment performs.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_248.png"/></span></p><p class="s14" style="padding-top: 4pt;padding-left: 26pt;text-indent: -10pt;text-align: left;">50 <span class="s7">For example, Microsoft’s Capacity Manager and its support for Exchange de- ployments.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">The only realistic way the ICDE team could anticipate to carry out ca- pacity planning was to execute a test load on specific deployment plat- forms. For each installation, the team would need to:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Install ICDE on the target hardware platform, or one that is as close as possible in specification to the expected deployment platform.</p></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Develop sample test requests generated by software <i>robots </i>to generate a load on the platform, and measure how it responds. The test requests should reflect the expected usage profile of the users operating on that ICDE installation.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">So, for each installation, a set of tests must be developed, each of which will execute a series of requests on the ICDE platform and measure the re- sponse time and throughput. This is shown in Fig. 72.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="91" height="98" alt="image" src="Image_249.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="91" height="98" alt="image" src="Image_250.png"/></span></p><p class="s6" style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;line-height: 107%;text-align: left;">Site specific test data</p><p style="text-indent: 0pt;text-align: left;"/><p class="s6" style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;line-height: 106%;text-align: justify;">Site specific request pro- file</p><p style="text-indent: 0pt;text-align: left;"/><ol id="l292"><ol id="l293"><ol id="l294"><li style="padding-top: 6pt;padding-left: 62pt;text-indent: -13pt;line-height: 13pt;text-align: left;"><p class="s90" style="display: inline;">define site</p><p class="s90" style="padding-left: 61pt;text-indent: 0pt;line-height: 13pt;text-align: left;">specific test profile</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-left: 23pt;text-indent: -13pt;line-height: 108%;text-align: left;">Load testing robot</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-left: 11pt;text-indent: 0pt;text-align: center;">ICDE</p><p class="s7" style="padding-left: 11pt;text-indent: 0pt;text-align: center;">Installation</p><p style="text-indent: 0pt;text-align: left;"/></li><li style="padding-bottom: 3pt;padding-left: 141pt;text-indent: -13pt;text-align: left;"><p class="s90" style="display: inline;">execute tests</p><p style="padding-left: 116pt;text-indent: 0pt;line-height: 6pt;text-align: left;"><span><img width="120" height="8" alt="image" src="Image_251.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="99" height="76" alt="image" src="Image_252.png"/></span></p></li><li style="padding-top: 2pt;padding-left: 96pt;text-indent: -13pt;text-align: left;"><p class="s90" style="display: inline;">gather /analyze results</p><p class="s6" style="padding-top: 5pt;padding-left: 4pt;text-indent: 0pt;line-height: 107%;text-align: left;">Performance results</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-top: 5pt;padding-left: 77pt;text-indent: 0pt;text-align: left;">Fig. 72. <span class="s7">Capacity planning for ICDE installations</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Not surprisingly, the ICDE team were extremely interested in making this whole capacity planning exercise as efficient and painless as possible. This would mean minimizing the amount of site-specific development. So for example, instead of writing a test robot specific for every installation, they would like to define the test load and test data externally to the code, and somehow input this into the robot to interpret. They would also like the performance results from test runs to be produced and collated auto- matically as graphs for easy analysis.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 10pt;text-align: justify;">To achieve this, the team decided to exploit model-driven architecture methods and supporting development technologies. Model-driven ap- proaches encourage the components of a software system to be described in UML models. These models are then input into code generators that automatically produce executable code corresponding to the model. The team hoped they could develop a single model of an ICDE test robot. Then, by simply changing parameters in the model, they could generate an installation-specific load test at the press of a button.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">This chapter describes the essential elements of model-driven architec- ture approaches. It then shows how the ICDE team could use model-driven techniques to automate the development, deployment and results gathering of an ICDE installation for efficient capacity planning purposes.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol><li style="padding-top: 10pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a198">What is MDA</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">One recurring theme in the evolution of software engineering is the on- going use of more abstract formal languages for modelling solutions. In much mainstream software development, abstract descriptions, for exam- ple in Java or C#, are transformed by tools into executable forms. Devel- oping solutions in abstract notations increases productivity and reduces er- rors because the translation from abstract to executable forms is automated by translation tools like compilers.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Of course, few people believe the nirvana of abstract programming lan- guages is Java, C# or any of their modern contemporaries. In fact, the his- tory of programming languages research is strewn with many proposals for new development languages, some general-purpose, some restricted to nar- row application domains. A small minority ever see the light of day in “developerland”. This doesn’t stop the search from continuing however.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: right;">Model-driven architecture (MDA) is a recent technology that leads the pack in terms of more abstract specification and development tools (and use of new acronyms) aimed at the IT market. MDA is defined by the OMG<span class="s14">51 </span>as “<i>an approach to IT system specification that separates the specification of functionality from the specification of the implementation</i>”. As the name suggests, an “application model” is the driving force be- hind MDA. A model in MDA is a formal specification of the function, structure and/or behaviour of an application or system. In the MDA ap- proach, an IT system is first analysed and specified as a “Computation In- dependent Model” (CIM), also known as a domain model. The CIM fo-</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_253.png"/></span></p><p class="s14" style="padding-top: 4pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">51 <a href="http://www.omg.org/" class="a" target="_blank">Object Management Group: </a><a href="http://www.omg.org/" target="_blank">www.omg.org</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">cuses on the environment and requirements of the system. The computa- tional and implementation details of the system are hidden at this level of description, or are yet to be determined.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 18pt;text-indent: 0pt;text-align: left;"><span><img width="403" height="59" alt="image" src="Image_254.gif"/></span></p><h4 style="padding-top: 5pt;padding-left: 96pt;text-indent: 0pt;text-align: left;">Fig. 73. <span class="s7">Model transformation in MDA</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: right;">As Fig. 73 shows, the CIM is transformed into a “Platform Independent Model” (PIM) which contains computational information for the applica- tion, but no information specific to the underlying platform technology that will be used to eventually implement the PIM. Finally, a PIM is trans- formed into a “Platform Specific Model” (PSM), which includes detailed descriptions and elements specific to the targeted implementation platform. A “‘platform” in MDA is defined as any set of subsystems and tech- nologies that provide a coherent set of functionalities through interfaces and specified usage patterns. An MDA platform is therefore a very broad concept. Platforms often refer to technology specific sets of subsystems which are defined by a standard, such as CORBA or J2EE. Platforms can also refer to a vendor specific platform which is an implementation of a standard, like BEA’s WebLogic J2EE platform, or a proprietary technol-</p><p style="padding-left: 14pt;text-indent: 0pt;text-align: left;">ogy like the Microsoft .NET platform.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">MDA is supported by a series of OMG standards, including the UML, MOF (Meta-Object Facility), XMI (XML Metadata Interchange), and CWM (Common Warehouse Metamodel). MDA also includes guidelines and evolving supporting standards on model transformation and pervasive services. The standards in MDA collectively define how a system can be developed following a model driven approach and using MDA compatible tools. Each MDA standard has its unique role in the overall MDA picture.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">In MDA, models need to be specified by a modelling language. This can range from generic modelling languages applicable to multiple domains (e.g. UML) to a domain specific modelling language. The MOF provides facilities to specify any modelling language using MOF’s metamodeling facilities, as depicted in Fig. 74.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The MOF also provides mechanisms to determine how any model de- fined in a modelling language can be serialized into XML documents or be represented by programmable interfaces. Any existing modelling language can be made MDA compatible by creating a MOF representation of the language. There are many debates on MOF’s expressiveness and complex-</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">ity for specifying some languages. The OMG has recognized these limita- tions and is actively working to address them in future versions.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;"><span><img width="417" height="281" alt="image" src="Image_255.gif"/></span></p><h4 style="padding-top: 5pt;padding-left: 106pt;text-indent: 0pt;text-align: left;">Fig. 74. <span class="s7">The role of MOF in MDA</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The UML and CWM are two relatively generic MOF-defined modelling languages and are included in the MDA standards package. UML focuses on object modelling and CWM focuses on data modelling.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The XMI standard in MDA is a mapping which can be used to define how an XML schema and related XML serialization facilities can be de- rived from a modelling language metamodel specified using the MOF. For example, the OMG has applied XMI to the UML metamodel to come up with an XML schema for representing UML models. Consequently, the XML schema for UML models can be used by UML modelling tool ven- dors to interchange UML models.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">So, from business domain models, to analysis models, to design models and finally code models, MDA principles cover every phase of the soft- ware development process, artefacts and tooling. In the next sections, we will discuss the overall benefits of MDA and give some examples.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 5pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a199">Why MDA?</a></h2></li></ol></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: left;">Models play the central role in MDA. But why exactly do we need mod- els? Here’s the answer.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Models provide abstractions of a system that allow various stakeholders to reason about the system from different viewpoints and abstraction lev- els. Models can be used in many ways, for example, to predict the qualities (e.g. performance) of a system, validate designs against requirements, and to communicate system characteristics to business analysts, architects and software engineers. And importantly in the MDA world, they can be used as the blueprint for system implementation.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The three primary goals of MDA are portability, interoperability and re- usability, achieved through architectural separation of concerns. Critical design issues concerning the CIM, PIM and PSM are very different in na- ture and can evolve independently of each other. Multiple CIMs, PIMs and PSMs can exist for one application, reflecting different refinement levels and viewpoints. Let’s see how these primary goals are achieved in MDA.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;"><span><img width="390" height="307" alt="image" src="Image_256.gif"/></span></p><h4 style="padding-top: 5pt;padding-left: 111pt;text-indent: 0pt;text-align: left;">Fig. 75<span class="s7">. MDA model mappings</span></h4><p class="s7" style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 231pt;text-indent: 0pt;text-align: left;">11.3 Why MDA? 203</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_257.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l295"><ol id="l296"><ol id="l297"><li style="padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a200">Portability</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">Portability is achieved by model separation and transformation. High level models do not contain low level platform and technical details. As Fig. 75 illustrates, when the underlying platforms change or evolve, the upper level models can be transformed to a new platform directly, without any remodelling.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Portability is also achieved by making models moveable across different tool environments. The MOF and XMI standards allow a UML model to be serialized into XML documents that can be imported into a new tool for different modelling and analysis purposes.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a201">Interoperability</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">There is rarely an application which does not communicate with other ap- plications. Enterprise level applications particularly need to communicate across internal and external organizational boundaries in a heterogenous and distributed manner. Most of the time, you have limited control over the other systems you need to interoperate with.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Using MDA, interoperability is achieved through horizontal model mapping and interaction (see Fig. 76). Early versions of MDA guidelines refer to integration as the single biggest goal for MDA, which aims to im- prove interoperability in two ways:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></ol></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">The interoperability problem can be seen as a problem of horizontal model mapping and interaction. For simplification, let’s suppose we have two sets of CIM/PIM/PSM for the two systems, as shown in Fig.</p><p style="padding-left: 26pt;text-indent: 0pt;text-align: justify;">76. The interaction between higher level CIMs and PSMs can be first modelled and analysed. These cross model mappings and interactions then can be mapped to detailed communication protocols or shared da- tabases supported by the underlying models. Since explicit vertical transformations exist between models in each system, the elements in- volved in the high level mapping can be easily traced or even automati- cally translated into lower level elements.</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">The same problem can also be seen as a problem of refining a single high level model into multiple models operating across two or more platforms. Different parts of the higher level models are refined into models specific to different platforms. Associations in the original mod- els are refined into communication channels or shared databases be- tween platform specific models.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: left;">With unified metamodeling facilities and explicit model transformation tools, these two approaches become feasible in practice.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;text-align: left;"><span><img width="387" height="350" alt="image" src="Image_258.gif"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 67pt;text-indent: 0pt;text-align: left;">Fig. 76. <span class="s7">Horizontal model mapping for interoperability</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l298"><ol id="l299"><ol id="l300"><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a202">Reusability</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">Reusability is the key to improving productivity and quality. MDA en- courages reuse of models and best practices in designing applications, es- pecially in creating families of applications as in software product lines (see Chap. 9). MDA supports software product line approaches with in- creasing levels of automation. For example, the PIM is intended for reuse by mapping to different PSMs that a product line supports, and an MDA platform is designed for reuse as a target for multiple applications in a product line.</p><p class="s7" style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 156pt;text-indent: 0pt;text-align: left;">11.4 State-of-Art Practices and Tools 205</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_259.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol><li style="padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a203">State-of-Art Practices and Tools</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">Although it is possible to practice parts of the MDA without tool support, this is only recommended for the brave and dedicated. A large portion of the standards is aimed at tooling and tool interoperation. Some standards are meant to be mainly machine readable, and not for general human con- sumption.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Since MDA standards, especially the guidelines, are intentionally sug- gestive and non-prescriptive, there has been a plethora of tools claming to support MDA, all with very different features and capabilities. Some loosely defined parts of MDA have caused problems in terms of tool inter- operability and development artefact reusability. However, the correct bal- ance between prescriptive and non-prescriptive standards is hard to deter- mine <i>a priori </i>and requires real world inputs from industry users.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">We’ll now discuss some promising tool examples from the J2EE/Java platform community because of its relatively wide adoption of MDA. The</p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">.NET platform is also moving towards model driven approaches through its own Domain Specific Language (DSL) standard. This is not compatible with MDA although third party vendors have successfully developed MDA tools for .NET Platform.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Although the tools discussed in the following have their roots in J2EE/Java technologies, all here have the capability to support other plat- forms. The architecture and infrastructure services of these tools all allow extensions and “cartridges” to be built to support other platforms. Some of them simply have out of the box support for J2EE related technologies.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l301"><li style="padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a204">AndroMDA</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">AndroMDA is an open source MDA framework. It has a plug-in architec- ture in which platforms and supporting components can be swapped in and out at any time. It heavily exploits existing open source projects for both platform specific purposes (e.g. XDoclet for EJB) and general infrastruc- ture services (Apache Velocity for transformation templating).</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">In AndroMDA, developers can extend the existing modelling language through facilities known as “metafacades”. The extension is reflected as a UML profile in modelling libraries and templates in transformation tools. AndroMDA’s current focus is to generate as much code as possible from a marked PIM using UML tagged values, without having an explicit PSM file (it exists only in memory). Hence it does not provide opportunities for PSM inspection and bi-directional manipulation between PSM and PIM.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">The reason for this is mainly because of the trade off between the com- plexity of bi-directional PIM/PSM traceability and the benefits of main- taining explicit PSMs for different platforms. At the UML stereotype level, this approach usually works well because only general platform independ- ent semantics are involved, but for code generation, markings through tagged values usually includes platform dependent information which pol- lutes PIMs to a certain degree.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a205">ArcStyler</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">Arcstyler is one of the leading commercial tools in the MDA market. It supports the J2EE, and .NET platforms out of the box. In additional to UML profiles, ArcStyler uses its own MDA “marks” as a way to introduce platform dependent information in PIMs without polluting the model with platform level details. Like AndroMDA, ArcStyler supports extensible car- tridges for code generation. The cartridges themselves can also be devel- oped within the ArcStyler environment following MDA principles. The tool also supports model to model transformation through external explicit transformation rule files.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a206">Eclipse Modelling Framework (EMF)</a></p></li></ol></li></ol></ol><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">The inseparable link between MDA models and the code created through code generation requires consistent management of models and code in a single IDE. EMF is the sophisticated metamodeling and modelling frame- work behind the Eclipse IDE. Although EMF was only released publicly as an Eclipse sub-project in 2003, it has a long heritage as a model driven metadata management engine in IBM’s Visual Age IDE.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">EMF is largely MDA compatible with only minor deviations from some of the standards. For example, the base of EMF’s metamodelling language is known as Ecore, which is close but not identical to the Essential MOF (EMOF) in MOF 2.0. EMF can usually load an EMOF constructed meta- model, and mappings and transformations have been developed between EMOF and Ecore.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">EMF comes with standard mechanisms for building metamodels and persisting them as programmable interfaces, code and XML (see Fig. 77). A model editor framework and code generation framework are also pro- vided. However, EMF does not include any popular platform support out of the box, and it didn’t initially impress the MDA community as a full fledged ready-to-use MDA tool for platform-based distributed systems.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 10pt;text-align: justify;">However, EMF’s tight integration with the Eclipse IDE and the capabil- ity of leveraging the Eclipse architecture and common infrastructures sup- ports the integration of disparate metadata across multiple tools cooperat- ing in a common Eclipse-based ecosystem. This raises the level of tool interoperability while being largely compatible with MDA practices.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">This is also an example that demonstrates that model driven principles and standards go beyond the modelling of the system, and include model- ling of all aspects of system construction. With little fanfare, IBM has mi- grated many of its development tools to Eclipse and manages their meta- data via EMF. Third party vendors are also actively developing EMF based tools.</p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;"><span><img width="391" height="181" alt="image" src="Image_260.gif"/></span></p><h4 style="padding-top: 4pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">Fig. 77. <span class="s7">The Eclipse Modeling Framework</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Due to the ongoing standardization of model transformation and the sig- nificant production gains from code generation, most existing tools focus on code generation from models. The support for model to model trans- formation is usually lacking. This results in primitive support for bi- directional CIM-PIM-PSM transformation. Overall though, the MDA mar- ket is maturing with both industry strength commercial and open source tools emerging.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l302"><ol id="l303"><li style="padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a207">MDA and Software Architecture</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">Most of models in MDA are essentially representations of a software ar- chitecture. In a broad sense, domain models and system models are ab- stractions and different viewpoints of software architecture models. Gener- ated code models possess the characteristics of the architecture models along with implementation details. The code can in fact be used in reverse engineering tools to reconstruct the application architecture.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">A software architecture can be described in an architecture description language (ADL). There have been many ADLs developed in recent years, each with their expressiveness focused on different aspects of software systems and application domains. Many useful ADL features have recently been either absorbed into revisions of the UML, or specified as lightweight (through UML profiles) or heavyweight (MOF) UML extensions. Hence, the UML is used in MDA as an ADL.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Some exotic formalisms and dynamic characteristics of certain ADLs still can not be fully expressed using UML. But the growing MDA/UML expertise pool in industry along with high quality architecture and UML modelling tools outweighs the downside of some modelling limitations in most domains.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l304"><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a208">MDA and Non-Functional Requirements</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">Non-functional requirements (NFRs) are a major concern of software ar- chitecture. NFRs include requirements related to quality attributes like per- formance, modifiability, reusability, interoperability and security. Al- though MDA does not address each individual quality attribute directly, it promotes and helps achieving these quality attributes because:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></li></ol></ol></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">A certain degree of interoperability, reusability and portability is built into all models through the inherent separation of concerns. We have explained how these benefits are achieved in previous sections.</p></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">The MOF and UML profile mechanisms allow UML to be extended for modelling requirements and design elements specifically targeting NFRs. UML profiles for expressing NFRs exist, such as the OMG’s profile for performance, scheduling and time .</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Along with NFR modelling extensions for requirements and design, explicit model mapping rules encourage addressing quality attributes during model transformation.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l305"><ol id="l306"><ol id="l307"><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a209">Model Transformation and Software Architecture</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">A large part of software architecture R&amp;D concerns how to design and validate software architectures that fulfil their requirements and are im- plemented faithfully to the design. One major obstacle in architecture de- sign is the difficulty of designing an architecture that clearly captures how the various aspects of the design satisfy the requirements. For this reason, it can be difficult to systematically validate whether the architecture mod- els fulfil the requirements, as traceability between requirements and design</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">elements is not formalized. This does not help to increase confidence that the architecture is fit for purpose.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">In MDA, all modelling languages are well defined by syntax and seman- tics in a metamodel. The process of transforming from one model (e.g. re- quirements) to another model (e.g. design) is a systematic process, follow- ing explicitly defined transformation rules. This explicitness and potential automation could greatly improve the quality and efficiency of validating an architecture model.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">However, at the time of writing, the transformation process is still sug- gestive from the general MDA guidelines. A model “Query, View and Transformation” (QVT) standard is under development and many propos- als have been submitted for public review, with some of these imple- mented in tool environments. With the adoption of this standard in the near future, it is possible that much of the tacit knowledge, best practices and design patterns used in architecture design and evaluation will be formally codified as various forms of bi-directional transformation rules. These will create rich forms of traceability in architecture models. In fact, transforma- tions based on patterns and best practices have already been implemented in some tools in addition to normal platform specific mappings between PIMs and PSMs.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a210">SOA and MDA</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">A strong industry direction currently is service-oriented architectures (SOA). In SOA, enterprise solutions are viewed as federations of services which communicate using intra-service communication protocols. While the communication protocols have been undergoing standardization and evolved to support both heterogenous platform communications (e.g. XML based SOAP) and pervasive services (WS-* standards), these standards do not address questions of semantic mappings and interactions between the multiple SOA based systems.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Both MDA and SOA try to solve the same interoperability problem but from a totally different perspective and level of abstraction. One is from the general semantic modelling perspective; the other is from the commu- nication protocols and architecture style perspective. Following MDA, it is possible to consistently map high level semantic interactions and mappings between the two systems into lower level model elements and communica- tion channels with necessary supporting services.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">MDA can also increase productivity when the functions of a system need to be exposed as Web services, one of the most common require- ments in SOAs. If the existing system is already modeled following MDA</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">rules, exposing its services is just a matter of applying transformation rules for the Web services platform. For example, in AndroMDA, the “webser- vice” cartridge provides WSDL and WSDD file generation using a simple UML profile. To expose the same business logic as Web services, users only need to change the business process PIM (the ultimate goal is to have no change) and use the “webservice” cartridge.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">In summary, SOA bridges heterogenous systems through communica- tion protocols, pervasive services and an associated service-oriented archi- tecture style. MDA can take care of the seamless high level semantic inte- gration between systems and transforming the system models into lower level SOA based facilities. This synergy between MDA and SOA might mean that the next generation service oriented computing world with a highly federated and flexible architecture is not too far away.</p><p style="padding-left: 25pt;text-indent: 0pt;text-align: left;">SOA and Web Services are described in the next chapter.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a211">Analytical Models are Models too</a></p></li></ol></ol></ol><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">The importance of using analytical models to examine characteristics of a system is often ignored, even in the official MDA guidelines. However, the benefits of having analytical models that are also compatible with MDA are potentially huge.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">According to the MDA definition, a model is defined as a description of a system in a well-defined language. This definition can be applied to a wide range of models. For example, in performance engineering, we can choose to view a system as a queue-based model which has servers and queues. In modifiability analysis, we can choose to view a system as a de- pendency graph model which has nodes to represent conceptual or imple- mentation elements and edges to represent dependency relationships among them.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Currently, these models are usually expressed in their own modelling languages. In order to build an analytical model for an existing UML model, either we have to do the modelling manually or a low level trans- formation must be carried out based on the UML model represented in XML. This is shown in Fig. 78, and has several limitations:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">The transformation relies solely on primitive XML transformation fa- cilities such as XSLT. Debugging and maintenance is difficult with no clear semantic mapping between the two models.</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Without a clear semantic mapping and round trip engineering facilities, it is very hard to place the results gained from the analytical model back into the original UML model context.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 6pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">The original design model will likely be further refined and eventually implemented in code. The analytical model is essentially also a derived model from the same design model. But as the analytical model is not compatible with the MDA standard, it is even harder to cross-reference the analytical model with all the other derived models for validation, calibration and other purposes.</p><p style="padding-left: 19pt;text-indent: 0pt;text-align: left;"><span><img width="405" height="268" alt="image" src="Image_261.gif"/></span></p><h4 style="padding-top: 5pt;padding-left: 66pt;text-indent: 0pt;text-align: left;">Fig. 78. <span class="s7">MDA model transformation for model analysis</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l308"><ol id="l309"><li style="padding-top: 8pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a212">MDA for ICDE Capacity Planning</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">In order to conduct capacity planning for ICDE installations, the ICDE team needed a test suite that could be quickly tailored to define a site- specific test load. It should then be simple and quick to execute the test suite on the intended deployment environment, and gather the performance statistics such as throughput and response time.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">After a close look at their performance testing requirements, the ICDE team found that their needs for rapid development across different J2EE platforms were amenable to applying MDA principles, leveraging its sup- port for portability, interoperability and reusability. The reasons are as fol- lows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></li><li style="padding-top: 6pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">For different J2EE application servers, only the platform related plumb- ing code and deployment details differ. Using MDA, a generic applica- tion model could be used, and platform specific code and plumbing gen- erated from the model. This leverages the portability inherent in MDA.</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">The generation of repetitive plumbing code and deployment configura- tion is supported for many J2EE application servers code by a number of open source MDA projects. These code generation cartridges are usually maintained by a large active user community, and are of high quality. Thus the ability to reuse these cartridges in MDA tools was very attractive.</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">The ICDE team has extensive experience in performance and load test- ing. By refactoring their existing libraries into a reusable framework, much of this can be easily reused across J2EE platforms. However, each site-specific test will require custom code to be created to capture client requirements. Using MDA, these site-specific features can be repre- sented using UML stereotypes and tagged values, as a combination of modelling details and configuration information. From this design de- scription, the MDA code generation cartridge can produce the site- specific features and hook these in with the team’s reusable framework components.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;"><span><img width="414" height="292" alt="image" src="Image_262.gif"/></span></p><h4 style="padding-top: 5pt;padding-left: 39pt;text-indent: 0pt;text-align: left;">Fig. 79. <span class="s7">Overview of ICDE’s MDA-based performance test generator</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 10pt;text-align: justify;">So, the ICDE team designed a UML profile and a tool to automate the generation of complete ICDE performance test suites from a design de- scription. The input is a UML-based set of design diagrams for the bench- mark application, along with a load testing client modeled in a perform- ance tailored version of the UML 2.0 Testing Profile.<span class="s14">52 </span>The output is a deployable complete benchmark suite including monitor- ing/profiling/reporting utilities. Executing the generated benchmark appli- cation produces performance data in analysis friendly formats, along with automatically generated performance graphs. The tool is built on top of an open source extensible framework – AndroMDA. The overall structure of the benchmark generation and related process workflow is presented in the boxed area in Fig. 79.</p><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;"><span><img width="415" height="369" alt="image" src="Image_263.gif"/></span></p><h4 style="padding-top: 6pt;padding-left: 98pt;text-indent: 0pt;text-align: left;">Fig. 80. <span class="s7">ICDE performance test model</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">A snippet of the model is represented in Fig. 80. The load testing entry point is the <i>ICDEAPIService</i>. It is the front end component of the system</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_264.png"/></span></p><p style="padding-top: 4pt;padding-left: 15pt;text-indent: 0pt;text-align: left;"><a href="http://www.omg.org/technology/documents/formal/test_profile.htm" style=" color: black; font-family:&quot;Times New Roman&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 3pt;" target="_blank">52 </a><a href="http://www.omg.org/technology/documents/formal/test_profile.htm" target="_blank">http://www.omg.org/technology/documents/formal/test_profile.htm</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">under test, which is marked with the &lt;&lt;SUT&gt;&gt; stereotype. <i>ICDEAPIClient </i>is the &lt;&lt;TestContext&gt;&gt; which consists of a number of test cases. Only the default <i>loadTestAll() </i>test case is included with its default generated im- plementation.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">All the test data to be used for calling ICDE APIs is modeled in the <i>TrxnData </i>class. The <i>TranDeck </i>class contains values that configure the transaction mix for a test using tagged values, shown in Fig. 80. For exam- ple, calls to the ICDE API <i>queryData </i>represents 25% of all transactions and <i>writeData </i>represents 55% for the test defined in this model. This data is used to randomly generate the test data which simulates the real work load of the ICDE installation under test.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">In Fig. 81, example test outputs are depicted for the response time dis- tribution for two different application servers under a workload of 150 concurrent clients.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: left;"><span><img width="198" height="146" alt="image" src="Image_265.gif"/></span> <span><img width="200" height="142" alt="image" src="Image_266.gif"/></span></p><h4 style="padding-top: 5pt;padding-left: 97pt;text-indent: 0pt;text-align: left;">Fig. 81. <span class="s7">Example response time results</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: left;">The amount of time saved using MDA can be considerable. Commu- nity-maintained technology cartridges automatically generate repetitive and error prone plumbing code, and the best practices inherited through us- ing the cartridges improve the quality of the performance testing software. Above all, MDA principles raise the abstraction level of the test suite de- velopment, making it easy and cheap to modify and extend.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: left;">For more information on this work, please refer to the MDABench ref- erence at the end of the chapter.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l310"><ol id="l311"><li style="padding-top: 10pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a213">Summary and Further Reading</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">MDA, as the industry wide standardization of model driven software de- velopment, is proving successful and is continuing to evolve. MDA im- pacts on software architecture practices, as it requires the architecture team</p><p class="s7" style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 161pt;text-indent: 0pt;text-align: left;">11.7 Summary and Further Reading 215</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_267.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">to create formal models of their application using rigorously defined mod- eling languages and supporting tools. This essentially represents raising the level of abstraction for architecture models. The software industry has been raising abstraction levels in software development (e.g. from machine code to assembly language to 3GLs to object-oriented languages and now to models) for the best part of five decades. MDA is the latest step in this direction, and if it achieves it goals the industry could attain new levels of development productivity only dreamt of today.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Still, MDA draws criticism from many sides concerning its limitations, some of which are arguably intrinsic and hard to improve without a major revision. Microsoft has chosen not to comply with MDA standards and fol- low its own path, defining and using its own DSL as the modelling lan- guage in its Visual Studio IDE. While this may splinter the development community and create incompatible models and tools, both the OMG’s and Microsoft’s promotion of general model-driven development principles is likely to have positive outcomes for the software community in the years to come.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The best reference for all MDA-related information is the OMG’s web site:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;line-height: 206%;text-align: left;">OMG, <i>MDA Guide Version 1.0.1. </i><a href="http://www.omg.org/mda/" class="s13" target="_blank">2003. </a>http://www.omg.org/mda/ Two good books on MDA from prominent authors are:</p><ol id="l312"><li style="padding-left: 15pt;text-indent: 10pt;text-align: justify;"><p style="display: inline;">J. Mellor, S. Kendall, A. Uhl, D. Weise. <i>MDA Distilled</i>. Addison- Wesley, 2004.</p></li></ol><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">A. Kleppe, J. Warmer, W. Bast. <i>MDA Explained: The Model Driven Ar- chitecture--Practice and Promise</i>. Addison-Wesley, 2003.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">For some further details on the MDA-based performance and capacity planning tools, see:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">L. Zhu, J. Liu, I. Gorton, N. B. Bui. <i>Customized Benchmark Generation Using MDA</i>. in Proceedings of the 5th Working IEEE /IFIP Conference on Software Architecture, Pittsburgh, November 2005.</p></li></ol><li style="padding-top: 4pt;padding-left: 35pt;text-indent: -20pt;line-height: 106%;text-align: left;"><h1 style="display: inline;"><a name="a214">Service-Oriented Architectures and Technologies</a></h1></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;">Paul Greenfield</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l313"><ol id="l314"><li style="padding-top: 7pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a215">Service-Oriented Architecture for ICDE</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">The initial release of the ICDE platform offered a Java based API that let third party tool vendors access the data in the ICDE data store. This was a good approach for most third parties, but it still had two important limita- tions:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l315"><li style="padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">The tools had to be written in Java (or use some nasty language bridging approach to call Java from another language)</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Requests to EJB methods are not generally allowed to pass through or- ganizational firewalls and this meant that the ICDE API was only acces- sible to tools running in the same administrative domain as the ICDE platform deployment. Unfortunately, this was inconvenient for a collec- tion of powerful analytical tools that needed to run on dedicated cluster machines and remotely access an ICDE deployment over the Internet.</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The development team wished to remove both of these restrictions in order to make it easier to integrate tools into ICDE deployments. Some ap- proach was needed that would allow tools to be written in a wider range of programming languages such as C++ and C#, and these tools needed a way to securely access the ICDE API across the Internet from a remote site, as shown in Fig. 82.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Fortunately for the ICDE team, an architectural approach and supporting technologies had been evolving over the last five years which satisfied both these requirements. Web services technologies support inter- application communication over the Internet using XML documents and the SOAP protocol. Web services also support a design approach known as</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">service-oriented architecture, in which applications communicate via ex- changing SOAP messages in a loosely coupled fashion.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">This chapter delves into the intricacies of Web services and service- oriented architectures. It describes why service-oriented architectures are desirable, and how the various Web services technologies make building secure, reliable service-based applications a reality.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="232" height="69" alt="image" src="Image_268.png"/></span></p><p class="s7" style="padding-top: 3pt;padding-left: 16pt;text-indent: 0pt;text-align: left;">ICDE</p><p class="s7" style="padding-left: 15pt;text-indent: -1pt;line-height: 107%;text-align: left;">remote access</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: right;">Internet</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 56pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><span><img width="8" height="16" alt="image" src="Image_269.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 6pt;text-indent: 0pt;text-align: left;">ICDE</p><p style="padding-left: 6pt;text-indent: 0pt;text-align: left;">Tools</p><p style="text-indent: 0pt;text-align: left;"/><p class="s6" style="padding-left: 14pt;text-indent: 0pt;line-height: 106%;text-align: left;">Programming language neutral call mechanism</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 6pt;text-indent: 0pt;text-align: left;">ICDE</p><p style="padding-left: 6pt;text-indent: 0pt;text-align: left;">Platform</p><p style="text-indent: 0pt;text-align: left;"/><h4 style="padding-top: 5pt;padding-left: 52pt;text-indent: 0pt;text-align: left;">Fig. 82. <span class="s7">Remote, language-neutral access to the ICDE platform</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 8pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a216">Background</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">Service-oriented architectures and Web services are the latest step in the development of application integration middleware. They attempt to fix the interoperability problems of the past and provide a foundation for fu- ture Internet-scale distributed applications. They also mark the end of the “middleware wars” with all major vendors finally agreeing on a single rich set of technology standards for application integration and distributed computing.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Application integration middleware is used for many purposes, from linking together local components to create simple desktop or Web server applications, to building global supply chains that span the Internet. Tradi- tional technologies in this space, such as J2EE application servers and messaging, can be excellent solutions for building applications from com- ponents or integrating applications running within the same organization. However, they fall well short of what is needed to link together business processes run by independent organizations that are connected over the global Internet. Web services and service-oriented architectures are de- signed to meet just this need.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 10pt;text-align: justify;">In many ways, service-oriented computing and Web services are noth- ing new. Like earlier distributed computing technologies and architectures, their main purpose is to let applications invoke functionality provided by other applications, just as J2EE middleware lets Java client applications call methods provided by J2EE components.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The real difference here is that the focus of the services-based model and its supporting technologies is on interoperability and solving the prac- tical problems that arise because of differences in platforms and program- ming languages. Although it is possible to design and build “service- oriented systems” using any distributed computing or integration middle- ware, only Web services technologies can meet the critical requirement for seamless interoperability that is such an important part of the service- oriented vision.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">This emphasis on pragmatic interoperability is a result of accepting the diverse nature of today’s enterprises, and realizing that this diversity is not going to diminish in the future. Almost all organizations today support a mix of platforms, programming languages and software packages, includ- ing business-critical legacy applications. Any integration middleware pro- posal that assumes the wholesale rewriting of applications or the migration of already working applications to new platforms will fail at the first hur- dle as the costs and risks will be too high.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The reality is that large-scale enterprise applications are increasingly be- ing woven together from applications, packages and components that were never designed to work together and may even run on incompatible plat- forms. This gives rise to a critical need for interoperability, one that be- comes even more important as organizations start building a new genera- tion of wide-area integrated applications that directly incorporate functions hosted by business partners and specialist service providers.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Web services and service-oriented architectures are the computing in- dustry’s response to this need for interoperable integration technologies.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 10pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a217">Service-Oriented Systems</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">The shift to service-oriented systems is being driven by the need to inte- grate both applications and the business systems they support. Most exist- ing integration technologies are closed or proprietary and only support the integration of applications built on the same technology, unless organiza- tions are willing to bear the cost of buying or writing complex, special purpose adapter code. These restrictions may just be acceptable within a</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">single organization, although, even then, the chances of every application and every computer system being compatible are pretty slight in reality.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">There has been a need for business system integration ever since there have been business systems. This integration has traditionally been han- dled through the exchange of paper documents such as quotes, invoices and orders. These traditional documents are still used today, but now they are almost always produced by computerized systems. The task of integrat- ing these business systems has changed little though and is still commonly done by sending these paper documents by post or fax, and then re-keying their data once they arrive.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The cost savings and efficiencies that come from getting rid of paper and directly integrating computer-based business systems have been obvi- ous (and attractive) for many years, but have proved difficult to attain for just about as long. EDI (Electronic Data Interchange) was one major pre- vious attempt to realize these potential benefits. In many ways it was be- fore its time and so proved too costly for all but the largest organizations because of the closed and private nature of EDI networks and the high cost of proprietary EDI software.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The advent of the Internet and Web services has totally changed this picture. The Internet now potentially connects every computer system in one global network, letting businesses send documents electronically to their partners and customers anywhere in the world, quickly and at low cost. Web services addresses the other part of the problem by providing a single set of application integration standards that are implemented by every major vendor and are shipped as an integral part of all server plat- forms. The result of these developments is that business-level integration may soon be relatively easy, inexpensive and commonplace.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Web services are really just another application integration technology, conceptually little different to CORBA, J2EE, DCOM or any of their com- petitors. All of these technologies are much alike: client applications can discover servers, find out what services they are offering and invoke the functions they provide. What is different about service-oriented systems and their supporting Web services technologies is that these applications and servers are now expected to potentially be controlled and run by out- side organizations and accessed over the public Internet. The result of this shift in focus is a set of standards and architectural principles that empha- size interoperability by making the fewest possible assumptions about how service providers and consumers work internally and what implementation details they have in common.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Fig. 83 shows a typical next-generation retail application. Customers see a single seamless application that lets them place orders for books and mu- sic and make payments. In reality this application consists of just a small</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">core of business logic provided by the retailer augmented by services pro- vided by business partners, and all running on a diverse mix of platforms and middleware. Customers can access this application using the Web or they can run friendlier and smarter client applications that make calls di- rectly into the back-end services provided by the retailer’s core applica- tion. These same services can also be used to support out-sourced order fulfillment services provided to specialized retailers, letting them own and operate their own on-line shop fronts and rely on the retailer for services such as handling orders and accepting payments.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">This application could be built using any of the middleware technolo- gies discussed in previous chapters. The architect of any such system would however face difficult and complex issues ensuring interoperability and robustness. These are precisely the areas addressed by service-oriented architectures and Web services technologies.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s67" style="padding-top: 5pt;padding-left: 3pt;text-indent: 0pt;text-align: center;">Supplier 1</p><p class="s91" style="padding-top: 5pt;padding-left: 3pt;text-indent: 0pt;line-height: 5pt;text-align: center;">(Win2K3</p><p class="s91" style="padding-left: 3pt;text-indent: 0pt;line-height: 5pt;text-align: center;">.NET)</p><p style="text-indent: 0pt;text-align: left;"/><p class="s67" style="padding-left: 14pt;text-indent: 0pt;text-align: right;">Reseller</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s67" style="padding-left: 66pt;text-indent: 0pt;text-align: left;">Supplier 2</p><p style="text-indent: 0pt;text-align: left;"><span><img width="420" height="359" alt="image" src="Image_270.png"/></span></p><p class="s67" style="padding-top: 5pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">Merchant 2</p><p class="s91" style="padding-top: 5pt;padding-left: 11pt;text-indent: 0pt;text-align: center;">Linux/ EJB</p><p style="text-indent: 0pt;text-align: left;"/><p class="s91" style="padding-top: 3pt;padding-left: 40pt;text-indent: 0pt;text-align: center;">Linux/ EJB</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s92" style="padding-left: 27pt;text-indent: 0pt;text-align: left;">Smart client app</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s92" style="padding-top: 4pt;padding-left: 17pt;text-indent: 0pt;text-align: left;">Browser-based client</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s67" style="padding-left: 17pt;text-indent: 0pt;text-align: left;">Web Server</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s67" style="padding-left: 10pt;text-indent: 0pt;text-align: center;">On-line retail application <span class="s70">(J2EE/IIOP/JMS)</span></p><p class="s67" style="padding-top: 5pt;padding-left: 17pt;text-indent: 0pt;text-align: center;">User authentication</p><p class="s91" style="padding-top: 3pt;padding-left: 89pt;text-indent: 0pt;text-align: center;">Win2K3 EJB</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s67" style="padding-left: 77pt;text-indent: 0pt;text-align: left;">Supplier 3</p><p class="s91" style="padding-top: 2pt;padding-left: 89pt;text-indent: 0pt;text-align: center;">(Win2K/ MQ)</p><p class="s67" style="padding-top: 1pt;padding-left: 9pt;text-indent: 0pt;text-align: left;">Bank 1</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s91" style="padding-left: 6pt;text-indent: 0pt;text-align: left;">(MVS/CICS)</p><p style="padding-left: 11pt;text-indent: 0pt;text-align: left;"/><p class="s67" style="padding-top: 2pt;padding-left: 89pt;text-indent: 0pt;text-align: center;">Bank 2</p><p class="s91" style="padding-top: 2pt;padding-left: 89pt;text-indent: 0pt;text-align: center;">Tandem</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s67" style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Shipper 2</p><p class="s91" style="padding-top: 2pt;padding-left: 9pt;text-indent: 0pt;text-align: left;">(Solaris/ CORBA)</p><p style="text-indent: 0pt;text-align: left;"/><p class="s67" style="padding-top: 2pt;padding-left: 2pt;text-indent: 0pt;text-align: center;">Credit Card processor</p><p class="s91" style="padding-top: 2pt;padding-left: 8pt;text-indent: 0pt;text-align: center;">(Win2K3/ COM+)</p><p style="text-indent: 0pt;text-align: left;"/><p class="s67" style="padding-left: 74pt;text-indent: 0pt;text-align: center;">Shipper 1</p><p class="s91" style="padding-top: 2pt;padding-left: 75pt;text-indent: 0pt;text-align: center;">VMS)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-top: 5pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">Fig. 83. <span class="s7">Example service-based retail application</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">The fundamental principles underlying service-oriented architectures are not new and largely just reflect years of experience in building large-scale integrated systems that actually worked and were maintainable. Some of the principles, such as reducing the impacts of network latency by doing as much work as possible on every service call, are already common practice in high performance distributed systems. Others, such as consciously minimizing the richness of the Web services infrastructure, result from an understanding of the costs of complexity and the importance of simplicity in achieving robust interoperability.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The basic principles underlying service-oriented architectures are often expressed as four tenets:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Boundaries are explicit.</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Services are autonomous</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Share schemas and contracts, not implementations</p></li><li style="padding-left: 25pt;text-indent: -10pt;line-height: 193%;text-align: left;"><p style="display: inline;">Service compatibility is based on policy Let’s look at each of these.</p><ol id="l316"><ol id="l317"><ol id="l318"><li style="padding-top: 8pt;padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a218">Boundaries are Explicit</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">The first of the tenets recognizes that services are independent applica- tions, not just code that is bound into your program that can be called at almost no cost. Accessing a service requires, at least, crossing over the boundaries that separate processes, and probably traversing networks and doing cross-domain user authentication. Every one of these boundaries (process, machine, trust) that has to be crossed reduces performance, adds complexity and increases the chances of failure. Importantly, they have to be consciously recognized and handled within the design process.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Developers and service providers can also be geographically separated, so there are boundaries to be crossed here too, with costs reflected in in- creased development time and reduced robustness. The response to this challenge is to focus on simplicity, both in the specification of services and in the supporting Web services standards. Good services have simple inter- faces and share as few abstractions and assumptions as possible with their clients. This makes it easier for them to be understood and successfully used by remote developers.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 5pt;padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a219">Services are Autonomous</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">Services are autonomous independent applications, not classes or compo- nents that are tightly bound into client applications. Services are meant to be deployed onto a network, quite possibly the Internet, where they can be easily integrated into any application that finds them useful. Services need know nothing about client applications, and may accept incoming service requests from anywhere, just as long as the request messages are correctly formatted and meet specified security requirements.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Services can be deployed and managed entirely independently of other services and any possible client applications, and the owners of these ser- vices can change their definitions, implementations or requirements at any time. Version compatibility is a long-standing problem with all distributed systems and technologies, and is made worse by the open nature of ser- vices. How do you evolve a service when you have a large (possibly un- known) number of clients that depend on it?</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">For example, a bank running a server component that is only called by an internal teller application can know the identity and location of all client systems, so updating the service together with all of its callers is at least technically feasible. But the credit card processor who can accept authori- zation requests from any merchant over the Internet has no way of either knowing how to locate its clients (past, current or potential) nor of getting them to upgrade their varied calling applications to match new service definitions.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Part of the answer to this problem lies in the deliberate simplicity and extensibility of the services model. All that clients know about a service is what messages that it will accept and return, and this is the only depend- ency that exists between a client and a service. Owners of services can change the implementation of a service at will, just as long as currently valid messages are still accepted. They can also extend and evolve their service request and response messages, just as long as they remain back- wardly compatible. Our credit card processor could totally change how their service is implemented, perhaps moving from CICS/COBOL to a C#/.NET platform, and this change will be invisible to all of their callers as long as no incompatible changes are made to the “authorize payment” message.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">As services are autonomous, they are also responsible for their own se- curity and have to protect themselves against possibly malicious callers. Systems deployed entirely on a single system or on a closed network may be able to largely ignore security or simply rely on firewalls or secure net- work pipes, such as SSL. However, services accessible over the open Internet have to take security much more seriously.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 5pt;padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a220">Share Schemas and Contracts, not Implementations</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">Years of experience has shown that building robust and reliable large-scale integrated systems is difficult. Trying to build these systems from compo- nents built using different programming models and running on different platforms is much harder still. Service-oriented technologies address this problem by deliberately aiming for simplicity as much as possible. Ser- vices aren’t remote objects with inheritance, methods and complex run- time behavior, nor are they components that support events, properties and stateful method calls. Services are just applications that receive and send messages. Clients and services share nothing other than the definitions of these messages, and certainly don’t share method code or complex run- time environments.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">All that an application needs to know about a service is its contract: the structure (schema) of the messages it will accept and return, and whether they have to be sent in any particular order. Client applications can use such a contract to build request messages to send to a service, and services can use their schemas to validate incoming messages and make sure they are correctly formatted.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a221">Service Compatibility is Based on Policy</a></p></li></ol></ol></ol><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">Clients have to be completely compatible with the services they want to use. Compatibility means not simply that clients are following the speci- fied message formats and exchange patterns, but also that they comply with other important requirements, such as whether messages should be encrypted or need to be tracked to ensure that none have been lost in tran- sit. In the service-oriented model, these non-functional requirements are defined using policies, and not just written down as part of a service’s documentation.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">For example, our credit card processor may decide that all merchants submitting payment authorization requests must prove their identity using X.509-based authentication tokens. This security constraint can be repre- sented simply as a statement in the published security policy for the au- thorization service.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Policies are collections of machine-readable statements that let a service define its requirements for things like security and reliability. These poli- cies can be included as part of a service’s contract, allowing it to com- pletely specify a service’s behavior and expectations, or they can be kept in separate policy stores and fetched dynamically at run-time.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Contract-based policies can be regarded as just a part of a service’s documentation, but they can also be used by development tools to auto-</p><p class="s7" style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 225pt;text-indent: 0pt;text-align: left;">12.4 Web Services 225</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_271.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">matically generate compatible code for both clients and services. For ex- ample, a server-side security policy can be used to generate code that will check that required parts of an incoming message are encrypted and then decrypt this data, presenting it as plain text to the service application. All this is done without any coding effort from the developer.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The separation of policies from contracts also lets client applications dynamically adapt to meet the requirements of a particular service pro- vider. This will become increasingly useful as services become standard- ized and offered by competing providers. For example, our on-line retailer may use two shippers that offer exactly the same services and use the same message schemas but have different authentication requirements. The use of dynamic policies lets our developers write a single application that sup- ports both authentication methods and dynamically selects which one to use by fetching the target service’s policy before constructing and sending any delivery requests.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l319"><ol id="l320"><li style="padding-top: 10pt;padding-left: 42pt;text-indent: -26pt;text-align: left;"><h2 style="display: inline;"><a name="a222">Web Services</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">Web services are a set of integration technology standards that were de- signed specifically to meet the requirements arising from service-oriented architectures and systems. In many ways, Web services are really not much different to existing middleware technologies, but they do differ in their focus on simplicity and interoperability. The most important feature offered by Web services is that all major software vendors have agreed to support them. Interoperability is still not, of course, guaranteed to be painless but at least the problems encountered will be bugs and misinter- pretations of common standards, not intentionally introduced incompati- bilities between similar but different proprietary technologies.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">All application integration technologies, including Web services and their alternatives such as COM+, J2EE and CORBA, really only provide four basic functions that let developers (and programs) do the following:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Find suitable services (using UDDI or another directory)</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Find out about a service (using WSDL)</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Ask a service to do something (using SOAP)</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Make use of services such as security (using WS-* standards)</p><p style="padding-top: 11pt;padding-left: 15pt;text-indent: 10pt;text-align: justify;">SOAP, WSDL and UDDI were the first Web services standards to be published but they only meet the most basic requirements for application integration. They lack support for security, transactions, reliability and</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">many other important functions. This gap is being progressively filled by a series of standards (commonly called “WS-*”) first outlined by IBM and Microsoft at a W3C workshop in 2001. The task of writing these additional standards and getting industry-wide agreement is now largely complete with production-ready implementations available for many of them. This formal standards process should be largely complete by the end of 2006, with full support from all major vendors following shortly afterwards.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Web services are XML standards. Services are defined using XML, ap- plications request services by sending XML messages and the Web ser- vices standards make extensive use of other existing XML standards wher- ever possible. At the time of writing there are over thirty Web services standards and these can be organized into the categories shown in Fig. 84. This number of standards may suggest complexity rather than the desired simplicity. Overall though, the standards are as simple as possible, given that they need to support secure, robust and interoperable applications. There is also increasingly good tool and library/framework support for these standards, so developers only have to understand the capabilities of- fered rather than the detailed XML syntax.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:53.122pt" cellspacing="0"><tr style="height:33pt"><td style="width:67pt;border-top-style:solid;border-top-width:1pt;border-top-color:#010101;border-left-style:solid;border-left-width:1pt;border-left-color:#010101;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#010101;border-right-style:solid;border-right-width:1pt;border-right-color:#010101" bgcolor="#F3F3F3"><p class="s93" style="padding-top: 8pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">Security</p></td><td style="width:69pt;border-top-style:solid;border-top-width:1pt;border-top-color:#010101;border-left-style:solid;border-left-width:1pt;border-left-color:#010101;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#010101;border-right-style:solid;border-right-width:1pt;border-right-color:#010101" bgcolor="#F3F3F3"><p class="s93" style="padding-top: 3pt;padding-left: 10pt;padding-right: 8pt;text-indent: 5pt;text-align: left;">Reliable messaging</p></td><td style="width:68pt;border-top-style:solid;border-top-width:1pt;border-top-color:#010101;border-left-style:solid;border-left-width:1pt;border-left-color:#010101;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#010101;border-right-style:solid;border-right-width:1pt;border-right-color:#010101" bgcolor="#F3F3F3"><p class="s93" style="padding-top: 8pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">Transactions</p></td><td style="width:32pt;border-top-style:solid;border-top-width:1pt;border-top-color:#010101;border-left-style:solid;border-left-width:1pt;border-left-color:#010101;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#010101;border-right-style:solid;border-right-width:1pt;border-right-color:#010101" rowspan="2" bgcolor="#E4E4E4"><p class="s93" style="padding-top: 9pt;padding-left: 13pt;text-indent: 0pt;text-align: left;">Metadata</p></td></tr><tr style="height:33pt"><td style="width:204pt;border-top-style:solid;border-top-width:1pt;border-top-color:#010101;border-left-style:solid;border-left-width:1pt;border-left-color:#010101;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#010101;border-right-style:solid;border-right-width:1pt;border-right-color:#010101" colspan="3" bgcolor="#EAEAEA"><p class="s93" style="padding-top: 9pt;padding-left: 77pt;padding-right: 77pt;text-indent: 0pt;text-align: center;">Messaging</p></td></tr><tr style="height:33pt"><td style="width:236pt;border-top-style:solid;border-top-width:1pt;border-top-color:#010101;border-left-style:solid;border-left-width:1pt;border-left-color:#010101;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#010101;border-right-style:solid;border-right-width:1pt;border-right-color:#010101" colspan="4" bgcolor="#C1C1C1"><p class="s93" style="padding-top: 9pt;padding-left: 107pt;padding-right: 106pt;text-indent: 0pt;text-align: center;">XML</p></td></tr></table><h4 style="padding-top: 5pt;padding-left: 86pt;text-indent: 0pt;text-align: left;">Fig. 84. <span class="s7">Overview of Web services standards</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">One of the simplifying principles underlying all the Web services stan- dards is that the various message fields and attributes used to support func- tions such as security and reliability are totally independent of each other. Applications only need to include just those few fields and attributes needed for their specific purposes, and can ignore all the other standards. For example, a SOAP request might identify the requestor of a service by including a username and password in the form specified in the WS- Security <i>UsernameToken </i>profile. This user/password related information is the only security-related header element included in the message. WS- Security supports other forms of user authentication, as well as encryption and digital signatures, but as these are not used by the service, they do not appear at all in the SOAP message request.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="56" height="37" alt="image" src="Image_272.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="57" height="11" alt="image" src="Image_273.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="57" height="78" alt="image" src="Image_274.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="57" height="11" alt="image" src="Image_275.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="56" height="35" alt="image" src="Image_276.png"/></span></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 10pt;text-align: justify;">Another aim of the Web services standards is to provide good support for system architectures that make use of “intermediaries”. Rather than as- suming that clients always send requests directly to service providers, the intermediary model assumes that these messages can (transparently) pass along a chain of other applications on their way to their final destination. These intermediaries can do anything with the messages they receive, in- cluding routing them, logging, checking security or even adding or sub- tracting bits of the message’s content. This model is shown in Fig. 85, where intermediaries are providing routing and auditing services.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s32" style="padding-top: 6pt;padding-left: 8pt;text-indent: 0pt;text-align: left;">Audit log</p><p class="s32" style="padding-top: 1pt;padding-left: 14pt;text-indent: -1pt;text-align: left;">Credit Card</p><p style="padding-left: 191pt;text-indent: 0pt;text-align: left;">	</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s32" style="padding-top: 6pt;padding-left: 13pt;text-indent: 0pt;text-align: left;">Client</p><p class="s32" style="padding-top: 6pt;padding-left: 11pt;text-indent: 0pt;text-align: left;">Router</p><p class="s32" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;">Place Order</p><table style="border-collapse:collapse" cellspacing="0"><tr style="height:25pt"><td style="width:46pt;border-top-style:solid;border-top-width:1pt;border-top-color:#010101;border-left-style:solid;border-left-width:1pt;border-left-color:#010101;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#010101;border-right-style:solid;border-right-width:1pt;border-right-color:#010101" bgcolor="#D6D6D6"><p class="s94" style="padding-top: 6pt;padding-left: 2pt;padding-right: 2pt;text-indent: 0pt;text-align: center;">Supplier 1</p></td></tr><tr style="height:26pt"><td style="width:46pt;border-top-style:solid;border-top-width:1pt;border-top-color:#010101;border-left-style:solid;border-left-width:1pt;border-left-color:#010101;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#010101;border-right-style:solid;border-right-width:1pt;border-right-color:#010101" bgcolor="#D6D6D6"><p class="s94" style="padding-top: 6pt;padding-left: 2pt;padding-right: 2pt;text-indent: 0pt;text-align: center;">Supplier 2</p></td></tr><tr style="height:25pt"><td style="width:46pt;border-top-style:solid;border-top-width:1pt;border-top-color:#010101;border-left-style:solid;border-left-width:1pt;border-left-color:#010101;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#010101;border-right-style:solid;border-right-width:1pt;border-right-color:#010101" bgcolor="#D6D6D6"><p class="s94" style="padding-top: 5pt;padding-left: 2pt;padding-right: 2pt;text-indent: 0pt;text-align: center;">Supplier 3</p></td></tr></table><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;">			</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 98pt;text-indent: 0pt;text-align: left;">Fig. 85. <span class="s7">Simple intermediary sequence</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The Web services standards provide support for intermediary-based ar- chitectures in a number of ways. These include tagging header elements with the role of their intended recipient and supporting the “end-to-end” principle for functions such as security, so ensuring that they continue to work even if messages pass through intermediaries rather than traveling di- rectly from client to service. For example, in the application shown in Fig. 85, the client can use mechanisms provided by WS-Security to protect sen- sitive information intended only for the credit card application, hiding it from the router that the message must pass through on its journey.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l321"><ol id="l322"><li style="padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a223">SOAP and Messaging</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">SOAP was the original Web services standard, and is still the most impor- tant and most widely used. It specifies a simple but extensible XML-based application-to-application communication protocol, roughly equivalent to DCE’s RPC or Java’s RMI, but much less complex and far easier to im- plement as a result. SOAP is simple enough for a programmer to be able to</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">write their own implementation, making it possible to hand-write wrappers for legacy applications and technologies.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">This simplicity comes from deliberately staying well away from com- plex problems, such as distributed garbage collection and passing objects by reference. All that the SOAP standard does is define a simple but exten- sible message-oriented protocol for invoking remote services, using HTTP, SMTP, UDP or other protocols as the transport layer and XML for format- ting data.</p><p class="s32" style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Header (Optional) -</p><p class="s32" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">General information about message – e.g. authentication and transaction management</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">SOAP messages have the simple structure shown in Fig. 86. The header holds information about the message payload, possibly including elements such as security tokens and transaction contexts. The body holds the actual message content being passed between applications. The SOAP standard does not mandate what can go in a message header, giving SOAP its ex- tensibility as new standards, such as WS-Security, can be specified just by defining new header elements, and without requiring changes to the SOAP standard itself.</p><p class="s32" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">Envelope (Mandatory) -</p><p class="s32" style="padding-left: 20pt;text-indent: 0pt;text-align: left;">Marks the start and end of a message</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s32" style="padding-top: 6pt;padding-left: 10pt;text-indent: 0pt;text-align: left;">Body (Mandatory) -</p><p class="s32" style="padding-left: 29pt;text-indent: 0pt;line-height: 106%;text-align: left;">Data for the actual message or document being sent</p><p style="padding-left: 89pt;text-indent: 0pt;text-align: left;"/><h4 style="padding-top: 8pt;padding-left: 108pt;text-indent: 0pt;text-align: left;">Fig. 86. <span class="s7">SOAP message structure</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">SOAP originally stood for Simple Object Access Protocol but it is now officially no longer an acronym, just a word, and certainly nothing to do with accessing remote objects! SOAP really is simple though, although the use of XML can make it look anything but simple, especially when secu- rity header elements are included. SOAP clients just send XML request messages to service providers over any transport and can get XML re- sponse messages back in return. A SOAP message asking for a stock quotation is shown in Fig. 87. This corresponding to the WSDL definition is shown in Fig. 88. The request carries a username and hashed password in the header to let the service know who is making the request.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</p><p style="padding-top: 1pt;padding-left: 36pt;text-indent: -21pt;line-height: 112%;text-align: left;"><a href="http://www.w3.org/2003/05/soap-envelope" class="s87" target="_blank">&lt;soap:Envelopexmlns:soap= &quot;http://www.w3.org/2003/05/soap-envelope&quot;</a></p><p class="s37" style="padding-left: 15pt;text-indent: 0pt;line-height: 112%;text-align: left;"><a href="http://www.w3.org/2001/XMLSchema-instance" class="s87" target="_blank">xmlns:xsi=</a><a href="http://www.w3.org/2001/XMLSchema" class="s87" target="_blank">&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsd=</a><a href="http://schemas.xmlsoap.org/ws/2004/03/addressing" class="s87" target="_blank">&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:wsa=</a><a href="http://docs.oasis-open.org/wss/2004/01/oasis-" class="s87" target="_blank">&quot;http://schemas.xmlsoap.org/ws/2004/03/addressing&quot; xmlns:wsse</a>=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-</p><p style="padding-left: 15pt;text-indent: 21pt;line-height: 112%;text-align: left;"><a href="http://docs.oasis-open.org/wss/2004/01/oasis" class="s87" target="_blank">200401-wss-wssecurity-secext-1.0.xsd&quot; xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis</a></p><p class="s37" style="padding-left: 36pt;text-indent: 0pt;text-align: left;">-200401-wss-wssecurity-utility-1.0.xsd&quot;&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">&lt;soap:Header&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">&lt;wsa:Action&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">http://myCompany.com/getLastTradePrice&lt;/wsa:Action&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">&lt;wsa:MessageID&gt;uuid:4ec3a973-a86d-4fc9-bbc4-ade31d0370dc</p><p class="s37" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">&lt;/wsa:MessageID&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">&lt;wsse:Security soap:mustUnderstand=&quot;1&quot;</p><p class="s37" style="padding-top: 1pt;padding-left: 57pt;text-indent: 0pt;text-align: left;">&lt;wsse:UsernameToken&gt;</p><p class="s37" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;wsse:Username&gt;NNK&lt;/wsse:Username&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;line-height: 112%;text-align: left;"><a href="http://docs.oasis-/" class="s87" target="_blank">&lt;wsse:PasswordType=&quot;</a>http://docs.oasis- open.org/wss/2004/01/oasis-200401-wss-username</p><p class="s37" style="padding-left: 79pt;text-indent: 21pt;line-height: 112%;text-align: left;">-token-profile-1.0#PasswordDigest&quot;&gt; weYI3nXd8LjMNVksCKFV8t3rgHh3Rw==</p><p class="s37" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;/wsse:Password&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;wsse:Nonce&gt;WScqanjCEAC4mQoBE07sAQ==&lt;/wsse:Nonce&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;wsu:Created&gt;2003-07-16T01:24:32Z&lt;/wsu:Created&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 29pt;text-indent: 0pt;text-align: center;">&lt;/wsse:UsernameToken&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">&lt;/wsse:Security&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">&lt;/soap:Header&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">&lt;soap:Body&gt;</p><p class="s37" style="padding-left: 36pt;text-indent: 0pt;line-height: 112%;text-align: left;"><a href="http://myCompany.com/stockServices" class="s87" target="_blank">&lt;m:GetLastTradePrice xmlns:m</a>=&quot;http://myCompany.com/stockServices&quot;&gt;</p><p class="s37" style="padding-left: 57pt;text-indent: 0pt;text-align: left;">&lt;symbol&gt;DIS&lt;/symbol&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">&lt;/m:GetLastTradePrice&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">&lt;/soap:Body&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">&lt;/soap:Envelope&gt;</p><h4 style="padding-top: 5pt;padding-left: 111pt;text-indent: 0pt;text-align: left;">Fig. 87. <span class="s7">SOAP message sample</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">There are a number of other standards included in the Web services Messaging category, including WS-Addressing and WS-Eventing. WS- Addressing exists because Web services really have little to do with the Web, and do not depend solely on HTTP as a transport layer. SOAP mes- sages can be sent over any transport protocol, including TCP/IP, UDP, email (SMTP) and message queues, and WS-Addressing provides trans- port-neutral mechanisms to address services and identify messages. WS- Eventing provides support for the publish-subscribe model by defining the format of the subscription request messages that clients send to publishers.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">Published messages that meet the provided filtering expression are sent to callers using normal SOAP messages.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 10pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a224">UDDI, WSDL and Metadata</a></h2></li></ol></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">There is a strong theme of metadata and policy running through the Web services standards. SOAP services are normally described using WSDL (Web Services Description Language) and can be located by searching a UDDI (Universal Description, Discovery and Integration) directory. Ser- vices can describe their requirements for things like security and reliability using policy statements, defined using the WS-Policy framework and spe- cialized policy standards such as WS-SecurityPolicy. These policies can be attached to a WSDL service definition or kept in separate policy stores and retrieved using WS-MetadataExchange.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">UDDI has proven to be the least used so far of the original three Web services standards. UDDI is either the least interesting or potentially most interesting of these standards, depending on how important you think be- ing able to dynamically discover and link to services is to your application. People are developing large complex Web services systems today without the use of global UDDI directories, using other methods of finding ser- vices such as personal contact or published lists of services on Web sites. This could all change in the future, especially when industry associations start releasing common service definitions and need to publish directories of qualified service providers.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">WSDL is used to describe Web services, including their interfaces, methods and parameters. The WSDL description of a service called <i>StockQuoteService </i>that provides a single operation named <i>GetLastTrade- Price </i>is depicted in Fig. 88. This operation takes one parameter <i>symbol </i>of type <i>string </i>that names the stock of interest and returns a <i>float </i>that holds the most recently traded price.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">WSDL is well supported by development environments such as Visual Studio and WebSphere. These tools can generate WSDL automatically from program method and interface definitions, and they take in WSDL service definitions and make it easy for developers to write code that calls these services. One adverse side effect of this tool support is that it tends to encourage developers to think of services as remote methods, rather than moving to the preferable and richer message-based model provided by Web services.</p><ol id="l323"><ol id="l324"><li style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 190pt;text-indent: -21pt;text-align: left;"><p class="s7" style="display: inline;">UDDI, WSDL and Metadata 231</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_277.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">&lt;?xml version=&quot;1.0&quot;?&gt;</p><p class="s37" style="padding-left: 35pt;text-indent: -20pt;line-height: 112%;text-align: left;"><a href="http://myCompany.com/stockquote.wsdl" class="s87" target="_blank">&lt;definitions name=&quot;StockQuote&quot; targetNamespace=&quot;http://myCompany.com/stockquote.wsdl&quot; xmlns:tns</a><a href="http://schemas.xmlsoap.org/wsdl/soap/" class="s87" target="_blank">=&quot;http://myCompany.com/stockquote.wsdl&quot; xmlns:soap=”</a><a href="http://www.w3.org/2001/XMLSchema" class="s87" target="_blank">http://schemas.xmlsoap.org/wsdl/soap/” xmlns:xsd</a><a href="http://schemas.xmlsoap.org/wsdl/" class="s87" target="_blank">=&quot;http://www.w3.org/2001/XMLSchema” xmlns=</a>&quot;http://schemas.xmlsoap.org/wsdl/&quot;&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-left: 35pt;text-indent: 0pt;text-align: left;">&lt;message name=&quot;GetLastTradePrice&quot;&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 55pt;text-indent: 0pt;text-align: left;">&lt;part name=&quot;body&quot; type=&quot;xsd:string&quot;/&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 35pt;text-indent: 0pt;text-align: left;">&lt;/message&gt;</p><p class="s37" style="padding-left: 35pt;text-indent: 0pt;text-align: left;">&lt;message name=&quot;LastTradePrice&quot;&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 55pt;text-indent: 0pt;text-align: left;">&lt;part name=&quot;body&quot; type=&quot;xsd:float &quot;/&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 35pt;text-indent: 0pt;text-align: left;">&lt;/message&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-left: 35pt;text-indent: 0pt;text-align: left;">&lt;portType name=&quot;StockQuotePortType&quot;&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 55pt;text-indent: 0pt;text-align: left;">&lt;operation name=&quot;GetLastTradePrice&quot;&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 71pt;text-indent: 0pt;text-align: left;">&lt;input message=&quot;tns:GetLastTradePrice&quot;/&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 71pt;text-indent: 0pt;text-align: left;">&lt;output message=&quot;tns:LastTradePrice&quot;/&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 55pt;text-indent: 0pt;text-align: left;">&lt;/operation&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 35pt;text-indent: 0pt;text-align: left;">&lt;/portType&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-left: 79pt;text-indent: -43pt;line-height: 112%;text-align: left;">&lt;binding name=&quot;StockQuoteBinding&quot; type=&quot;tns:StockQuotePortType&quot;&gt;</p><p class="s37" style="padding-left: 68pt;text-indent: -12pt;line-height: 112%;text-align: left;"><a href="http://schemas.xmlsoap.org/soap/http" class="s87" target="_blank">&lt;soap:binding style=&quot;document&quot; transport=</a>&quot;http://schemas.xmlsoap.org/soap/http&quot;/&gt;</p><p class="s37" style="padding-left: 55pt;text-indent: 0pt;text-align: left;">&lt;operation name=&quot;GetLastTradePrice&quot;&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 89pt;text-indent: -18pt;line-height: 112%;text-align: left;"><a href="http://myCompany.com/GetLastTradePrice" class="s87" target="_blank">&lt;soap:operation soapAction= &quot;</a>http://myCompany.com/GetLastTradePrice&quot;/&gt;</p><p class="s37" style="padding-left: 71pt;text-indent: 0pt;text-align: left;">&lt;input&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;soap:body use=&quot;literal&quot;/&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 71pt;text-indent: 0pt;text-align: left;">&lt;/input&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 71pt;text-indent: 0pt;text-align: left;">&lt;output&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;soap:body use=&quot;literal&quot;/&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 71pt;text-indent: 0pt;text-align: left;">&lt;/output&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 55pt;text-indent: 0pt;text-align: left;">&lt;/operation&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 35pt;text-indent: 0pt;text-align: left;">&lt;/binding&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">&lt;service name=&quot;StockQuoteService&quot;&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 25pt;text-indent: 0pt;text-align: left;">&lt;documentation&gt;Stock quote service&lt;/documentation&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 41pt;text-indent: -16pt;line-height: 112%;text-align: left;">&lt;port name=&quot;StockQuotePort&quot; binding=&quot;tns:StockQuoteBinding&quot;&gt;</p><p class="s37" style="padding-left: 57pt;text-indent: -17pt;line-height: 112%;text-align: left;"><a href="http://myCompany.com/stockServices" class="s87" target="_blank">&lt;soap:address location= </a>&quot;http://myCompany.com/stockServices&quot;/&gt;</p><p class="s37" style="padding-left: 25pt;text-indent: 0pt;text-align: left;">&lt;/port&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">&lt;/service&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">&lt;/definitions&gt;</p><p class="s7" style="padding-top: 5pt;padding-left: 29pt;text-indent: 0pt;text-align: center;"><b>Fig. 88. </b>WSDL for the <i>GetLastTradePrice </i>service</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 5pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a225">Security, Transactions and Reliability</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">One of the problems faced by most middleware protocols is that they do not work well on the open Internet because of the connectivity barriers im- posed by firewalls. Most organizations do not want outsiders to have ac- cess to the protocols and technologies they use internally for application integration, and so block the necessary TCP/IP ports at their perimeter firewalls.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The common technology response to this problem, and the one adopted by Web services, has been to co-opt the Web protocol, HTTP, as a trans- port layer because of its ability to pass through most firewalls. This use of HTTP is convenient but also creates potential security problems as HTTP traffic is no longer just innocuously fetching Web pages. Instead it may be making direct calls on internal applications.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">WS-Security and its associated standards address these problems by providing strong cryptographic mechanisms to identify callers (authentica- tion), protect content from eavesdroppers (encryption) and ensure informa- tion integrity (digital signatures). These standards are designed to be ex- tensible, letting them be adapted easily to new security technologies and algorithms, and also supporting integration with legacy security technolo- gies.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">WS-Security supports intermediary-based application architectures by allowing multiple security header elements, each labeled with the role of their intended recipient along the processing chain, and by supporting par- tial encryption and partial signatures. As an illustration, in the example shown in Fig. 85, the sensitive credit card details can be hidden by en- crypting them, while leaving the rest of the message unencrypted so that it can be read by the routing application.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The final set of Web services standards will also support transactions and reliable messaging. There are two types of transaction support defined in the IBM/Microsoft roadmap and these are currently supported by draft standards. WS-AtomicTransactions supports conventional distributed ACID transactions and assumes levels of trust and fast response times that make this standard suitable only for internal application integration tasks, and unusable for Internet-scale application integration purposes. WS- BusinessActivity is a framework and a set of protocol elements for coordi- nating the termination of loosely-coupled integrated applications. It pro- vides some support for atomicity by invoking compensators when a dis- tributed application finishes in failure. Its time will eventually come, but much more tool and framework development is needed before it can be- come generally useful in applications.</p></li><li style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 132pt;text-indent: -21pt;text-align: left;"><p class="s7" style="display: inline;">Web Services and the Future of Middleware 233</p></li></ol></ol><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_278.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The support for reliable messaging in Web services simply ensures that all messages sent between two applications actually arrive at their destina- tion in the order they were sent. WS-ReliableMessaging does not guaran- tee delivery in the case of failure, unlike queued messaging middleware using persistent queues. However, it is still a useful standard as it provides at most once, in-order message delivery over any transport layer, even un- reliable ones such as UDP or SMTP.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l325"><ol id="l326"><li style="padding-left: 42pt;text-indent: -26pt;text-align: left;"><h2 style="display: inline;"><a name="a226">Web Services and the Future of Middleware</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">Web services do not mean the end of current middleware products and technologies, although some existing technologies will be replaced for all but legacy applications, and the use of other technologies will shrink back to those applications where their strengths bring significant value.</p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;">Web services have two natural application domains:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l327"><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Large-scale services-based applications where interoperability, security and robustness are critically important.</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Small-scale application integration tasks within organizations where Web services are used because they are good enough, available and well understood.</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Web services have no strong competitors in the first of these domains. There are some closed and proprietary offerings being used today, but these will quickly be replaced by standards-based alternatives that offer better interoperability and reduced complexity.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The second domain sees Web services competing directly with alterna- tive protocols such as Java’s RMI and CORBA’s IIOP. These alternative protocols are richer, as they support remote objects rather than simple ser- vices, but Web services has the advantage of being a standard which is supported on all platforms and development environments. This makes it an acceptable lowest-common-denominator even for internal application integration. Why go with a more complex and less open integration proto- col when you can easily use Web services from your current application platform and tools, and pick up the ability to do cross-platform integration at no extra cost? It’s a compelling story for many organizations if they don’t actually need the richer capabilities provide by these non-standard alternatives.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 5pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a227">ICDE with Web Services</a></h2></li></ol></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: left;">The ICDE team identified Web services as a potential remedy to their in- teroperability and remote access problems.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The interoperability problem stemmed from the fact that the ICDE API effectively demanded that potential third–party tool developers write their analysis applications in Java. This edict didn’t help persuade non-Java de- velopers of the benefits of building tools for the ICDE platform, particu- larly if they had existing non-Java analysis applications. What was needed was a remote service invocation mechanism that would work with any lan- guage. This is exactly what the Web services standards gave us.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Java supports the core Web services standards, SOAP and WSDL, so all that had to be done was change the ICDE <i>API Services </i>code to export the <i>QueryAPI </i>and <i>WriteAPI </i>interfaces as the equivalent Web services opera- tions.<span class="s14">53 </span>This can be done automatically by contemporary Java development tools. The third-party developers can now use whatever language and plat- form they choose to develop their ICDE client tools while sending stan- dard Web services requests to the ICDE API.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">There also needed to be a Web services mechanism to notify clients when new events were published. There are actually two questions here: how do clients subscribe to events of interest, and how do they get notified when these events occur. The first of these will eventually be handled by event brokers based on the WS-Eventing standard (or its successors), and the second can be solved by simply using normal SOAP messaging.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">For now though, as WS-Eventing is still a long way from being a stable standard, subscription requests were passed as normal SOAP messages to a proxy running inside the ICDE <i>API Services </i>code. This proxy subscribes to the JMS server on behalf of its clients. It then receives published events and sends them back to ICDE clients as SOAP messages. The current ICDE <i>API Client </i>already performed similar functions on behalf of its Java</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_279.png"/></span></p><p class="s14" style="padding-top: 4pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;">53 <span class="s7">There’s much debate about whether automatically exposing calls to components like EJBs over Web services is a good idea. Java and .NET development tools make this a trivial exercise, so it’s very enticing for developers. Put simply, the basic argument against this practice is that most of the time a component’s methods are not service-based and hence not suitable for calling over a SOAP messaging infrastructure. This is most certainly true for components with, for example getter and setter methods and which maintain application state. It is however possible to design service-based interfaces and implement these with an EJB or a .NET component. Exposing these over SOAP is not evil in the slightest. In fact it’s rather a good idea, and it’s one that the ICDE application exploits.</span></p><ol id="l328"><ol id="l329"><li style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 203pt;text-indent: -21pt;text-align: left;"><p class="s7" style="display: inline;">ICDE with Web Services 235</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_280.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="413" height="407" alt="image" src="Image_281.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s72" style="padding-left: 13pt;text-indent: 0pt;line-height: 109%;text-align: center;">ICDE Data Collection Client</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s72" style="padding-left: 4pt;text-indent: 0pt;text-align: center;">ICDE WS API</p><p class="s72" style="padding-left: 4pt;text-indent: 0pt;text-align: center;">Layer</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;">clients, and this solution just replicated this functionality inside the server as well. The resultant architecture can be seen in Fig. 89.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s72" style="text-indent: 0pt;text-align: left;">cd WS Marketecture</p><p style="padding-left: 19pt;text-indent: 0pt;line-height: 8pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s60" style="text-indent: 0pt;line-height: 111%;text-align: left;">ICDE tools can be written in any language that can call the ICDE Web services API</p><p class="s72" style="text-indent: 0pt;text-align: left;">ICDE 3rd Party Tool</p><p class="s72" style="text-indent: 0pt;text-align: left;">ICDE User</p><p style="padding-left: 29pt;text-indent: 0pt;text-align: left;">		</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s60" style="text-indent: 0pt;text-align: left;">SOAP API Request</p><p class="s60" style="text-indent: 0pt;text-align: left;">SOAP Notification</p><p class="s60" style="text-indent: 0pt;line-height: 110%;text-align: left;">Write user event</p><p style="padding-left: 93pt;text-indent: 0pt;text-align: left;">		</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s72" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">WS API</p><p class="s72" style="text-indent: 0pt;text-align: left;">Interface</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s72" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">WS JMS Proxy</p><p style="padding-left: 124pt;text-indent: 0pt;text-align: left;">	</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s72" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">ICDE API</p><p class="s72" style="padding-left: 16pt;text-indent: 0pt;text-align: left;">Services</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s72" style="padding-left: 9pt;text-indent: 0pt;text-align: left;">JMS</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s72" style="padding-left: 16pt;text-indent: -10pt;line-height: 110%;text-align: left;">Data Collection Services</p><p style="padding-left: 105pt;text-indent: 0pt;text-align: left;">		</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s60" style="text-indent: 0pt;text-align: left;">JDBC</p><p style="padding-left: 198pt;text-indent: 0pt;line-height: 8pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s72" style="padding-left: 21pt;text-indent: -7pt;line-height: 108%;text-align: left;">ICDE Data Store</p><p style="padding-left: 175pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s72" style="text-indent: 0pt;text-align: left;">J2EE App Server</p><p style="text-indent: 0pt;text-align: left;"/><h4 style="padding-left: 75pt;text-indent: 0pt;text-align: left;">Fig. 89. <span class="s7">ICDE API architecture using web services</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The second problem the ICDE team needed to solve was to allow re- mote access to the ICDE platform from Internet-based clients. Our solution had to ensure that requests coming from the Internet were not blocked by firewalls. As we are now accepting requests over an open network, we also had to be sure of the identity of the client systems and protect any sensitive information while it was in transit.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Web services address the accessibility problem caused by firewalls by using the “firewall-friendly” HTTP protocol as its default transport mechanism. Firewalls tend to be configured to allow HTTP traffic through, so our Web services-based ICDE calls can get from clients over the Inter-</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">net to ICDE servers without being blocked, and without needing special configuration changes to the network and its firewalls.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The ICDE system used usernames and passwords to identify callers and sent all information without protecting it from eavesdroppers. This level of protection is adequate for local access over a trusted network, but some- thing much stronger was going to be needed to accept if we were going to send requests and responses across an open network. Web services address this authentication issue by supporting a range of proven and flexible secu- rity technologies, including Kerberos and PKI-based authentication tokens. Both of these solutions are cryptographically strong. This makes either a good security solution, and the choice can be made based on the security infrastructure already in place in the organization deploying the ICDE plat- form. The chosen security tokens are then included in the ICDE SOAP re- quests and responses. Sensitive ICDE data is also protected in transit using the encryption mechanisms provided by the WS Security standards.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 57pt;text-indent: -42pt;text-align: left;"><h2 style="display: inline;"><a name="a228">Conclusion and Further Reading</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">Services and services-oriented architectures are pragmatic responses to the complexity and interoperability problems encountered by the builders of previous generations of large-scale integrated applications. Web services are a set of integration technology standards that reflect this need for sim- plicity and interoperability.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The “really” transforming thing about Web services is that there is (or will be) only one set of common standards that everyone uses when offer- ing or accessing services. These standards are being supported by the en- tire computing industry and available on every application platform at low cost. The pervasive nature of Web services means that they will become the common and expected technology to use for application integration, certainly for cross-platform large-scale applications and, in many cases, for local integration tasks as well. This ubiquity means that they will take over from existing middleware technologies and protocols for some tasks, and will happily co-exist with them in many other cases.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Service-oriented architectures and Web services are hot topics in to- day’s IT industry. All major software vendors are publishing tutorials and articles on services and how they are supported by their products. There are quite a few good books out there and any number of magazine articles as well. Good starting places are Microsoft’s MSDN, IBM’s Developer- Works and Sun’s developer Web sites, at the following locations:</p><p class="s7" style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 150pt;text-indent: 0pt;text-align: left;">12.10 Conclusion and Further Reading 237</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_282.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;"><a href="http://www.ibm.com/developerworks" class="s13" target="_blank">msdn.microsoft.com </a>www.ibm.com/developerworks developers.sun.com/</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">You’ll also find more information on Web services and SOA using Google than you care to imagine. Or just go to your own software vendor and look at what they have to say about how they are supporting services.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Some excellent text books are also emerging. The following are three examples I’d recommend:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">O. Zimmermann, M. R Tomlinson, S. Peuser, Perspectives on Web Ser- vices Applying SOAP, WSDL and UDDI to Real-World Projects. Springer-Verlag 2004</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">G. Alonso, F. Casati, H. Kuno, V. Machiraju, <i>Web Services Concepts, Architectures and Applications</i>. Springer-Verlag 2004</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">S. Chatterjee, J. Webber, <i>Developing Enterprise Web Services: An Ar- chitect’s Guide</i>. Prentice-Hall, 2004</p></li></ol><li style="padding-top: 4pt;padding-left: 35pt;text-indent: -20pt;text-align: left;"><h1 style="display: inline;"><a name="a229">The Semantic Web</a></h1></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;">Judi McCuaig</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l330"><ol id="l331"><li style="padding-top: 7pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a230">ICDE and the Semantic Web</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">In the ICDE application, the platform provides a notification facility allow- ing third party tools to exchange data. As an example use case for this fa- cility, suppose that an ICDE user is working with a third party tool to ana- lyze the financial transaction records from several organizations. The tool performs a complex analysis on the transaction records to produce a list of keywords in various finance-related categories and stores this list in the ICDE data store. This ICDE user has also authorized other tools to utilize her ICDE data as input to their own additional analysis. One of these tools reads the stored keyword list and uses it to perform a search for new, un- seen information related to the user’s financial transaction analysis.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">This scenario is only possible if the cooperating tools have the capacity to effectively share data. This includes a consensus understanding of the semantics of the data items being shared. Commonly, this consensus is achieved by creating a data structure that is coupled to each application sharing the data. The data structure defines the format of the shared data (e.g. list, table) and the semantics of the data in the data structure (e.g. document name, document title, document location, document topic, etc).</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">One way to accomplish a shared understanding with ICDE is to define a published table structure in the ICDE data store and require the collaborat- ing applications to use the table to share data. However, a fixed table struc- ture is not a flexible solution. The ICDE development team could never anticipate suitable data structures for every third party tool and every ap- plication domain in which ICDE would operate. New tables could be added of course, but if each third party tool vendor had to negotiate with the ICDE team to get a suitable data structure defined, agile tool integra- tion would be absolutely impossible.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">A more flexible approach would allow any third party tool supplier to publish data via the ICDE data store using any structure they desired. Sub-</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">sequently, any other authorized tool should be able to dynamically dis- cover the structure of the data, and understand its content. No prior, hard- coded knowledge of data structures should be needed.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">An obvious starting point for this more flexible solution is to use self- describing data structures for formatting all published data. XML docu- ments would suffice in this respect, as any program can dynamically parse an XML document and navigate the data structure. However, raw XML doesn’t support “semantic discovery”. For example, one third party tool might use the XML tag <span class="s39">&lt;location&gt; </span>to indicate the location of some in- formation, whereas another may use <span class="s39">&lt;URI&gt;</span>, and another <span class="s39">&lt;pathname&gt;</span>. The semantics of these tag names tell a human reader that they all furnish the same information, but there is no way to make that conclusion pro- grammatically using only XML. Forcing all tools to use the same strict tag vocabulary is hardly more flexible than forcing them all to use the same data structure.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">What is required is a mechanism to share the semantics of the chosen vocabulary, allowing programmatic discovery of terms that describe simi- lar concepts. Using such a mechanism, a tool can determine that <span class="s39">&lt;URI&gt; </span>and <span class="s39">&lt;location&gt; </span>are actually the same concept, even when the relation- ship is not explicitly defined in the software or the published data.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The solution to this problem lies in the set of technologies associated with the Semantic Web. The Semantic Web makes it possible to describe data in ways that make its semantics explicit and hence discoverable auto- matically in software. One of the key innovations lies in the use of ontolo- gies, which describe the relevant concepts in a domain, and the collection of relationships between those concepts.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">This chapter introduces the basic technologies of the Semantic Web. It then shows how domain ontologies can be used in the ICDE platform to support ease of integration for third party tool vendors.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 10pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a231">Adaptive, Automated, and Distributed</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">The difficulties associated with software integration have plagued software engineers since the early days of the computing industry. Initial efforts at integration (ignoring for now the problems of hardware and storage inter- operability) centered on making data accessible to multiple applications, typically through some sort of database management system.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">More recently efforts have been made to create interoperable processes using components using technologies like CORBA or J2EE. As explained in the previous chapter, services oriented architectures and Web services</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">technologies are the latest technologies to give software designers the op- portunity to create software systems by gluing together services, poten- tially from a variety of providers, to create a specialized software system designed for a particular business problem.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Of course, there are immense difficulties associated with locating, inte- grating and maintaining a system composed of autonomous services and components. Some of the major challenges center on the creation, man- agement and utilization of appropriate metadata to facilitate dynamic inter- action with the available information, services, and components. It is pre- cisely these problems that the Semantic Web, or rather the technologies that underpin the Semantic Web, is tackling. It provides tools and ap- proaches to metadata management that are generically useful for dynami- cally integrating software applications.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a232">The Semantic Web</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">The purpose of the Semantic Web initiative is to create machine under- standable information where the semantics are explicit and usable by algo- rithms and computer programs. This original goal has expanded to include the goal of creating services, or processes, that are machine understandable and useable by other processes. This shared understanding, whether it be of data or services, is made possible by a rich collection of metadata de- scription and manipulation languages and protocols. For the most part, the Semantic Web exists because of these languages.</p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;">The goal of the Semantic Web has been made possible through:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">the formalization of metadata representation</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">continued development in knowledge representation</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">logic and reasoning techniques that can exploit both the metadata and the represented knowledge.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The key capabilities offered are flexible representation of metadata and relationships, encoded as ontologies, which allow translation between metadata vocabularies and reasoning about the represented metadata enti- ties  </p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l332"><ol id="l333"><ol id="l334"><li style="padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a233">Metadata</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">The advanced integration capabilities associated with the Semantic Web comes almost entirely on the back of extensive efforts in creating and</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">maintaining metadata. The introduction of the Extensible Markup Lan- guage (XML) and the technologies related to it provided a structured, flexible mechanism for describing data that is easily understood by ma- chines (and humans who like angled brackets!).</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">XML provides the means to label entities and their parts, but provides only weak capabilities for describing the relationships between two enti- ties. For example, consider the XML fragment in Fig. 90. The XML shown describes a <i>Person </i>in terms of <i>Name</i>, <i>Email</i>_<i>Address </i>and <i>Phone_Number</i>, and a <i>Transaction </i>in terms of <i>Type</i>, <i>Client </i>and <i>AccountNumber</i>. The ex- ample also shows the use of attributes to create unique identifiers (<i>id</i>) for each entity.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-top: 5pt;padding-left: 16pt;text-indent: 0pt;text-align: left;">&lt;example&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">&lt;Person id=&quot;123&quot;&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">&lt;Name&gt;J Doe&lt;/Name&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">&lt;Email_Address&gt;doe@myplace&lt;/Email&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">&lt;Phone_Number&gt;123 456 7899&lt;/Phone_Number&gt;</p><p class="s37" style="padding-left: 36pt;text-indent: 0pt;text-align: left;">&lt;/Person&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">&lt;Transaction transID=&quot;567&quot;&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">&lt;Downtick&gt;500&lt;/Downtick&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">&lt;Client&gt;Josef Doe&lt;/Client&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">&lt;AccountNumber&gt;333222111&lt;/AccountNumber&gt;</p><p class="s37" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">&lt;/Transaction&gt;</p><p class="s37" style="padding-left: 16pt;text-indent: 0pt;text-align: left;">&lt;/example&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-top: 5pt;padding-left: 127pt;text-indent: 0pt;text-align: left;">Fig. 90. <span class="s7">XML example</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">However, XML is not enough to easily identify relationships between different pieces of information. For example, using only the XML tag metadata, the identification of the email address of the person who con- ducted a specific transaction is somewhat complex. It relies on the ability to determine that the <i>Client </i>field of the transaction represents the name of a person, and that if the <i>Client </i>field data matches the <i>Name </i>field of a per- son a relationship can be identified and the person’s email address used.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">A human can quickly make that determination because a human under- stands that the tags <i>Client </i>and <i>Name </i>both signify information about peo- ple. A software process unfortunately has no such capability because it does not have any way of representing those semantics.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">To address this problem, the Resource Description Framework (RDF) was developed as a machine understandable representation of relationships between entities. It is assumed that each entity and relationship can be identified with a URI. These URIs are used to form an RDF statement of the form {Subject, Predicate, Object}, commonly called a “triple”.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 10pt;text-align: justify;">Continuing with the previous example, the addition of an RDF relation- ship <i>conducted_by </i>(see RDF example below) between the transaction and the person (using the <i>id </i>attributes as the unique identifier) allows a ma- chine to extract the email address of the transaction owner, without requir- ing replication of information. The RDF statement below indicates that the person referenced by id # 123 conducted the transaction referenced by id # 567.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;line-height: 112%;text-align: left;"><a href="http://example.net/con" class="s87" target="_blank">&lt;http://example.net/transaction/id567&gt;&lt;http</a><a href="http://different.example.net/person/id123" class="s87" target="_blank">://example.net/con ducted_by&gt;&lt;http://different.example.net/person/id123&gt;</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The relationship is explicit and easily exploited by automated means once a human identifies and records the relationship. Still, there is still no mechanism that allows automated identification of the relationships or that provides any restrictions on the participants in those relationships. For in- stance, it is relatively easy for a human to understand that a transaction could be conducted by a person, but that a person cannot be conducted by a transaction! The RDF has no such restrictions however, so the algorithms processing the RDF have no way of verifying the types or expected attrib- utes of the entities in the relationships.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">A partial solution to this problem can be found in the schema languages for XML and RDF. The schema languages allow <i>a priori </i>definition of en- tities and relationships to include domains and ranges for attributes and ob- jects. Entities (or relationships) that reference the schema for their defini- tion can then be checked for consistency with the schema. This allows enforcement of range and data type restrictions during data processing without human intervention.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Together RDF, XML and their schema languages provide a robust, us- able method for encoding metadata and exploiting it to automatically iden- tify relationships between entities. However, this is only a starting point. Our kitbag of essential technologies for automated metadata understanding also needs the ability to make deductions and inferences about metadata.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Consider again the transaction and client example. The completion of a transaction is usually the result of collaboration between several individu- als, including a client, financial consultant and clerk for instance. It would be trivial to modify the XML metadata example given earlier to represent both the consultant and clerk as part of the transaction’s metadata, thus ex- plicitly representing the relationship between the transaction and the col- laborating individuals.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">However, the collaboration between any particular pair of those three entities (consultant, client, clerk) is not explicitly represented in that meta- data. So for example, a program that identifies both the client and consult-</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">ant for a transaction has no mechanism for determining whether specific clients and consultants are known to one another. One way to remedy this problem is to simply add more metadata and explicitly identify the client- consultant relationship, but that solution quickly leads to an explosion in the quantity of metadata. A more general solution is to define logical rules that delineate the possible deductions with the different types of metadata. Those logical rules define the semantics associated with the metadata and are frequently described with the aid of a formal ontology. Ontologies are explained in the next section.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Well defined and ordered metadata is the backbone of the Semantic Web. Metadata is used to dynamically assemble data from a variety of sources, for making informed decisions, and to provide data for planning such things as, for example, vacations and the shipping of goods. While metadata technologies are most frequently used with Web-based informa- tion at the moment, they can be used with equal power to identify connec- tions between software services for the purposes of creating any software system.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a234">Semantics</a></p></li></ol></ol></ol><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">The one feature that distinguishes the Semantic Web from the better un- derstood World Wide Web is the representation and utilization of meaning, or semantics. One common representation for semantics is an ontology<i>. </i>An ontology consists of a set of ideas or concepts and the collection of rela- tionships between those concepts.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">An ontology can be used to identify ideas that are related to one another and to provide the structure for a reasoning engine to make inferences about those ideas. An ontology generally models abstraction relationships and frequently models aggregation relationships. More complex ontologies also model domain specific relationships about individuals and classes in the ontology. Ontologies can also provide information about concepts that are equivalent to other concepts, giving them the capacity to act as thesauri. As a result, an ontology can also be used to provide the mapping between different vocabularies used to describe metadata.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">For example, consider the ontology fragments represented in Fig. 91. The ontology shows that <i>Humans </i>and <i>Persons </i>have <i>Occupations </i>and that certain kinds of <i>Occupations </i>have relationships with other concepts in the ontology. Both <i>Students </i>and <i>Instructors </i>are concerned with <i>Courses </i>and both <i>Authors </i>and <i>Publishers </i>are concerned with <i>Publications</i>. This ontol- ogy could be used by an automated system to identify related entities or identify the use of equivalent concepts (such as <i>Human </i>and <i>Person </i>in this</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">example). The ontology provides logical axioms to a reasoning system which can then make inferences about the information.</p><p style="padding-left: 78pt;text-indent: 0pt;text-align: left;"><span><img width="261" height="308" alt="image" src="Image_283.gif"/></span></p><h4 style="padding-top: 5pt;padding-left: 120pt;text-indent: 0pt;text-align: left;">Fig. 91. <span class="s7">Ontology example</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Within the Semantic Web, the Web Ontology Language (OWL) is a common representation of the axioms and domain concepts.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Consider again the example of the financial transaction. An ontology could provide the logic to automatically identify a relationship between a client and a financial consultant, even when the relationship is not explic- itly stated in the available metadata. A reasoning system could deduce that a client and consultant are known to one another if they have collaborated on some specified number of transactions. An additional rule could state that if they have collaborated on more than one type of transaction, they are well known to each other.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">With these additions, a knowledge base that consists of information about financial transactions and clients can also be used to identify rela- tionships between humans. Information about client-consultant relation- ships could be useful to someone analyzing financial transactions for the purpose of identifying sets or groups of people conducting specific classes of transactions (i.e. transactions occurring in a particular time period).</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">An ontology can also contain rules that constrain relationships. Suppose that the example ontology contains a rule that precludes the same individ-</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">ual from being both client and clerk for a transaction. Using the rule and a reasoning system, the ontology could be used to detect errors in informa- tion or to prevent errors in data entry. Ontologies, or similar knowledge representation mechanisms, provide meaning for the metadata that is the backbone of the semantic web.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">XML, RDF and OWL are the basic technologies supporting the Seman- tic Web. One of the first, and most developed, Semantic Web driven in- formation portals, somewhat predictably, supplies information about the Semantic Web (www mindswap org). This site uses RDF, OWL and rea- soning engines to provide flexible access to a wealth of information about the Semantic Web.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Usage of Semantic Web technologies has increased dramatically in the last two years, to the point where many Semantic Web applications are no longer simple prototypes. For example, NESSTAR<span class="s14">54 </span>is a Semantic Web based application for publishing, protecting and authenticating statistical data. The software enjoys huge success, claiming clients such as Statistics Canada and the Norwegian Institute of Public Health. The software pro- vides Web-based mechanisms for creating tables, subsets and reports using Semantic Web based ontologies and client-provided statistical data. A sec- ond example of Semantic Web enabled software is Corese<span class="s14">55</span>, a search en- gine that uses a domain ontology to support queries across RDF metadata, and that is used in several prototype applications across industry and gov- ernment in Europe.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h2 style="padding-top: 10pt;padding-left: 14pt;text-indent: 0pt;text-align: left;"><a name="a235">13.4 Ontologies in ICDE</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">The ICDE system could employ ontologies to support information ex- change and integration tasks for the third party tools. As hinted in the in- troduction to this chapter, one application of an ontology to the task of fi- nancial transaction analysis is to identify consistent vocabularies. Shown in Fig. 92 is a portion of a financial ontology from Teknowlege.<span class="s14">56 </span>The on- tology fragment shows several different kinds of financial transactions ar- ranged in an abstraction hierarchy.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Suppose that this ontology is available in the ICDE system, and an ICDE user was inspecting and analyzing the example data presented in Fig. 90, in which <i>Downtick </i>is the XML tag for the transaction ID. The use of <i>Downtick </i>as a label in that example could easily prevent other third</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_284.png"/></span></p><p style="padding-top: 4pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;"><a href="http://www.nesstar.com/" style=" color: black; font-family:&quot;Times New Roman&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 3pt;" target="_blank">54 </a><a href="http://www.nesstar.com/" target="_blank">http://www.nesstar.com/</a></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;"><a href="http://www-sop.inria.fr/acacia/soft/corese/" style=" color: black; font-family:&quot;Times New Roman&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 3pt;" target="_blank">55 </a><a href="http://www-sop.inria.fr/acacia/soft/corese/" target="_blank">http://www-sop.inria.fr/acacia/soft/corese/</a></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;"><a href="http://ontology.teknowledge.com/" style=" color: black; font-family:&quot;Times New Roman&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 3pt;" target="_blank">56 </a><a href="http://ontology.teknowledge.com/" target="_blank">http://ontology.teknowledge.com/</a></p><ol id="l335"><ol id="l336"><li style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 223pt;text-indent: -21pt;text-align: left;"><p class="s7" style="display: inline;">Ontologies in ICDE 247</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_285.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">party ICDE tools from making use of the information about the transac- tion, because the label may have no meaning to those tools. However, with the ontology and a reasoning engine it is straightforward to determine that <i>Downtick </i>is a type of <i>Financial Transaction </i>and that the information should be shared with any tools that are interested in data about financial transactions.</p><p style="padding-left: 16pt;text-indent: 0pt;text-align: left;"><span><img width="413" height="161" alt="image" src="Image_286.gif"/></span></p><h4 style="padding-top: 5pt;padding-left: 81pt;text-indent: 0pt;text-align: left;">Fig. 92. <span class="s7">A simple financial transaction ontology</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Ontologies can provide more than just thesaurus services for ICDE tools. An OWL ontology can encode complex rules about the relationships between individuals of particular conceptual types. Reasoning engines can use the rules to make deductions about individual data elements.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="321" height="185" alt="image" src="Image_287.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="8" height="38" alt="image" src="Image_288.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="16" height="31" alt="image" src="Image_289.png"/></span></p><p class="s7" style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">CognitiveAgent</p><p style="text-indent: 0pt;text-align: left;"/><p class="s7" style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">Contract</p><p style="text-indent: 0pt;text-align: left;"/><p class="s20" style="padding-left: 124pt;text-indent: 0pt;text-align: left;">heldAccount<span class="s6">*</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="8" height="136" alt="image" src="Image_290.png"/></span></p><p class="s20" style="padding-left: 14pt;text-indent: 0pt;text-align: right;">isa</p><p class="s20" style="padding-top: 4pt;padding-left: 10pt;text-indent: 0pt;text-align: left;">isa</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">Client</p><p style="text-indent: 0pt;text-align: left;"/><p class="s20" style="padding-top: 9pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">holderofAccount<span class="s6">*</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-left: 30pt;text-indent: 0pt;text-align: left;">FinancialAccount</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">FinancialContract</p><p style="text-indent: 0pt;text-align: left;"/><p class="s20" style="padding-left: 14pt;text-indent: 0pt;text-align: right;">isa</p><p class="s20" style="padding-top: 4pt;padding-left: 21pt;text-indent: 0pt;text-align: left;">isa</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s20" style="padding-left: 56pt;text-indent: 0pt;text-align: left;">managedAccount*</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s20" style="padding-left: 13pt;text-indent: 0pt;text-align: left;">transactionConducted*</p><p class="s20" style="padding-top: 5pt;padding-left: 8pt;text-indent: 0pt;text-align: left;">accountTransacted*</p><p class="s7" style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">FinancialTransaction</p><p style="text-indent: 0pt;text-align: left;"/><p class="s7" style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">Broker</p><p style="text-indent: 0pt;text-align: left;"/><p class="s20" style="padding-top: 7pt;padding-left: 84pt;text-indent: 0pt;text-align: left;">accountConsultant*</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-top: 5pt;padding-left: 116pt;text-indent: 0pt;text-align: left;">Fig. 93. <span class="s7">Rules in an ontology</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: left;">Consider the ontology fragment shown in Fig. 93. It shows that the on- tology contains rules describing the relationships between accounts, ac-</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">count holders, transactions and brokers. A reasoning engine can use these relationships to deduce relationships between a particular client and a bro- ker, or to deduce that a particular broker had a likely involvement with a specific transaction, even when the data being analyzed contained no spe- cific linkage between the two entities.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">This kind of shared ontology could allow collaborating third party ICDE tools to help the user notice data connections that might otherwise go un- noticed. For instance, suppose that one tool helped a user select and ana- lyze particular types of financial transactions. Another tool assisted the user to identify social networks of individuals based on shared interest in accounts. Individually, neither of these two tools would uncover relation- ships between an advisor and a particular type of transaction, but the indi- vidual results from the two tools could be combined (possibly by a third tool) to uncover the implicit relationships.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 10pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a236">Semantic Web Services</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">Web services and service oriented architectures were presented in the pre- vious chapter as a significant step towards a simple solution for the inter- operability problems that typically plague middleware applications. Web services also play a part in the Semantic Web. As Semantic Web applica- tions increase in complexity, and as information consumers become more discerning, the focus is turning from semantically addressable information to semantically addressable services that allow automated creation of cus- tomized software system, or Semantic Web services<i>.</i></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Current tools provide the capability to describe Web services, but do not have adequate means for categorizing and utilizing those descriptions. The categorizations available, such as WSIndex, (www wsindex org) are de- signed primarily for human use rather than machine. As a result, auto- mated system composition is more a dream than reality right now.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">However, unlike most information on the Web, Web services are typi- cally accompanied by adequate metadata, which is the key component of the Semantic Web. The difficulty in using that metadata lies in understand- ing the semantics. Predictably, there is a substantial amount of research fo- cused on applying ontologies and other tools of the Semantic Web to Web services. Semantic Web services provide a mechanism for creating seman- tically rich descriptions of services. These can be used to create specifica- tions for composite services, to represent business logic at a more abstract level and to supply knowledge for reasoning systems which can then intel- ligently assemble software from service descriptions. One of the underly-</p></li><li style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 225pt;text-indent: -21pt;text-align: left;"><p class="s7" style="display: inline;">Cautious Optimism 249</p></li></ol></ol><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_291.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">ing languages in the development of Semantic Web services is the Ontol- ogy Web Language for Services (OWL-S). OWL-S is an ontology lan- guage with the goal of enabling automated discovery, incorporation and execution of Web services.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">OWL-S breaks the description of a service into three parts, a service profile, a process model and a mapping between the process model and the message passing protocol (called a grounding). The profile is used both to advertise services and to request services. The intention is that the profile is used in service discovery to match appropriate services to requests for services. Profiles consist, in part, of a description of both functional pa- rameters, described as inputs, outputs, preconditions and effects, and non- functional parameters such text fields meant for human consumption or to define quality of service constraints.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The process model uses the OWL-S process ontology to describe the execution of a web service. The process model precisely describes the re- quired flow of control and data to obtain the results specified in the profile and includes three types of processes, namely atomic, simple and compos- ite. Only atomic processes may be executed directly. Finally the grounding provides the binding between the atomic processes and the message format selected. Currently OWL-S has a grounding ontology defined for WDSL that allows for describing the message requirements for atomic processes.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">OWL-S is not a complete specification nor is it a stable standard. It is, however, a good start at defining how semantics can be added to Web ser- vices. It has been subjected to few real world test cases to date, but experi- ences with a prototypical use case implementation suggested that OWL-S may be a good start for enterprise integration, but that it currently lacks the capacity to allow fully automated discovery and composition of services. Nonetheless, it seems inevitable that OWL-S or some other similar work, such as the Internet Reasoning Service will result in an automated mecha- nism for finding and composing services.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l337"><ol id="l338"><li style="padding-left: 42pt;text-indent: -26pt;text-align: left;"><h2 style="display: inline;"><a name="a237">Cautious Optimism</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">The Semantic Web has enjoyed immense popularity and publicity in the past few years. The effect has been that every researcher interested in any- thing that could possibly be applied to the Semantic Web has quickly ad- justed their research descriptions to reflect that application. Unfortunately, with an increase in claims to be researching (or implementing) the Seman- tic Web comes a possible dilution of the projects that are actually working</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">on addressing the original and important goals of semantically rich, ma- chine understandable metadata for data and processes.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">While many believe in the technologies, a certain wariness seems to prevail. This is possibly because the Semantic Web looks on the surface like a refactoring of the artificial intelligence projects that went out of vogue several years ago. However, it seems that the need for semantic rep- resentations in software systems is now widely recognized, and the de- mand for real solutions is growing. So this time, the timing might just be right.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The Semantic Web also has all the data management issues of any large information system. Who will take the time to provide all the detailed metadata about existing services and information? Who monitors informa- tion and services for integrity, authenticity and accuracy? How are privacy laws and concerns addressed when computing is composed from distrib- uted services? Web services providers will spring up as a new category of business, but how will they be monitored and regulated? As systems are built that rely on quality metadata, its maintenance and upkeep become vi- tal operational issues.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Despite the prototypical nature of most of the work so far, the Semantic Web places new techniques, new applications and important experiences in the toolbox of software architects. The Semantic Web is simply a loose conglomeration of cooperating tools and technologies, but precisely be- cause of this loose coupling between technologies, the Semantic Web pro- vides a flexible sandbox for testing new frameworks and ideas.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">And, if one looks past the hype, the goals of the Semantic Web commu- nity are the same as the goals for distributed software architecture: to cre- ate loosely coupled, reliable, efficient software that addresses the needs of users. Through the formally defined mechanisms for reasoning with meta- data, the Semantic Web provides the basis for creating software that is truly adaptive to tasks and context.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">One of the prime targets for adaptive integration efforts is enterprise in- tegration. The Enterprise Semantic Web is a term used to describe Seman- tic Web-driven business solutions. The distinguishing feature of the Enter- prise Semantic Web is the focus on ontologies and inference as mechanisms for improving data integration, rather than on HTTP and Web services as mechanisms for distributed access. Network Inference (www networkinference com/) is a company that creates information man- agement solutions and does enterprise integration based on Semantic Web technologies.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Software developers and researchers are responding quickly to the needs of semantic computing. A 2004 conference on service-oriented computing included plenary sessions on service security and quality of service in ad-</p></li><li style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 237pt;text-indent: -21pt;text-align: left;"><p class="s7" style="display: inline;">Further Reading 251</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_292.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">dition to more predictable sessions about service-oriented architectures and the design and implementations of services and composed applications. The Semantic Web services architecture identifies message mediation, se- curity, process composition, negotiation and contracting, and message formulation as important aspects of the Semantic Web that warrant imme- diate exploration and development. Developments such as OWL-S and the Internet Reasoning Service show promise as process description and com- position languages. The Semantic Web and software architecture are on paths that are rapidly converging on a new, semantically driven, way of building software.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h2 style="padding-left: 15pt;text-indent: 0pt;text-align: left;"><a name="a238">13.7 Further Reading</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;">Two general books on the Semantic Web are:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">G. Antoniou, F. van Harmelen. <i>A Semantic Web Primer</i>. MIT Press, 2004</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">B. Passin. <i>Explorer&#39;s Guide to the Semantic Web. </i>Manning Publications, 2004</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;">W3C’s Web site is a source of great information on the Semantic Web.</p><p style="padding-left: 15pt;text-indent: 0pt;line-height: 206%;text-align: left;"><a href="http://www.w3.org/2001/sw/" class="s13" target="_blank">A good starting point for exploration is </a><a href="http://www.w3.org/TR/owl-ref/" class="s13" target="_blank">http://www.w3.org/2001/sw/. Specific details of OWL can be found at http://www.w3.org/TR/owl-ref/.</a></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;"><a href="http://protege.stanford.edu/plugins/owl/index.html" class="s13" target="_blank">A tool for building ontologies can be freely downloaded from </a>http://protege.stanford.edu/plugins/owl/index.html. It’s a good tool for ex- ploring how ontologies can be built and accessed:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;"><a href="http://www.daml.org/services/owl-" class="s13" target="_blank">Information on OWL-S can be found at </a><a href="http://www.daml.org/services/owl-s/1.0/" class="s13" target="_blank">http://www.daml.org/services/owl- s/ and http://www.daml.org/services/owl-s/1.0/.</a></p></li></ol><li style="padding-top: 4pt;padding-left: 35pt;text-indent: -20pt;line-height: 106%;text-align: left;"><h1 style="display: inline;"><a name="a239">Software Agents: An Architectural Perspective</a></h1></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l339"><ol id="l340"><li style="padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a240">Agents in the ICDE Environment</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">During discussions with the third party tool vendors, the ICDE team no- ticed that the tool developers used the term “agents” pretty frequently. Nearly all the tool vendors claimed that their tools used these things called agents to do various types of really intelligent sounding analysis, collabo- ration and visualization.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Being from mainstream software engineering backgrounds, the ICDE team was a little puzzled as to what exactly was meant by agents. What differentiated an agent from some other kinds of components? Why were they useful? How does the ICDE application have to cater for integration with all these agent things? These questions were raised with the various tool vendors, but frequently the ICDE team left the meetings more con- fused than they were when they entered!</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">It soon became obvious that the team would have to do some investiga- tions of its own to get a deeper understanding of agents and their related technologies. Hence they assigned two team members to do some research into the area. The aim was to be able to characterize exactly what was meant by the terms software agent. And more importantly, they wanted to understand the implications of integrating with agent-based tools for the ICDE design and implementation.</p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;">This chapter describes their findings.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a241">What is an Agent?</a></h2></li></ol></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">The term software agent has gained considerable attention recently in the information technology community. So-called intelligent or autonomous agents are reportedly capable of many advanced forms of behavior. Advo- cates of agent technologies claim many and varied benefits from their use.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">These include better ways to structure applications, improvements in pro- gramming language abstractions for complex integrated communications, and a natural metaphor for human-computer interaction.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Software agents and related technology have implications for software architects, as agents represent potential components in an architecture. Agents-based architectures are therefore something an architect might be- gin to consider as agent technologies continue to transition from the re- search labs to products.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Agent technologies have emerged from the field of distributed artificial intelligence research. The agents R&amp;D community itself has many defini- tions of what exactly constitutes an agent system. Franklin<span class="s14">57 </span>points out that many of these are broad and encompass a wide range of software systems, many of which were not conceived or designed as agent systems.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Below is an example of widely cited definitions of agents and their ca- pabilities: <span class="s14">58</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Agents are situated in some environment</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Agents are capable of flexible autonomous action in order to meet de- sign objectives</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;text-align: left;">The notion of flexibility is further expanded to incorporate:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><h3 style="display: inline;">Responsiveness: <span class="p">agents perceive their environment and respond in a timely fashion to changes that occur in it.</span></h3></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: left;"><h3 style="display: inline;">Pro-active: <span class="p">agents should exhibit opportunistic goal-driven behavior.</span></h3></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><h3 style="display: inline;">Social: <span class="p">agents should be able to interact in order to complete their own problems and help others with their activities.</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">In addition, Michael Wooldridge<span class="s14">59 </span>states that software agents are appro- priate for applications in which:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Data, control, expertise or resources are distributed</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Agents provide a natural metaphor for delivering system functionality</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_293.png"/></span></p><p class="s7" style="padding-top: 4pt;padding-left: 28pt;text-indent: -13pt;line-height: 106%;text-align: left;"><span class="s14">57 </span>S. Franklin, A. Graesser. <i>Is it an agent, or just a program?. </i>in Intelligent Agents III, LNAI vol 1193, pp 21-36, Springer-Verlag, Berlin 1997</p><p class="s7" style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><span class="s14">58 </span>N. R. Jennings, K. Sycara, M. Wooldridge<i>. A roadmap of agent research and developmetnt </i>Autonomous Agents and Multi-Agent Systems, pp 275-306, Kluwer, 1998</p><p class="s7" style="padding-left: 28pt;text-indent: -13pt;text-align: left;"><span class="s14">59 </span>M. Wooldridge, N. Jennings. <i>Software engineering with agents: pitfalls and pratfalls</i>. IEEE Internet Computing. May/June 1999, pp20-27</p><ol id="l341"><ol id="l342"><li style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 229pt;text-indent: -21pt;text-align: left;"><p class="s7" style="display: inline;">What is an Agent? 255</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_294.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">A number of legacy systems must be made to interwork</p><p style="padding-top: 11pt;padding-left: 15pt;text-indent: 10pt;text-align: justify;">Taken as a whole, these definitions would seem to encompass a lot of the mainstream IT systems that exist today. Certainly, examining the above from a technical software engineering perspective reveals some in- teresting issues.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">All of the points above describe broad classes of characteristics, or be- haviors of agents and agent-based systems. They do not describe from a technological standpoint the competitive benefits of adopting an agent based solution, over, say an object-oriented or component-based technol- ogy. This is highly unusual for a software technology. An example will suffice to explain this point.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">From a software engineering perspective, autonomy is somewhat diffi- cult to pigeonhole. In agent terms, agents are often differentiated from “passive” objects. This seems to imply an active thread of control for each agent. Cooperative infers that threads representing agents communicate in some way, perhaps across address space boundaries. Reactive infers that threads representing agents receive messages or events from their envi- ronment or other agents and somehow process them in a manner that is consistent with their desired autonomous behavior. Pro-active infers some sampling of the environment, perhaps to ensure that environmental state does not become unstable.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Unfortunately, there are multitudes of systems in existence today that are multi-threaded, where threads communicate within and across process and object boundaries, and in which threads react autonomously and pro- actively to handle external stimuli. These systems range from embedded control systems, to graphical user interfaces, to database systems, operat- ing systems and large-scale enterprise applications. Are all these applica- tions agent-based systems? This would probably be news to many of their developers if this were so.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">As concrete examples, consider the following. Are these agent-based systems?</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">The flight control software of a commercial airliner, including the auto- pilot.</p></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Military applications, such as missile control.</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">An anti-lock braking management system in an automobile.</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">Telecommunications switching network software.</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">An enterprise-scale personal information management system such as Lotus Notes or Microsoft Outlook.</p></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">A commercial database management system such as Oracle or DB2</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">Consequently, a definition of agents-based applications in terms of their external or behavioral characteristics is highly problematic from an engi- neering perspective. Put simply, such a definition can be used to encom- pass a significant proportion of software systems that exist today, the vast majority of which are clearly not created using agent approaches and/or technologies.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">These definitions also imply that an agent-based system can be identi- fied by external observation of its behavior. Many sources exemplify this by describing agents “that monitor and react to human interactions with a graphical user interface (GUI)”, or “crawl web pages looking for informa- tion”. These descriptions easily capture personal information managers such as Microsoft Outlook, word processors, and Internet search engines like Google. Are these agent-based systems as well? From their external behavioral characteristics, it would appear so.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Let’s contrast the above definition of agents with that of a now mature software technology. Object-oriented technology saw many heated debates over what exactly constituted an object-oriented system. As object- orientation grew from a programming language movement, many of these debates revolved around the characteristics that were necessary for a lan- guage to be classified as object-oriented. The advocates of pure object- oriented languages such as Smalltalk and Eiffel criticized so-called hybrid languages like C++, and code examples abound demonstrating why a par- ticular language was in some way preferable to others.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Interestingly, never (to my knowledge anyway) were the external char- acteristics of an application used to define object-oriented systems. The is- sues revolved around the engineering benefits of object-orientation, such as data hiding, inheritance, polymorphism, improved maintenance and rapid application development. Engineers and management were not heard to request an object-oriented banking system, or an object-oriented GUI. Rather, they discussed a banking system or GUI built using object-oriented technology.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">So, it seems that to some in our software world, an agent-based system is simply something that many of us have been building for decades using conventional programming technologies. And the term agent is simply something that the technically minded amongst us might call an active ob- ject, a thread or even a process. “Agent” is used here as a label to identify some component of system that has a particular role. Examples like a mail agent, monitoring agent, and transformation agent abound. From an archi- tectural perspective, there’s absolutely nothing new here. It’s terminology, that’s all.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">But, there are new and potentially interesting technologies for building agent-based applications. However, with the current widely espoused defi-</p><ol id="l343"><ol id="l344"><li style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 217pt;text-indent: -21pt;text-align: left;"><p class="s7" style="display: inline;">Abstraction Revisited 257</p></li></ol></ol><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_295.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">nitions of agent-based systems, it is unclear what the technical and engi- neering advantages are of adopting an agent-based approach might be? The definitions are too broad, use anthropomorphism to imbue agents with capabilities that software simply doesn’t possess, and have no solid techni- cal basis on which the merits can be objectively assessed.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">A deeper insight is obviously needed before the implications of agent technology can be discussed from an architectural and engineering per- spective. So pick up a shovel and let’s dig deeper.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l345"><ol id="l346"><li style="padding-top: 10pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a242">Abstraction Revisited</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">The key role of abstraction is well known in the advancement of software engineering. Abstraction has been responsible for the evolution of pro- gramming languages through the adoption of more abstract mechanisms for code construction. Abstract mechanisms are introduced into languages to replace and enforce useful constructs that were only previously possible through hand-coding compositions of multiple basic operations.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Very simplistically, using better abstractions means you have to write less code, make less errors, and can therefore tackle more complex prob- lems in the same time-scale. This pattern has been repeated many times in the software engineering, for example:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">COBOL, a high level language was introduced to provide an English- like abstraction for describing program operations that at the time were written in terms of assembly language operations.</p></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Object-oriented languages introduced programming constructs for data encapsulation in modules, type extension through inheritance, and po- lymorphic substitution mechanisms for sub-types. These supported im- proved structuring and organization of program modules over proce- dural techniques.</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><p style="display: inline;">Distributed technologies such as CORBA provide abstract mechanisms that greatly simplify the construction of type-safe inter-process commu- nications, as compared to using raw network protocols or sockets.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Given this evolution pattern for software technology, it is hardly surpris- ing that agent technologies basically introduce new abstraction mecha- nisms for application construction. Many technologies for constructing agent-based applications provide extensions to standard programming lan- guages such as Java in order to facilitate new inter-agent communications</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">mechanisms and directly implement agent management policies and se- mantics.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">These new programming language abstractions are the concrete contri- bution of agent technology to software construction. It therefore becomes vitally important from an architectural perspective to understand the poten- tial advantages of these abstractions, and how their use might make it eas- ier, cheaper or in some way provide a “better” solution than existing con- ventional technologies.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l347"><ol id="l348"><li style="padding-top: 10pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a243">An Example Agent Technology</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">The JACK60 Intelligent Agents™ technology is a commercially available agent development and deployment system. JACK extends the basic Java language by adding new abstractions for building agent systems. JACK tools convert the Java language extensions into pure Java, and applications are deployed on a standard Java run-time environment. The JACK tech- nology includes an agent language, compilation tools and a run-time en- gine known as the agent kernel.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The kernel is basically a set of Java classes that support JACK Agent Language programs. The classes are mostly hidden from the programmer, although some act as base classes for the JACK Agent Language exten- sions, and provide basic interfaces that the new JACK abstractions must support.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">JACK software agents directly support an implementation of the BDI (Belief Desire Intention) theoretical model of agent intelligence. Each JACK agent has:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></ol></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">a set of beliefs about the world (its encapsulated data);</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">a set of events that it can respond to;</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">a set of goals that it aims to achieve;</p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><p style="display: inline;">a set of plans that describe how it will behave in response to the goals or events that may arise</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The key abstractions in the JACK Agent Language, all of which are strictly typed, are:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: left;"><h3 style="display: inline;">Agent: <span class="p">The agent abstraction is used to represent the behavior of an agent in JACK. This includes the capabilities an agent has, the message</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_296.png"/></span></p><p class="s14" style="padding-top: 4pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">60 <span class="s7">This description is based on v3.1 of the JACK technology.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 26pt;text-indent: 0pt;text-align: left;">types and events it handles and the plans it will execute to achieve its goals.</p></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Plan: <span class="p">Plans define an agent’s behavior. They define the logic that the agent follows when it receives events and goals to process.</span></h3></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Event: <span class="p">The event abstraction essentially represents a message that an agent can handle and process.</span></h3></li><li style="padding-top: 1pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Database: <span class="p">The database abstraction provides a generic relational data- base, which has been designed so that it can be queried using “logical members”. Logical members follow the rules of logic programming (i.e. Prolog), whereby logical members have an unknown value until a value has been determined. Once determined, the value cannot change. Data- bases are hence also referred to as knowledge bases. Agents may have “private” databases to hold their beliefs, and “global” databases can be used to share read-only state across agents in the same process. In addi- tion, “agent databases” are read-only and may be shared only by agents of the same type (analogous to class-specific data in object-oriented sys- tems). Read-only databases may not be altered after they are initialized in a constructor call.</span></h3></li><li style="padding-left: 26pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Capability <span class="p">– The capability abstraction is a key reuse mechanism in JACK. It allows a set of functional components to be aggregated and packaged in a language entity. A capability consists of plans, events, da- tabases and other capabilities that together serve to define a component of an agent’s behavior.</span></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">When an agent is instantiated in a JACK system, it waits until it receives a goal to achieve or an event that it can handle. When either occurs, the agent selects a set of actions to pursue by examining its plans to find those that are relevant to the request. If a selected plan encounters problems in execution, the agent can select others that might apply and can continue to try out alternatives until a plan succeeds or all alternatives are exhausted.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">If a new goal or event occurs for an agent while it is already executing a plan, the agent can multitask and handle multiple requests simultaneously. JACK agents are therefore multithreaded, with the JACK run-time engine handling the spawning and scheduling of threads implicitly. In fact, native Java threading should not be explicitly used in JACK applications.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Agents are represented by first class abstractions in JACK. The outline of an agent is given below, with the JACK-specific keywords in bold:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s59" style="padding-left: 26pt;text-indent: 0pt;text-align: left;">agent <i>AgentType </i><span class="s37">extends </span>Agent</p><p class="s37" style="padding-top: 1pt;padding-left: 26pt;text-indent: 0pt;text-align: left;">{</p><p class="s37" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">// Knowledge bases used by the agent…</p><p class="s95" style="padding-left: 36pt;text-indent: 0pt;text-align: left;"><b>#private database </b>DbType db_name<span class="s37">(</span>arg_list<span class="s37">);</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s95" style="padding-top: 5pt;padding-left: 36pt;text-indent: 0pt;text-align: left;"><b>#private data </b>DataType data_name<span class="s37">(</span>arg_list<span class="s37">);</span></p><p class="s37" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">// Events handled and sent by the agent...</p><p class="s59" style="padding-left: 36pt;text-indent: 0pt;text-align: left;">#handles event <i>EventType</i><span class="s37">;</span></p><p class="s59" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">#posts event <i>EventType reference</i><span class="s37">;</span></p><p class="s59" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">#sends event <i>EventType reference</i><span class="s37">;</span></p><p class="s37" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">// Plans used by the agent…</p><p class="s59" style="padding-left: 36pt;text-indent: 0pt;text-align: left;">#uses plan <i>PlanType</i><span class="s37">;</span></p><p class="s37" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">// Capabilities that the agent has…</p><p class="s59" style="padding-left: 36pt;text-indent: 0pt;text-align: left;">#has capability <i>CapabilityType reference</i><span class="s37">;</span></p><p class="s37" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">// other Data Member and Method definitions</p><p class="s37" style="padding-top: 1pt;padding-left: 25pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">The JACK Agent Language provides the <i>Agent </i>base class. It imple- ments the base methods that provide an agent&#39;s core functionality. Within an agent, both JACK-specific abstractions as well as normal Java code can be declared.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Agents use JACK databases to store their private beliefs (data), or get access to shared beliefs in agent or global databases. Each JACK database type defines a relation that has both unique (key) fields and value fields, and an associated query method. Private database relations are unique to an agent. The agent may query its private database relations using the da- tabase’s query method, and modify the tuples in the relation using the <i>as- sert() </i>and <i>retract() </i>methods provided by the database base class. Agents may also store their beliefs in agent data members using the data declara- tion to create named Java objects. Like databases, agent data members can have private, agent or global scope.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">JACK agents communicate by exchanging messages. Agents are obli- gated to specify which message types they can accept, and which they will send. The <i>#handles event </i>statement specifies a type of event that the agent can accept. If an agent is sent a message type that it cannot handle, a run- time warning message is generated and the event discarded. There are various <i>Event </i>classes defined in JACK that can be extended by the pro- grammer to handle various circumstances.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The <i>#posts </i>and <i>#sends </i>event statements declare the event types an agent emits. When an agent posts an event, it is in effect sending the event to it- self to process in one of its plans. When an agent sends an event using the <i>send() </i>operation, it essentially transfers a message to another agent to han- dle. The send operation specifies the unique name of the agent that is to re- ceive the message. Send operations are one way. If the receiving agent wishes to provide a response, it must use a <i>reply() </i>operation in the process- ing of the message.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Events may also be sent to agents that reside in another JACK process, essentially another JVM. In this case the send operation must specify the</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">process and host name that the target agent resides in. Denoting one JACK process as an agent name server supports inter-process communications.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">JACK agents are basically idle until they receive an event to process. By default, an agent will process the events it receives one at a time. If an agent receives multiple simultaneous events, they are placed in a queue as- sociated with the agent. When an agent completes processing one event (or it enters a blocking state), it moves on the next event in queue. Agents may also specify that they want to time-share their processing amongst multiple events. In this case the JACK run-time provides a round-robin task man- ager that accepts a programmer-defined time-slice for multi-tasking.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Plans define how agents handle events. An agent should specify that it uses one or more plans that are capable of handling the events it accepts. Each JACK plan is associated with a single event type as illustrated below in the skeleton plan code below:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s59" style="padding-left: 26pt;text-indent: 0pt;text-align: left;">plan <i>PlanType </i><span class="s37">extends </span>Plan <span class="s37">{</span></p><p class="s59" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">#handles event <i>EventType reference</i><span class="s37">;</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s37" style="padding-left: 36pt;text-indent: 0pt;text-align: left;">static boolean <b>relevant </b>( <i>EventType reference</i>)</p><p class="s37" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">{…}</p><p class="s59" style="padding-left: 36pt;text-indent: 0pt;text-align: left;">context<span class="s37">()</span></p><p class="s37" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">{…}</p><p class="s59" style="padding-left: 36pt;text-indent: 0pt;text-align: left;">#posts event <i>Event1 handle1</i><span class="s37">;</span></p><p class="s59" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">#sends event <i>MessageEvent1 messagehandle1</i><span class="s37">;</span></p><p class="s59" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">#reads database <i>Relation1 relation_name1</i><span class="s37">;</span></p><p class="s59" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">#modifies database <i>Relation2 relation_name2</i><span class="s37">;</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s95" style="padding-left: 36pt;text-indent: 0pt;text-align: left;"><b>#reasoning method </b>methodName <span class="s37">( </span>parameters <span class="s37">)</span></p><p class="s37" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">{…}</p><p class="s59" style="padding-left: 36pt;text-indent: 0pt;text-align: left;">body<span class="s37">()</span></p><p class="s37" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">{</p><p class="s37" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">// Main reasoning method that executes when an</p><p class="s37" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">// agent runs an instance of this plan</p><p class="s37" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">}</p><p class="s37" style="padding-top: 1pt;padding-left: 26pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">When an agent receives an event to process, it first determines which plans can handle the event. For each plan, a series of filters are applied that test whether a plan is suitable for handling the event. The <i>relevant() </i>method for a plan is the first such filter. This typically contains Java code that tests the parameter values associated with an event to see if they are suitable for processing by this plan. If not, the method returns false and the plan is discarded as a candidate for processing this event. If the <i>relevant() </i>method is not declared or returns true, the next plan filter, the <i>context() </i>method, is applied.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">The <i>context() </i>method is designed to execute a logical expression to see if this plan is applicable to the current event. The logical expression is a JACK agent language statement that attempts to bind values from the agent’s set of beliefs to logical members, in the style of unification in logic programming. For each possible value that matches the logical expression, an instance of the plan is generated and the agent runtime selects one for execution. When a selected plan is successfully completed, the agent is deemed to have processed the event. This execution mechanism supports agents that are designed to explore different approaches to respond to ex- ternal stimuli.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Once a plan instance is selected, execution starts with the first statement in the plan’s <i>body() </i>method. The <i>body() </i>method is known as a “reasoning method”, and has additional semantics associated with its execution. Es- sentially each statement in the method is executed as a logical expression, which returns true or false. If any of the statements in the <i>body() </i>method returns false, then the plan execution is deemed to have failed and is im- mediately terminated.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Reasoning methods can also include some JACK agent language spe- cific statements, which syntactically are differentiated by starting with an “@” character. These reasoning method statements provide abstractions over a set of common behaviors required to express agent behavior. Rea- soning method statements fit into two broad categories:</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 25pt;text-indent: -10pt;text-align: justify;"><p class="s11" style="display: inline;"><b>Communications: </b>@send<span class="p">, </span>@post <span class="p">and </span>@reply <span class="p">statements enable the agent executing the plan to send events to other agents. The JACK run- time takes responsibility for message delivery, and ensuring for example that a </span>@reply <span class="p">statement is called in an appropriate context.</span></p></li><li style="padding-top: 1pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><h3 style="display: inline;">Conditional Tests: <span class="p">These statements allow an agent executing a plan to test some logical condition and react accordingly. For example,</span></h3></li></ul><p class="s11" style="padding-left: 25pt;text-indent: 0pt;text-align: justify;">@wait_for <span class="p">delays plan execution until a specified condition becomes true, or a time-out occurs. </span>@test <span class="p">evaluates a logical condition, and if the value is unknown, it posts an event that triggers further processing in the agent to try to resolve the value of the condition. </span>@achieve <span class="p">specifies a condition that the agent must attempt to make true. If the condition is not true, plan execution is suspended and a specified event is posted to the agent. This event triggers a plan execution, and the </span>@achieve <span class="p">state- ment succeeds or fails based on the outcome of this plan.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">JACK also supports a class of events known as BDI events, which in- troduce a feature known as meta-level reasoning into plan behavior. The arrival of a BDI event at an agent triggers the normal event handling mechanisms described earlier. However, when more than one plan is a</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">candidate for execution, the JACK run-time posts a <i>planChoice() </i>event to the agent. The process of handling this event is called meta-level reasoning in JACK. It gives the agent the opportunity to override default plan selec- tion behavior and select a plan to handle from the set of possible plans. Plan selection is based on the BDI event and the current set of beliefs held by the agent.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Agents must consequently include one or more plans to handle <i>plan- Choice() </i>events. This is done as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s59" style="padding-left: 26pt;text-indent: 0pt;text-align: left;">#handles event PlanChoice <span class="s37">event_handle;</span></p><p class="s59" style="padding-top: 1pt;padding-left: 26pt;text-indent: 0pt;text-align: left;">#chooses for <span class="s37">event event1 event2;</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Once a JACK plan is selected, it is executed following standard JACK mechanisms. If the selected plan succeeds, processing of the BDI event is complete.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">If the plan fails, there are two possibilities. By default for BDI events derived from either <i>BDIFactEvent</i>, <i>BDIMessageEvent </i>and <i>BDITraced- MessageEvent</i>, plan failure results in overall failure to handle the event. However, for events derived from the <i>BDIGoalEvent </i>class, failure of the initially selected plan results in the BDI event being reposted to the agent. Upon receiving the reposted event, the agent can either choose another plan from the original set, or re-evaluate the applicable plans (the initial plan or another concurrent plan execution may have caused a change in the agent’s beliefs) to generate a new plan set to choose from. This process continues until the agent finds a plan that succeeds, or all possible plans fail.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Consequently, the relatively sophisticated built-in JACK mechanisms for handling events of type <i>BDIGoalEvent </i>support goal-driven behavior in an agent. An agent can try all the alternative plans it has available to achieve the goal, and can take into account changes of state that occur while it is trying alternatives.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">This is an excellent example of the power of agent technology. A JACK agent is simply an abstraction that has a set of available behaviors, which are represented as reusable plans. The application of these behaviors to processing events and goals is flexible and adaptable, in that they can be applied and tried in various orders that reflect the current state of the sys- tem. Importantly, nowhere in the code is the order of plan application hard-coded, and the programmer does not have to resort to arcane coding methods to implement flexible plan application. The language and under- lying runtime framework provide the necessary abstractions and mecha- nisms to support this sophisticated behavior.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 10pt;text-align: justify;">This discussion of the JACK technology is by no means complete, nor does it attempt to cover the many other abstraction mechanisms used in agent systems. Agent communication languages like KQML and agent mobility mechanisms as in Aglets are issues that add to the growing tapes- try of agent technologies.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">The key issue is that these abstractions and technologies characterize and define agents and an agent-oriented approach to problem solving. The abstractions and mechanisms make it easier to build complex decision- making software. Agents in this context are much more than conventional active objects and communicating distributed components, which, with sufficient development skill and guile, could happily acquire all the behav- ioral characteristics of agents. It will just take more effort.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l349"><ol id="l350"><li style="padding-top: 10pt;padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a244">Architectural Implications</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: justify;">In many cases, agent technologies extend existing object-oriented lan- guages like Java or C++. Hence, many if not all of the design principles of object-orientation, will apply equally to agent-based systems. In addition, the concurrent and often distributed nature of agent systems bring into play other issues that, while not new, are worth restating and examining in an agent technology context.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l351"><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a245">Concurrency</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">In order to realize their aims of collaboration and autonomy, agents sys- tems are necessarily concurrent. Concurrent systems are well known as be- ing considerably harder to build than pure sequential applications. This means that the code must take adequate measures to protect shared re- sources from concurrent update attempts.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">In addition, agents are responsible for enforcing any desired ordering of events through explicit synchronization. JACK, for example, supports dealing with concurrency through statements that are guaranteed to exe- cute atomically, and statements such as <i>@wait </i>to aid with synchronization. It however remains incumbent upon the software engineer to thoroughly understand these issues, and provide correct implementations.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a246">Scalability</a></p><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">There are a number of aspects to scalability that are relevant to agent sys- tems. First, consider thread usage. It is well known that highly threaded</p><p class="s7" style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 178pt;text-indent: 0pt;text-align: left;">14.5 Architectural Implications 265</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_297.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">application architectures can suffer performance degradation as the num- ber of threads begins to exceed available system (CPU, memory) re- sources. Such systems are consequently not scalable. This kind of behavior is typically seen in applications that continually spawn new threads with- out due regard for their resource usage. As agents are often referred to as active objects, this potential exists in any agent technology that dedicates an individual thread to each agent. Undisciplined agent creation and man- agement is likely to lead to non-scalable application behavior.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Second, agents often exist in and communicate across different proc- esses on different machines. This means that inter-process communications costs between agents are considerably higher than those between co- located agents. In applications in which agent communities exchange fre- quent messages, these communications costs may become non-negliable. Agent architectures that employ a centralized broker style architecture can exacerbate this situation. If a broker is responsible for handling all incom- ing and outgoing messages for a collection of agents, the message latency introduced by the broker may become significant, especially under peak traffic loads. In general, agent applications that do not pay sufficient atten- tion to communications costs across process and machine boundaries are unlikely to scale well.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Finally, the whole intent of some agent applications raises questions of scalability. Agents are often touted as intelligent web crawlers, acting as background personal assistants and constantly trawling the Internet for new and relevant information. While this is an enviable aim, it raises ques- tions about what would happen if every user had a personal agent that con- tinuously “roams” the Internet, accessing Web pages and digesting infor- mation.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">For example, a study of traffic patterns at a major e-commerce site<span class="s14">61 </span>in- dicates that a significant percentage of all site accesses are currently from software robots extracting information such as pricing and availability. It is not hard to imagine the load problems on Web sites that would occur if there were a sudden mass deployment of personal Web crawlers across the many millions of Internet users worldwide. This is unlikely to be a scalable situation, and could cause chaos by overwhelming the available software and hardware infrastructure of the Internet. Hence it may be that the whole notion of personal Web assistants may need rethinking, or regulating in some way before this style of application becomes feasible.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_298.png"/></span></p><p class="s7" style="padding-top: 4pt;padding-left: 26pt;text-indent: -10pt;text-align: justify;"><span class="s14">61 </span>M. Arlitt, D. Krishnamurthy, J. Rolia. <i>Characterizing the scalability of a large web-based shopping system</i>. ACM Transactions on Internet Technology, vol 1, no 1, August 2001, pp 44-69</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-top: 5pt;padding-left: 48pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a247">Mobility</a></p></li></ol></li></ol></ol><p style="padding-top: 9pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">The ability for software agents to move from machine to machine to fulfill their goals is a potentially attractive proposition. Probably the best known technology is Aglets, which extends Java to handle agent migration. Aglets provide a comprehensive infrastructure for “weak” agent migration. This involves transferring an agent’s code from one machine to another, and starting the code in the target execution environment. The Aglet infrastruc- ture manages agent migration and communications with traveling agents.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Two of the main motivations for mobile agents are both performance re- lated. By migrating to a remote location, an agent can more quickly access the local resources at that node. It can then efficiently send back its answer across the network, minimizing bandwidth utilization. Of course, these gains are only realized if the benefits of migrating an agent are greater than the actual costs of migration.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Efficient evaluation of this cost function is a problem with no known general solution. This is because it is not normally possible to have a priori knowledge of the amount of work an agent will perform when it reaches a remote execution site. Even if it were, the current CPU or memory usage on the receiving machine may be so high as to negate the performance benefits once the migration has taken place. The whole problem is further exacerbated by “strong” migration mechanisms, which also migrate an agent’s current state. This is because the agent’s state and threads stack contents vary in size as the agent executes, and hence affect the cost of mi- gration.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Agent migration must also be concerned with issues of security, includ- ing authentication and authorization before migration occurs. In addition, the dangers of hostile code migrating to a machine are too high for many applications. Hostility may be in the form of damaging local resources, or for example entering an infinite loop and stealing available CPU cycles.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Straightforward mobile code applications would seem to be the most compelling applications of mobile technology. For example, once a mobile application infrastructure is in place, new components can be created and sent to remote hosts to provide them with updated and new functionality. This obviates the need for distribution of new functionality manually. It would also extend to limited resource domains such as PDAs, in which mobile applications could be used on demand and then flushed from the execution environment to create more resources for other applications. However, in many cases, ignoring the allure of mobility and settling on a more conventional static client-server or peer-to-peer distributed architec- ture will likely lead to simpler, more secure and higher performance appli- cations.</p><p class="s7" style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 231pt;text-indent: 0pt;text-align: left;">14.7 Conclusions 267</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_299.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l352"><ol id="l353"><li style="padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a248">Agent Technologies</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">The agent technology landscape comprises a number of commercial prod- ucts and several more experimental technologies from research labs and academic institutions. The market place can be characterized as relatively fractured and mostly immature. There are a number of small development organizations (e.g. Reticular Systems, Agent Oriented Software, CHI Sys- tems) with proprietary agent products (AgentBuilder, JACK, IGEN), along with efforts from major multinational research labs that typically offer open source technology (e.g. Aglets from IBM Japan, ZEUS from BT Labs).</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">In its current state, it is difficult at this moment in time to predict the di- rections the market will take, and which products and technologies will be sustainable. This situation exacerbates the risk of adopting a particular product as a strategic platform for an organization’s development.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;"><a href="http://www.fipa.org/specs/fipa00001/)" class="s13" target="_blank">The agent community is aware of this issue, and in 1996 the Foundation of Intelligent Physical Agents (FIPA – www.fipa.org) was formed to de- fine standards for agent technologies. In its 2001 definition of the FIPA Abstract Architecture (//www.fipa.o</a>rg/specs/fipa00001/), a foundation platform is described that can potentially provide interoperability between FIPA-compliant products. Achieving a high level of interoperability be- tween different vendor platforms is a significant step forward for agent technologies, as it would obviate to some extent the issues of vendor lock- in. It remains to be seen how many influential FIPA becomes, and how quickly products begin to adhere to the core FIPA specifications. Equally importantly will be the steps that are put in place to ensure and test FIPA interoperability.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 42pt;text-indent: -26pt;text-align: left;"><h2 style="display: inline;"><a name="a249">Conclusions</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">The ICDE team concluded that agent technologies represent a highly promising new approach for a number of classes of applications. This par- ticularly includes systems in which adaptable, flexible software behavior is required in complex distributed environments. Agents are certainly much more than the well understood and widely deployed paradigm of collabo- rating, distributed, active objects. They represent the merging of abstrac- tions and problem-solving techniques from the realm of artificial intelli- gence with proven software engineering mechanisms for building distributed systems. To build an agent-based system, skills and knowledge in artificial intelligence and distributed, concurrent systems are a pre-</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">requisite for using agent technologies and toolkits in the way their makers intended.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Despite the very significant interest in the potential for intelligent agents-based applications, the technology is still in an early stage of devel- opment. Much more work is needed by the leading academic and industrial research labs, standards bodies and product vendors to progress this state towards a set of mature, well-supported interoperable products with well- understood methods for design and engineering. Fortunately, the signs are encouraging. Still, in an area as dynamic and diverse as software technol- ogy, only time will tell precisely which tools and technologies will emerge as the pervasive foundations for intelligent agent systems.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">In terms of the ICDE development, what does all this mean? Basically, the third party tool developers were welcome to use agent technologies in their solutions. This had no impact as far as the ICDE platform was con- cerned. The tools may use ICDE as a form of blackboard system for shar- ing data and sending notifications. The data can also be stored in the ICDE data store in any format convenient for agent communications. As long as it is self-describing and backed up by ontologies, the tools can happily communicate. In this respect, it looks like the ICDE’s simple data storage and notification architecture had achieved its requirements for flexibility and modifiability.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a250">Further Reading</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: left;">If you’re looking for a broad and accessible description of the basis for software agents from AI, a good place to start is the following:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;text-align: left;">J. Bradshaw (Editor). <i>Software Agents. </i>AAAI/MIT Press 1997</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Another interesting collection of writing on agents with a software engi- neering focus is:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">V. Plekhanova (editor), <i>Intelligent Agent Software Engineering</i>, Idea Group Publishing, 2002</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 10pt;text-align: left;"><a href="http://agents.umbc.edu/" class="s13" target="_blank">An excellent Internet resource on all things concerning agents is at </a>http://agents.umbc.edu/. The specific pages covering agent technologies and applications are:</p><p class="s7" style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 216pt;text-indent: 0pt;text-align: left;">14.8 Further Reading 269</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_300.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;">http://agents.umbc.edu/Applications_and_Software/Software/index.sht ml</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">An interesting agent and relatively mature open source agent technology is Cougaar. It’s a technology that’s grown out of the logistics domain, and has some sophisticated features for building multi-agent applications. The best source of knowledge is:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;"><a href="http://www.cougaar.org/" class="s13">www.cougaar.org</a></p></li></ol><li style="padding-top: 4pt;padding-left: 35pt;text-indent: -20pt;text-align: left;"><h1 style="display: inline;"><a name="a251">Concluding Thoughts</a></h1></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l354"><ol id="l355"><li style="padding-left: 42pt;text-indent: -27pt;text-align: left;"><h2 style="display: inline;"><a name="a252">Challenges</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;">In roughly fifteen years, the profession of software architect has pro- gressed a very long way. There’s now an established body of professional knowledge, design tools, supporting middleware technologies and profes- sional societies. There’s an active and productive R&amp;D community that spans industrial practice and academic research groups. The latter is ex- tremely encouraging, as it promises to evolve the discipline in pragmatic ways, grounding advances in what actually works in practice.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">So while there’s much to be optimistic about, there’s still a lot that we as architects don’t do very well at all. Amongst all these areas for im- provement, many of which are covered in the previous chapters, there are two which I confront regularly and find particularly challenging. So I’ll conclude this book with a brief description of these, to whet your appetite for what lies ahead.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l356"><li style="padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a253">Architecture Knowledge Management</a></p><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">A recent incident emphasizes the importance of this area. An ex-colleague of mine, working in a large IT operation in a major financial organization, told me of the disaster that ensued when their Chief Architect suddenly re- signed (destined for more lucrative pastures). The architect was by all ac- counts a remarkably talented designer and engineer, and in many cases was absolutely fundamental in getting projects operational within dead- lines.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">By the time the architect unexpectedly resigned, much of the knowledge about how and why the organizations’ systems integrated resided only in his head. As all the IT projects operated in a high pressure environment, there had been little time to capture, document and disseminate the design decisions and knowledge that had shaped the organization’s complex IT environment. Delivering functionality to clients was what mattered, and</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">design rational capture had a low priority. When he resigned, this knowl- edge went with him, leaving the organization in disarray. In fact, six months later, projects are still being delivered consistently late and over- budget, while the reconstruction of this design information gradually takes place. It’s is not a happy place to work, I hear.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">There’s nothing new in this “Super Hero” syndrome. But when so much of the critical information behind the design and integration of core busi- ness systems lives only in a single person’s head, albeit a super person’s head, this is a disaster waiting to happen. It’s amazing that this situation prevails so commonly in IT departments around the globe.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">It’s easy to take an “ivory tower” position on this problem. If organiza- tions estimated and budgeted better, then time and costs would be allo- cated to capturing key design decisions in documents and repositories that can be revisited and reused. But reality is different, and ever-increasing business pressures and shrinking IT budgets are simply not going to allow this to happen.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">So a breakthrough in this problem area requires the confluence of two solutions. First, we need to understand how to capture, organize and reuse architecture design knowledge. This is more than documenting architecture designs in the UML or some equivalent notations. It requires the rationales for design decisions to be recorded, so that the fundamental reasons behind a decision can be understood. As systems evolve, this information can be digested by engineers other than the ones who made the original decisions. It makes it possible to understand the design alternatives considered and the ultimate trade-offs that were made.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">Second, and just as important, we need to create ways in which we can capture this architecture design knowledge as a by-product of the architec- ture design process itself. Requiring additional steps in the design process to document decisions plainly doesn’t work in tightly budgeted projects in high pressure IT environments. We need design tools that make this in- formation capture process an integral part of the design itself. Then we’ll have a solution that will work in practice.</p><p style="padding-left: 14pt;text-indent: 10pt;text-align: justify;">I don’t know of any serious solutions to these problems that are emerg- ing, but there are definitely some promising approaches.<span class="s14">62 </span>When we know how to efficiently capture and exploit our architecture design knowledge, project risks and costs are likely to be greatly reduced.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_301.png"/></span></p><p class="s7" style="padding-top: 4pt;padding-left: 25pt;text-indent: -10pt;text-align: justify;"><span class="s14">62 </span>We’ve been trialing this approach, with promising results, as described in this paper: T. Al-Naeem, I. Gorton, M. Ali Baba, F. Rahbi, B. Boualem , <i>A Quality- Driven Systematic Approach for Architecting Distributed Software Applica- tions</i>, International Conference on Software Engineering (ICSE) 2005, St Loius, USA, IEEE Computer Society</p><p class="s7" style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 236pt;text-indent: 0pt;text-align: left;">15.1 Challenges 273</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_302.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li style="padding-left: 49pt;text-indent: -33pt;text-align: left;"><p class="s12" style="display: inline;"><a name="a254">Adaptive Architectures</a></p></li></ol></li></ol></ol><p style="padding-top: 9pt;padding-left: 15pt;text-indent: 0pt;text-align: justify;">Once an application’s requirements, environment and constraints are fully understood, as a profession we’re pretty good at building software that works. We don’t always do it as cheaply or as quickly as estimated, but the plethora of business critical applications that we all use every day demon- strate what we’re capable of.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">In many cases, the occasions when software systems start to have prob- lems are when something unexpected changes in the environment. Perhaps the concurrent user load exceeds the estimates for peak loads, or a network link saturates or fails, or some data in a new format arrives that we hadn’t anticipated. These issues cause problems because most of the architectures we design are “static” in that they are not designed to handle many unex- pected occurrences. There are good reasons for this. It costs a lot more to build a system that can adapt to various changes in its environment. And it’s more difficult too, as predicting the unexpected is always a tricky busi- ness!</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">The solution to building robust applications that adapt to their environ- ment is to utilize “adaptive” architectures. It’s simply too difficult and ex- pensive to build custom adaptive logic into every application. Just like ex- isting middleware embodies design patterns that help us solve complex problems, we need a new generation of middleware that provides the core mechanisms for creating adaptive software systems. Adaptive middleware will contain components that monitor their environment (e.g. CPU usage, network capacity, and platform and application resource usage) and pro- vide communications and management mechanisms to respond to changes. It’ll also supply a programming framework so designers can plug in their own components to respond to changes that they wish to intercept.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">To their great credit, IBM is helping drive the R&amp;D agenda in this area through their autonomic systems initiative.<span class="s14">63 </span>Microsoft’s Dynamic Systems Initiative<span class="s14">64 </span>is similar in nature. Both are focusing on technologies for self- managing systems, to significantly reduce the ever-growing administrative burden associated with large enterprise applications.</p><p style="padding-left: 15pt;text-indent: 10pt;text-align: justify;">Adaptive middleware technologies are a key part of this autonomic vi- sion. Current R&amp;D efforts are still investigating and trialing possible ap- proaches, but the strong business imperatives for such technologies will dictate their emergence in the not-too-distant future. Still, this is a chal- lenging area of R&amp;D and technology, and all the problems will not be</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="181" height="1" alt="image" src="Image_303.png"/></span></p><p style="padding-top: 4pt;padding-left: 23pt;text-indent: -8pt;text-align: left;"><a href="http://www-03.ibm.com/autonomic/" style=" color: black; font-family:&quot;Times New Roman&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 3pt;" target="_blank">63 </a><a href="http://www.research.ibm.com/autonomic/" class="a" target="_blank">http://www-03.ibm.com/autonomic/ </a><a href="http://www.research.ibm.com/autonomic/" target="_blank">http://www.research.ibm.com/autonomic/</a></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: justify;"><a href="http://www.microsoft.com/windowsserversystem/dsi/default.mspx" style=" color: black; font-family:&quot;Times New Roman&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 3pt;" target="_blank">64 </a><a href="http://www.microsoft.com/windowsserversystem/dsi/default.mspx" target="_blank">http://www.microsoft.com/windowsserversystem/dsi/default.mspx</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: justify;">solved in my lifetime. But even incremental advances in middleware tech- nologies should make it possible for us to start building dynamic architec- tures that can support levels of robustness and performance that we can’t cost-effectively achieve today.</p><p style="padding-left: 25pt;text-indent: 0pt;text-align: left;">It all promises to be a fascinating future.</p><h1 style="padding-top: 3pt;padding-left: 15pt;text-indent: 0pt;text-align: left;"><a name="a255">Glossary</a></h1><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">ACID The ACID properties of transactions, namely atomic, con- sistent, isolated and durable.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">ADL Architecture Description Languages are a body of research comprising graphical and textual languages for formally or semi-formally describing software architectures.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">AOP Aspect-Oriented Programming, as supported by program- ming languages such as AspectJ.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">AOSD Aspect-Oriented Software Development comprises AOP as well as analysis and design methods to support AOP.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">API An Application Programming Interface is a programmatic interface to a technology such as a component, database, middleware or communications system.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">ATAM The Architecture Tradeoff and Analysis Method is an ap- proach to architecture evaluation devised at the SEI.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">BMP Bean-Managed Persistence entity beans are managed by a container, but contain programmer-supplied code to access an associated persistent store such as a database.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">BPO Business Process Orchestration is used to manage long- running business processes or workflows that typically span multiple back-end systems.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">CCB A Change Control Board is an organizational mechanism used to control changes to a software product line.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">CCM The CORBA Component Model is an Object Management Group standard for components in a CORBA environment. At the time of writing, it has not been widely implemented.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">CI A Configuration Identification is a name used to identify a specific configuration (version) in a software product line.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">CIM In MDA, the Computation Independent Model captures the business model of the system. It is typically developed by a business analyst.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">CMP Container-Managed Persistence entity beans are managed by a container, and use information in the bean’s deploy- ment descriptor to generate the code needed to access an as- sociated database. A technology known as an Object-</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 76pt;text-indent: 0pt;text-align: left;">Relational Mapper (ORM) is used to implement CMP.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">CORBA A standard for multi-language distributed object systems that is widely supported by multiple vendors.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">COTS Commercial-Off-The-Shelf components can be any part of a system that is acquired rather than built. The term is typi- cally used rather loosely, ranging from simple components such as widgets in a GUI, to complex technologies like Oracle.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">CTW Compile-Time Weaving is used in AOP to weave aspects in to the application’s code at compile-time.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">EAI Enterprise Application Integration is a name for a set of technologies and methods for integrating the existing stand- alone applications that an enterprise has built and/or pur- chased.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">EJB The Enterprise JavaBean component model is part of the J2EE platform. EJBs are server-side components for im- plementing business logic and accessing databases.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">ERP Enterprise Resource Planning systems are packaged appli- cations like SAP and PeopleSoft. Enterprises purchase and tailor them to implement their core business processes.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">IDL Interface Description Languages are used in technologies like CORBA to define the programmatic interface that a component or object supports.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">J2EE The Java 2 Enterprise Edition is a Java platform for server application development in an N-tiered environment.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">JDBC Java Database Connectivity is a Java API for accessing data stores, usually relational databases.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">JMS The Java Messaging Service is a part of the J2EE platform that defines the API for Java-based messaging and publish- subscribe.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">JSP Java Server Pages are part of the J2EE platform aimed at handling Web interactions.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">LOD A Line of Development is an identifiable component of a product line that evolves independently.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">LTW Load-Time Weaving in AOP is when aspects are weaved in to an application as the application is loaded.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">MDA Model-Driven Architecture is an approach to building ap- plications from high-level models. The models are input in to code generators that produce the final application code. MDA is an Object Management Group initiative and Trademark.</p><p style="padding-left: 14pt;text-indent: 0pt;text-align: left;">MOF The Meta-Object Facility is a meta-modeling language that</p><p class="s7" style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 265pt;text-indent: 0pt;text-align: left;">Glossary 277</p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="420" height="1" alt="image" src="Image_304.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 76pt;text-indent: 0pt;text-align: justify;">must be used to describe the models used in MDA. The MOF can be used to define the elements of any modeling language.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">MOM Message-Oriented Middleware provides queue-based, asyn- chronous communication channels between two applica- tions.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">NFR Non-Functional Requirements are the constraints (such as cost/schedule) and quality attributes (such as reliability and scalability) that a design for a system should satisfy.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">OWL The Web Ontology Language is a markup language for pub- lishing and sharing data using ontologies. It is a key part of the Semantic Web technologies.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">OWL-S OWL-S is an OWL-based ontology for Web services. It supplies Web service providers with a markup language for describing the properties and capabilities of their Web ser- vices in a dynamically interpretable form.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">PIM In MDA, the Platform Independent Model is a model of an application’s functionality.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">PKI Public Key Infrastructure is a security technology that can be used to verify and authenticate the validity of each party involved in a distributed interaction.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">PLA A Product Line Architecture is an approach for designing families of software systems that exploits large-scale reuse of design and development artifacts.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">PSM In MDA, the Platform Specific Model captures the imple- mentation of an application’s PIM for a specific technology platform.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">RDF The Resource Description Framework is a framework for describing and interchanging metadata.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">RTW Run-Time Weaving in AOP allows the definition of aspects to be weaved dynamically as an application executes.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">RUP The Rational Unified Process is an adaptable software proc- ess framework for iterative software development.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">SCM Software Configuration Management is the discipline of managing and evolving different versions of software appli- cations.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">SEI The Software Engineering Institute in based at Carnegie- Mellon University in Pittsburgh. The SEI’s Architecture group has been fundamental to the progress of thinking in the software architecture discipline.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">SOA A Service Oriented Architecture is an approach to building software systems from independent applications that com-</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 76pt;text-indent: 0pt;text-align: left;">municate only by accessing the business-level services that each application provides.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">SOAP SOAP (not an acronym) is an XML-based messaging proto- col used in Web services. A SOAP message comprises three parts, namely (1) an envelope describing what is in a mes- sage and how to process it, (2) a set of encoding rules for expressing instances of application-defined datatypes, and</p><p style="padding-left: 76pt;text-indent: 0pt;text-align: left;">(3) a convention for representing remote procedure calls and responses.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">UDDI Universal Description, Discovery and Integration is an XML-based standard for a Web services distributed direc- tory (registry) for businesses to advertise their services and discover services of interest.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">UML The Unified Modeling Language is the Object Management Group standard for modeling software systems. The UML</p><p style="padding-left: 76pt;text-indent: 0pt;text-align: left;">2.0 is the latest version and is a significant upgrade over versions 1.x.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">WS-* A set of Web services standard definition including WS- Addressing, WS-Eventing, WS-Security and several others.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">WSDL The Web Services Description Language (WSDL) is an XML-based standard for describing a Web service. WSDL describes how to access a service and where a service is lo- cated.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">XMI The XML Metadata Interchange is used for interchange of metadata between UML modeling tools and between tools and MOF-based metadata repositories.</p><p style="padding-left: 76pt;text-indent: -61pt;text-align: justify;">XML The Extensible Markup Language is a general-purpose markup language for describing different kinds of structured data. One of its main uses is to facilitate the sharing of data between different business applications.</p><h1 style="padding-top: 3pt;padding-left: 15pt;text-indent: 0pt;text-align: left;"><a name="a256">Index</a></h1><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">.NET, 60, 99, 187, 190, 205, 206,</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">223</p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;">A</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">abstraction, 2, 7, 127, 257, 258, 263</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">ACID transactions, 80, 232</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">adapters, 54</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">address space, 5</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">agent kernel, 258</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">agent migration, 266</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">agent technologies, 254, 267</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">agility, 151</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">Aglets, 264, 266</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">AndroMDA, 205, 213</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">annotations, 190</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">anthropomorphism, 257 AOP. <i>See </i>aspect-oriented</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;line-height: 10pt;text-align: left;">programming</p><p class="s7" style="padding-left: 24pt;text-indent: -9pt;line-height: 106%;text-align: left;">application programming interface, 20</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;line-height: 10pt;text-align: left;">application server, 43, 59, 61</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">architect role, 10, 38</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;line-height: 106%;text-align: left;">architectural patterns, 11 architecturally significant use cases.</p><p class="s6" style="padding-left: 15pt;text-indent: 9pt;text-align: left;">See <span class="s7">scenarios architecture</span></p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">documentation, 115</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">requirements, 21</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">validation, 108</p><p class="s7" style="padding-left: 24pt;text-indent: -9pt;text-align: left;">architecture description language, 9, 208</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">architecture design, 95</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">architecture framework, 97, 106,</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">108</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">architecture patterns, 5, 14, 75, 96</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">architecture process, 91, 92, 108</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">architecture requirements, 5, 92</p><p class="s7" style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">architecture views, 2, 8, 9, 96, 116</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">4+1 View Model, 8</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">ArcStyler, 206</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">artificial intelligence, 250, 254, 267</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">AspectJ, 182, 186, 188, 189</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">aspect-oriented design, 186</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">aspect-oriented programming, 176,</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">179</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">advice, 183</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">introduction, 183</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">join port, 182</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">pointcut, 183</p><p class="s7" style="padding-left: 24pt;text-indent: -9pt;text-align: left;">aspect-oriented software development, 186</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">aspects, 180, 183</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">composition rules, 182</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">container, 189</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">join point, 188, 189</p><p class="s6" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">AspectWerkz<span class="s7">, 189, 190</span></p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">ATAM, 109, 114</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">availability, 34, 94, 98, 100, 102,</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">103, 105, 110, 111</p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;">B</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">behavioral view, 10</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;line-height: 106%;text-align: left;">Belief Desire Intention, 258 binding time, 162, 163, 177</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;line-height: 10pt;text-align: left;">BizTalk, 76, 82, 94</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">ports, 82</p><p class="s7" style="padding-left: 24pt;text-indent: -9pt;line-height: 106%;text-align: left;">BPO. <i>See </i>business process orchestration</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;line-height: 10pt;text-align: left;">broadcast, 56</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">business objectives, 20</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">business process orchestration, 43 business process orchestrator, 81 business processes, 79, 83, 105, 218</p><p style="padding-left: 26pt;text-indent: 0pt;line-height: 11pt;text-align: left;">C</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">caching, 71</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">canonical data model, 85 canonical message format, 86 capacity planning, 147, 197 Change Control Boards, 172 client-server, 5</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">clustering, 103</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">COBOL, 257</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">cohesion, 106, 115</p><p class="s7" style="padding-left: 24pt;text-indent: -9pt;text-align: left;">Common Warehouse Metamodel, 200</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;line-height: 106%;text-align: left;">complexity, 149, 172, 222 component</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;line-height: 10pt;text-align: left;">black box, 7</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">communication, 5</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">composite, 107</p><p class="s7" style="padding-left: 14pt;text-indent: 9pt;text-align: left;">decomposition, 107 Computation Independent Model,</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">200</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">concurrent systems, 264</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">connection pooling, 71 constraints</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">business, 6</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">technical, 6</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">container, 60, 61, 63, 64, 67, 70, 71</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">CORBA, 9, 44, 47, 54, 60, 162, 187,</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">220, 225, 233, 257</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">COTS, 11, 12, 15, 19, 21, 32, 49,</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">90, 95</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">Cougaar, 269</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">coupling, 74, 99, 104, 115, 181, 186</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">crosscutting concerns, 180, 181,</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">186, 189</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">dynamic, 182</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">static, 182</p><p style="padding-left: 25pt;text-indent: 0pt;text-align: left;">D</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">data integration, 36</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">DCOM, 220</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">deadlines, 26</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">dependency, 4, 223</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">deployment descriptor, 68, 70 distributed object technology, 44 Domain Specific Language, 205 DSL. <i>See </i>Domain Specific</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">Language</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">dynamic composition, 150</p><p style="padding-top: 5pt;padding-left: 25pt;text-indent: 0pt;text-align: left;">E</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">Eclipse, 206</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">EDI, 220</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">EJB, 60, 61, 64, 70, 90, 188</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">deployment descriptor, 69</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">encapsulation, 180</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">enterprise data model, 85, 86</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">enterprise integration, 72 Enterprise Semantic Web, 250 entity bean, 62, 64, 66, 67, 69, 70,</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;line-height: 10pt;text-align: left;">71</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">bean managed persistence, 63 container managed persistence, 63 container managed persistence’,</p><p class="s7" style="padding-left: 89pt;text-indent: 0pt;line-height: 10pt;text-align: center;">67</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">event notification, 131</p><p style="padding-left: 25pt;text-indent: 0pt;text-align: left;">F</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">FIPA, 267</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">firewalls, 223</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">functional requirements, 6, 91</p><p style="padding-left: 25pt;text-indent: 0pt;text-align: left;">G</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">goal-driven behavior, 263</p><p style="padding-left: 25pt;text-indent: 0pt;text-align: left;">H</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">heterogeneity, 151, 152</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">hierarchical decomposition, 7</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">HTTP, 228, 232</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">hub-and-spoke, 102</p><p style="padding-left: 25pt;text-indent: 0pt;text-align: left;">I</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">IEEE 1471-2000, 127</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">impact analysis, 32</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">integration, 35</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">interface description language, 44 Internet Reasoning Service, 249 interoperability, 219, 225</p><p style="padding-left: 25pt;text-indent: 0pt;text-align: left;">J</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">J2EE, 60, 61, 71, 99, 138, 187, 188,</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">190, 200, 205, 206, 218, 219, 220,</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">225</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">JACK, 258</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">agent, 258, 260</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">capability, 259</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">database, 259</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">event, 259</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">knowledge bases, 259</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">logical expression, 262</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-top: 5pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">logical members, 259</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">meta-level reasoning, 262</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">plan, 259, 261, 263</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">JACK Agent Language, 258 Java</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">threads, 70</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">Java Management eXtension, 193 Java Messaging Service, 139 JBoss AOP, 188, 189, 190</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">JDBC, 64, 138, 156</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">JNDI, 143</p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;">K</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">Kerberos, 236</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">KQML, 264</p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;">L</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">latency, 25</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">legacy applications, 233</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">load-balancing, 28</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">logic programming, 259</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">loose coupling, 55, 250</p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;">M</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">marketecture, 6</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">message broker, 43, 72, 78, 81, 84</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">message transformation, 43, 75, 76,</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">102</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">messaging, 54, 78, 99, 108, 218</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">best effort, 49</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">persistent, 49</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">transactional, 50</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">metadata, 242</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">Meta-Object Facility. <i>See </i>MOF middleware, 9, 41, 42, 44, 46, 187,</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">188, 194, 218, 219, 221, 232</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">mobile agents, 266</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">Model Driven Architecture, 188 model-driven development, 118,</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">127, 176, 215</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">modifiability, 32, 39, 83, 84, 85, 98,</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">100, 102, 103, 105, 110, 151, 208,</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">210</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">modularity, 180</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">MOF, 200, 201, 203, 206, 208</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">MOM, 46, 47, 49, 50, 52, 53, 54, 55,</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">72</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">clustering, 52</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">multicast, 56, 57, 102</p><p class="s7" style="padding-top: 5pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">multi-threaded, 43, 77</p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;">N</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">non-functional requirements, 6, 7,</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">23, 32, 39, 92, 208, 224</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">N-tier architecture, 59</p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;">O</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">object-oriented design, 7</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">ontologies, 240, 241, 244</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">ontology, 244, 245, 249 open source J2EE, 146</p><p class="s7" style="padding-left: 24pt;text-indent: -9pt;line-height: 106%;text-align: left;">OWL, 247, <i>See </i>Web Ontology Language</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;line-height: 10pt;text-align: left;">OWL-S, 249, 251</p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;">P</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">page-by-page iterator, 144</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">performance, 24, 26, 45, 49, 50, 53,</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">56, 57, 64, 71, 72, 78, 94, 98, 105,</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">110, 112, 113, 115, 137, 158, 185,</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">194, 202, 208, 210, 222</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">bottleneck, 85</p><p class="s7" style="padding-left: 15pt;text-indent: 9pt;text-align: justify;">monitoring, 179 pipe and filter, 100 platform, 223</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">Platform Independent Model, 200 Platform Specific Model, 200 point-to-point architecture, 84</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;line-height: 10pt;text-align: left;">portability, 37, 203, 212</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">Process Coordinator pattern, 104 product line architecture, 155, 160</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">Green Field, 167</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">Ploughed Fields, 168</p><p class="s7" style="padding-left: 24pt;text-indent: -9pt;text-align: left;">Product Line Practice guidelines, 162</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">productivity, 159, 176</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">project lifecycle, 11</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">prototyping, 11, 109, 112, 113</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">proof-of-concept, 112</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">proof-of-technology, 112</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">publish-subscribe, 11, 55, 57, 102,</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">133, 138</p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;">Q</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">quality, 159, 172, 176, 180, 194, 214</p><p class="s7" style="padding-left: 24pt;text-indent: -9pt;line-height: 106%;text-align: left;">quality attribute requirements, 23, 31</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;line-height: 10pt;text-align: left;">quality attributes, 6, 12, 38, 109</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">quality goals, 7 quality of service, 49</p><p style="padding-left: 25pt;text-indent: 0pt;text-align: left;">R</p><p class="s7" style="padding-left: 24pt;text-indent: -9pt;text-align: left;">RDF. <i>See </i>Resource Description Framework</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">recoverability, 35</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">refactoring, 147, 169, 250</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">reliability, 15, 34, 93, 94, 111, 137 reliable message delivery, 49 request load, 28</p><p class="s7" style="padding-left: 24pt;text-indent: -9pt;text-align: left;">Resource Description Framework, 242</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">response time, 25, 28</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">Responsibility-driven design, 4, 14</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">return-on-investment, 152</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">reusability, 95, 204</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">reuse, 153, 155, 156, 161, 176</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">risk, 11, 169</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">robustness, 221</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">RosettaNet, 87</p><p style="padding-left: 25pt;text-indent: 0pt;text-align: left;">S</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">scalability, 3, 23, 24, 27, 29, 57, 85,</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">94, 98, 102, 103, 105, 110, 113,</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">158, 264</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">scale out, 28</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">scale up, 28</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">scale-out, 110</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">scalable, 100</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">scenarios, 9, 32, 38, 109, 111, 112,</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">147</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">security, 5, 33, 39, 94, 110, 158, 223</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">authentication, 33</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">authorization, 34</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">encryption, 33</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">non-repudiation, 33</p><p class="s7" style="padding-left: 24pt;text-indent: -9pt;text-align: left;">SEI. <i>See </i>Software Engineering Institute</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">semantic discovery, 240</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">Semantic Web, 151, 240, 241, 244,</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">246</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">semantics, 151, 239, 244</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">send-and-forget messaging, 48</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">separation of concerns, 67, 98, 181,</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">186, 187, 202, 208</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">service oriented architectures, 248</p><p class="s7" style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;text-align: left;">service-oriented architectures, 209,</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">218, 219, 221, 225, 251</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">session bean, 61, 62</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">stateful, 63</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">stateless, 62</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">SOAP, 162, 209, 218, 225, 226,</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">227, 229</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">sockets, 9, 56</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">software agents, 253, 258</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">active objects, 264</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">anthropomorphism, 257</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">autonomous, 254</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">goal-driven, 254</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">software architecture definition, 2 software configuration management,</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">163</p><p class="s7" style="padding-left: 14pt;text-indent: 9pt;text-align: left;">line of development, 163 Software Engineering Institute, 2,</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">13, 158</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">Software Factories, 178</p><p class="s7" style="padding-left: 24pt;text-indent: -9pt;text-align: left;">software product line development core assets, 158</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">custom assets, 158</p><p class="s7" style="padding-left: 24pt;text-indent: -9pt;text-align: left;">software product line development, 156, 157</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">core assets, 157, 158</p><p class="s7" style="padding-left: 14pt;text-indent: 9pt;text-align: left;">custom assets, 157, 158 software product lines, 204 spaghetti architecture, 84</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">SQL, 64, 67, 133, 135</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">structural constraints, 3</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">structural view, 10</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">styles. <i>See </i>architecture patterns subject. <i>See </i>topic supportability, 37</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;line-height: 10pt;text-align: left;">synchronization, 5</p><p style="padding-left: 25pt;text-indent: 0pt;text-align: left;">T</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">tangling, 181</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">TCP/IP, 56</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">testability, 37</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">threads, 5</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">thread-safe, 146</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">thread-safety, 146</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">three-tier architecture, 130</p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">throughput, 7, 25, 28, 57, 103</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">average, 25</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-top: 5pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">peak, 25</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">TIBCO, 56</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;line-height: 106%;text-align: left;">time to market, 176 TOP operator, 144</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;line-height: 10pt;text-align: left;">topic, 55, 56, 57, 58, 59</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">hierarchy, 59</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">wildcards, 58</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">transaction, 99</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">compensating, 80</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">long-running, 80</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">transaction demarcation, 51</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">transactions, 35, 188</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">isolation, 80</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">two-tier architecture, 130, 131</p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;">U</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">UDDI, 225, 230</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">UML, 19, 116, 117, 122, 127, 200,</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">201, 203, 205, 208, 210</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">class diagram, 120</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">component diagram, 19, 119, 141</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">component interfaces, 122</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">composite diagram, 124</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">deployment diagram, 121</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">parts, 124</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">ports, 123</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">profile, 188</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">provided interface, 123</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">required interface, 123</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">sequence diagram, 120</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">stereotypes, 120, 212</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">tagged values, 212</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">use case, 17</p><p style="padding-top: 5pt;padding-left: 26pt;text-indent: 0pt;text-align: left;">V</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">variation mechanisms, 156</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">variation point, 158, 164, 172, 173 Views and Beyond approach, 9</p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;">W</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">weaver, 182 weaving</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">compile-time, 184</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">load-time, 184</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">run-time, 184</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;line-height: 106%;text-align: left;">Web Ontology Language, 245 Web services, 151, 152, 209, 217,</p><p class="s7" style="padding-left: 24pt;text-indent: 0pt;line-height: 10pt;text-align: left;">218, 240</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">WebSphere, 230</p><p class="s7" style="padding-left: 24pt;text-indent: -9pt;line-height: 106%;text-align: left;">Worldwide Institute of Software Architects, 1</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;line-height: 10pt;text-align: left;">WS-* standards, 225</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">WS-Addressing, 229</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">WS-AtomicTransactions, 232</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">WS-BusinessActivity, 232</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">WSDL, 225, 228, 230</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">WS-Eventing, 229</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">WS-MetadataExchange, 230</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">WS-Policy, 230</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">WS-ReliableMessaging, 233</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">WS-Security, 226, 227, 232</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">WS-SecurityPolicy, 230</p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;">X</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">XMI, 200, 201, 203</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">XML, 76, 83</p><p class="s7" style="padding-left: 15pt;text-indent: 0pt;text-align: left;">XSLT, 210</p></body></html>
