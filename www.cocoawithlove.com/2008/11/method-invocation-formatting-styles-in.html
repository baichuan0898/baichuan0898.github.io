<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Method invocation formatting styles in Objective-C</title>
  <meta name="description" content="While most traits of Objective-C follow consistent styles, method invocation formatting &amp;mdash; arguably a defining characteristic of the language &amp;mdash; does not. In this post, I&#39;ll look at a handful of approaches that different programmers use to format their method invocations and discuss their advantages and disadvantages." />

  <meta name="twitter:title" content="Method invocation formatting styles in Objective-C"/>
  <meta name="twitter:image" content="https://www.cocoawithlove.com/assets/site/touch_heartandcup.png"/>
  <meta name="twitter:url" content="https://www.cocoawithlove.com/2008/11/method-invocation-formatting-styles-in.html"/>
  <meta name="twitter:card" content="summary"/>
  <meta name="twitter:description" content="While most traits of Objective-C follow consistent styles, method invocation formatting &amp;mdash; arguably a defining characteristic of the language &amp;mdash; does not. In this post, I&#39;ll look at a handful of approaches that different programmers use to format their method invocations and discuss their advantages and disadvantages."/>

  <link rel="icon" href="../../assets/site/heartandcup.png" />
  <link rel="apple-touch-icon" href="../../assets/site/touch_heartandcup.png" />
  <link rel="stylesheet" href="../../css/main.css" />
  <link rel="canonical" href="method-invocation-formatting-styles-in.html" />

  
</head>

<body>

<div class="hidetopextension"></div>
<header class="nav-header">
  <div class="wrapper">
  	<a href="../../index.html"><img class="heartandcup" src="../../assets/site/heartandcup.svg"></a>
  	<a class="top" href="#">top</a>
    <nav class="site-nav" onClick="if (this.className == 'site-nav') { this.className = 'site-nav-collapsed'; } else { this.className = 'site-nav'; }">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15" width="18px" height="15px">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        <a class="page-link" href="../../about/index.html">about</a>
        <a class="page-link" href="../../archive/index.html">archive</a>
        <a class="page-link" href="../../search/index.html">search</a>
        <a class="page-link" href="http://zqueue.com/">zqueue.com</a>
      </div>
    </nav>
  </div>
</header>

<div class="nav-header-baseline"></div>

<div class="wrapper"><div class="hidetop"></div></div>

<header class="site-header">
  <div class="wrapper">
    <a class="site-title" href="../../index.html">
      <img class="site-banner" alt="Matt Gallagher: Cocoa with Love" src="../../assets/site/banner.svg" width="720px" height="135px">
    </a>
  </div>
</header>

<div class="banner-baseline"></div>

<div class="page-content">
<div class="wrapper">


<blockquote class="notice"><strong>Please note:</strong> this article is part of the older "Objective-C era" on Cocoa with Love. I don't keep these articles up-to-date; please be wary of broken code or potentially out-of-date information. Read <a href="../../blog/2016/01/25/a-new-era-for-cocoa-with-love.html">"A new era for Cocoa with Love"</a> for more.</blockquote>

<header class="post-header">
	<h1 class="post-title" itemprop="headline">Method invocation formatting styles in Objective-C</h1>
	<div class="post-meta"><time itemprop="datePublished" datetime="2008-11-29">November 29, 2008</time> by Matt Gallagher</div>
	<div class="post-tags">Tags:
		
			<a href="../../categories/objective-c.html">Objective-C</a>
		 
	</div>
</header>

		
	<main role="main">
		<article itemscope itemtype="http://schema.org/BlogPosting">
  <div class="post-content" itemprop="articleBody">
			<span class="introduction"><p>While most traits of Objective-C follow consistent styles, method invocation formatting &mdash; arguably a defining characteristic of the language &mdash; does not. In this post, I'll look at a handful of approaches that different programmers use to format their method invocations and discuss their advantages and disadvantages.</p></span>

<span class="fullpost">
<h2>The problems with method invocations...</h2>

<p>How should you format a method invocation when it is too long to fit on the line? Judging from the multitude of conventions that different programmers use, there is no clear answer.</p>

<p>There is no ambiguity about how to write a short, simple method invocation:</p>

<div class="highlight"><pre class="chroma"><code class="language-objc" data-lang="objc"><span class="p">[</span><span class="n">myColor</span> <span class="n">set</span><span class="p">];</span></code></pre></div>

<p>But if a method is longer than the nominated screen width:</p>

<div class="highlight"><pre class="chroma"><code class="language-objc" data-lang="objc"><span class="n">NSColor</span> <span class="o">*</span><span class="n">myColor</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSColor</span> <span class="nl">colorWithCalibratedRed</span><span class="p">:</span><span class="mf">120.0</span><span class="o">/</span><span class="mf">255.0</span> <span class="nl">green</span><span class="p">:</span><span class="mf">120.0</span><span class="o">/</span><span class="mf">255.0</span> <span class="nl">blue</span><span class="p">:</span><span class="mf">120.0</span><span class="o">/</span><span class="mf">255.0</span> <span class="nl">alpha</span><span class="p">:</span><span class="mf">1.0</span><span class="p">];</span></code></pre></div>

<p>opinions begin to vary.</p>

<p>In addition to this consideration is how much should you inline? Cocoa strongly suggests that an allocation and initialization statement should always be a single line:</p>

<div class="highlight"><pre class="chroma"><code class="language-objc" data-lang="objc"><span class="kt">id</span> <span class="n">myObject</span> <span class="o">=</span> <span class="p">[[</span><span class="n">MyClass</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span></code></pre></div>

<p>but how far should you continue to inline before decomposing the statement into separate statements? i.e.</p>

<div class="highlight"><pre class="chroma"><code class="language-objc" data-lang="objc"><span class="c1">// Completely inline...
</span><span class="c1"></span><span class="n">NSColor</span> <span class="o">*</span><span class="n">deviceColor</span> <span class="o">=</span> <span class="p">[[[</span><span class="n">NSColorPicker</span> <span class="n">sharedColorPicker</span><span class="p">]</span> <span class="n">color</span><span class="p">]</span> <span class="nl">colorUsingColorSpaceName</span><span class="p">:</span><span class="n">NSDeviceRGBColorSpace</span><span class="p">];</span>

<span class="c1">// Decomposed...
</span><span class="c1"></span><span class="n">NSColor</span> <span class="o">*</span><span class="n">cur</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSColorPicker</span> <span class="n">sharedColorPicker</span><span class="p">]</span> <span class="n">color</span><span class="p">];</span>
<span class="n">NSColor</span> <span class="o">*</span><span class="n">devColor</span> <span class="o">=</span> <span class="p">[</span><span class="n">cur</span> <span class="nl">colorUsingColorSpaceName</span><span class="p">:</span><span class="n">NSDeviceRGBColorSpace</span><span class="p">];</span></code></pre></div>

<p>Here are a few different approaches...</p>

<h2>Style 1: Soft wrap and never decompose</h2>

<p>The simplest approach to formatting Objective-C method invocations is the "do nothing" approach. This involves:</p>

<ul><li>Make your text editor wrap lines with an indent if they are wider than the page</li>
<li>Never decompose statements if the sub-methods are only used once.</li></ul>

<p>Using this approach, the <code>deviceColor</code> creation might look like this:</p>

<div class="highlight"><pre class="chroma"><code class="language-objc" data-lang="objc"><span class="n">NSColor</span> <span class="o">*</span><span class="n">deviceColor</span> <span class="o">=</span> <span class="p">[[[</span><span class="n">NSColorPicker</span> <span class="n">sharedColorPicker</span><span class="p">]</span> <span class="n">color</span><span class="p">]</span>
    <span class="nl">colorUsingColorSpaceName</span><span class="p">:</span><span class="n">NSDeviceRGBColorSpace</span><span class="p">];</span></code></pre></div>

<p>This is the approach advocated by <a href="http://www.penny-arcade.com/comic/2007/07/02/">Penny Arcade</a> <a href="http://www.penny-arcade.com/comic/2008/11/26/">recurring character</a> Wil Shipley in his <a href="http://www.wilshipley.com/blog/2005/10/pimp-my-code-part-5-special-apple.html">Pimp My Code series</a>. It is also the approach that Apple have started using in some (but not all) of Xcode's project templates.</p>

<h3>Advantages</h3>
<p>You, as the typer of code, never have to do anything. No fussing, no reformatting. You also never have to declare a variable that you only need once; just inline everything.</p>

<p>For Apple, providing code in a template, this approach also has the advantage that if users prefer wrapped code, it is faster for Xcode users to reformat this unwrapped style into a wrapped style of their choice than it is to reformat already wrapped code into a different style.</p>

<h3>Disadvantages</h3>

<p>This approach can reduce clarity.</p>

<p>From <a href="http://www.wilshipley.com/blog/2005/10/pimp-my-code-part-5-special-apple.html">Pimp My Code Part 5: Special Apple Sample Code Edition...</a>:</p>

<div class="highlight"><pre class="chroma"><code class="language-objc" data-lang="objc">    <span class="k">return</span> <span class="p">[[</span><span class="n">NSSearchPathForDirectoriesInDomains</span><span class="p">(</span><span class="n">NSApplicationSupportDirectory</span><span class="p">,</span>
        <span class="n">NSUserDomainMask</span><span class="p">,</span> <span class="nb">YES</span><span class="p">)</span> <span class="nl">objectAtIndex</span><span class="p">:</span><span class="mi">0</span><span class="p">]</span> 
        <span class="nl">stringByAppendingPathComponent</span><span class="p">:[[</span><span class="n">NSProcessInfo</span> <span class="n">processInfo</span><span class="p">]</span>
        <span class="n">processName</span><span class="p">]];</span></code></pre></div>

<p>A statement like this is not for everyone. Personally, when I'm starting to lose focus on the code after a few hours at the keyboard, I can't read this well. The visual hierarchy of the statement doesn't follow the structure it contains. A missing or redundant element could be hiding anywhere.</p>

<p>There is also a lack of interoperability with this approach. To anyone reading your code in a non-wrapping editor, the code is significantly less legible. For this reason code is sometimes formatted in the same way but hard-wrapped at 80 characters.</p>

<h2>Style 2: Left align all parameters at the same level</h2>

<p>For the <code>myColor</code> creation statement that I showed earlier, left aligning all parameters would result in the following:</p>

<div class="highlight"><pre class="chroma"><code class="language-objc" data-lang="objc"><span class="n">NSColor</span> <span class="o">*</span><span class="n">myColor</span> <span class="o">=</span>
    <span class="p">[</span><span class="n">NSColor</span>
        <span class="nl">colorWithCalibratedRed</span><span class="p">:</span><span class="mf">120.0</span><span class="o">/</span><span class="mf">255.0</span>
        <span class="nl">green</span><span class="p">:</span><span class="mf">120.0</span><span class="o">/</span><span class="mf">255.0</span>
        <span class="nl">blue</span><span class="p">:</span><span class="mf">120.0</span><span class="o">/</span><span class="mf">255.0</span>
        <span class="nl">alpha</span><span class="p">:</span><span class="mf">1.0</span><span class="p">];</span></code></pre></div>

<h3>Advantages</h3>

<p>Visual structure follows statement structure resulting in high readability. Highly effective for methods with long parameter lists. This approach is also sympathetic to common C and C++ code formatting styles.</p>

<p>Minor variations on this style are excellent for formatting structured inline data. i.e.</p>

<div class="highlight"><pre class="chroma"><code class="language-objc" data-lang="objc"><span class="n">NSDictionary</span> <span class="o">*</span><span class="n">myDictionary</span> <span class="o">=</span>
    <span class="p">[</span><span class="n">NSDictionary</span> <span class="nl">dictionaryWithObjectsAndKeys</span><span class="p">:</span>
        <span class="p">[</span><span class="n">NSArray</span> <span class="nl">arrayWithObjects</span><span class="p">:</span>
            <span class="p">[</span><span class="n">NSDictionary</span> <span class="nl">dictionaryWithObjectsAndKeys</span><span class="p">:</span>
                <span class="s">@&#34;value1&#34;</span><span class="p">,</span> <span class="s">@&#34;key1&#34;</span><span class="p">,</span>
                <span class="s">@&#34;value2&#34;</span><span class="p">,</span> <span class="s">@&#34;key2&#34;</span><span class="p">,</span>
                <span class="s">@&#34;value3&#34;</span><span class="p">,</span> <span class="s">@&#34;key3&#34;</span><span class="p">,</span>
            <span class="nb">nil</span><span class="p">],</span>
        <span class="nb">nil</span><span class="p">],</span> <span class="s">@&#34;keyForArray&#34;</span><span class="p">,</span>
        <span class="s">@&#34;topLevelValue1&#34;</span><span class="p">,</span> <span class="s">@&#34;topLevelKey1&#34;</span><span class="p">,</span>
        <span class="s">@&#34;topLevelValue2&#34;</span><span class="p">,</span> <span class="s">@&#34;topLevelKey2&#34;</span><span class="p">,</span>
    <span class="nb">nil</span><span class="p">];</span></code></pre></div>


<h3>Disadvantages</h3>

<p>Relative to soft-wrap in your text editor, this approach has a high code formatting and maintenance cost. There's a lot of tabs, returns and whitespace to type, delete and move.</p>

<p>Dogmatically applying this style to complexly structured statements can result in poor results. For example, the Pimp My Code sample rigourously formatted in this way:</p>

<div class="highlight"><pre class="chroma"><code class="language-objc" data-lang="objc">    <span class="k">return</span>
        <span class="p">[[</span><span class="n">NSSearchPathForDirectoriesInDomains</span><span class="p">(</span>
                    <span class="n">NSApplicationSupportDirectory</span><span class="p">,</span>
                    <span class="n">NSUserDomainMask</span><span class="p">,</span>
                    <span class="nb">YES</span><span class="p">)</span>
                <span class="nl">objectAtIndex</span><span class="p">:</span><span class="mi">0</span><span class="p">]</span> 
            <span class="nl">stringByAppendingPathComponent</span><span class="p">:</span>
                <span class="p">[[</span><span class="n">NSProcessInfo</span> <span class="n">processInfo</span><span class="p">]</span>
                    <span class="n">processName</span><span class="p">]];</span></code></pre></div>

<h2>Style 3: Some left align, some decompose</h2>

<p>A more balanced variation on the previous formatting, this approach makes the following changes:</p>

<ul><li>Decompose the self access/creation if it can't be performed on one line</li>
<li>Only begin wrapping a sub-statement if it can't fit on its line</li>
<li>Put the self component of the invocation on the same line as the assignment or return operator (optional)</li></ul>

<p>The sample taken from Pimp My Code would now become:</p>

<div class="highlight"><pre class="chroma"><code class="language-objc" data-lang="objc">    <span class="n">NSArray</span> <span class="o">*</span><span class="n">searchPath</span> <span class="o">=</span> <span class="n">NSSearchPathForDirectoriesInDomains</span><span class="p">(</span>
        <span class="n">NSApplicationSupportDirectory</span><span class="p">,</span>
        <span class="n">NSUserDomainMask</span><span class="p">,</span>
        <span class="nb">YES</span><span class="p">);</span>
    <span class="k">return</span> <span class="p">[[</span><span class="n">searchPath</span> <span class="nl">objectAtIndex</span><span class="p">:</span><span class="mi">0</span><span class="p">]</span>
        <span class="nl">stringByAppendingPathComponent</span><span class="p">:</span>
            <span class="p">[[</span><span class="n">NSProcessInfo</span> <span class="n">processInfo</span><span class="p">]</span> <span class="n">processName</span><span class="p">]];</span></code></pre></div>

<h3>Advantages</h3>

<p>Handles compound statements better than dogmatic alignment of every single parameter yet retains much of the structural clarity. Decomposing self access, rather than wrapping it, makes the "subject" of the statement more clear.</p>

<h3>Disadvantages</h3>

<p>Requires a few judgement calls to be made about when to decompose and when to begin wrapping a statement.</p>

<p>Can have the highest code-formatting maintenance requirements of the styles listed so far, since choosing to decompose or reintegrate elements is time-consuming.</p>

<h2>Style 4: Column alignment</h2>

<p>This relates to various method invocation formatting styles which attempt to align columns of wrapped data within their lines, including alignment on the colon character:</p>

<div class="highlight"><pre class="chroma"><code class="language-objc" data-lang="objc">      <span class="p">[</span><span class="n">object</span> <span class="nl">methodWithParam</span><span class="p">:</span><span class="n">theParam</span>
                      <span class="nl">another</span><span class="p">:</span><span class="n">theOtherValue</span>
                    <span class="nl">something</span><span class="p">:</span><span class="n">theSomethingValue</span>
                         <span class="k">else</span><span class="o">:</span><span class="n">theElseValue</span><span class="p">];</span></code></pre></div>

<p>From my perspective, I don't see people write this type of invocation much anymore, so it seems to me like an "old way of doing things". However the support is in Xcode to help you with this (Preferences->Indentation->Syntax Aware Indenting->":").</p>

<p>I've also seen the following style used:</p>

<div class="highlight"><pre class="chroma"><code class="language-objc" data-lang="objc">    <span class="p">[</span><span class="n">someObject</span>       <span class="nl">instanceMethod</span><span class="p">:</span>   <span class="n">parameter</span><span class="p">];</span>
    <span class="p">[</span><span class="n">differentObject</span>  <span class="nl">otherMethod</span><span class="p">:</span>      <span class="n">anotherParameter</span><span class="p">];</span></code></pre></div>

<p>which is an attempt to tab-align every single component on the line.</p>

<h3>Advantages</h3>

<p>If you are strongly particular about alignment, then maybe this is for you.</p>

<h3>Disadvantages</h3>

<p>It is doubtful that the end-result in these cases justifies the effort to generate and maintain them. There is text editor support for some of these alignments but it still requires maintenance.</p>

<p>These approaches are also incompatible with any sub-statements that need to be wrapped and so require near-complete decomposition.</p> 

<h2>Conclusion</h2>

<p>If you look at my code, I clearly use something approximating "Style 3", with ad hoc variations depending on how I'm feeling. After years of working in offices with strict coding standards, it seems odd that I don't maintain greater attention to detail but there it is.</p>

<p>There are certainly times when I've considered changing my style to soft-wrapped. Reformatting code because you're changing a line or you decide it's unwieldy is annoying (although I doubt that it actually consumes as much time as it seems).</p>

<p>Soft-wrapped code also appears to be the direction that Apple are heading and they tend to drag a lot of Mac programmers along in their wake.</p>

<p>At this time, I don't find wrapped code to be a pleasing enough aesthetic, so I continue to endure the burden of formatting.</p>

</span>
</div>
		</article>
	</main>

<div class="pagination">
  <div class="page-prev">
    Previous article:<br/><a href="automated-user-interface-testing-on.html">Automated user interface testing on the iPhone</a>
  </div>
  <div class="page-next">
    Next article:<br/><a href="../12/instance-variable-to-synthesized.html">Instance variable to synthesized property (an Xcode user script)</a>
  </div>
</div>


</div>
</div>

<footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Subscribe: <a href="../../feed.json">JSON</a>, <a href="../../feed.xml.rss">RSS</a> or <a href="https://apple.news/ToAaeVKb9TJOyYZi4sXnvXg">Apple News</a></li>
          <li>Twitter: <a href="https://twitter.com/cocoawithlove">@cocoawithlove</a></li>
          <li>Github: <a href="https://github.com/mattgallagher">mattgallagher</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <p>&copy; 2008-2017 Matt Gallagher. All rights reserved.<br/>Code may be used in accordance with license on <a href="../../about/index.html">About</a> page.<br/>If you need to contact me: <script type="text/javascript">
e1=('cocoa' + 'with' + 'love' + '&#46' + 'com')
e2=('info' + '&#64')
document.write('<a href="mailto:' + e2 + e1 + '">' + e2 + e1 + '</a>')
</script></p>
      </div>
    </div>

  </div>

</footer>

</body>

</html>
